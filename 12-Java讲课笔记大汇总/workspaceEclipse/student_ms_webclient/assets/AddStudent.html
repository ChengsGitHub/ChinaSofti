<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!-- 网页出现的电话号码不能直接播出 -->
<meta name="format-detection" content="telephone=no" />
<!-- 宽度1:1拉伸，防止高分辨率屏幕显示网页太小 -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>jQuery Mobile Web 应用程序</title>
<link href="jquery-mobile/jquery.mobile-1.3.2.css" rel="stylesheet" type="text/css">
<link href="jquery-mobile/jquery.mobile.simpledialog.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery-mobile/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="jquery-mobile/jquery.mobile-1.3.2.js"></script>
<!--使用此插件必须使用jquery1.9之前的版本-->
<script type="text/javascript" src="jquery-mobile/jquery.mobile.simpledialog.js"></script>

<script type="text/javascript">
	$(document).ready(function(e) {
		        
		//当提交按钮被单击时
		$('#submitBtn').click(function(){
			
			var stuCode = $('#stuCode').val();
			var stuName = $('#stuName').val();
			var stuPhone =$('#stuPhone').val();
			
			//表单验证
			var r = /^\d{1,6}$/;
			
			if (!r.test(stuCode)) {
				$(this).simpledialog({
	                    'mode': 'bool',
	                    'prompt': '学号不合法',
	                    'useModal': true,
	                    'buttons': {
	                        '确定 ': {
	                            click: function() {
	                              
	                            }
	                        }
	                    }
	                });
				
				return;
			}
				
			//拼接为json字符串
			var jsonStr = '{';
			jsonStr += '"stuCode":' + stuCode;
			jsonStr += ',"stuName":"' + stuName + '"';
			jsonStr += ',"stuPhone":"' + stuPhone + '"';
			jsonStr += '}';
						
			//调用原生add方法
			stu.add(jsonStr);
			
			//返回上一页
			history.back();
		});
		
    });
</script>


</head> 
<body> 

<div data-role="page" id="addPage">
	<div data-role="header" data-theme="b" data-position="fixed">
    	<a id="backBtn" href="#" data-rel="back" data-icon="arrow-l">返回</a>
		<h1>添加学生信息</h1>
	</div>
	<div data-role="content">	
		 <div data-role="fieldcontain">        	
            <label for="stuCode">学号</label>
            <input type="number" id="stuCode" name="stuCode">
            <label for="stuName">姓名</label>
            <input type="text" id="stuName" name="stuName">
            <label for="stuPhone">电话</label>
            <input type="tel" id="stuPhone" name="stuPhone"> 
            <input type="button" id="submitBtn" data-role="button" data-theme="b" value="提交">            
        </div>
	</div>
	
</div>

</body>
</html>