<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="zh-cn"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;</h1></div><div><h2 class="subtitle">Hibernate&#21442;&#32771;&#25991;&#26723;</h2></div><div><p class="releaseinfo">3.1.2</p></div></div><div></div><hr></div><div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="preface"><a href="#preface">&#21069;&#35328;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#preface-translate-comments-zh-cn">1. &#32763;&#35793;&#35828;&#26126;</a></span></dt><dt><span class="sect1"><a href="#preface-translate-licence-zh-cn">2. &#29256;&#26435;&#22768;&#26126;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial">1. 
		Hibernate&#20837;&#38376;
	</a></span></dt><dd><dl><dt><span class="sect1"><a href="#tutorial-intro">1.1. 
		&#21069;&#35328;
	</a></span></dt><dt><span class="sect1"><a href="#tutorial-firstapp">1.2. 
	&#31532;&#19968;&#37096;&#20998; &#65293; &#31532;&#19968;&#20010;Hibernate&#24212;&#29992;&#31243;&#24207;
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tutorial-firstapp-firstclass">1.2.1. 
	&#31532;&#19968;&#20010;class
           </a></span></dt><dt><span class="sect2"><a href="#tutorial-firstapp-mapping">1.2.2. 
	&#26144;&#23556;&#25991;&#20214;
	</a></span></dt><dt><span class="sect2"><a href="#tutorial-firstapp-configuration">1.2.3. 
	Hibernate&#37197;&#32622;
		</a></span></dt><dt><span class="sect2"><a href="#tutorial-firstapp-ant">1.2.4. 
	&#29992;Ant&#26500;&#24314;
            </a></span></dt><dt><span class="sect2"><a href="#tutorial-firstapp-helpers">1.2.5. 
	&#21551;&#21160;&#21644;&#36741;&#21161;&#31867;
		</a></span></dt><dt><span class="sect2"><a href="#tutorial-firstapp-workingpersistence">1.2.6. 
	&#21152;&#36733;&#24182;&#23384;&#20648;&#23545;&#35937;
		</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tutorial-associations">1.3. 
	&#31532;&#20108;&#37096;&#20998; &#65293; &#20851;&#32852;&#26144;&#23556;
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tutorial-associations-mappinguser">1.3.1. 
	&#26144;&#23556;Person&#31867;
		</a></span></dt><dt><span class="sect2"><a href="#tutorial-associations-unidirset">1.3.2. 
	&#21333;&#21521;Set-based&#30340;&#20851;&#32852;
		</a></span></dt><dt><span class="sect2"><a href="#tutorial-associations-working">1.3.3. 
	&#20351;&#20851;&#32852;&#24037;&#20316;
	</a></span></dt><dt><span class="sect2"><a href="#tutorial-associations-valuecollections">1.3.4. 
	&#20540;&#31867;&#22411;&#30340;&#38598;&#21512;
	</a></span></dt><dt><span class="sect2"><a href="#tutorial-associations-bidirectional">1.3.5. 
	&#21452;&#21521;&#20851;&#32852;
	</a></span></dt><dt><span class="sect2"><a href="#tutorial-associations-usingbidir">1.3.6. 
	&#20351;&#21452;&#21521;&#36830;&#36215;&#26469;
	</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tutorial-webapp">1.4. &#31532;&#19977;&#37096;&#20998; - EventManager web&#24212;&#29992;&#31243;&#24207;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tutorial-webapp-servlet">1.4.1. &#32534;&#20889;&#22522;&#26412;&#30340;servlet</a></span></dt><dt><span class="sect2"><a href="#tutorial-webapp-processing">1.4.2. &#22788;&#29702;&#19982;&#28210;&#26579;</a></span></dt><dt><span class="sect2"><a href="#tutorial-webapp-deploy">1.4.3. &#37096;&#32626;&#19982;&#27979;&#35797;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tutorial-summary">1.5. 
  	         &#24635;&#32467;
  	         </a></span></dt></dl></dd><dt><span class="chapter"><a href="#architecture">2. &#20307;&#31995;&#32467;&#26500;(Architecture)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#architecture-overview">2.1. &#27010;&#20917;(Overview)</a></span></dt><dt><span class="sect1"><a href="#architecture-states">2.2. &#23454;&#20363;&#29366;&#24577;</a></span></dt><dt><span class="sect1"><a href="#architecture-jmx">2.3. JMX&#25972;&#21512;</a></span></dt><dt><span class="sect1"><a href="#architecture-jca">2.4. &#23545;JCA&#30340;&#25903;&#25345;</a></span></dt><dt><span class="sect1"><a href="#architecture-current-session">2.5. &#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session</a></span></dt></dl></dd><dt><span class="chapter"><a href="#session-configuration">3. 
        &#37197;&#32622;
    </a></span></dt><dd><dl><dt><span class="sect1"><a href="#configuration-programmatic">3.1. 
            &#21487;&#32534;&#31243;&#30340;&#37197;&#32622;&#26041;&#24335;
        </a></span></dt><dt><span class="sect1"><a href="#configuration-sessionfactory">3.2. 
            &#33719;&#24471;SessionFactory
        </a></span></dt><dt><span class="sect1"><a href="#configuration-hibernatejdbc">3.3. 
            JDBC&#36830;&#25509;
        </a></span></dt><dt><span class="sect1"><a href="#configuration-optional">3.4. 
            &#21487;&#36873;&#30340;&#37197;&#32622;&#23646;&#24615;
        </a></span></dt><dd><dl><dt><span class="sect2"><a href="#configuration-optional-dialects">3.4.1. 
                SQL&#26041;&#35328;
            </a></span></dt><dt><span class="sect2"><a href="#configuration-optional-outerjoin">3.4.2. 
                &#22806;&#36830;&#25509;&#25235;&#21462;(Outer Join Fetching)
            </a></span></dt><dt><span class="sect2"><a href="#configuration-optional-binarystreams">3.4.3. 
                &#20108;&#36827;&#21046;&#27969; (Binary Streams)
            </a></span></dt><dt><span class="sect2"><a href="#configuration-optional-cacheprovider">3.4.4. 
                &#20108;&#32423;&#32531;&#23384;&#19982;&#26597;&#35810;&#32531;&#23384;
            </a></span></dt><dt><span class="sect2"><a href="#configuration-optional-querysubstitution">3.4.5. 
                &#26597;&#35810;&#35821;&#35328;&#20013;&#30340;&#26367;&#25442;
            </a></span></dt><dt><span class="sect2"><a href="#configuration-optional-statistics">3.4.6. 
                Hibernate&#30340;&#32479;&#35745;(statistics)&#26426;&#21046;
            </a></span></dt></dl></dd><dt><span class="sect1"><a href="#configuration-logging">3.5. 
            &#26085;&#24535;
        </a></span></dt><dt><span class="sect1"><a href="#configuration-namingstrategy">3.6. 
            &#23454;&#29616;NamingStrategy
        </a></span></dt><dt><span class="sect1"><a href="#configuration-xmlconfig">3.7. 
            XML&#37197;&#32622;&#25991;&#20214;
        </a></span></dt><dt><span class="sect1"><a href="#configuration-j2ee">3.8. 
            J2EE&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;
        </a></span></dt><dd><dl><dt><span class="sect2"><a href="#configuration-optional-transactionstrategy">3.8.1. 
                &#20107;&#21153;&#31574;&#30053;&#37197;&#32622;
            </a></span></dt><dt><span class="sect2"><a href="#configuration-optional-jndi">3.8.2. 
                JNDI&#32465;&#23450;&#30340;SessionFactory
            </a></span></dt><dt><span class="sect2"><a href="#configuration-j2ee-currentsession">3.8.3. &#22312;JTA&#29615;&#22659;&#19979;&#20351;&#29992;Current Session context (&#24403;&#21069;session&#19978;&#19979;&#25991;)&#31649;&#29702;</a></span></dt><dt><span class="sect2"><a href="#configuration-j2ee-jmx">3.8.4. 
                JMX&#37096;&#32626;
            </a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#persistent-classes">4. &#25345;&#20037;&#21270;&#31867;(Persistent Classes)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#persistent-classes-pojo">4.1. &#19968;&#20010;&#31616;&#21333;&#30340;POJO&#20363;&#23376;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#persistent-classes-pojo-constructor">4.1.1. &#23454;&#29616;&#19968;&#20010;&#40664;&#35748;&#30340;&#65288;&#21363;&#26080;&#21442;&#25968;&#30340;&#65289;&#26500;&#36896;&#26041;&#27861;&#65288;constructor&#65289;</a></span></dt><dt><span class="sect2"><a href="#persistent-classes-pojo-identifier">4.1.2. &#25552;&#20379;&#19968;&#20010;&#26631;&#35782;&#23646;&#24615;&#65288;identifier property&#65289;&#65288;&#21487;&#36873;&#65289; </a></span></dt><dt><span class="sect2"><a href="#persistent-classes-pojo-final">4.1.3. &#20351;&#29992;&#38750;final&#30340;&#31867; (&#21487;&#36873;)</a></span></dt><dt><span class="sect2"><a href="#persistent-classes-pojo-accessors">4.1.4. &#20026;&#25345;&#20037;&#21270;&#23383;&#27573;&#22768;&#26126;&#35775;&#38382;&#22120;(accessors)&#21644;&#26159;&#21542;&#21487;&#21464;&#30340;&#26631;&#24535;(mutators)(&#21487;&#36873;)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#persistent-classes-inheritance">4.2. &#23454;&#29616;&#32487;&#25215;&#65288;Inheritance&#65289;</a></span></dt><dt><span class="sect1"><a href="#persistent-classes-equalshashcode">4.3. &#23454;&#29616;equals()&#21644;hashCode()</a></span></dt><dt><span class="sect1"><a href="#persistent-classes-dynamicmodels">4.4. &#21160;&#24577;&#27169;&#22411;(Dynamic models)</a></span></dt><dt><span class="sect1"><a href="#persistent-classes-tuplizers">4.5. &#20803;&#32452;&#29255;&#26029;&#26144;&#23556;(Tuplizers)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mapping">5. &#23545;&#35937;/&#20851;&#31995;&#25968;&#25454;&#24211;&#26144;&#23556;&#22522;&#30784;(Basic O/R Mapping)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mapping-declaration">5.1. &#26144;&#23556;&#23450;&#20041;&#65288;Mapping declaration&#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#mapping-declaration-doctype">5.1.1. Doctype</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-mapping">5.1.2. hibernate-mapping</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-class">5.1.3. class</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-id">5.1.4. id</a></span></dt><dd><dl><dt><span class="sect3"><a href="#mapping-declaration-id-generator">5.1.4.1. Generator</a></span></dt><dt><span class="sect3"><a href="#mapping-declaration-id-hilo">5.1.4.2. &#39640;/&#20302;&#20301;&#31639;&#27861;&#65288;Hi/Lo Algorithm&#65289;</a></span></dt><dt><span class="sect3"><a href="#mapping-declaration-id-uuid">5.1.4.3. UUID&#31639;&#27861;&#65288;UUID Algorithm &#65289;</a></span></dt><dt><span class="sect3"><a href="#mapping-declaration-id-sequences">5.1.4.4. &#26631;&#35782;&#23383;&#27573;&#21644;&#24207;&#21015;&#65288;Identity columns and Sequences&#65289;</a></span></dt><dt><span class="sect3"><a href="#mapping-declaration-id-assigned">5.1.4.5. &#31243;&#24207;&#20998;&#37197;&#30340;&#26631;&#35782;&#31526;&#65288;Assigned Identifiers&#65289;</a></span></dt><dt><span class="sect3"><a href="#mapping-declaration-id-select">5.1.4.6. &#35302;&#21457;&#22120;&#23454;&#29616;&#30340;&#20027;&#38190;&#29983;&#25104;&#22120;&#65288;Primary keys assigned by triggers&#65289;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#mapping-declaration-compositeid">5.1.5. composite-id</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-discriminator">5.1.6. &#37492;&#21035;&#22120;&#65288;discriminator&#65289;</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-version">5.1.7. &#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-timestamp">5.1.8. timestamp (&#21487;&#36873;)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-property">5.1.9. property</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-manytoone">5.1.10. &#22810;&#23545;&#19968;&#65288;many-to-one&#65289;</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-onetoone">5.1.11. &#19968;&#23545;&#19968;</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-naturalid">5.1.12. &#33258;&#28982;ID(natural-id)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-component">5.1.13. &#32452;&#20214;(component), &#21160;&#24577;&#32452;&#20214;(dynamic-component)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-properties">5.1.14. properties</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-subclass">5.1.15. &#23376;&#31867;(subclass)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-joinedsubclass">5.1.16. &#36830;&#25509;&#30340;&#23376;&#31867;(joined-subclass)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-unionsubclass">5.1.17. &#32852;&#21512;&#23376;&#31867;(union-subclass)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-join">5.1.18. &#36830;&#25509;(join)</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-key">5.1.19. &#38190;(key)</a></span></dt><dt><span class="sect2"><a href="#mapping-column">5.1.20. &#23383;&#27573;&#21644;&#35268;&#21017;&#20803;&#32032;&#65288;column and formula elements&#65289;</a></span></dt><dt><span class="sect2"><a href="#mapping-declaration-import">5.1.21. &#24341;&#29992;(import)</a></span></dt><dt><span class="sect2"><a href="#mapping-types-anymapping">5.1.22. any</a></span></dt></dl></dd><dt><span class="sect1"><a href="#mapping-types">5.2. Hibernate &#30340;&#31867;&#22411;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#mapping-types-entitiesvalues">5.2.1. &#23454;&#20307;(Entities)&#21644;&#20540;(values)</a></span></dt><dt><span class="sect2"><a href="#mapping-types-basictypes">5.2.2. &#22522;&#26412;&#20540;&#31867;&#22411;</a></span></dt><dt><span class="sect2"><a href="#mapping-types-custom">5.2.3. &#33258;&#23450;&#20041;&#20540;&#31867;&#22411;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#mapping-entityname">5.3. &#22810;&#27425;&#26144;&#23556;&#21516;&#19968;&#20010;&#31867;</a></span></dt><dt><span class="sect1"><a href="#mapping-quotedidentifiers">5.4. SQL&#20013;&#24341;&#21495;&#21253;&#22260;&#30340;&#26631;&#35782;&#31526;</a></span></dt><dt><span class="sect1"><a href="#mapping-alternatives">5.5. &#20854;&#20182;&#20803;&#25968;&#25454;(Metadata)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#mapping-xdoclet">5.5.1. &#20351;&#29992; XDoclet &#26631;&#35760;</a></span></dt><dt><span class="sect2"><a href="#mapping-annotations">5.5.2. &#20351;&#29992; JDK 5.0 &#30340;&#27880;&#35299;(Annotation)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#mapping-generated">5.6. &#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;</a></span></dt><dt><span class="sect1"><a href="#mapping-database-object">5.7. &#36741;&#21161;&#25968;&#25454;&#24211;&#23545;&#35937;(Auxiliary Database Objects)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#collections">6. &#38598;&#21512;&#31867;(Collections)&#26144;&#23556;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#collections-persistent">6.1. &#25345;&#20037;&#21270;&#38598;&#21512;&#31867;(Persistent collections)</a></span></dt><dt><span class="sect1"><a href="#collections-mapping">6.2. &#38598;&#21512;&#26144;&#23556;&#65288; Collection mappings &#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#collections-foreignkeys">6.2.1. &#38598;&#21512;&#22806;&#38190;(Collection foreign keys)</a></span></dt><dt><span class="sect2"><a href="#collections-elements">6.2.2. &#38598;&#21512;&#20803;&#32032;&#65288;Collection elements&#65289;</a></span></dt><dt><span class="sect2"><a href="#collections-indexed">6.2.3. &#32034;&#24341;&#38598;&#21512;&#31867;(Indexed collections)</a></span></dt><dt><span class="sect2"><a href="#collections-ofvalues">6.2.4. &#20540;&#38598;&#21512;&#20110;&#22810;&#23545;&#22810;&#20851;&#32852;(Collections of values and many-to-many associations)</a></span></dt><dt><span class="sect2"><a href="#collections-onetomany">6.2.5. &#19968;&#23545;&#22810;&#20851;&#32852;&#65288;One-to-many Associations&#65289;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#collections-advancedmappings">6.3. &#39640;&#32423;&#38598;&#21512;&#26144;&#23556;&#65288;Advanced collection mappings&#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#collections-sorted">6.3.1. &#26377;&#24207;&#38598;&#21512;&#65288;Sorted collections&#65289;</a></span></dt><dt><span class="sect2"><a href="#collections-bidirectional">6.3.2. &#21452;&#21521;&#20851;&#32852;&#65288;Bidirectional associations&#65289;</a></span></dt><dt><span class="sect2"><a href="#collections-indexedbidirectional">6.3.3. &#21452;&#21521;&#20851;&#32852;&#65292;&#28041;&#21450;&#26377;&#24207;&#38598;&#21512;&#31867;</a></span></dt><dt><span class="sect2"><a href="#collections-ternary">6.3.4. &#19977;&#37325;&#20851;&#32852;&#65288;Ternary associations&#65289;</a></span></dt><dt><span class="sect2"><a href="#collections-idbag">6.3.5. &#20351;&#29992;&lt;idbag&gt;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#collections-example">6.4. &#38598;&#21512;&#20363;&#23376;&#65288;Collection example&#65289;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#associations">7. &#20851;&#32852;&#20851;&#31995;&#26144;&#23556;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#assoc-intro">7.1. &#20171;&#32461;</a></span></dt><dt><span class="sect1"><a href="#assoc-unidirectional">7.2. &#21333;&#21521;&#20851;&#32852;&#65288;Unidirectional associations&#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#assoc-unidirectional-m21">7.2.1. &#22810;&#23545;&#19968;(many to one)</a></span></dt><dt><span class="sect2"><a href="#assoc-unidirectional-121">7.2.2. &#19968;&#23545;&#19968;&#65288;one to one&#65289;</a></span></dt><dt><span class="sect2"><a href="#assoc-unidirectional-12m">7.2.3. &#19968;&#23545;&#22810;&#65288;one to many&#65289;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#assoc-unidirectional-join">7.3. &#20351;&#29992;&#36830;&#25509;&#34920;&#30340;&#21333;&#21521;&#20851;&#32852;&#65288;Unidirectional associations with join tables&#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#assoc-unidirectional-join-12m">7.3.1. &#19968;&#23545;&#22810;(one to many)</a></span></dt><dt><span class="sect2"><a href="#assoc-unidirectional-join-m21">7.3.2. &#22810;&#23545;&#19968;&#65288;many to one&#65289;</a></span></dt><dt><span class="sect2"><a href="#assoc-unidirectional-join-121">7.3.3. &#19968;&#23545;&#19968;&#65288;one to one&#65289;</a></span></dt><dt><span class="sect2"><a href="#assoc-unidirectional-join-m2m">7.3.4. &#22810;&#23545;&#22810;&#65288;many to many&#65289;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#assoc-bidirectional">7.4. &#21452;&#21521;&#20851;&#32852;&#65288;Bidirectional associations&#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#assoc-bidirectional-m21">7.4.1. &#19968;&#23545;&#22810;&#65288;one to many) / &#22810;&#23545;&#19968;&#65288;many to one&#65289;</a></span></dt><dt><span class="sect2"><a href="#assoc-bidirectional-121">7.4.2. &#19968;&#23545;&#19968;&#65288;one to one&#65289;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#assoc-bidirectional-join">7.5. &#20351;&#29992;&#36830;&#25509;&#34920;&#30340;&#21452;&#21521;&#20851;&#32852;&#65288;Bidirectional associations with join tables&#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#assoc-bidirectional-join-12m">7.5.1. &#19968;&#23545;&#22810;&#65288;one to many&#65289; /&#22810;&#23545;&#19968;&#65288; many to one&#65289;</a></span></dt><dt><span class="sect2"><a href="#assoc-bidirectional-join-121">7.5.2. &#19968;&#23545;&#19968;&#65288;one to one&#65289;</a></span></dt><dt><span class="sect2"><a href="#assoc-bidirectional-join-m2m">7.5.3. &#22810;&#23545;&#22810;&#65288;many to many&#65289;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#assoc-complex">7.6. &#26356;&#22797;&#26434;&#30340;&#20851;&#32852;&#26144;&#23556;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#components">8. &#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#components-dependentobjects">8.1. &#20381;&#36182;&#23545;&#35937;&#65288;Dependent objects&#65289;</a></span></dt><dt><span class="sect1"><a href="#components-incollections">8.2. &#22312;&#38598;&#21512;&#20013;&#20986;&#29616;&#30340;&#20381;&#36182;&#23545;&#35937; (Collections of dependent objects)</a></span></dt><dt><span class="sect1"><a href="#components-asmapindex">8.3. &#32452;&#20214;&#20316;&#20026;Map&#30340;&#32034;&#24341;&#65288;Components as Map indices &#65289;</a></span></dt><dt><span class="sect1"><a href="#components-compositeid">8.4. &#32452;&#20214;&#20316;&#20026;&#32852;&#21512;&#26631;&#35782;&#31526;(Components as composite identifiers)</a></span></dt><dt><span class="sect1"><a href="#components-dynamic">8.5. &#21160;&#24577;&#32452;&#20214; &#65288;Dynamic components&#65289;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#inheritance">9. &#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#inheritance-strategies">9.1.  &#19977;&#31181;&#31574;&#30053;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#inheritance-tableperclass">9.1.1. &#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;(Table per class hierarchy)</a></span></dt><dt><span class="sect2"><a href="#inheritance-tablepersubclass">9.1.2. &#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(Table per subclass)</a></span></dt><dt><span class="sect2"><a href="#inheritance-tablepersubclass-discriminator">9.1.3. &#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(Table per subclass)&#65292;&#20351;&#29992;&#36776;&#21035;&#26631;&#24535;(Discriminator)</a></span></dt><dt><span class="sect2"><a href="#inheritance-mixing-tableperclass-tablepersubclass">9.1.4. &#28151;&#21512;&#20351;&#29992;&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;&#21644;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;</a></span></dt><dt><span class="sect2"><a href="#inheritance-tableperconcrete">9.1.5. &#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(Table per concrete class)</a></span></dt><dt><span class="sect2"><a href="#inheritance-tableperconcreate-polymorphism">9.1.6. Table per concrete class, using implicit polymorphism</a></span></dt><dt><span class="sect2"><a href="#inheritace-mixingpolymorphism">9.1.7. &#38544;&#24335;&#22810;&#24577;&#21644;&#20854;&#20182;&#32487;&#25215;&#26144;&#23556;&#28151;&#21512;&#20351;&#29992;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#inheritance-limitations">9.2. &#38480;&#21046;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#objectstate">10. &#19982;&#23545;&#35937;&#20849;&#20107;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#objectstate-overview">10.1. Hibernate&#23545;&#35937;&#29366;&#24577;(object states)</a></span></dt><dt><span class="sect1"><a href="#objectstate-makingpersistent">10.2. &#20351;&#23545;&#35937;&#25345;&#20037;&#21270;</a></span></dt><dt><span class="sect1"><a href="#objectstate-loading">10.3. &#35013;&#36733;&#23545;&#35937;</a></span></dt><dt><span class="sect1"><a href="#objectstate-querying">10.4. &#26597;&#35810;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#objectstate-querying-executing">10.4.1. &#25191;&#34892;&#26597;&#35810;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#objectstate-querying-executing-iterate">10.4.1.1. &#36845;&#20195;&#24335;&#33719;&#21462;&#32467;&#26524;(Iterating results)</a></span></dt><dt><span class="sect3"><a href="#objectstate-querying-executing-tuples">10.4.1.2. &#36820;&#22238;&#20803;&#32452;(tuples)&#30340;&#26597;&#35810;</a></span></dt><dt><span class="sect3"><a href="#objectstate-querying-executing-scalar">10.4.1.3. &#26631;&#37327;(Scalar)&#32467;&#26524;</a></span></dt><dt><span class="sect3"><a href="#objectstate-querying-executing-parameters">10.4.1.4. &#32465;&#23450;&#21442;&#25968;</a></span></dt><dt><span class="sect3"><a href="#objectstate-querying-executing-pagination">10.4.1.5. &#20998;&#39029;</a></span></dt><dt><span class="sect3"><a href="#objectstate-querying-executing-scrolling">10.4.1.6. &#21487;&#28378;&#21160;&#36941;&#21382;(Scrollable iteration)</a></span></dt><dt><span class="sect3"><a href="#objectstate-querying-executing-named">10.4.1.7. &#22806;&#32622;&#21629;&#21517;&#26597;&#35810;(Externalizing named queries)</a></span></dt></dl></dd><dt><span class="sect2"><a href="#objectstate-filtering">10.4.2. &#36807;&#28388;&#38598;&#21512;</a></span></dt><dt><span class="sect2"><a href="#objecstate-querying-criteria">10.4.3. &#26465;&#20214;&#26597;&#35810;(Criteria queries)</a></span></dt><dt><span class="sect2"><a href="#objectstate-querying-nativesql">10.4.4. &#20351;&#29992;&#21407;&#29983;SQL&#30340;&#26597;&#35810;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#objectstate-modifying">10.5. &#20462;&#25913;&#25345;&#20037;&#23545;&#35937;</a></span></dt><dt><span class="sect1"><a href="#objectstate-detached">10.6. &#20462;&#25913;&#33073;&#31649;(Detached)&#23545;&#35937;</a></span></dt><dt><span class="sect1"><a href="#objectstate-saveorupdate">10.7. &#33258;&#21160;&#29366;&#24577;&#26816;&#27979;</a></span></dt><dt><span class="sect1"><a href="#objectstate-deleting">10.8. &#21024;&#38500;&#25345;&#20037;&#23545;&#35937;</a></span></dt><dt><span class="sect1"><a href="#objectstate-replicating">10.9. &#22312;&#20004;&#20010;&#19981;&#21516;&#25968;&#25454;&#24211;&#38388;&#22797;&#21046;&#23545;&#35937;</a></span></dt><dt><span class="sect1"><a href="#objectstate-flushing">10.10. Session&#21047;&#20986;(flush)</a></span></dt><dt><span class="sect1"><a href="#objectstate-transitive">10.11. &#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)</a></span></dt><dt><span class="sect1"><a href="#objectstate-metadata">10.12. &#20351;&#29992;&#20803;&#25968;&#25454;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#transactions">11. &#20107;&#21153;&#21644;&#24182;&#21457;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#transactions-basics">11.1. Session&#21644;&#20107;&#21153;&#33539;&#22260;(transaction scope)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#transactions-basics-uow">11.1.1. &#25805;&#20316;&#21333;&#20803;(Unit of work)</a></span></dt><dt><span class="sect2"><a href="#transactions-basics-apptx">11.1.2. &#38271;&#23545;&#35805;</a></span></dt><dt><span class="sect2"><a href="#transactions-basics-identity">11.1.3. &#20851;&#27880;&#23545;&#35937;&#26631;&#35782;(Considering object identity)</a></span></dt><dt><span class="sect2"><a href="#transactions-basics-issues">11.1.4. &#24120;&#35265;&#38382;&#39064;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#transactions-demarcation">11.2. &#25968;&#25454;&#24211;&#20107;&#21153;&#22768;&#26126;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#transactions-demarcation-nonmanaged">11.2.1. &#38750;&#25176;&#31649;&#29615;&#22659;</a></span></dt><dt><span class="sect2"><a href="#transactions-demarcation-jta">11.2.2. &#20351;&#29992;JTA</a></span></dt><dt><span class="sect2"><a href="#transactions-demarcation-exceptions">11.2.3. &#24322;&#24120;&#22788;&#29702;</a></span></dt><dt><span class="sect2"><a href="#transactions-demarcation-timeout">11.2.4. &#20107;&#21153;&#36229;&#26102;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#transactions-optimistic">11.3. &#20048;&#35266;&#24182;&#21457;&#25511;&#21046;(Optimistic concurrency control)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#transactions-optimistic-manual">11.3.1. &#24212;&#29992;&#31243;&#24207;&#32423;&#21035;&#30340;&#29256;&#26412;&#26816;&#26597;(Application version checking)</a></span></dt><dt><span class="sect2"><a href="#transactions-optimistic-longsession">11.3.2. &#25193;&#23637;&#21608;&#26399;&#30340;session&#21644;&#33258;&#21160;&#29256;&#26412;&#21270;</a></span></dt><dt><span class="sect2"><a href="#transactions-optimistic-detached">11.3.3. &#33073;&#31649;&#23545;&#35937;(deatched object)&#21644;&#33258;&#21160;&#29256;&#26412;&#21270;</a></span></dt><dt><span class="sect2"><a href="#transactions-optimistic-customizing">11.3.4. &#23450;&#21046;&#33258;&#21160;&#29256;&#26412;&#21270;&#34892;&#20026;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#transactions-locking">11.4. &#24754;&#35266;&#38145;&#23450;(Pessimistic Locking)</a></span></dt><dt><span class="sect1"><a href="#transactions-connection-release">11.5. &#36830;&#25509;&#37322;&#25918;&#27169;&#24335;(Connection Release Modes)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#events">12. 
	&#25318;&#25130;&#22120;&#19982;&#20107;&#20214;(Interceptors and events)
	</a></span></dt><dd><dl><dt><span class="sect1"><a href="#objectstate-interceptors">12.1. 
		&#25318;&#25130;&#22120;(Interceptors)
		</a></span></dt><dt><span class="sect1"><a href="#objectstate-events">12.2. 
		&#20107;&#20214;&#31995;&#32479;(Event system)
		</a></span></dt><dt><span class="sect1"><a href="#objectstate-decl-security">12.3. 
		Hibernate&#30340;&#22768;&#26126;&#24335;&#23433;&#20840;&#26426;&#21046;
		</a></span></dt></dl></dd><dt><span class="chapter"><a href="#batch">13. &#25209;&#37327;&#22788;&#29702;&#65288;Batch processing&#65289;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#batch-inserts">13.1. &#25209;&#37327;&#25554;&#20837;&#65288;Batch inserts&#65289;</a></span></dt><dt><span class="sect1"><a href="#batch-update">13.2. &#25209;&#37327;&#26356;&#26032;&#65288;Batch updates&#65289;</a></span></dt><dt><span class="sect1"><a href="#batch-statelesssession">13.3. StatelessSession (&#26080;&#29366;&#24577;session)&#25509;&#21475;</a></span></dt><dt><span class="sect1"><a href="#batch-direct">13.4. DML(&#25968;&#25454;&#25805;&#20316;&#35821;&#35328;)&#39118;&#26684;&#30340;&#25805;&#20316;(DML-style operations)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#queryhql">14. HQL: Hibernate&#26597;&#35810;&#35821;&#35328;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#queryhql-casesensitivity">14.1. &#22823;&#23567;&#20889;&#25935;&#24863;&#24615;&#38382;&#39064;</a></span></dt><dt><span class="sect1"><a href="#queryhql-from">14.2. from&#23376;&#21477;</a></span></dt><dt><span class="sect1"><a href="#queryhql-joins">14.3. &#20851;&#32852;(Association)&#19982;&#36830;&#25509;(Join)</a></span></dt><dt><span class="sect1"><a href="#queryhql-joins-forms">14.4. join &#35821;&#27861;&#30340;&#24418;&#24335;</a></span></dt><dt><span class="sect1"><a href="#queryhql-select">14.5. select&#23376;&#21477;</a></span></dt><dt><span class="sect1"><a href="#queryhql-aggregation">14.6. &#32858;&#38598;&#20989;&#25968;</a></span></dt><dt><span class="sect1"><a href="#queryhql-polymorphism">14.7. &#22810;&#24577;&#26597;&#35810;</a></span></dt><dt><span class="sect1"><a href="#queryhql-where">14.8. where&#23376;&#21477;</a></span></dt><dt><span class="sect1"><a href="#queryhql-expressions">14.9. &#34920;&#36798;&#24335;</a></span></dt><dt><span class="sect1"><a href="#queryhql-ordering">14.10. order by&#23376;&#21477;</a></span></dt><dt><span class="sect1"><a href="#queryhql-grouping">14.11. group by&#23376;&#21477;</a></span></dt><dt><span class="sect1"><a href="#queryhql-subqueries">14.12. &#23376;&#26597;&#35810;</a></span></dt><dt><span class="sect1"><a href="#queryhql-examples">14.13. HQL&#31034;&#20363;</a></span></dt><dt><span class="sect1"><a href="#queryhql-bulk">14.14. &#25209;&#37327;&#30340;UPDATE&#21644;DELETE</a></span></dt><dt><span class="sect1"><a href="#queryhql-tipstricks">14.15. &#23567;&#25216;&#24039; &amp; &#23567;&#31373;&#38376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#querycriteria">15. 
    &#26465;&#20214;&#26597;&#35810;(Criteria Queries)
    </a></span></dt><dd><dl><dt><span class="sect1"><a href="#querycriteria-creating">15.1. &#21019;&#24314;&#19968;&#20010;Criteria &#23454;&#20363;</a></span></dt><dt><span class="sect1"><a href="#querycriteria-narrowing">15.2. &#38480;&#21046;&#32467;&#26524;&#38598;&#20869;&#23481;</a></span></dt><dt><span class="sect1"><a href="#querycriteria-ordering">15.3. &#32467;&#26524;&#38598;&#25490;&#24207;</a></span></dt><dt><span class="sect1"><a href="#querycriteria-associations">15.4. &#20851;&#32852;</a></span></dt><dt><span class="sect1"><a href="#querycriteria-dynamicfetching">15.5. &#21160;&#24577;&#20851;&#32852;&#25235;&#21462;</a></span></dt><dt><span class="sect1"><a href="#querycriteria-examples">15.6. &#26597;&#35810;&#31034;&#20363;</a></span></dt><dt><span class="sect1"><a href="#querycriteria-projection">15.7. &#25237;&#24433;(Projections)&#12289;&#32858;&#21512;&#65288;aggregation&#65289;&#21644;&#20998;&#32452;&#65288;grouping&#65289;</a></span></dt><dt><span class="sect1"><a href="#querycriteria-detachedqueries">15.8. &#31163;&#32447;(detached)&#26597;&#35810;&#21644;&#23376;&#26597;&#35810;</a></span></dt><dt><span class="sect1"><a href="#query-criteria-naturalid">15.9. &#26681;&#25454;&#33258;&#28982;&#26631;&#35782;&#26597;&#35810;(Queries by natural identifier)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#querysql">16. Native SQL&#26597;&#35810;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#querysql-creating">16.1. &#20351;&#29992;SQLQuery</a></span></dt><dt><span class="sect1"><a href="#querysql-aliasreferences">16.2. &#21035;&#21517;&#21644;&#23646;&#24615;&#24341;&#29992;</a></span></dt><dt><span class="sect1"><a href="#querysql-namedqueries">16.3. &#21629;&#21517;SQL&#26597;&#35810;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#propertyresults">16.3.1. &#20351;&#29992;return-property&#26469;&#26126;&#30830;&#22320;&#25351;&#23450;&#23383;&#27573;/&#21035;&#21517;</a></span></dt><dt><span class="sect2"><a href="#sp_query">16.3.2. &#20351;&#29992;&#23384;&#20648;&#36807;&#31243;&#26469;&#26597;&#35810;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#querysql-limits-storedprocedures">16.3.2.1. &#20351;&#29992;&#23384;&#20648;&#36807;&#31243;&#30340;&#35268;&#21017;&#21644;&#38480;&#21046;</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#querysql-cud">16.4. &#23450;&#21046;SQL&#29992;&#26469;create&#65292;update&#21644;delete</a></span></dt><dt><span class="sect1"><a href="#querysql-load">16.5. &#23450;&#21046;&#35013;&#36733;SQL</a></span></dt></dl></dd><dt><span class="chapter"><a href="#filters">17. &#36807;&#28388;&#25968;&#25454;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#objectstate-filters">17.1. Hibernate &#36807;&#28388;&#22120;(filters)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#xml">18. XML&#26144;&#23556;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#xml-intro">18.1. &#29992;XML&#25968;&#25454;&#36827;&#34892;&#24037;&#20316;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xml-intro-mapping">18.1.1. &#25351;&#23450;&#21516;&#26102;&#26144;&#23556;XML&#21644;&#31867;</a></span></dt><dt><span class="sect2"><a href="#xml-onlyxml">18.1.2. &#21482;&#23450;&#20041;XML&#26144;&#23556;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#xml-mapping">18.2. XML&#26144;&#23556;&#20803;&#25968;&#25454;</a></span></dt><dt><span class="sect1"><a href="#xml-manipulation">18.3. &#25805;&#20316;XML&#25968;&#25454;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#performance">19. &#25552;&#21319;&#24615;&#33021;
	</a></span></dt><dd><dl><dt><span class="sect1"><a href="#performance-fetching">19.1. 
			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)
		</a></span></dt><dd><dl><dt><span class="sect2"><a href="#performance-fetching-lazy">19.1.1. &#25805;&#20316;&#24310;&#36831;&#21152;&#36733;&#30340;&#20851;&#32852;</a></span></dt><dt><span class="sect2"><a href="#performance-fetching-custom">19.1.2. 
			
				&#35843;&#25972;&#25235;&#21462;&#31574;&#30053;&#65288;Tuning fetch strategies&#65289;
    		</a></span></dt><dt><span class="sect2"><a href="#performance-fetching-proxies">19.1.3. &#21333;&#31471;&#20851;&#32852;&#20195;&#29702;&#65288;Single-ended association proxies&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-fetching-initialization">19.1.4. &#23454;&#20363;&#21270;&#38598;&#21512;&#21644;&#20195;&#29702;&#65288;Initializing collections and proxies&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-fetching-batch">19.1.5. &#20351;&#29992;&#25209;&#37327;&#25235;&#21462;&#65288;Using batch fetching&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-fetching-subselect">19.1.6. &#20351;&#29992;&#23376;&#26597;&#35810;&#25235;&#21462;&#65288;Using subselect fetching&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-fetching-lazyproperties">19.1.7. &#20351;&#29992;&#24310;&#36831;&#23646;&#24615;&#25235;&#21462;&#65288;Using lazy property fetching&#65289;	
			</a></span></dt></dl></dd><dt><span class="sect1"><a href="#performance-cache">19.2. &#20108;&#32423;&#32531;&#23384;&#65288;The Second Level Cache&#65289;
		</a></span></dt><dd><dl><dt><span class="sect2"><a href="#performance-cache-mapping">19.2.1. &#32531;&#23384;&#26144;&#23556;&#65288;Cache mappings&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-cache-readonly">19.2.2. &#31574;&#30053;&#65306;&#21482;&#35835;&#32531;&#23384;&#65288;Strategy: read only&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-cache-readwrite">19.2.3. 
				&#31574;&#30053;:&#35835;/&#20889;&#32531;&#23384;&#65288;Strategy: read/write&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-cache-nonstrict">19.2.4. 
				&#31574;&#30053;:&#38750;&#20005;&#26684;&#35835;/&#20889;&#32531;&#23384;&#65288;Strategy: nonstrict read/write&#65289;				
			</a></span></dt><dt><span class="sect2"><a href="#performance-cache-transactional">19.2.5. 
				
				&#31574;&#30053;:&#20107;&#21153;&#32531;&#23384;&#65288;transactional&#65289;				
			</a></span></dt></dl></dd><dt><span class="sect1"><a href="#performance-sessioncache">19.3. 
			&#31649;&#29702;&#32531;&#23384;&#65288;Managing the caches&#65289;
    	</a></span></dt><dt><span class="sect1"><a href="#performance-querycache">19.4. &#26597;&#35810;&#32531;&#23384;&#65288;The Query Cache&#65289;
		</a></span></dt><dt><span class="sect1"><a href="#performance-collections">19.5. 
		&#29702;&#35299;&#38598;&#21512;&#24615;&#33021;&#65288;Understanding Collection performance&#65289;	
		</a></span></dt><dd><dl><dt><span class="sect2"><a href="#performance-collections-taxonomy">19.5.1. 

            &#20998;&#31867;&#65288;Taxonomy&#65289;
			</a></span></dt><dt><span class="sect2"><a href="#performance-collections-mostefficientupdate">19.5.2. 				
			Lists, maps &#21644;sets&#29992;&#20110;&#26356;&#26032;&#25928;&#29575;&#26368;&#39640;
			</a></span></dt><dt><span class="sect2"><a href="#performance-collections-mostefficentinverse">19.5.3. 
			Bag&#21644;list&#26159;&#21453;&#21521;&#38598;&#21512;&#31867;&#20013;&#25928;&#29575;&#26368;&#39640;&#30340;
			</a></span></dt><dt><span class="sect2"><a href="#performance-collections-oneshotdelete">19.5.4. 
			&#19968;&#27425;&#24615;&#21024;&#38500;&#65288;One shot delete&#65289;
			</a></span></dt></dl></dd><dt><span class="sect1"><a href="#performance-monitoring">19.6. 
		&#30417;&#27979;&#24615;&#33021;&#65288;Monitoring performance&#65289;
		</a></span></dt><dd><dl><dt><span class="sect2"><a href="#performance-monitoring-sf">19.6.1. 
			&#30417;&#27979;SessionFactory	
			</a></span></dt><dt><span class="sect2"><a href="#performance-monitoring-metrics">19.6.2. 
			&#25968;&#25454;&#35760;&#24405;&#65288;Metrics&#65289;
			</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#toolsetguide">20. &#24037;&#20855;&#31665;&#25351;&#21335;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#toolsetguide-s1">20.1. Schema&#33258;&#21160;&#29983;&#25104;&#65288;Automatic schema generation&#65289;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#toolsetguide-s1-2">20.1.1. &#23545;schema&#23450;&#21046;&#21270;(Customizing the schema)</a></span></dt><dt><span class="sect2"><a href="#toolsetguide-s1-3">20.1.2. &#36816;&#34892;&#35813;&#24037;&#20855;</a></span></dt><dt><span class="sect2"><a href="#toolsetguide-s1-4">20.1.3. &#23646;&#24615;(Properties)</a></span></dt><dt><span class="sect2"><a href="#toolsetguide-s1-5">20.1.4. &#20351;&#29992;Ant(Using Ant)</a></span></dt><dt><span class="sect2"><a href="#toolsetguide-s1-6">20.1.5. &#23545;schema&#30340;&#22686;&#37327;&#26356;&#26032;(Incremental schema updates)</a></span></dt><dt><span class="sect2"><a href="#toolsetguide-s1-7">20.1.6. &#29992;Ant&#26469;&#22686;&#37327;&#26356;&#26032;schema(Using Ant for incremental schema updates)</a></span></dt><dt><span class="sect2"><a href="#toolsetguide-s1-8">20.1.7. Schema &#26657;&#39564;</a></span></dt><dt><span class="sect2"><a href="#toolsetguide-s1-9">20.1.8. &#20351;&#29992;Ant&#36827;&#34892;schema&#26657;&#39564;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#example-parentchild">21. &#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#example-parentchild-collections">21.1. &#20851;&#20110;collections&#38656;&#35201;&#27880;&#24847;&#30340;&#19968;&#28857;</a></span></dt><dt><span class="sect1"><a href="#example-parentchild-bidir">21.2. &#21452;&#21521;&#30340;&#19968;&#23545;&#22810;&#20851;&#31995;(Bidirectional one-to-many)</a></span></dt><dt><span class="sect1"><a href="#example-parentchild-cascades">21.3. &#32423;&#32852;&#29983;&#21629;&#21608;&#26399;&#65288;Cascading lifecycle&#65289;</a></span></dt><dt><span class="sect1"><a href="#example-parentchild-update">21.4. &#32423;&#32852;&#19982;&#26410;&#20445;&#23384;&#20540;&#65288;Cascades and unsaved-value&#65289;</a></span></dt><dt><span class="sect1"><a href="#example-parentchild-conclusion">21.5. &#32467;&#35770;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#example-weblog">22. &#31034;&#20363;&#65306;Weblog &#24212;&#29992;&#31243;&#24207;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#example-weblog-classes">22.1. &#25345;&#20037;&#21270;&#31867;</a></span></dt><dt><span class="sect1"><a href="#example-weblog-mappings">22.2. Hibernate &#26144;&#23556;</a></span></dt><dt><span class="sect1"><a href="#example-weblog-code">22.3. Hibernate &#20195;&#30721;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#example-mappings">23. &#31034;&#20363;&#65306;&#22797;&#26434;&#26144;&#23556;&#23454;&#20363;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#example-mappings-emp">23.1. Employer&#65288;&#38599;&#20027;)/Employee(&#38599;&#21592;)</a></span></dt><dt><span class="sect1"><a href="#example-mappings-authorwork">23.2. Author(&#20316;&#23478;)/Work(&#20316;&#21697;)</a></span></dt><dt><span class="sect1"><a href="#example-mappings-customerorderproduct">23.3. Customer(&#23458;&#25143;)/Order(&#35746;&#21333;)/Product(&#20135;&#21697;)</a></span></dt><dt><span class="sect1"><a href="#misc">23.4. &#26434;&#20363;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#example-mappings-typed-onetone">23.4.1. "Typed" one-to-one association</a></span></dt><dt><span class="sect2"><a href="#example-mappings-composite-key">23.4.2. Composite key example</a></span></dt><dt><span class="sect2"><a href="#example-mappings-composite-key-manytomany">23.4.3. &#20849;&#26377;&#32452;&#21512;&#38190;&#23646;&#24615;&#30340;&#22810;&#23545;&#22810;(Many-to-many with shared composite key attribute)</a></span></dt><dt><span class="sect2"><a href="#example-mappings-content-discrimination">23.4.4. Content based discrimination</a></span></dt><dt><span class="sect2"><a href="#example-mappings-association-alternatekeys">23.4.5. Associations on alternate keys</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#best-practices">24. &#26368;&#20339;&#23454;&#36341;(Best Practices)</a></span></dt></dl></div><div class="preface" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="preface"></a>&#21069;&#35328;</h2></div></div><div></div></div><p>
            WARNING! This is a translated version of the English Hibernate reference
            documentation. The translated version might not be up to date! However, the
            differences should only be very minor. Consult the English reference
            documentation if you are missing information or encounter a translation
            error. If you like to contribute to a particular translation, contact us
            on the Hibernate developer mailing list.
        </p><p>
            Translator(s): RedSaga Translate Team &#28385;&#27743;&#32418;&#32763;&#35793;&#22242;&#38431;  &lt;caoxg@yahoo.com&gt; 
        </p><p>
            &#22312;&#20170;&#26085;&#30340;&#20225;&#19994;&#29615;&#22659;&#20013;&#65292;&#25226;&#38754;&#21521;&#23545;&#35937;&#30340;&#36719;&#20214;&#21644;&#20851;&#31995;&#25968;&#25454;&#24211;&#19968;&#36215;&#20351;&#29992;&#21487;&#33021;&#26159;&#30456;&#24403;&#40635;&#28902;&#12289;&#28010;&#36153;&#26102;&#38388;&#30340;&#12290;Hibernate&#26159;&#19968;&#20010;&#38754;&#21521;Java&#29615;&#22659;&#30340;&#23545;&#35937;/&#20851;&#31995;&#25968;&#25454;&#24211;&#26144;&#23556;&#24037;&#20855;&#12290;&#23545;&#35937;/&#20851;&#31995;&#25968;&#25454;&#24211;&#26144;&#23556;(object/relational mapping (ORM))&#36825;&#20010;&#26415;&#35821;&#34920;&#31034;&#19968;&#31181;&#25216;&#26415;&#65292;&#29992;&#26469;&#25226;&#23545;&#35937;&#27169;&#22411;&#34920;&#31034;&#30340;&#23545;&#35937;&#26144;&#23556;&#21040;&#22522;&#20110;SQL&#30340;&#20851;&#31995;&#27169;&#22411;&#25968;&#25454;&#32467;&#26500;&#20013;&#21435;&#12290;
		</p><p>
            Hibernate&#19981;&#20165;&#20165;&#31649;&#29702;Java&#31867;&#21040;&#25968;&#25454;&#24211;&#34920;&#30340;&#26144;&#23556;&#65288;&#21253;&#25324;Java&#25968;&#25454;&#31867;&#22411;&#21040;SQL&#25968;&#25454;&#31867;&#22411;&#30340;&#26144;&#23556;&#65289;&#65292;&#36824;&#25552;&#20379;&#25968;&#25454;&#26597;&#35810;&#21644;&#33719;&#21462;&#25968;&#25454;&#30340;&#26041;&#27861;&#65292;&#21487;&#20197;&#22823;&#24133;&#24230;&#20943;&#23569;&#24320;&#21457;&#26102;&#20154;&#24037;&#20351;&#29992;SQL&#21644;JDBC&#22788;&#29702;&#25968;&#25454;&#30340;&#26102;&#38388;&#12290;
        </p><p>
        Hibernate&#30340;&#30446;&#26631;&#26159;&#23545;&#20110;&#24320;&#21457;&#32773;&#36890;&#24120;&#30340;&#25968;&#25454;&#25345;&#20037;&#21270;&#30456;&#20851;&#30340;&#32534;&#31243;&#20219;&#21153;&#65292;&#35299;&#25918;&#20854;&#20013;&#30340;95%&#12290;&#23545;&#20110;&#20197;&#25968;&#25454;&#20026;&#20013;&#24515;&#30340;&#31243;&#24207;&#26469;&#35828;,&#23427;&#20204;&#24448;&#24448;&#21482;&#22312;&#25968;&#25454;&#24211;&#20013;&#20351;&#29992;&#23384;&#20648;&#36807;&#31243;&#26469;&#23454;&#29616;&#21830;&#19994;&#36923;&#36753;,Hibernate&#21487;&#33021;&#19981;&#26159;&#26368;&#22909;&#30340;&#35299;&#20915;&#26041;&#26696;;&#23545;&#20110;&#37027;&#20123;&#22312;&#22522;&#20110;Java&#30340;&#20013;&#38388;&#23618;&#24212;&#29992;&#20013;&#65292;&#23427;&#20204;&#23454;&#29616;&#38754;&#21521;&#23545;&#35937;&#30340;&#19994;&#21153;&#27169;&#22411;&#21644;&#21830;&#19994;&#36923;&#36753;&#30340;&#24212;&#29992;&#65292;Hibernate&#26159;&#26368;&#26377;&#29992;&#30340;&#12290;&#19981;&#31649;&#24590;&#26679;&#65292;Hibernate&#19968;&#23450;&#21487;&#20197;&#24110;&#21161;&#20320;&#28040;&#38500;&#25110;&#32773;&#21253;&#35013;&#37027;&#20123;&#38024;&#23545;&#29305;&#23450;&#21378;&#21830;&#30340;SQL&#20195;&#30721;&#65292;&#24182;&#19988;&#24110;&#20320;&#25226;&#32467;&#26524;&#38598;&#20174;&#34920;&#26684;&#24335;&#30340;&#34920;&#31034;&#24418;&#24335;&#36716;&#25442;&#21040;&#19968;&#31995;&#21015;&#30340;&#23545;&#35937;&#21435;&#12290;
        </p><p>
            &#22914;&#26524;&#20320;&#23545;Hibernate&#21644;&#23545;&#35937;/&#20851;&#31995;&#25968;&#25454;&#24211;&#26144;&#23556;&#36824;&#26159;&#20010;&#26032;&#25163;&#65292;&#25110;&#32773;&#29978;&#33267;&#23545;Java&#20063;&#19981;&#29087;&#24713;&#65292;&#35831;&#25353;&#29031;&#19979;&#38754;&#30340;&#27493;&#39588;&#26469;&#23398;&#20064;&#12290;
        </p><div class="orderedlist"><ol type="1"><li><p>
                    &#38405;&#35835;<a href="#tutorial" title="&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#xA;		Hibernate&#20837;&#38376;&#xA;	">&#31532;&nbsp;1&nbsp;&#31456; <i>
		Hibernate&#20837;&#38376;
	</i></a>&#65292;&#36825;&#26159;&#19968;&#31687;&#21253;&#21547;&#35814;&#32454;&#30340;&#36880;&#27493;&#25351;&#23548;&#30340;&#25351;&#21335;&#12290;&#26412;&#25351;&#21335;&#30340;&#28304;&#20195;&#30721;&#21253;&#21547;&#22312;&#21457;&#34892;&#21253;&#20013;&#65292;&#20320;&#21487;&#20197;&#22312;<tt class="literal">doc/reference/tutorial/</tt>&#30446;&#24405;&#19979;&#25214;&#21040;&#12290;                 </p></li><li><p>
                    &#38405;&#35835;<a href="#architecture" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20307;&#31995;&#32467;&#26500;(Architecture)">&#31532;&nbsp;2&nbsp;&#31456; <i>&#20307;&#31995;&#32467;&#26500;(Architecture)</i></a>&#26469;&#29702;&#35299;Hibernate&#21487;&#20197;&#20351;&#29992;&#30340;&#29615;&#22659;&#12290;
                </p></li><li><p>
                    &#26597;&#30475;Hibernate&#21457;&#34892;&#21253;&#20013;&#30340;<tt class="literal">eg/</tt>&#30446;&#24405;&#65292;&#37324;&#38754;&#26377;&#19968;&#20010;&#31616;&#21333;&#30340;&#29420;&#31435;&#36816;&#34892;&#30340;&#31243;&#24207;&#12290;&#25226;&#20320;&#30340;JDBC&#39537;&#21160;&#25335;&#36125;&#21040;<tt class="literal">lib/</tt>&#30446;&#24405;&#19979;&#65292;&#20462;&#25913;&#19968;&#19979;<tt class="literal">src/hibernate.properties</tt>,&#25351;&#23450;&#20854;&#20013;&#20320;&#30340;&#25968;&#25454;&#24211;&#30340;&#20449;&#24687;&#12290;&#36827;&#20837;&#21629;&#20196;&#34892;&#65292;&#20999;&#25442;&#21040;&#20320;&#30340;&#21457;&#34892;&#21253;&#30340;&#30446;&#24405;&#65292;&#36755;&#20837;<tt class="literal">ant eg</tt>(&#20351;&#29992;&#20102;Ant&#65289;&#65292;&#25110;&#32773;&#22312;Windows&#25805;&#20316;&#31995;&#32479;&#20013;&#20351;&#29992;<tt class="literal">build eg</tt>&#12290;
                </p></li><li><p>
                    &#25226;&#36825;&#20221;&#21442;&#32771;&#25991;&#26723;&#20316;&#20026;&#20320;&#23398;&#20064;&#30340;&#20027;&#35201;&#20449;&#24687;&#26469;&#28304;&#12290;
                </p></li><li><p>
					&#22312;Hibernate &#30340;&#32593;&#31449;&#19978;&#21487;&#20197;&#25214;&#21040;&#32463;&#24120;&#25552;&#38382;&#30340;&#38382;&#39064;&#19982;&#35299;&#31572;(FAQ)&#12290;
				</p></li><li><p>
					&#22312;Hibernate&#32593;&#31449;&#19978;&#36824;&#26377;&#31532;&#19977;&#26041;&#30340;&#28436;&#31034;&#12289;&#31034;&#20363;&#21644;&#25945;&#31243;&#30340;&#38142;&#25509;&#12290;
				</p></li><li><p>
                    Hibernate&#32593;&#31449;&#30340;&#8220;&#31038;&#21306;(Community Area)&#8221;&#26159;&#35752;&#35770;&#20851;&#20110;&#35774;&#35745;&#27169;&#24335;&#20197;&#21450;&#24456;&#22810;&#25972;&#21512;&#26041;&#26696;(Tomcat, JBoss AS, Struts, EJB,&#31561;&#31561;)&#30340;&#22909;&#22320;&#26041;&#12290;
                </p></li></ol></div><p>
             &#22914;&#26524;&#20320;&#26377;&#38382;&#39064;&#65292;&#35831;&#20351;&#29992;Hibernate&#32593;&#31449;&#19978;&#38142;&#25509;&#30340;&#29992;&#25143;&#35770;&#22363;&#12290;&#25105;&#20204;&#20063;&#25552;&#20379;&#19968;&#20010;JIRA&#38382;&#39064;&#36861;&#36394;&#31995;&#32479;&#65292;&#26469;&#25628;&#38598;bug&#25253;&#21578;&#21644;&#26032;&#21151;&#33021;&#35831;&#27714;&#12290;&#22914;&#26524;&#20320;&#23545;&#24320;&#21457;Hibernate&#26377;&#20852;&#36259;&#65292;&#35831;&#21152;&#20837;&#24320;&#21457;&#32773;&#30340;&#37038;&#20214;&#21015;&#34920;&#12290;&#65288;Hibernate&#32593;&#31449;&#19978;&#30340;&#29992;&#25143;&#35770;&#22363;&#26377;&#19968;&#20010;&#20013;&#25991;&#29256;&#38754;&#65292;JavaEye&#20063;&#26377;Hibernate&#20013;&#25991;&#29256;&#38754;,&#24744;&#21487;&#20197;&#22312;&#37027;&#37324;&#20132;&#27969;&#38382;&#39064;&#19982;&#32463;&#39564;&#12290;&#65289;
         </p><p>
             &#21830;&#19994;&#24320;&#21457;&#12289;&#20135;&#21697;&#25903;&#25345;&#21644;Hibernate&#22521;&#35757;&#21487;&#20197;&#36890;&#36807;JBoss Inc.&#33719;&#24471;&#12290;&#65288;&#35831;&#26597;&#38405;&#65306;http://www.hibernate.org/SupportTraining/&#65289;&#12290;
			 Hibernate&#26159;&#19968;&#20010;&#19987;&#19994;&#30340;&#24320;&#25918;&#28304;&#20195;&#30721;&#39033;&#30446;(Professional Open Source project)&#65292;&#20063;&#26159;JBoss Enterprise Middleware System(JEMS),JBoss&#20225;&#19994;&#32423;&#20013;&#38388;&#20214;&#31995;&#32479;&#30340;&#19968;&#20010;&#26680;&#24515;&#32452;&#20214;&#12290;
         </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="preface-translate-comments-zh-cn"></a>1.&nbsp;&#32763;&#35793;&#35828;&#26126;</h2></div></div><div></div></div><p>
	         	&#26412;&#25991;&#26723;&#30340;&#32763;&#35793;&#26159;&#22312;&#32593;&#32476;&#19978;&#21327;&#20316;&#36827;&#34892;&#30340;&#65292;&#20063;&#20250;&#19981;&#26029;&#26681;&#25454;Hibernate&#30340;&#21319;&#32423;&#36827;&#34892;&#26356;&#26032;&#12290;&#25552;&#20379;&#27492;&#25991;&#26723;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#20943;&#32531;&#23398;&#20064;Hibernate&#30340;&#22369;&#24230;&#65292;&#32780;&#38750;&#20195;&#26367;&#21407;&#25991;&#26723;&#12290;&#25105;&#20204;&#24314;&#35758;&#25152;&#26377;&#26377;&#33021;&#21147;&#30340;&#35835;&#32773;&#37117;&#30452;&#25509;&#38405;&#35835;&#33521;&#25991;&#21407;&#25991;&#12290;&#33509;&#24744;&#23545;&#32763;&#35793;&#26377;&#24322;&#35758;&#65292;&#25110;&#21457;&#29616;&#32763;&#35793;&#38169;&#35823;&#65292;&#25964;&#35831;&#19981;&#21533;&#36176;&#25945;&#65292;&#25253;&#21578;&#21040;&#22914;&#19979;email&#22320;&#22336;&#65306;cao at redsaga.com
	         </p><p>
	         Hibernate&#29256;&#26412;3&#30340;&#32763;&#35793;&#30001;&#28385;&#27743;&#32418;&#32763;&#35793;&#22242;&#38431;(RedSaga Translate Team)&#38598;&#20307;&#36827;&#34892;&#65292;&#36825;&#20063;&#26159;&#19968;&#27425;&#22823;&#35268;&#27169;&#32593;&#32476;&#32763;&#35793;&#30340;&#35797;&#39564;&#12290;&#22312;&#19981;&#21040;20&#22825;&#30340;&#26102;&#38388;&#20869;&#65292;&#25105;&#20204;&#23436;&#25104;&#20102;&#20004;&#30334;&#22810;&#39029;&#25991;&#26723;&#30340;&#32763;&#35793;&#65292;&#36825;&#19968;&#25104;&#26524;&#26159;&#36890;&#36807;&#21313;&#20960;&#20301;&#32593;&#21451;&#38598;&#20307;&#21162;&#21147;&#23436;&#25104;&#30340;&#12290;&#36890;&#36807;&#36825;&#27425;&#32763;&#35793;&#65292;&#25105;&#20204;&#20063;&#26377;&#20102;&#19968;&#22871;&#23436;&#25972;&#30340;&#27969;&#31243;&#65292;&#20174;&#21021;&#35793;&#12289;&#25216;&#26415;&#23457;&#26680;&#19968;&#30452;&#21040;&#25991;&#23383;&#23457;&#26680;&#12289;&#21457;&#24067;&#12290;&#25105;&#20204;&#30340;&#32763;&#35793;&#22242;&#38431;&#36824;&#20250;&#32487;&#32493;&#23436;&#21892;&#25105;&#20204;&#30340;&#32763;&#35793;&#27969;&#31243;&#65292;&#24182;&#32763;&#35793;&#20854;&#20182;&#20248;&#31168;&#30340;Java&#24320;&#28304;&#36164;&#26009;&#65292;&#25964;&#35831;&#26399;&#24453;&#12290;
	         </p><div class="table"><a name="redsaga-translate-team"></a><p class="title"><b>&#34920;&nbsp;1.&nbsp;
                Hibernate v3&#32763;&#35793;&#22242;&#38431;
            </b></p><table summary="&#xA;                Hibernate v3&#32763;&#35793;&#22242;&#38431;&#xA;            " border="1"><colgroup><col><col><col><col><col></colgroup><thead><tr><th align="center">
                            &#24207;&#21495;
                        </th><th align="center">
                            &#26631;&#39064;
                        </th><th align="center">
                            &#20013;&#25991;&#26631;&#39064;
                        </th><th align="center">
                            v3&#32763;&#35793;
                        </th><th align="center">
                            v3&#23457;&#26657;
                        </th><th align="center">
                            v3.1&#23457;&#26657;
                        </th></tr></thead><tbody><tr><td>--</td><td>Quickstart with Tomcat</td><td>&#22312;Tomcat&#20013;&#24555;&#36895;&#19978;&#25163;(3.1&#29256;&#26412;&#20013;&#21462;&#28040;&#65289;</td><td>&#26361;&#26195;&#38050;</td><td>zoujm</td><td>--</td></tr><tr><td>#1</td><td>Turtotial</td><td>Hibernate&#20837;&#38376;</td><td>Zheng Shuai</td><td>-</td><td>Sean Chan</td></tr><tr><td>#2</td><td>Architecture</td><td>&#20307;&#31995;&#32467;&#26500;</td><td>Hilton(BJUG)</td><td>&#21388;&#20518;&#21457;&#21574;</td><td>Sean Chan</td></tr><tr><td>#3</td><td>Configuration</td><td>&#37197;&#32622;</td><td>Goncha</td><td>mochow</td><td>zcgly</td></tr><tr><td>#4</td><td>Persistent Classes</td><td>&#25345;&#20037;&#21270;&#31867;</td><td>&#26361;&#26195;&#38050;</td><td>mochow</td><td>DigitalSonic</td></tr><tr><td>#5</td><td>Basic O/R Mapping</td><td>&#23545;&#35937;/&#20851;&#31995;&#25968;&#25454;&#24211;&#26144;&#23556;&#22522;&#30784;(&#19978;)</td><td>moxie</td><td>Kingfish</td><td>&#24352;&#25104;&#38050;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&#23545;&#35937;/&#20851;&#31995;&#25968;&#25454;&#24211;&#26144;&#23556;&#22522;&#30784;(&#19979;)</td><td>inter_dudu</td><td>&#21016;&#22269;&#38596;(vincent)</td><td>&#24352;&#25104;&#38050;</td></tr><tr><td>#6</td><td>Collection Mapping</td><td>&#38598;&#21512;&#31867;&#26144;&#23556;</td><td>&#26361;&#26195;&#38050;</td><td>robbin</td><td>--</td></tr><tr><td>#7</td><td>Association Mappings</td><td>&#20851;&#32852;&#20851;&#31995;&#26144;&#23556;</td><td>Robbin</td><td>devils.advocate</td><td>--</td></tr><tr><td>#8</td><td>Component Mapping</td><td>&#32452;&#20214;&#26144;&#23556;</td><td>&#26361;&#26195;&#38050;</td><td>Robbin</td><td>Song guo qiang</td></tr><tr><td>#9</td><td>Inheritance Mappings</td><td>&#32487;&#25215;&#26144;&#23556;</td><td>morning(BJUG)</td><td>mochow</td><td>Liang cheng</td></tr><tr><td>#10</td><td>Working with objects</td><td>&#19982;&#23545;&#35937;&#20849;&#20107;</td><td>&#31243;&#24191;&#26976;</td><td>&#21388;&#20518;&#21457;&#21574;</td><td>--</td></tr><tr><td>#11</td><td>Transactions And Concurrency</td><td>&#20107;&#21153;&#21644;&#24182;&#21457;</td><td>Robbin</td><td>mochow</td><td>--</td></tr><tr><td>#12</td><td>Interceptors and events</td><td>&#32487;&#25215;&#26144;&#23556;</td><td>&#19971;&#24425;&#29436;(BJUG)</td><td>&#21388;&#20518;&#21457;&#21574;</td><td>--</td></tr><tr><td>#13</td><td>Batch processing</td><td>&#25209;&#37327;&#22788;&#29702;</td><td>Kingfish(BJUG)</td><td>&#21388;&#20518;&#21457;&#21574;</td><td>--</td></tr><tr><td>#14</td><td>HQL: The Hibernate Query Language</td><td>HQL: Hibernate&#26597;&#35810;&#35821;&#35328;</td><td>&#37073;&#28009;(BJUG)</td><td>Zheng Shuai</td><td>--</td></tr><tr><td>#15</td><td>Criteria Queries</td><td>&#26465;&#20214;&#26597;&#35810;</td><td>nemo(BJUG)</td><td>Zheng Shuai</td><td>--</td></tr><tr><td>#16</td><td>Native SQL</td><td>Native SQL&#26597;&#35810;</td><td>&#20284;&#27700;&#27969;&#24180;</td><td>zoujm</td><td>--</td></tr><tr><td>#17</td><td>Filters</td><td>&#36807;&#28388;&#25968;&#25454;</td><td>&#20912;&#20113;(BJUG)</td><td>Goncha</td><td>--</td></tr><tr><td>#18</td><td>XML Mapping</td><td>XML&#26144;&#23556;</td><td>edward(BJUG)</td><td>Goncha</td><td>huxb</td></tr><tr><td>#19</td><td>Improving performance</td><td>&#24615;&#33021;&#25552;&#21319;</td><td>Wangjinfeng</td><td>Robbin</td><td>--</td></tr><tr><td>#20</td><td>Toolset Guide</td><td>&#24037;&#20855;&#31665;&#25351;&#21335;</td><td>&#26361;&#26195;&#38050;</td><td>Robbin</td><td>--</td></tr><tr><td>#21</td><td>Example: Parent/Child</td><td>&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;</td><td>&#26361;&#26195;&#38050;</td><td>devils.advocate</td><td>--</td></tr><tr><td>#22</td><td>Example: Weblog Application</td><td>&#31034;&#20363;&#65306;Weblog &#24212;&#29992;&#31243;&#24207;</td><td>&#26361;&#26195;&#38050;</td><td>devils.advocate</td><td>--</td></tr><tr><td>#23</td><td>Example: Various Mappings</td><td>&#31034;&#20363;&#65306;&#22810;&#31181;&#26144;&#23556;</td><td>shidu(BJUG)</td><td>&#20912;&#20113;</td><td>--</td></tr><tr><td>#24</td><td>Best Practices</td><td>&#26368;&#20339;&#23454;&#36341;</td><td>&#26361;&#26195;&#38050;</td><td>&#20912;&#20113;</td><td>--</td></tr></tbody></table></div><p>
	         &#20851;&#20110;&#25105;&#20204;
	         </p><div class="variablelist"><dl><dt><span class="term">&#28385;&#27743;&#32418;.&#24320;&#28304;, http://www.redsaga.com</span></dt><dd><p>
                        &#20174;&#25104;&#31435;&#20043;&#21021;&#23601;&#33268;&#21147;&#20110;Java&#24320;&#25918;&#28304;&#20195;&#30721;&#22312;&#20013;&#22269;&#30340;&#20256;&#25773;&#19982;&#21457;&#23637;,&#19982;&#22269;&#20869;&#22810;&#20010;Java&#22242;&#20307;&#21450;&#20986;&#29256;&#31038;&#26377;&#28145;&#20837;&#20132;&#27969;&#12290;&#22362;&#25345;&#23569;&#35828;&#22810;&#20570;&#30340;&#21407;&#21017;&#65292;&#30446;&#21069;&#26377;&#20004;&#20010;&#22242;&#38431;&#65292;&#8220;OpenDoc&#22242;&#38431;&#8221;&#19982;&#8220;&#32763;&#35793;&#22242;&#38431;&#8221;&#65292;&#26412;&#32763;&#35793;&#25991;&#26723;&#21363;&#20026;&#32763;&#35793;&#22242;&#38431;&#20316;&#21697;&#12290;OpenDoc&#22242;&#38431;&#24050;&#32463;&#25512;&#20986;&#21253;&#25324;Hibernate&#12289;iBatis&#12289;Spring&#12289;WebWork&#30340;&#22810;&#20221;&#24320;&#25918;&#25991;&#26723;&#65292;&#24182;&#20110;2005&#24180;5&#26376;&#22312;Hibernate&#24320;&#25918;&#25991;&#26723;&#22522;&#30784;&#19978;&#25193;&#20805;&#25104;&#20070;&#65292;&#20986;&#29256;&#20102;&#21407;&#21019;&#20070;&#31821;&#65306;&#12298;&#28145;&#20837;&#27973;&#20986;Hibernate&#12299;&#65292;&#26412;&#20070;400&#20313;&#39029;&#65292;&#36866;&#21512;&#21508;&#20010;&#23618;&#27425;&#30340;Hibernate&#29992;&#25143;&#12290;(http://www.redsaga.com/hibernate_book.html)&#25964;&#35831;&#25903;&#25345;&#12290;
                        </p></dd><dt><span class="term">&#21271;&#20140;Java&#29992;&#25143;&#32452;, http://www.bjug.org</span></dt><dd><p>
                        Beiing Java User Group&#65292;&#27665;&#38388;&#25216;&#26415;&#20132;&#27969;&#32452;&#32455;&#65292;&#25104;&#31435;&#20110;2004&#24180;6&#26376;&#12290;&#20197;&#20132;&#27969;&#19982;&#20849;&#20139;&#20026;&#23447;&#26088;&#65292;&#27599;&#20004;&#21608;&#20030;&#34892;&#19968;&#27425;&#25216;&#26415;&#32858;&#20250;&#27963;&#21160;&#12290;BJUG&#30340;&#30446;&#26631;&#26159;&#65292;&#36890;&#36807;&#23567;&#37096;&#20998;&#20154;&#30340;&#21162;&#21147;&#65292;&#24418;&#25104;&#19968;&#20010;&#25216;&#26415;&#31038;&#32676;&#65292;&#21019;&#24314;&#33391;&#22909;&#30340;&#20132;&#27969;&#27675;&#22260;&#65292;&#24182;&#23558;&#26032;&#30340;&#25216;&#26415;&#21644;&#24605;&#24819;&#25512;&#24191;&#21040;&#25972;&#20010;IT&#30028;&#65292;&#35753;&#25105;&#20204;&#20849;&#21516;&#36827;&#27493;&#12290;

                        </p></dd><dt><span class="term">Java&#35270;&#32447;, http://www.javaeye.com</span></dt><dd><p>
                        Java&#35270;&#32447;&#22312;&#26159;Hibernate&#20013;&#25991;&#35770;&#22363;&#65288;http://www.hibernate.org.cn&#65292;Hibernate&#20013;&#25991;&#35770;&#22363;&#26159;&#20013;&#22269;&#26368;&#26089;&#30340;Hibernate&#19987;&#19994;&#29992;&#25143;&#35770;&#22363;&#65292;&#20026;Hibernate&#22312;&#20013;&#22269;&#30340;&#25512;&#24191;&#20570;&#20986;&#20102;&#24040;&#22823;&#30340;&#36129;&#29486;&#65289;&#22522;&#30784;&#19978;&#21457;&#23637;&#36215;&#26469;&#30340;Java&#28145;&#24230;&#25216;&#26415;&#32593;&#31449;&#65292;&#30446;&#26631;&#26159;&#25104;&#20026;&#19968;&#20010;&#39640;&#21697;&#36136;&#30340;&#65292;&#26377;&#24605;&#24819;&#28145;&#24230;&#30340;&#12289;&#21407;&#21019;&#31934;&#31070;&#30340;Java&#25216;&#26415;&#20132;&#27969;&#32593;&#31449;&#65292;&#20026;&#36719;&#20214;&#20174;&#19994;&#20154;&#21592;&#25552;&#20379;&#19968;&#20010;&#33258;&#30001;&#30340;&#20132;&#27969;&#25216;&#26415;&#65292;&#20132;&#27969;&#24605;&#24819;&#21644;&#20132;&#27969;&#20449;&#24687;&#30340;&#24179;&#21488;&#12290;

                        </p></dd><dt><span class="term">&#33268;&#35874;</span></dt><dd><p>&#36824;&#26377;&#19968;&#20123;&#26379;&#21451;&#32473;&#25105;&#20204;&#21457;&#26469;&#20102;&#21208;&#35823;&#65292;&#22312;&#27492;&#33268;&#35874;&#65306;Kurapica&#65292;&#26446;&#27589;&#65292;&#26446;&#28023;&#26519;&#12290;
                        </p></dd></dl></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="preface-translate-licence-zh-cn"></a>2.&nbsp;&#29256;&#26435;&#22768;&#26126;</h2></div></div><div></div></div><p>
	         	Hibernate&#33521;&#25991;&#25991;&#26723;&#23646;&#20110;Hibernate&#21457;&#34892;&#21253;&#30340;&#19968;&#37096;&#20998;&#65292;&#36981;&#24490;LGPL&#21327;&#35758;&#12290;&#26412;&#32763;&#35793;&#29256;&#26412;&#21516;&#26679;&#36981;&#24490;LGPL&#21327;&#35758;&#12290;&#21442;&#19982;&#32763;&#35793;&#30340;&#35793;&#32773;&#19968;&#33268;&#21516;&#24847;&#25918;&#24323;&#38500;&#32626;&#21517;&#26435;&#22806;&#23545;&#26412;&#32763;&#35793;&#29256;&#26412;&#30340;&#20854;&#23427;&#26435;&#21033;&#35201;&#27714;&#12290;
	 		 </p><p>
	         	&#24744;&#21487;&#20197;&#33258;&#30001;&#38142;&#25509;&#12289;&#19979;&#36733;&#12289;&#20256;&#25773;&#27492;&#25991;&#26723;&#65292;&#25110;&#32773;&#25918;&#32622;&#22312;&#24744;&#30340;&#32593;&#31449;&#19978;&#65292;&#29978;&#33267;&#20316;&#20026;&#20135;&#21697;&#30340;&#19968;&#37096;&#20998;&#21457;&#34892;&#12290;&#20294;&#21069;&#25552;&#26159;&#24517;&#39035;&#20445;&#35777;&#20840;&#25991;&#23436;&#25972;&#36716;&#36733;&#65292;&#21253;&#25324;&#23436;&#25972;&#30340;&#29256;&#26435;&#20449;&#24687;&#21644;&#20316;&#35793;&#32773;&#22768;&#26126;&#65292;&#24182;&#19981;&#33021;&#36829;&#21453;LGPL&#21327;&#35758;&#12290;&#36825;&#37324;&#8220;&#23436;&#25972;&#8221;&#30340;&#21547;&#20041;&#26159;&#65292;&#19981;&#33021;&#36827;&#34892;&#20219;&#20309;&#21024;&#38500;/&#22686;&#28155;/&#27880;&#35299;&#12290;&#33509;&#26377;&#21024;&#38500;/&#22686;&#28155;/&#27880;&#35299;&#65292;&#24517;&#39035;&#36880;&#27573;&#26126;&#30830;&#22768;&#26126;&#37027;&#20123;&#37096;&#20998;&#24182;&#38750;&#26412;&#25991;&#26723;&#30340;&#19968;&#37096;&#20998;&#12290;
	         </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="tutorial"></a>&#31532;&nbsp;1&nbsp;&#31456;&nbsp;
		Hibernate&#20837;&#38376;
	</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tutorial-intro"></a>1.1.&nbsp;
		&#21069;&#35328;
	</h2></div></div><div></div></div><p>
	&#26412;&#31456;&#26159;&#38754;&#21521;Hibernate&#21021;&#23398;&#32773;&#30340;&#19968;&#20010;&#20837;&#38376;&#25945;&#31243;&#12290;&#25105;&#20204;&#20174;&#19968;&#20010;&#20351;&#29992;&#39547;&#30041;&#20869;&#23384;&#24335;(in-memory)&#25968;&#25454;&#24211;&#30340;&#31616;&#21333;&#21629;&#20196;&#34892;&#24212;&#29992;&#31243;&#24207;&#24320;&#22987;, &#29992;&#26131;&#20110;&#29702;&#35299;&#30340;&#26041;&#24335;&#36880;&#27493;&#24320;&#21457;&#12290;

        </p><p>
	&#26412;&#31456;&#38754;&#21521;Hibernate&#21021;&#23398;&#32773;&#65292;&#20294;&#38656;&#35201;Java&#21644;SQL&#30693;&#35782;&#12290;&#23427;&#26159;&#22312;Michael Goegl&#25152;&#20889;&#30340;&#25351;&#21335;&#30340;&#22522;&#30784;&#19978;&#23436;&#25104;&#30340;&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#31216;&#31532;&#19977;&#26041;&#24211;&#25991;&#20214;&#26159;&#25351;JDK 1.4&#21644;5.0&#12290;&#33509;&#20351;&#29992;JDK1.3&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#20854;&#23427;&#30340;&#24211;&#25991;&#20214;&#12290;
        </p><p>
	&#26412;&#31456;&#30340;&#28304;&#20195;&#30721;&#24050;&#21253;&#21547;&#22312;&#21457;&#24067;&#21253;&#20013;&#65292;&#20301;&#20110;<tt class="literal">doc/reference/tutorial/</tt>&#30446;&#24405;&#19979;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tutorial-firstapp"></a>1.2.&nbsp;
	&#31532;&#19968;&#37096;&#20998; &#65293; &#31532;&#19968;&#20010;Hibernate&#24212;&#29992;&#31243;&#24207;
	</h2></div></div><div></div></div><p>
	&#39318;&#20808;&#25105;&#20204;&#23558;&#21019;&#24314;&#19968;&#20010;&#31616;&#21333;&#30340;&#22522;&#20110;&#25511;&#21046;&#21488;&#30340;(console-based)Hibernate&#24212;&#29992;&#31243;&#24207;&#12290;&#30001;&#20110;&#25105;&#20204;&#20351;&#29992;Java&#25968;&#25454;&#24211;(HSQL DB)&#65292;&#25152;&#20197;&#19981;&#24517;&#23433;&#35013;&#20219;&#20309;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#12290;
        </p><p>
	&#20551;&#35774;&#25105;&#20204;&#24076;&#26395;&#26377;&#19968;&#20010;&#23567;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#20445;&#23384;&#25105;&#20204;&#24076;&#26395;&#21442;&#21152;&#30340;&#27963;&#21160;&#65288;events&#65289;&#21644;&#36825;&#20123;&#27963;&#21160;&#20027;&#21150;&#26041;&#30340;&#30456;&#20851;&#20449;&#24687;&#12290;
		&#65288;&#35793;&#32773;&#27880;&#65306;&#22312;&#26412;&#25945;&#31243;&#30340;&#21518;&#38754;&#37096;&#20998;&#65292;&#25105;&#20204;&#23558;&#30452;&#25509;&#20351;&#29992;event&#32780;&#19981;&#26159;&#23427;&#30340;&#20013;&#25991;&#32763;&#35793;&#8220;&#27963;&#21160;&#8221;&#65292;&#20197;&#20813;&#28151;&#28102;&#12290;&#65289;
        </p><p>
	&#25105;&#20204;&#25152;&#20570;&#30340;&#31532;&#19968;&#20214;&#20107;&#23601;&#26159;&#21019;&#24314;&#25105;&#20204;&#30340;&#24320;&#21457;&#30446;&#24405;&#65292;&#24182;&#19988;&#25226;&#25152;&#26377;&#38656;&#35201;&#29992;&#21040;&#30340;Java&#24211;&#25991;&#20214;&#25918;&#36827;&#21435;&#12290;&#35299;&#21387;&#32553;&#20174;Hibernate&#32593;&#31449;&#19979;&#36733;&#30340;Hibernate&#21457;&#24067;&#21253;&#65292;&#24182;&#25226;<tt class="literal">/lib</tt>&#30446;&#24405;&#19979;&#25152;&#26377;&#38656;&#35201;&#30340;&#24211;&#25991;&#20214;&#25335;&#21040;&#25105;&#20204;&#26032;&#24314;&#24320;&#21457;&#30446;&#24405;&#19979;&#30340;<tt class="literal">/lib</tt>&#30446;&#24405;&#19979;&#12290;&#30475;&#36215;&#26469;&#23601;&#20687;&#36825;&#26679;&#65306;
        </p><pre class="programlisting">.
+lib
  antlr.jar
  cglib.jar
  asm.jar
  asm-attrs.jars
  commons-collections.jar
  commons-logging.jar
  ehcache.jar
  hibernate3.jar
  jta.jar
  dom4j.jar
  log4j.jar </pre><p>
	<span class="emphasis"><em>&#21040;&#32534;&#20889;&#26412;&#25991;&#26102;&#20026;&#27490;</em></span>&#65292;&#36825;&#20123;&#26159;Hibernate&#36816;&#34892;&#25152;&#38656;&#35201;&#30340;&#26368;&#23567;&#24211;&#25991;&#20214;&#38598;&#21512;&#65288;&#27880;&#24847;&#25105;&#20204;&#20063;&#25335;&#36125;&#20102;	Hibernate3.jar&#65292;&#36825;&#20010;&#26159;&#26368;&#20027;&#35201;&#30340;&#25991;&#20214;&#65289;&#12290;&#20320;&#27491;&#20351;&#29992;&#30340;Hibernate&#29256;&#26412;&#21487;&#33021;&#38656;&#35201;&#27604;&#36825;&#26356;&#22810;&#25110;&#23569;&#19968;&#20123;&#30340;&#24211;&#25991;&#20214;&#12290;&#35831;&#21442;&#35265;&#21457;&#24067;&#21253;&#20013;&#30340;<tt class="literal">lib/</tt>&#30446;&#24405;&#19979;&#30340;<tt class="literal">README.txt</tt>&#65292;&#20197;&#33719;&#21462;&#26356;&#22810;&#20851;&#20110;&#25152;&#38656;&#21644;&#21487;&#36873;&#30340;&#31532;&#19977;&#26041;&#24211;&#25991;&#20214;&#20449;&#24687;&#65288;&#20107;&#23454;&#19978;&#65292;Log4j&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#24211;&#25991;&#20214;&#65292;&#20294;&#34987;&#35768;&#22810;&#24320;&#21457;&#32773;&#25152;&#21916;&#27426;&#65289;&#12290;

        </p><p>
	&#25509;&#19979;&#26469;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#31867;&#65292;&#29992;&#26469;&#20195;&#34920;&#37027;&#20123;&#25105;&#20204;&#24076;&#26395;&#20648;&#23384;&#22312;&#25968;&#25454;&#24211;&#37324;&#30340;event&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-firstapp-firstclass"></a>1.2.1.&nbsp;
	&#31532;&#19968;&#20010;class
           </h3></div></div><div></div></div><p>
	&#25105;&#20204;&#30340;&#31532;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#26159;&#19968;&#20010;&#24102;&#26377;&#19968;&#20123;&#23646;&#24615;&#65288;property&#65289;&#30340;&#31616;&#21333;JavaBean&#31867;&#65306;
            </p><pre class="programlisting">package events;

import java.util.Date;

public class Event {
    private Long id;

    private String title;
    private Date date;

    public Event() {}

    public Long getId() {
        return id;
    }

    private void setId(Long id) {
        this.id = id;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
}</pre><p>
	&#20320;&#21487;&#20197;&#30475;&#21040;&#36825;&#20010;&#31867;&#23545;&#23646;&#24615;&#30340;&#23384;&#21462;&#26041;&#27861;&#65288;getter and setter method&#65289;&#20351;&#29992;&#20102;&#26631;&#20934;JavaBean&#21629;&#21517;&#32422;&#23450;&#65292;&#21516;&#26102;&#25226;&#31867;&#23646;&#24615;&#65288;field&#65289;&#30340;&#35775;&#38382;&#32423;&#21035;&#35774;&#25104;&#31169;&#26377;&#30340;&#65288;private&#65289;&#12290;&#36825;&#26159;&#25512;&#33616;&#30340;&#35774;&#35745;&#65292;&#20294;&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#12290;Hibernate&#20063;&#21487;&#20197;&#30452;&#25509;&#35775;&#38382;&#36825;&#20123;field&#65292;&#32780;&#20351;&#29992;&#35775;&#38382;&#26041;&#27861;&#65288;accessor method&#65289;&#30340;&#22909;&#22788;&#26159;&#25552;&#20379;&#20102;&#37325;&#26500;&#26102;&#30340;&#20581;&#22766;&#24615;&#65288;robustness&#65289;&#12290;&#20026;&#20102;&#36890;&#36807;&#21453;&#23556;&#26426;&#21046;&#65288;Reflection&#65289;&#26469;&#23454;&#20363;&#21270;&#36825;&#20010;&#31867;&#30340;&#23545;&#35937;&#65292;&#25105;&#20204;&#38656;&#35201;&#25552;&#20379;&#19968;&#20010;&#26080;&#21442;&#30340;&#26500;&#36896;&#22120;&#65288;no-argument constructor)&#12290;
            </p><p>
	&#23545;&#19968;&#29305;&#23450;&#30340;event, <tt class="literal">id</tt> &#23646;&#24615;&#25345;&#26377;&#21807;&#19968;&#30340;&#26631;&#35782;&#31526;&#65288;identifier&#65289;&#30340;&#20540;&#12290;&#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#20351;&#29992;Hibernate&#25552;&#20379;&#30340;&#25152;&#26377;&#29305;&#24615;&#65292;&#37027;&#20040;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#23454;&#20307;&#65288;persistent entity&#65289;&#31867;&#65288;&#36825;&#37324;&#20063;&#21253;&#25324;&#19968;&#20123;&#27425;&#35201;&#20381;&#36182;&#31867;&#65289;&#37117;&#38656;&#35201;&#19968;&#20010;&#36825;&#26679;&#30340;&#26631;&#35782;&#31526;&#23646;&#24615;&#12290;&#32780;&#20107;&#23454;&#19978;&#65292;&#22823;&#22810;&#25968;&#24212;&#29992;&#31243;&#24207;&#65288;&#29305;&#21035;&#26159;web&#24212;&#29992;&#31243;&#24207;&#65289;&#37117;&#38656;&#35201;&#36890;&#36807;&#26631;&#35782;&#31526;&#26469;&#21306;&#21035;&#23545;&#35937;&#65292;&#25152;&#20197;&#20320;&#24212;&#35813;&#32771;&#34385;&#20351;&#29992;&#26631;&#35782;&#31526;&#23646;&#24615;&#32780;&#19981;&#26159;&#25226;&#23427;&#24403;&#20316;&#19968;&#31181;&#38480;&#21046;&#12290;&#28982;&#32780;&#65292;&#25105;&#20204;&#36890;&#24120;&#19981;&#20250;&#25805;&#20316;&#23545;&#35937;&#30340;&#26631;&#35782;&#65288;identity&#65289;&#65292;&#22240;&#27492;&#23427;&#30340;setter&#26041;&#27861;&#30340;&#35775;&#38382;&#32423;&#21035;&#24212;&#35813;&#22768;&#26126;private&#12290;&#36825;&#26679;&#24403;&#23545;&#35937;&#34987;&#20445;&#23384;&#30340;&#26102;&#20505;&#65292;&#21482;&#26377;Hibernate&#21487;&#20197;&#20026;&#23427;&#20998;&#37197;&#26631;&#35782;&#31526;&#20540;&#12290;&#20320;&#21487;&#30475;&#21040;Hibernate&#21487;&#20197;&#30452;&#25509;&#35775;&#38382;public&#65292;private&#21644;protected&#30340;&#35775;&#38382;&#26041;&#27861;&#21644;field&#12290;&#25152;&#20197;&#36873;&#25321;&#21738;&#31181;&#26041;&#24335;&#23436;&#20840;&#21462;&#20915;&#20110;&#20320;&#65292;&#20320;&#21487;&#20197;&#20351;&#20320;&#30340;&#36873;&#25321;&#19982;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#35774;&#35745;&#30456;&#21563;&#21512;&#12290;
            </p><p>
	&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#31867;&#65288;persistent classes&#65289;&#37117;&#35201;&#27714;&#26377;&#26080;&#21442;&#30340;&#26500;&#36896;&#22120;&#65292;&#22240;&#20026;Hibernate&#24517;&#39035;&#20351;&#29992;Java&#21453;&#23556;&#26426;&#21046;&#26469;&#20026;&#20320;&#21019;&#24314;&#23545;&#35937;&#12290;&#26500;&#36896;&#22120;&#65288;constructor&#65289;&#30340;&#35775;&#38382;&#32423;&#21035;&#21487;&#20197;&#26159;private&#65292;&#28982;&#32780;&#24403;&#29983;&#25104;&#36816;&#34892;&#26102;&#20195;&#29702;&#65288;runtime proxy&#65289;&#30340;&#26102;&#20505;&#21017;&#35201;&#27714;&#20351;&#29992;&#33267;&#23569;&#26159;package &#32423;&#21035;&#30340;&#35775;&#38382;&#25511;&#21046;&#65292;&#36825;&#26679;&#22312;&#27809;&#26377;&#23383;&#33410;&#30721;&#25351;&#20196;&#65288;bytecode instrumentation&#65289;&#30340;&#24773;&#20917;&#19979;&#65292;&#20174;&#25345;&#20037;&#21270;&#31867;&#37324;&#33719;&#21462;&#25968;&#25454;&#20250;&#26356;&#26377;&#25928;&#29575;&#12290;
            </p><p>
	&#25226;&#36825;&#20010;Java&#28304;&#20195;&#30721;&#25991;&#20214;&#25918;&#21040;&#24320;&#21457;&#30446;&#24405;&#19979;&#30340;<tt class="literal">src</tt>&#30446;&#24405;&#37324;&#65292;&#27880;&#24847;&#21253;&#20301;&#32622;&#35201;&#27491;&#30830;&#12290; &#29616;&#22312;&#36825;&#20010;&#30446;&#24405;&#30475;&#36215;&#26469;&#24212;&#35813;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">.
+lib
  &lt;Hibernate and third-party libraries&gt;
+src
  +events
    Event.java</pre><p>
	&#19979;&#19968;&#27493;&#65292;&#25105;&#20204;&#25226;&#36825;&#20010;&#25345;&#20037;&#21270;&#31867;&#30340;&#20449;&#24687;&#21578;&#35785;Hibernate&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-firstapp-mapping"></a>1.2.2.&nbsp;
	&#26144;&#23556;&#25991;&#20214;
	</h3></div></div><div></div></div><p>
	Hibernate&#38656;&#35201;&#30693;&#36947;&#24590;&#26679;&#21435;&#21152;&#36733;&#65288;load&#65289;&#21644;&#23384;&#20648;&#65288;store&#65289;&#25345;&#20037;&#21270;&#31867;&#30340;&#23545;&#35937;&#12290;&#36825;&#27491;&#26159;Hibernate&#26144;&#23556;&#25991;&#20214;&#21457;&#25381;&#20316;&#29992;&#30340;&#22320;&#26041;&#12290;&#26144;&#23556;&#25991;&#20214;&#21578;&#35785;Hibernate&#23427;&#65292;&#24212;&#35813;&#35775;&#38382;&#25968;&#25454;&#24211;(database)&#37324;&#38754;&#30340;&#21738;&#20010;&#34920;&#65288;table&#65289;&#21450;&#24212;&#35813;&#20351;&#29992;&#34920;&#37324;&#38754;&#30340;&#21738;&#20123;&#23383;&#27573;&#65288;column&#65289;&#12290;

            </p><p>
	&#19968;&#20010;&#26144;&#23556;&#25991;&#20214;&#30340;&#22522;&#26412;&#32467;&#26500;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping&gt;
[...]
&lt;/hibernate-mapping&gt;</pre><p>
	&#27880;&#24847;Hibernate&#30340;DTD&#26159;&#38750;&#24120;&#22797;&#26434;&#30340;&#12290;&#20320;&#30340;&#32534;&#36753;&#22120;&#25110;&#32773;IDE&#37324;&#20351;&#29992;&#23427;&#26469;&#33258;&#21160;&#23436;&#25104;&#37027;&#20123;&#29992;&#26469;&#26144;&#23556;&#30340;XML&#20803;&#32032;&#65288;element&#65289;&#21644;&#23646;&#24615;&#65288;attribute&#65289;&#12290;&#20320;&#20063;&#21487;&#20197;&#22312;&#25991;&#26412;&#32534;&#36753;&#22120;&#37324;&#25171;&#24320;DTD&#65293;&#36825;&#26159;&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;&#26469;&#27010;&#35272;&#25152;&#26377;&#30340;&#20803;&#32032;&#21644;attribute&#65292;&#24182;&#26597;&#30475;&#23427;&#20204;&#30340;&#32570;&#30465;&#20540;&#20197;&#21450;&#27880;&#37322;&#12290;&#27880;&#24847;Hibernate&#19981;&#20250;&#20174;web&#21152;&#36733;DTD&#25991;&#20214;&#65292;&#20294;&#23427;&#20250;&#39318;&#20808;&#22312;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#26597;&#25214;&#12290;DTD&#25991;&#20214;&#24050;&#21253;&#25324;&#22312;<tt class="literal">hibernate3.jar</tt>&#37324;&#65292;&#21516;&#26102;&#20063;&#22312;Hibernate&#21457;&#24067;&#21253;&#30340;<tt class="literal">src/</tt>&#30446;&#24405;&#19979;&#12290;
            </p><p>
	&#20026;&#32553;&#30701;&#20195;&#30721;&#38271;&#24230;&#65292;&#22312;&#20197;&#21518;&#30340;&#20363;&#23376;&#37324;&#25105;&#20204;&#20250;&#30465;&#30053;DTD&#30340;&#22768;&#26126;&#12290;&#24403;&#28982;&#65292;&#22312;&#23454;&#38469;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;DTD&#22768;&#26126;&#26159;&#24517;&#39035;&#30340;&#12290;
            </p><p>
	&#22312;<tt class="literal">hibernate-mapping</tt>&#26631;&#31614;&#65288;tag&#65289;&#20043;&#38388;, &#21547;&#26377;&#19968;&#20010;<tt class="literal">class</tt>&#20803;&#32032;&#12290;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#23454;&#20307;&#31867;&#65288;&#20877;&#27425;&#22768;&#26126;&#65292;&#25110;&#35768;&#25509;&#19979;&#26469;&#20250;&#26377;&#20381;&#36182;&#31867;&#65292;&#23601;&#26159;&#37027;&#20123;&#27425;&#35201;&#30340;&#23454;&#20307;&#65289;&#37117;&#38656;&#35201;&#19968;&#20010;&#36825;&#26679;&#30340;&#26144;&#23556;&#65292;&#26469;&#25226;&#31867;&#23545;&#35937;&#26144;&#23556;&#21040;SQL&#25968;&#25454;&#24211;&#37324;&#30340;&#34920;&#12290;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="events.Event" table="EVENTS"&gt;

    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
	&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#21578;&#35785;&#20102;Hibernate&#24590;&#26679;&#25226;<tt class="literal">Events</tt>&#31867;&#30340;&#23545;&#35937;&#25345;&#20037;&#21270;&#21040;&#25968;&#25454;&#24211;&#30340;<tt class="literal">EVENTS</tt>&#34920;&#37324;&#65292;&#20197;&#21450;&#24590;&#26679;&#20174;<tt class="literal">EVENTS</tt>&#34920;&#21152;&#36733;&#21040;<tt class="literal">Events</tt>&#31867;&#30340;&#23545;&#35937;&#12290;&#27599;&#20010;&#23454;&#20363;&#23545;&#24212;&#30528;&#25968;&#25454;&#24211;&#34920;&#20013;&#30340;&#19968;&#34892;&#12290;&#29616;&#22312;&#25105;&#20204;&#23558;&#32487;&#32493;&#35752;&#35770;&#26377;&#20851;&#21807;&#19968;&#26631;&#35782;&#31526;&#23646;&#24615;&#21040;&#25968;&#25454;&#24211;&#34920;&#30340;&#26144;&#23556;&#12290;&#21478;&#22806;&#65292;&#30001;&#20110;&#25105;&#20204;&#19981;&#20851;&#24515;&#24590;&#26679;&#22788;&#29702;&#36825;&#20010;&#26631;&#35782;&#31526;&#65292;&#25105;&#20204;&#23601;&#37197;&#32622;&#30001;Hibernate&#30340;&#26631;&#35782;&#31526;&#29983;&#25104;&#31574;&#30053;&#26469;&#20135;&#29983;&#20195;&#29702;&#20027;&#38190;&#23383;&#27573;&#12290;

            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="events.Event" table="EVENTS"&gt;
        &lt;id name="id" column="EVENT_ID"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
	<tt class="literal">id</tt>&#20803;&#32032;&#26159;&#26631;&#35782;&#31526;&#23646;&#24615;&#30340;&#22768;&#26126;&#65292;<tt class="literal">name="id"</tt> &#22768;&#26126;&#20102;Java&#23646;&#24615;&#30340;&#21517;&#23383; &#65293; Hibernate&#20250;&#20351;&#29992;<tt class="literal">getId()</tt>&#21644;<tt class="literal">setId()</tt>&#26469;&#35775;&#38382;&#23427;&#12290;  <tt class="literal">column</tt>&#23646;&#24615;&#21017;&#21578;&#35785;Hibernate, &#25105;&#20204;&#20351;&#29992;<tt class="literal">EVENTS</tt>&#34920;&#30340;&#21738;&#20010;&#23383;&#27573;&#20316;&#20026;&#20027;&#38190;&#12290;&#23884;&#22871;&#30340;<tt class="literal">generator</tt>&#20803;&#32032;&#25351;&#23450;&#20102;&#26631;&#35782;&#31526;&#29983;&#25104;&#31574;&#30053;&#65292;&#22312;&#36825;&#37324;&#25105;&#20204;&#25351;&#23450;<tt class="literal">native</tt>&#65292;&#23427;&#26681;&#25454;&#24050;&#37197;&#32622;&#30340;&#25968;&#25454;&#24211;&#65288;&#26041;&#35328;&#65289;&#33258;&#21160;&#36873;&#25321;&#26368;&#20339;&#30340;&#26631;&#35782;&#31526;&#29983;&#25104;&#31574;&#30053;&#12290;Hibernate&#25903;&#25345;&#30001;&#25968;&#25454;&#24211;&#29983;&#25104;&#65292;&#20840;&#23616;&#21807;&#19968;&#24615;&#65288;globally unique&#65289;&#21644;&#24212;&#29992;&#31243;&#24207;&#25351;&#23450;&#65288;&#25110;&#32773;&#20320;&#33258;&#24049;&#20026;&#20219;&#20309;&#24050;&#26377;&#31574;&#30053;&#25152;&#20889;&#30340;&#25193;&#23637;&#65289;&#36825;&#20123;&#31574;&#30053;&#26469;&#29983;&#25104;&#26631;&#35782;&#31526;&#12290;
            </p><p>
	&#26368;&#21518;&#25105;&#20204;&#22312;&#26144;&#23556;&#25991;&#20214;&#37324;&#38754;&#21253;&#21547;&#38656;&#35201;&#25345;&#20037;&#21270;&#23646;&#24615;&#30340;&#22768;&#26126;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#31867;&#37324;&#38754;&#30340;&#23646;&#24615;&#37117;&#34987;&#35270;&#20026;&#38750;&#25345;&#20037;&#21270;&#30340;&#65306;
            </p><pre class="programlisting">
&lt;hibernate-mapping&gt;

    &lt;class name="events.Event" table="EVENTS"&gt;
        &lt;id name="id" column="EVENT_ID"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="date" type="timestamp" column="EVENT_DATE"/&gt;
        &lt;property name="title"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
	&#21644;<tt class="literal">id</tt>&#20803;&#32032;&#19968;&#26679;&#65292;<tt class="literal">property</tt>&#20803;&#32032;&#30340;<tt class="literal">name</tt>&#23646;&#24615;&#21578;&#35785;Hibernate&#20351;&#29992;&#21738;&#20010;getter&#21644;setter&#26041;&#27861;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292;Hibernate&#20250;&#23547;&#25214;<tt class="literal">getDate()/setDate()</tt>, &#20197;&#21450;<tt class="literal">getTitle()/setTitle()</tt>&#12290;
            </p><p>
	&#20026;&#20160;&#20040;<tt class="literal">date</tt>&#23646;&#24615;&#30340;&#26144;&#23556;&#21547;&#26377;<tt class="literal">column</tt> attribute&#65292;&#32780;<tt class="literal">title</tt>&#21364;&#27809;&#26377;&#65311;&#24403;&#27809;&#26377;&#35774;&#23450;<tt class="literal">column</tt> attribute &#30340;&#26102;&#20505;&#65292;Hibernate&#32570;&#30465;&#22320;&#20351;&#29992;JavaBean&#30340;&#23646;&#24615;&#21517;&#20316;&#20026;&#23383;&#27573;&#21517;&#12290;&#23545;&#20110;<tt class="literal">title</tt>&#65292;&#36825;&#26679;&#24037;&#20316;&#24471;&#24456;&#22909;&#12290;&#28982;&#32780;&#65292;<tt class="literal">date</tt>&#22312;&#22810;&#25968;&#30340;&#25968;&#25454;&#24211;&#37324;&#65292;&#26159;&#19968;&#20010;&#20445;&#30041;&#20851;&#38190;&#23383;&#65292;&#25152;&#20197;&#25105;&#20204;&#26368;&#22909;&#25226;&#23427;&#26144;&#23556;&#25104;&#19968;&#20010;&#19981;&#21516;&#30340;&#21517;&#23383;&#12290;

            </p><p>
	  &#21478;&#19968;&#26377;&#36259;&#30340;&#20107;&#24773;&#26159;<tt class="literal">title</tt>&#23646;&#24615;&#32570;&#23569;&#19968;&#20010;<tt class="literal">type</tt> attribute&#12290;&#25105;&#20204;&#22312;&#26144;&#23556;&#25991;&#20214;&#37324;&#22768;&#26126;&#24182;&#20351;&#29992;&#30340;&#31867;&#22411;&#65292;&#21364;&#19981;&#26159;&#25105;&#20204;&#26399;&#26395;&#30340;&#37027;&#26679;&#65292;&#26159;Java&#25968;&#25454;&#31867;&#22411;&#65292;&#21516;&#26102;&#20063;&#19981;&#26159;SQL&#25968;&#25454;&#24211;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;&#36825;&#20123;&#31867;&#22411;&#23601;&#26159;&#25152;&#35859;&#30340;Hibernate &#26144;&#23556;&#31867;&#22411;<span class="emphasis"><em>&#65288;mapping types&#65289;</em></span>&#65292;&#23427;&#20204;&#33021;&#25226;Java&#25968;&#25454;&#31867;&#22411;&#36716;&#25442;&#21040;SQL&#25968;&#25454;&#31867;&#22411;&#65292;&#21453;&#20043;&#20134;&#28982;&#12290;&#20877;&#27425;&#37325;&#30003;&#65292;&#22914;&#26524;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#27809;&#26377;&#35774;&#32622;<tt class="literal">type</tt>&#23646;&#24615;&#30340;&#35805;&#65292;Hibernate&#20250;&#33258;&#24049;&#35797;&#30528;&#21435;&#30830;&#23450;&#27491;&#30830;&#30340;&#36716;&#25442;&#31867;&#22411;&#21644;&#23427;&#30340;&#26144;&#23556;&#31867;&#22411;&#12290;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#36825;&#20010;&#33258;&#21160;&#26816;&#27979;&#26426;&#21046;&#65288;&#22312;Java &#31867;&#19978;&#20351;&#29992;&#21453;&#23556;&#26426;&#21046;&#65289;&#19981;&#20250;&#20135;&#29983;&#20320;&#25152;&#26399;&#24453;&#25110;&#38656;&#35201;&#30340;&#32570;&#30465;&#20540;&#12290;<tt class="literal">date</tt>&#23646;&#24615;&#23601;&#26159;&#20010;&#24456;&#22909;&#30340;&#20363;&#23376;&#65292;Hibernate&#26080;&#27861;&#30693;&#36947;&#36825;&#20010;&#23646;&#24615;&#65288;<tt class="literal">java.util.Date</tt>&#31867;&#22411;&#30340;&#65289;&#24212;&#35813;&#34987;&#26144;&#23556;&#25104;&#65306;SQL <tt class="literal">date</tt>&#65292;&#25110;<tt class="literal">timestamp</tt>&#65292;&#36824;&#26159;<tt class="literal">time</tt> &#23383;&#27573;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292;&#25226;&#36825;&#20010;&#23646;&#24615;&#26144;&#23556;&#25104;<tt class="literal">timestamp</tt> &#36716;&#25442;&#22120;&#65292;&#36825;&#26679;&#25105;&#20204;&#39044;&#30041;&#20102;&#26085;&#26399;&#21644;&#26102;&#38388;&#30340;&#20840;&#37096;&#20449;&#24687;&#12290;
            </p><p>
	&#24212;&#35813;&#25226;&#36825;&#20010;&#26144;&#23556;&#25991;&#20214;&#20445;&#23384;&#20026;<tt class="literal">Event.hbm.xml</tt>&#65292;&#19988;&#23601;&#22312;<tt class="literal">Event</tt>Java&#31867;&#30340;&#28304;&#25991;&#20214;&#30446;&#24405;&#19979;&#12290;&#26144;&#23556;&#25991;&#20214;&#21487;&#38543;&#24847;&#22320;&#21629;&#21517;&#65292;&#20294;<tt class="literal">hbm.xml</tt>&#30340;&#21518;&#32512;&#24050;&#25104;&#20026;Hibernate&#24320;&#21457;&#32773;&#31038;&#21306;&#30340;&#32422;&#23450;&#12290;&#29616;&#22312;&#30446;&#24405;&#32467;&#26500;&#30475;&#36215;&#26469;&#24212;&#35813;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">.
+lib
  &lt;Hibernate and third-party libraries&gt;
+src
 +events
  Event.java
  Event.hbm.xml</pre><p>
	&#25105;&#20204;&#32487;&#32493;&#36827;&#34892;Hibernate&#30340;&#20027;&#35201;&#37197;&#32622;&#12290;
             </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-firstapp-configuration"></a>1.2.3.&nbsp;
	Hibernate&#37197;&#32622;
		</h3></div></div><div></div></div><p>
	&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#26377;&#20102;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#21644;&#23427;&#30340;&#26144;&#23556;&#25991;&#20214;&#65292;&#35813;&#26159;&#37197;&#32622;Hibernate&#30340;&#26102;&#20505;&#20102;&#12290;&#22312;&#27492;&#20043;&#21069;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#25968;&#25454;&#24211;&#12290; HSQL DB&#26159;&#31181;&#22522;&#20110;Java &#30340;SQL&#25968;&#25454;&#24211;&#31649;&#29702;&#31995;&#32479;&#65288;DBMS&#65289;&#65292;&#21487;&#20197;&#20174;HSQL DB&#30340;&#32593;&#31449;&#19978;&#19979;&#36733;&#12290;&#23454;&#38469;&#19978;&#65292;&#20320;&#21482;&#38656;&#19979;&#36733;&#30340;&#21253;&#20013;&#30340;<tt class="literal">hsqldb.jar</tt>&#25991;&#20214;&#65292;&#24182;&#25226;&#36825;&#20010;&#25991;&#20214;&#25918;&#22312;&#24320;&#21457;&#25991;&#20214;&#22841;&#30340;<tt class="literal">lib/</tt>&#30446;&#24405;&#19979;&#21363;&#21487;&#12290;
		
            </p><p>
	&#22312;&#24320;&#21457;&#30340;&#26681;&#30446;&#24405;&#19979;&#21019;&#24314;&#19968;&#20010;<tt class="literal">data</tt>&#30446;&#24405; &#65293; &#36825;&#26159;HSQL DB&#23384;&#20648;&#25968;&#25454;&#25991;&#20214;&#30340;&#22320;&#26041;&#12290;&#27492;&#26102;&#22312;data&#30446;&#24405;&#20013;&#36816;&#34892;<tt class="literal">java -classpath lib/hsqldb.jar org.hsqldb.Server</tt>&#23601;&#21487;&#21551;&#21160;&#25968;&#25454;&#24211;&#12290;&#20320;&#21487;&#20197;&#22312;log&#20013;&#30475;&#21040;&#23427;&#30340;&#21551;&#21160;&#65292;&#21450;&#32465;&#23450;&#21040;TCP/IP&#22871;&#32467;&#23383;&#65292;&#36825;&#27491;&#26159;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#31245;&#21518;&#20250;&#36830;&#25509;&#30340;&#22320;&#26041;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#22312;&#26412;&#20363;&#20013;&#36816;&#34892;&#19968;&#20010;&#20840;&#26032;&#30340;&#25968;&#25454;&#24211;&#65292;&#23601;&#22312;&#31383;&#21475;&#20013;&#25353;&#19979;<tt class="literal">CTRL + C</tt>&#26469;&#20851;&#38381;HSQL&#25968;&#25454;&#24211;&#65292;&#24182;&#21024;&#38500;<tt class="literal">data/</tt>&#30446;&#24405;&#19979;&#30340;&#25152;&#26377;&#25991;&#20214;&#65292;&#20877;&#37325;&#26032;&#21551;&#21160;HSQL&#25968;&#25454;&#24211;&#12290;
            </p><p>
	Hibernate&#26159;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#37324;&#36830;&#25509;&#25968;&#25454;&#24211;&#30340;&#37027;&#23618;&#65292;&#25152;&#20197;&#23427;&#38656;&#35201;&#36830;&#25509;&#29992;&#30340;&#20449;&#24687;&#12290;&#36830;&#25509;&#65288;connection&#65289;&#26159;&#36890;&#36807;&#19968;&#20010;&#20063;&#30001;&#25105;&#20204;&#37197;&#32622;&#30340;JDBC&#36830;&#25509;&#27744;&#65288;connection pool&#65289;&#26469;&#23436;&#25104;&#30340;&#12290;Hibernate&#30340;&#21457;&#24067;&#21253;&#37324;&#21253;&#21547;&#20102;&#35768;&#22810;&#24320;&#28304;&#30340;&#65288;open source&#65289;&#36830;&#25509;&#27744;&#65292;&#20294;&#22312;&#25105;&#20204;&#20363;&#23376;&#20013;&#20351;&#29992;Hibernate&#20869;&#32622;&#30340;&#36830;&#25509;&#27744;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;&#20351;&#29992;&#19968;&#20010;&#20135;&#21697;&#32423;(production-quality)&#30340;&#31532;&#19977;&#26041;&#36830;&#25509;&#27744;&#36719;&#20214;&#65292;&#20320;&#24517;&#39035;&#25335;&#36125;&#25152;&#38656;&#30340;&#24211;&#25991;&#20214;&#21040;&#20320;&#30340;classpath&#19979;&#65292;&#24182;&#20351;&#29992;&#19981;&#21516;&#30340;&#36830;&#25509;&#27744;&#35774;&#32622;&#12290;
            </p><p>
	&#20026;&#20102;&#20445;&#23384;Hibernate&#30340;&#37197;&#32622;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#31616;&#21333;&#30340;<tt class="literal">hibernate.properties</tt>&#25991;&#20214;&#65292;&#25110;&#32773;&#19968;&#20010;&#31245;&#24494;&#22797;&#26434;&#30340;<tt class="literal">hibernate.cfg.xml</tt>&#65292;&#29978;&#33267;&#21487;&#20197;&#23436;&#20840;&#20351;&#29992;&#31243;&#24207;&#26469;&#37197;&#32622;Hibernate&#12290;&#22810;&#25968;&#29992;&#25143;&#26356;&#21916;&#27426;&#20351;&#29992;XML&#37197;&#32622;&#25991;&#20214;&#65306;
            </p><pre class="programlisting">&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;

&lt;hibernate-configuration&gt;

    &lt;session-factory&gt;

        &lt;!-- Database connection settings --&gt;
        &lt;property name="connection.driver_class"&gt;org.hsqldb.jdbcDriver&lt;/property&gt;
        &lt;property name="connection.url"&gt;jdbc:hsqldb:hsql://localhost&lt;/property&gt;
        &lt;property name="connection.username"&gt;sa&lt;/property&gt;
        &lt;property name="connection.password"&gt;&lt;/property&gt;

        &lt;!-- JDBC connection pool (use the built-in) --&gt;
        &lt;property name="connection.pool_size"&gt;1&lt;/property&gt;

        &lt;!-- SQL dialect --&gt;
        &lt;property name="dialect"&gt;org.hibernate.dialect.HSQLDialect&lt;/property&gt;

        &lt;!-- Enable Hibernate's automatic session context management --&gt;
        &lt;property name="current_session_context_class"&gt;thread&lt;/property&gt;

        &lt;!-- Disable the second-level cache  --&gt;
        &lt;property name="cache.provider_class"&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;

        &lt;!-- Echo all executed SQL to stdout --&gt;
        &lt;property name="show_sql"&gt;true&lt;/property&gt;

        &lt;!-- Drop and re-create the database schema on startup --&gt;
        &lt;property name="hbm2ddl.auto"&gt;create&lt;/property&gt;

        &lt;mapping resource="events/Event.hbm.xml"/&gt;

    &lt;/session-factory&gt;

&lt;/hibernate-configuration&gt;</pre><p>
	&#27880;&#24847;&#36825;&#20010;XML&#37197;&#32622;&#20351;&#29992;&#20102;&#19968;&#20010;&#19981;&#21516;&#30340;DTD&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#37197;&#32622;&#20102;Hibernate&#30340;<tt class="literal">SessionFactory</tt>&#65293;&#19968;&#20010;&#20851;&#32852;&#20110;&#29305;&#23450;&#25968;&#25454;&#24211;&#20840;&#23616;&#30340;&#24037;&#21378;&#65288;factory&#65289;&#12290;&#22914;&#26524;&#20320;&#35201;&#20351;&#29992;&#22810;&#20010;&#25968;&#25454;&#24211;&#65292;&#23601;&#35201;&#29992;&#22810;&#20010;&#30340;<tt class="literal">&lt;session-factory&gt;</tt>&#65292;&#36890;&#24120;&#25226;&#23427;&#20204;&#25918;&#22312;&#22810;&#20010;&#37197;&#32622;&#25991;&#20214;&#20013;&#65288;&#20026;&#20102;&#26356;&#23481;&#26131;&#21551;&#21160;&#65289;&#12290;
            </p><p>
	&#26368;&#24320;&#22987;&#30340;4&#20010;<tt class="literal">property</tt>&#20803;&#32032;&#21253;&#21547;&#24517;&#35201;&#30340;JDBC&#36830;&#25509;&#20449;&#24687;&#12290;&#26041;&#35328;&#65288;dialect&#65289;&#30340;<tt class="literal">property</tt>&#20803;&#32032;&#25351;&#26126;Hibernate &#29983;&#25104;&#30340;&#29305;&#23450;SQL&#21464;&#37327;&#12290;&#20320;&#24456;&#24555;&#20250;&#30475;&#21040;&#65292;Hibernate&#23545;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#30340;&#33258;&#21160;session&#31649;&#29702;&#23601;&#20250;&#27966;&#19978;&#29992;&#22330;&#12290; &#25171;&#24320;<tt class="literal">hbm2ddl.auto</tt>&#36873;&#39033;&#23558;&#33258;&#21160;&#29983;&#25104;&#25968;&#25454;&#24211;&#27169;&#24335;&#65288;schema&#65289;&#65293;	&#30452;&#25509;&#21152;&#20837;&#25968;&#25454;&#24211;&#20013;&#12290;&#24403;&#28982;&#36825;&#20010;&#36873;&#39033;&#20063;&#21487;&#20197;&#34987;&#20851;&#38381;&#65288;&#36890;&#36807;&#21435;&#38500;&#36825;&#20010;&#37197;&#32622;&#36873;&#39033;&#65289;&#25110;&#32773;&#36890;&#36807;Ant&#20219;&#21153;<tt class="literal">SchemaExport</tt>&#30340;&#24110;&#21161;&#26469;&#25226;&#25968;&#25454;&#24211;schema&#37325;&#23450;&#21521;&#21040;&#25991;&#20214;&#20013;&#12290;&#26368;&#21518;&#65292;&#22312;&#37197;&#32622;&#20013;&#20026;&#25345;&#20037;&#21270;&#31867;&#21152;&#20837;&#26144;&#23556;&#25991;&#20214;&#12290;
            </p><p>
	&#25226;&#36825;&#20010;&#25991;&#20214;&#25335;&#36125;&#21040;&#28304;&#20195;&#30721;&#30446;&#24405;&#19979;&#38754;&#65292;&#36825;&#26679;&#23427;&#23601;&#20301;&#20110;classpath&#30340;&#26681;&#30446;&#24405;&#30340;&#26368;&#21518;&#12290;Hibernate&#22312;&#21551;&#21160;&#26102;&#20250;&#33258;&#21160;&#22312;classpath&#30340;&#26681;&#30446;&#24405;&#26597;&#25214;&#21517;&#20026;<tt class="literal">hibernate.cfg.xml</tt>&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-firstapp-ant"></a>1.2.4.&nbsp;
	&#29992;Ant&#26500;&#24314;
            </h3></div></div><div></div></div><p>
	&#29616;&#22312;&#25105;&#20204;&#29992;Ant&#26469;&#26500;&#24314;&#24212;&#29992;&#31243;&#24207;&#12290;&#20320;&#24517;&#39035;&#20808;&#23433;&#35013;Ant&#65293;&#21487;&#20197;&#20174;<a href="http://ant.apache.org/bindownload.cgi" target="_top">Ant &#19979;&#36733;&#39029;&#38754;</a>&#24471;&#21040;&#23427;&#12290;&#24590;&#26679;&#23433;&#35013;Ant&#23601;&#19981;&#22312;&#36825;&#37324;&#20171;&#32461;&#20102;&#65292;&#35831;&#21442;&#32771;<a href="http://ant.apache.org/manual/index.html" target="_top">Ant &#29992;&#25143;&#25163;&#20876;</a>&#12290;&#24403;&#20320;&#23433;&#35013;&#23436;&#20102;Ant&#65292;&#23601;&#21487;&#20197;&#24320;&#22987;&#21019;&#24314;<tt class="literal">build.xml</tt>&#25991;&#20214;&#65292;&#25226;&#23427;&#30452;&#25509;&#25918;&#22312;&#24320;&#21457;&#30446;&#24405;&#19979;&#38754;&#12290;
            </p><p>
	&#19968;&#20010;&#31616;&#21333;&#30340;build&#25991;&#20214;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;
            </p><pre class="programlisting">&lt;project name="hibernate-tutorial" default="compile"&gt;

    &lt;property name="sourcedir" value="${basedir}/src"/&gt;
    &lt;property name="targetdir" value="${basedir}/bin"/&gt;
    &lt;property name="librarydir" value="${basedir}/lib"/&gt;

    &lt;path id="libraries"&gt;
        &lt;fileset dir="${librarydir}"&gt;
            &lt;include name="*.jar"/&gt;
        &lt;/fileset&gt;
    &lt;/path&gt;

    &lt;target name="clean"&gt;
        &lt;delete dir="${targetdir}"/&gt;
        &lt;mkdir dir="${targetdir}"/&gt;
    &lt;/target&gt;

    &lt;target name="compile" depends="clean, copy-resources"&gt;
      &lt;javac srcdir="${sourcedir}"
             destdir="${targetdir}"
             classpathref="libraries"/&gt;
    &lt;/target&gt;

    &lt;target name="copy-resources"&gt;
        &lt;copy todir="${targetdir}"&gt;
            &lt;fileset dir="${sourcedir}"&gt;
                &lt;exclude name="**/*.java"/&gt;
            &lt;/fileset&gt;
        &lt;/copy&gt;
    &lt;/target&gt;

&lt;/project&gt;</pre><p>
	&#36825;&#23558;&#21578;&#35785;Ant&#25226;&#25152;&#26377;&#22312;lib&#30446;&#24405;&#19979;&#20197;<tt class="literal">.jar</tt>&#32467;&#23614;&#30340;&#25991;&#20214;&#25335;&#36125;&#21040;classpath&#20013;&#20197;&#20379;&#32534;&#35793;&#20043;&#29992;&#12290;&#23427;&#20063;&#25226;&#25152;&#26377;&#30340;&#38750;Java&#28304;&#20195;&#30721;&#25991;&#20214;&#65292;&#20363;&#22914;&#37197;&#32622;&#21644;Hibernate&#26144;&#23556;&#25991;&#20214;&#65292;&#25335;&#36125;&#21040;&#30446;&#26631;&#30446;&#24405;&#12290;&#22914;&#26524;&#20320;&#29616;&#22312;&#36816;&#34892;Ant&#65292;&#20250;&#24471;&#21040;&#20197;&#19979;&#36755;&#20986;&#65306;
            </p><pre class="programlisting">C:\hibernateTutorial\&gt;ant
Buildfile: build.xml

copy-resources:
     [copy] Copying 2 files to C:\hibernateTutorial\bin

compile:
    [javac] Compiling 1 source file to C:\hibernateTutorial\bin

BUILD SUCCESSFUL
Total time: 1 second </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-firstapp-helpers"></a>1.2.5.&nbsp;
	&#21551;&#21160;&#21644;&#36741;&#21161;&#31867;
		</h3></div></div><div></div></div><p>
	&#26159;&#26102;&#20505;&#26469;&#21152;&#36733;&#21644;&#20648;&#23384;&#19968;&#20123;<tt class="literal">Event</tt>&#23545;&#35937;&#20102;&#65292;&#20294;&#39318;&#20808;&#25105;&#20204;&#24471;&#32534;&#20889;&#19968;&#20123;&#22522;&#30784;&#30340;&#20195;&#30721;&#20197;&#23436;&#25104;&#35774;&#32622;&#12290;&#25105;&#20204;&#24517;&#39035;&#21551;&#21160;Hibernate&#65292;&#27492;&#36807;&#31243;&#21253;&#25324;&#21019;&#24314;&#19968;&#20010;&#20840;&#23616;&#30340;<tt class="literal">SessoinFactory</tt>&#65292;&#24182;&#25226;&#23427;&#20648;&#23384;&#22312;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#23481;&#26131;&#35775;&#38382;&#30340;&#22320;&#26041;&#12290;<tt class="literal">SessionFactory</tt>&#21487;&#20197;&#21019;&#24314;&#24182;&#25171;&#24320;&#26032;&#30340;<tt class="literal">Session</tt>&#12290;&#19968;&#20010;<tt class="literal">Session</tt>&#20195;&#34920;&#19968;&#20010;&#21333;&#32447;&#31243;&#30340;&#21333;&#20803;&#25805;&#20316;&#65292;<tt class="literal">SessionFactory</tt>&#21017;&#26159;&#20010;&#32447;&#31243;&#23433;&#20840;&#30340;&#20840;&#23616;&#23545;&#35937;&#65292;&#21482;&#38656;&#35201;&#34987;&#23454;&#20363;&#21270;&#19968;&#27425;&#12290;
            </p><p>
	&#25105;&#20204;&#23558;&#21019;&#24314;&#19968;&#20010;<tt class="literal">HibernateUtil</tt>&#36741;&#21161;&#31867;&#65288;helper class&#65289;&#26469;&#36127;&#36131;&#21551;&#21160;Hibernate&#21644;&#26356;&#26041;&#20415;&#22320;&#25805;&#20316;<tt class="literal">SessionFactory</tt>&#12290;&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#19979;&#23427;&#30340;&#23454;&#29616;&#65306;
            </p><pre class="programlisting">package util;

import org.hibernate.*;
import org.hibernate.cfg.*;

public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from hibernate.cfg.xml
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

}</pre><p>
	&#36825;&#20010;&#31867;&#19981;&#20294;&#22312;&#23427;&#30340;&#38745;&#24577;&#21021;&#22987;&#21270;&#36807;&#31243;&#65288;&#20165;&#24403;&#21152;&#36733;&#36825;&#20010;&#31867;&#30340;&#26102;&#20505;&#34987;JVM&#25191;&#34892;&#19968;&#27425;&#65289;&#20013;&#20135;&#29983;&#20840;&#23616;&#30340;<tt class="literal">SessionFactory</tt>&#65292;&#32780;&#19988;&#38544;&#34255;&#20102;&#23427;&#20351;&#29992;&#20102;&#38745;&#24577;singleton&#30340;&#20107;&#23454;&#12290;&#23427;&#20063;&#21487;&#33021;&#22312;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#20013;&#30340;JNDI&#26597;&#25214;<tt class="literal">SessionFactory</tt>&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#32473;<tt class="literal">SessionFactory</tt>&#19968;&#20010;&#21517;&#23383;&#65292;&#22312;<tt class="literal">SessionFactory</tt>&#21019;&#24314;&#21518;&#65292;Hibernate&#20250;&#35797;&#30528;&#25226;&#23427;&#32465;&#23450;&#21040;JNDI&#12290;&#35201;&#23436;&#20840;&#36991;&#20813;&#36825;&#26679;&#30340;&#20195;&#30721;&#65292;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;JMX&#37096;&#32626;&#65292;&#35753;&#20855;&#26377;JMX&#33021;&#21147;&#30340;&#23481;&#22120;&#26469;&#23454;&#20363;&#21270;<tt class="literal">HibernateService</tt>&#24182;&#25226;&#23427;&#32465;&#23450;&#21040;JNDI&#12290;&#36825;&#20123;&#39640;&#32423;&#21487;&#36873;&#39033;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#20013;&#20250;&#35752;&#35770;&#21040;&#12290;
            </p><p>
                &#25226;<tt class="literal">HibernateUtil.java</tt>&#25918;&#22312;&#24320;&#21457;&#30446;&#24405;&#30340;&#28304;&#20195;&#30721;&#36335;&#24452;&#19979;&#65292;&#19982;&#25918;<tt class="literal">events</tt>&#30340;&#21253;&#24182;&#21015;&#65306;
            </p><pre class="programlisting">.
+lib
  &lt;Hibernate and third-party libraries&gt;
+src
  +events
    Event.java
    Event.hbm.xml
  +util
    HibernateUtil.java
  hibernate.cfg.xml
+data
build.xml</pre><p>
	&#20877;&#27425;&#32534;&#35793;&#36825;&#20010;&#24212;&#29992;&#31243;&#24207;&#24212;&#35813;&#19981;&#20250;&#26377;&#38382;&#39064;&#12290;&#26368;&#21518;&#25105;&#20204;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010;&#26085;&#24535;&#65288;logging)&#31995;&#32479; &#65293; Hibernate&#20351;&#29992;&#36890;&#29992;&#26085;&#24535;&#25509;&#21475;&#65292;&#20801;&#35768;&#20320;&#22312;Log4j&#21644;JDK 1.4 &#26085;&#24535;&#20043;&#38388;&#36827;&#34892;&#36873;&#25321;&#12290;&#22810;&#25968;&#24320;&#21457;&#32773;&#26356;&#21916;&#27426;Log4j&#65306;&#20174;Hibernate&#30340;&#21457;&#24067;&#21253;&#20013;&#65288;&#23427;&#22312;<tt class="literal">etc/</tt>&#30446;&#24405;&#19979;&#65289;&#25335;&#36125;<tt class="literal">log4j.properties</tt>&#21040;&#20320;&#30340;<tt class="literal">src</tt>&#30446;&#24405;&#65292;&#19982;<tt class="literal">hibernate.cfg.xml</tt>.&#25918;&#22312;&#19968;&#36215;&#12290;&#30475;&#19968;&#19979;&#37197;&#32622;&#31034;&#20363;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;&#30475;&#21040;&#26356;&#21152;&#35814;&#32454;&#30340;&#36755;&#20986;&#20449;&#24687;&#65292;&#20320;&#21487;&#20197;&#20462;&#25913;&#37197;&#32622;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#21482;&#26377;Hibernate&#30340;&#21551;&#21160;&#20449;&#24687;&#25165;&#20250;&#26174;&#31034;&#22312;&#26631;&#20934;&#36755;&#20986;&#19978;&#12290;
            </p><p>
	&#31034;&#20363;&#30340;&#22522;&#26412;&#26694;&#26550;&#23436;&#25104;&#20102; &#65293; &#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#29992;Hibernate&#26469;&#20570;&#20123;&#30495;&#27491;&#30340;&#24037;&#20316;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-firstapp-workingpersistence"></a>1.2.6.&nbsp;
	&#21152;&#36733;&#24182;&#23384;&#20648;&#23545;&#35937;
		</h3></div></div><div></div></div><p>
	&#25105;&#20204;&#32456;&#20110;&#21487;&#20197;&#20351;&#29992;Hibernate&#26469;&#21152;&#36733;&#21644;&#23384;&#20648;&#23545;&#35937;&#20102;&#65292;&#32534;&#20889;&#19968;&#20010;&#24102;&#26377;<tt class="literal">main()</tt>&#26041;&#27861;&#30340;<tt class="literal">EventManager</tt>&#31867;&#65306;

            </p><pre class="programlisting">package events;
import org.hibernate.Session;

import java.util.Date;

import util.HibernateUtil;

public class EventManager {

    public static void main(String[] args) {
        EventManager mgr = new EventManager();

        if (args[0].equals("store")) {
            mgr.createAndStoreEvent("My Event", new Date());
        }

        HibernateUtil.getSessionFactory().close();
    }

    private void createAndStoreEvent(String title, Date theDate) {

        Session session = HibernateUtil.getSessionFactory().getCurrentSession();

        session.beginTransaction();

        Event theEvent = new Event();
        theEvent.setTitle(title);
        theEvent.setDate(theDate);

        session.save(theEvent);

        session.getTransaction().commit();
    }

}</pre><p>
	&#25105;&#20204;&#21019;&#24314;&#20102;&#20010;&#26032;&#30340;<tt class="literal">Event</tt>&#23545;&#35937;&#24182;&#25226;&#23427;&#20256;&#36882;&#32473;Hibernate&#12290;&#29616;&#22312;Hibernate&#36127;&#36131;&#19982;SQL&#25171;&#20132;&#36947;&#65292;&#24182;&#25226;<tt class="literal">INSERT</tt>&#21629;&#20196;&#20256;&#32473;&#25968;&#25454;&#24211;&#12290;&#22312;&#36816;&#34892;&#20043;&#21069;&#65292;&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;&#22788;&#29702;<tt class="literal">Session</tt>&#21644;<tt class="literal">Transaction</tt>&#30340;&#20195;&#30721;&#12290;
		
            </p><p>
                &#19968;&#20010;<tt class="literal">Session</tt>&#23601;&#26159;&#20010;&#21333;&#19968;&#30340;&#24037;&#20316;&#21333;&#20803;&#12290;&#25105;&#20204;&#26242;&#26102;&#35753;&#20107;&#24773;&#31616;&#21333;&#19968;&#20123;&#65292;&#24182;&#20551;&#35774;Hibernate<tt class="literal">Session</tt>&#21644;&#25968;&#25454;&#24211;&#20107;&#21153;&#26159;&#19968;&#19968;&#23545;&#24212;&#30340;&#12290;&#20026;&#20102;&#35753;&#25105;&#20204;&#30340;&#20195;&#30721;&#20174;&#24213;&#23618;&#30340;&#20107;&#21153;&#31995;&#32479;&#20013;&#33073;&#31163;&#20986;&#26469;&#65288;&#27492;&#20363;&#20013;&#26159;JDBC&#65292;&#20294;&#20063;&#21487;&#33021;&#26159;JTA&#65289;&#65292;&#25105;&#20204;&#20351;&#29992;Hibernate <tt class="literal">Session</tt>&#20013;&#30340;<tt class="literal">Transaction</tt> API&#12290;
            </p><p>
                <tt class="literal">sessionFactory.getCurrentSession()</tt>&#26159;&#24178;&#20160;&#20040;&#30340;&#21602;&#65311;&#39318;&#20808;&#65292;&#21482;&#35201;&#20320;&#25345;&#26377;<tt class="literal">SessionFactory</tt>&#65288;&#24184;&#20111;&#25105;&#20204;&#26377;<tt class="literal">HibernateUtil</tt>&#65292;&#21487;&#20197;&#38543;&#26102;&#33719;&#24471;&#65289;&#65292;&#22823;&#21487;&#22312;&#20219;&#20309;&#26102;&#20505;&#12289;&#20219;&#20309;&#22320;&#28857;&#35843;&#29992;&#36825;&#20010;&#26041;&#27861;&#12290;<tt class="literal">getCurrentSession()</tt>&#26041;&#27861;&#24635;&#20250;&#36820;&#22238;&#8220;&#24403;&#21069;&#30340;&#8221;&#24037;&#20316;&#21333;&#20803;&#12290;&#35760;&#24471;&#25105;&#20204;&#22312;<tt class="literal">hibernate.cfg.xml</tt>&#20013;&#25226;&#36825;&#19968;&#37197;&#32622;&#36873;&#39033;&#35843;&#25972;&#20026;"thread"&#20102;&#21527;&#65311;&#22240;&#27492;&#65292;&#24403;&#21069;&#24037;&#20316;&#21333;&#20803;&#30340;&#33539;&#22260;&#23601;&#26159;&#24403;&#21069;&#25191;&#34892;&#25105;&#20204;&#24212;&#29992;&#31243;&#24207;&#30340;Java&#32447;&#31243;&#12290;&#20294;&#26159;&#65292;&#36825;&#24182;&#38750;&#24635;&#26159;&#27491;&#30830;&#30340;&#12290; <tt class="literal">Session</tt>&#22312;&#31532;&#19968;&#27425;&#34987;&#20351;&#29992;&#30340;&#26102;&#20505;,&#25110;&#32773;&#31532;&#19968;&#27425;&#35843;&#29992;<tt class="literal">getCurrentSession()</tt>&#30340;&#26102;&#20505;,&#20854;&#29983;&#21629;&#21608;&#26399;&#23601;&#24320;&#22987;&#12290;&#28982;&#21518;&#23427;&#34987;Hibernate&#32465;&#23450;&#21040;&#24403;&#21069;&#32447;&#31243;&#12290;&#24403;&#20107;&#21153;&#32467;&#26463;&#30340;&#26102;&#20505;&#65292;&#19981;&#31649;&#26159;&#25552;&#20132;&#36824;&#26159;&#22238;&#28378;&#65292;Hibernate&#20063;&#20250;&#25226;<tt class="literal">Session</tt>&#20174;&#24403;&#21069;&#32447;&#31243;&#21093;&#31163;&#65292;&#24182;&#19988;&#20851;&#38381;&#23427;&#12290;&#20551;&#33509;&#20320;&#20877;&#27425;&#35843;&#29992;<tt class="literal">getCurrentSession()</tt>&#65292;&#20320;&#20250;&#24471;&#21040;&#19968;&#20010;&#26032;&#30340;<tt class="literal">Session</tt>&#65292;&#24182;&#19988;&#24320;&#22987;&#19968;&#20010;&#26032;&#30340;&#24037;&#20316;&#21333;&#20803;&#12290;&#36825;&#31181;<span class="emphasis"><em>&#32447;&#31243;&#32465;&#23450;(thread-bound)</em></span>&#30340;&#32534;&#31243;&#27169;&#22411;&#65288;model&#65289;&#26159;&#20351;&#29992;Hibernate&#30340;&#26368;&#24191;&#27867;&#30340;&#26041;&#24335;&#12290;
            </p><p>
                &#20851;&#20110;&#20107;&#21153;&#22788;&#29702;&#21450;&#20107;&#21153;&#36793;&#30028;&#30028;&#23450;&#30340;&#35814;&#32454;&#20449;&#24687;&#65292;&#35831;&#21442;&#30475;<a href="#transactions" title="&#31532;&nbsp;11&nbsp;&#31456;&nbsp;&#20107;&#21153;&#21644;&#24182;&#21457;">&#31532;&nbsp;11&nbsp;&#31456; <i>&#20107;&#21153;&#21644;&#24182;&#21457;</i></a>&#12290;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20063;&#24573;&#30053;&#20102;&#25152;&#26377;&#30340;&#38169;&#35823;&#19982;&#22238;&#28378;&#30340;&#22788;&#29702;&#12290;
            </p><p>
	&#20026;&#31532;&#19968;&#27425;&#36816;&#34892;&#25105;&#20204;&#30340;&#31243;&#24207;&#65292;&#25105;&#20204;&#24471;&#22312;Ant&#30340;build&#25991;&#20214;&#20013;&#22686;&#21152;&#19968;&#20010;&#21487;&#20197;&#35843;&#29992;&#24471;&#21040;&#30340;target&#12290;
            </p><pre class="programlisting">&lt;target name="run" depends="compile"&gt;
    &lt;java fork="true" classname="events.EventManager" classpathref="libraries"&gt;
        &lt;classpath path="${targetdir}"/&gt;
        &lt;arg value="${action}"/&gt;
    &lt;/java&gt;
&lt;/target&gt;</pre><p>
                <tt class="literal">action</tt>&#21442;&#25968;&#65288;argument&#65289;&#30340;&#20540;&#26159;&#36890;&#36807;&#21629;&#20196;&#34892;&#35843;&#29992;&#36825;&#20010;target&#30340;&#26102;&#20505;&#35774;&#32622;&#30340;&#65306;
            </p><pre class="programlisting">C:\hibernateTutorial\&gt;ant run -Daction=store</pre><p>
	&#20320;&#24212;&#35813;&#20250;&#30475;&#21040;&#65292;&#32534;&#35793;&#20197;&#21518;&#65292;Hibernate&#26681;&#25454;&#20320;&#30340;&#37197;&#32622;&#21551;&#21160;&#65292;&#24182;&#20135;&#29983;&#19968;&#22823;&#22534;&#30340;&#36755;&#20986;&#26085;&#24535;&#12290;&#22312;&#26085;&#24535;&#26368;&#21518;&#20320;&#20250;&#30475;&#21040;&#19979;&#38754;&#36825;&#34892;&#65306;
            </p><pre class="programlisting">[java] Hibernate: insert into EVENTS (EVENT_DATE, title, EVENT_ID) values (?, ?, ?)</pre><p>
	&#36825;&#26159;Hibernate&#25191;&#34892;&#30340;<tt class="literal">INSERT</tt>&#21629;&#20196;&#65292;&#38382;&#21495;&#20195;&#34920;JDBC&#30340;&#32465;&#23450;&#21442;&#25968;&#12290;&#22914;&#26524;&#24819;&#35201;&#30475;&#21040;&#32465;&#23450;&#21442;&#25968;&#30340;&#20540;&#25110;&#32773;&#20943;&#23569;&#26085;&#24535;&#30340;&#38271;&#24230;&#65292;&#23601;&#35201;&#35843;&#25972;&#20320;&#22312;<tt class="literal">log4j.properties</tt>&#25991;&#20214;&#37324;&#30340;&#35774;&#32622;&#12290;
            </p><p>
	&#25105;&#20204;&#24819;&#35201;&#21015;&#20986;&#25152;&#26377;&#24050;&#32463;&#34987;&#23384;&#20648;&#30340;events&#65292;&#23601;&#35201;&#22686;&#21152;&#19968;&#20010;&#26465;&#20214;&#20998;&#25903;&#36873;&#39033;&#21040;main&#26041;&#27861;&#20013;&#21435;&#12290;
            </p><pre class="programlisting">if (args[0].equals("store")) {
    mgr.createAndStoreEvent("My Event", new Date());
}
else if (args[0].equals("list")) {
    List events = mgr.listEvents();
    for (int i = 0; i &lt; events.size(); i++) {
        Event theEvent = (Event) events.get(i);
        System.out.println("Event: " + theEvent.getTitle() +
                           " Time: " + theEvent.getDate());
    }
}</pre><p>
	&#25105;&#20204;&#20063;&#22686;&#21152;&#19968;&#20010;&#26032;&#30340;<tt class="literal">listEvents()</tt>&#26041;&#27861;:
            </p><pre class="programlisting">private List listEvents() {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();

    session.beginTransaction();

    List result = session.createQuery("from Event").list();

    session.getTransaction().commit();

    return result;
}</pre><p>
	&#25105;&#20204;&#22312;&#36825;&#37324;&#26159;&#29992;&#19968;&#20010;HQL&#65288;Hibernate Query Language&#65293;Hibernate&#26597;&#35810;&#35821;&#35328;&#65289;&#26597;&#35810;&#35821;&#21477;&#26469;&#20174;&#25968;&#25454;&#24211;&#20013;&#21152;&#36733;&#25152;&#26377;&#23384;&#22312;&#30340;<tt class="literal">Event</tt>&#23545;&#35937;&#12290;Hibernate&#20250;&#29983;&#25104;&#36866;&#24403;&#30340;SQL&#65292;&#25226;&#23427;&#21457;&#36865;&#21040;&#25968;&#25454;&#24211;&#65292;&#24182;&#25805;&#20316;&#20174;&#26597;&#35810;&#24471;&#21040;&#25968;&#25454;&#30340;<tt class="literal">Event</tt>&#23545;&#35937;&#12290;&#24403;&#28982;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;HQL&#26469;&#21019;&#24314;&#26356;&#21152;&#22797;&#26434;&#30340;&#26597;&#35810;&#12290;
            </p><p>
	&#29616;&#22312;&#65292;&#26681;&#25454;&#20197;&#19979;&#27493;&#39588;&#26469;&#25191;&#34892;&#24182;&#27979;&#35797;&#20197;&#19978;&#21508;&#39033;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                        &#36816;&#34892;<tt class="literal">ant run -Daction=store</tt>&#26469;&#20445;&#23384;&#19968;&#20123;&#20869;&#23481;&#21040;&#25968;&#25454;&#24211;&#12290;&#24403;&#28982;&#65292;&#20808;&#24471;&#29992;hbm2ddl&#26469;&#29983;&#25104;&#25968;&#25454;&#24211;schema&#12290;
                    </p></li><li><p>
                        &#29616;&#22312;&#25226;<tt class="literal">hibernate.cfg.xml</tt>&#25991;&#20214;&#20013;hbm2ddl&#23646;&#24615;&#27880;&#37322;&#25481;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21462;&#28040;&#20102;&#22312;&#21551;&#21160;&#26102;&#29992;hbm2ddl&#26469;&#29983;&#25104;&#25968;&#25454;&#24211;schema&#12290;&#36890;&#24120;&#21482;&#26377;&#22312;&#19981;&#26029;&#37325;&#22797;&#36827;&#34892;&#21333;&#20803;&#27979;&#35797;&#30340;&#26102;&#20505;&#25165;&#38656;&#35201;&#25171;&#24320;&#23427;&#65292;&#20294;&#20877;&#27425;&#36816;&#34892;hbm2ddl&#20250;&#25226;&#20320;&#20445;&#23384;&#30340;&#19968;&#20999;&#37117;&#21024;&#25481;&#65288;<span class="emphasis"><em>drop</em></span>&#65289;&#8212;&#8212;<tt class="literal">create</tt>&#37197;&#32622;&#30340;&#30495;&#23454;&#21547;&#20041;&#26159;&#65306;&#8220;&#22312;&#21019;&#24314;SessionFactory&#30340;&#26102;&#20505;&#65292;&#20174;schema &#20013;drop &#25481;&#25152;&#26377;&#30340;&#34920;&#65292;&#20877;&#37325;&#26032;&#21019;&#24314;&#23427;&#20204;&#8221;&#12290;
                    </p></li></ul></div><p>
	&#22914;&#26524;&#20320;&#29616;&#22312;&#20351;&#29992;&#21629;&#20196;&#34892;&#21442;&#25968;<tt class="literal">-Daction=list</tt>&#36816;&#34892;Ant&#65292;&#20320;&#20250;&#30475;&#21040;&#37027;&#20123;&#33267;&#20170;&#20026;&#27490;&#25105;&#20204;&#25152;&#20648;&#23384;&#30340;events&#12290;&#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#22810;&#35843;&#29992;&#20960;&#27425;<tt class="literal">store</tt>&#20197;&#20445;&#23384;&#26356;&#22810;&#30340;envents&#12290;
            </p><p>
                &#27880;&#24847;&#65292;&#24456;&#22810;Hibernate&#26032;&#25163;&#22312;&#36825;&#19968;&#27493;&#20250;&#22833;&#36133;&#65292;&#25105;&#20204;&#19981;&#26102;&#30475;&#21040;&#20851;&#20110;<span class="emphasis"><em>Table not found</em></span>&#38169;&#35823;&#20449;&#24687;&#30340;&#25552;&#38382;&#12290;&#20294;&#26159;&#65292;&#21482;&#35201;&#20320;&#26681;&#25454;&#19978;&#38754;&#25551;&#36848;&#30340;&#27493;&#39588;&#26469;&#25191;&#34892;&#65292;&#23601;&#19981;&#20250;&#26377;&#36825;&#20010;&#38382;&#39064;&#65292;&#22240;&#20026;hbm2ddl&#20250;&#22312;&#31532;&#19968;&#27425;&#36816;&#34892;&#30340;&#26102;&#20505;&#21019;&#24314;&#25968;&#25454;&#24211;schema&#65292;&#21518;&#32487;&#30340;&#24212;&#29992;&#31243;&#24207;&#37325;&#36215;&#21518;&#36824;&#33021;&#32487;&#32493;&#20351;&#29992;&#36825;&#20010;schema&#12290;&#20551;&#33509;&#20320;&#20462;&#25913;&#20102;&#26144;&#23556;&#65292;&#25110;&#32773;&#20462;&#25913;&#20102;&#25968;&#25454;&#24211;schema&#65292;&#20320;&#24517;&#39035;&#25226;hbm2ddl&#37325;&#26032;&#25171;&#24320;&#19968;&#27425;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tutorial-associations"></a>1.3.&nbsp;
	&#31532;&#20108;&#37096;&#20998; &#65293; &#20851;&#32852;&#26144;&#23556;
	</h2></div></div><div></div></div><p>
	&#25105;&#20204;&#24050;&#32463;&#26144;&#23556;&#20102;&#19968;&#20010;&#25345;&#20037;&#21270;&#23454;&#20307;&#31867;&#21040;&#34920;&#19978;&#12290;&#35753;&#25105;&#20204;&#22312;&#36825;&#20010;&#22522;&#30784;&#19978;&#22686;&#21152;&#19968;&#20123;&#31867;&#20043;&#38388;&#30340;&#20851;&#32852;&#12290;&#39318;&#20808;&#25105;&#20204;&#24448;&#24212;&#29992;&#31243;&#24207;&#37324;&#22686;&#21152;&#20154;&#65288;people&#65289;&#30340;&#27010;&#24565;&#65292;&#24182;&#23384;&#20648;&#20182;&#20204;&#25152;&#21442;&#19982;&#30340;&#19968;&#20010;Event&#21015;&#34920;&#12290;&#65288;&#35793;&#32773;&#27880;&#65306;&#19982;Event&#19968;&#26679;&#65292;&#25105;&#20204;&#22312;&#21518;&#38754;&#23558;&#30452;&#25509;&#20351;&#29992;person&#26469;&#34920;&#31034;&#8220;&#20154;&#8221;&#32780;&#19981;&#26159;&#23427;&#30340;&#20013;&#25991;&#32763;&#35793;&#65289;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-associations-mappinguser"></a>1.3.1.&nbsp;
	&#26144;&#23556;Person&#31867;
		</h3></div></div><div></div></div><p>
	&#26368;&#21021;&#31616;&#21333;&#30340;<tt class="literal">Person</tt>&#31867;&#65306;
            </p><pre class="programlisting">package events;

public class Person {

    private Long id;
    private int age;
    private String firstname;
    private String lastname;

    public Person() {}

    // Accessor methods for all properties, private setter for 'id'

}</pre><p>
                &#21019;&#24314;&#19968;&#20010;&#21517;&#20026;<tt class="literal">Person.hbm.xml</tt>&#30340;&#26032;&#26144;&#23556;&#25991;&#20214;&#65288;&#21035;&#24536;&#20102;&#26368;&#19978;&#38754;&#30340;DTD&#24341;&#29992;&#65289;&#65306;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="events.Person" table="PERSON"&gt;
        &lt;id name="id" column="PERSON_ID"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="age"/&gt;
        &lt;property name="firstname"/&gt;
        &lt;property name="lastname"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#26368;&#21518;&#65292;&#25226;&#26032;&#30340;&#26144;&#23556;&#21152;&#20837;&#21040;Hibernate&#30340;&#37197;&#32622;&#20013;&#65306;
            </p><pre class="programlisting">&lt;mapping resource="events/Event.hbm.xml"/&gt;
&lt;mapping resource="events/Person.hbm.xml"/&gt;</pre><p>
	&#29616;&#22312;&#25105;&#20204;&#22312;&#36825;&#20004;&#20010;&#23454;&#20307;&#20043;&#38388;&#21019;&#24314;&#19968;&#20010;&#20851;&#32852;&#12290;&#26174;&#28982;&#65292;persons&#21487;&#20197;&#21442;&#19982;&#19968;&#31995;&#21015;events&#65292;&#32780;events&#20063;&#26377;&#19981;&#21516;&#30340;&#21442;&#21152;&#32773;&#65288;persons&#65289;&#12290;&#25105;&#20204;&#38656;&#35201;&#22788;&#29702;&#30340;&#35774;&#35745;&#38382;&#39064;&#26159;&#20851;&#32852;&#26041;&#21521;&#65288;directionality&#65289;&#65292;&#38454;&#25968;&#65288;multiplicity&#65289;&#21644;&#38598;&#21512;&#65288;collection&#65289;&#30340;&#34892;&#20026;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-associations-unidirset"></a>1.3.2.&nbsp;
	&#21333;&#21521;Set-based&#30340;&#20851;&#32852;
		</h3></div></div><div></div></div><p>
	&#25105;&#20204;&#23558;&#21521;<tt class="literal">Person</tt>&#31867;&#22686;&#21152;&#19968;&#36830;&#20018;&#30340;events&#12290;&#37027;&#26679;&#65292;&#36890;&#36807;&#35843;&#29992;<tt class="literal">aPerson.getEvents()</tt>&#65292;&#23601;&#21487;&#20197;&#36731;&#26494;&#22320;&#23548;&#33322;&#21040;&#29305;&#23450;person&#25152;&#21442;&#19982;&#30340;events&#65292;&#32780;&#19981;&#29992;&#21435;&#25191;&#34892;&#19968;&#20010;&#26174;&#24335;&#30340;&#26597;&#35810;&#12290;&#25105;&#20204;&#20351;&#29992;Java&#30340;&#38598;&#21512;&#31867;&#65288;collection&#65289;&#65306;<tt class="literal">Set</tt>&#65292;&#22240;&#20026;set &#19981;&#21253;&#21547;&#37325;&#22797;&#30340;&#20803;&#32032;&#21450;&#19982;&#25105;&#20204;&#26080;&#20851;&#30340;&#25490;&#24207;&#12290;
            </p><p>
	&#25105;&#20204;&#38656;&#35201;&#29992;set &#23454;&#29616;&#19968;&#20010;&#21333;&#21521;&#22810;&#20540;&#20851;&#32852;&#12290;&#35753;&#25105;&#20204;&#22312;Java&#31867;&#37324;&#20026;&#36825;&#20010;&#20851;&#32852;&#32534;&#30721;&#65292;&#25509;&#30528;&#26144;&#23556;&#23427;&#65306;
            </p><pre class="programlisting">public class Person {

    private Set events = new HashSet();

    public Set getEvents() {
        return events;
    }

    public void setEvents(Set events) {
        this.events = events;
    }
}</pre><p>
	&#22312;&#26144;&#23556;&#36825;&#20010;&#20851;&#32852;&#20043;&#21069;&#65292;&#20808;&#32771;&#34385;&#19968;&#19979;&#27492;&#20851;&#32852;&#30340;&#21478;&#22806;&#19968;&#31471;&#12290;&#24456;&#26174;&#28982;&#65292;&#25105;&#20204;&#21487;&#20197;&#20445;&#25345;&#36825;&#20010;&#20851;&#32852;&#26159;&#21333;&#21521;&#30340;&#12290;&#25110;&#32773;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;<tt class="literal">Event</tt>&#37324;&#21019;&#24314;&#21478;&#22806;&#19968;&#20010;&#38598;&#21512;&#65292;&#22914;&#26524;&#24076;&#26395;&#33021;&#22815;&#21452;&#21521;&#22320;&#23548;&#33322;&#65292;&#22914;&#65306;<tt class="literal">anEvent.getParticipants()</tt>&#12290;&#20174;&#21151;&#33021;&#30340;&#35282;&#24230;&#26469;&#35828;&#65292;&#36825;&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#12290;&#22240;&#20026;&#20320;&#24635;&#21487;&#20197;&#26174;&#24335;&#22320;&#25191;&#34892;&#19968;&#20010;&#26597;&#35810;&#65292;&#20197;&#33719;&#24471;&#26576;&#20010;&#29305;&#23450;event&#30340;&#25152;&#26377;&#21442;&#19982;&#32773;&#12290;&#36825;&#26159;&#20010;&#22312;&#35774;&#35745;&#26102;&#38656;&#35201;&#20570;&#20986;&#30340;&#36873;&#25321;&#65292;&#23436;&#20840;&#30001;&#20320;&#26469;&#20915;&#23450;&#65292;&#20294;&#27492;&#35752;&#35770;&#20013;&#20851;&#20110;&#20851;&#32852;&#30340;&#38454;&#25968;&#26159;&#28165;&#26970;&#30340;&#65306;&#21363;&#20004;&#31471;&#37117;&#26159;&#8220;&#22810;&#8221;&#20540;&#30340;&#65292;&#25105;&#20204;&#25226;&#23427;&#21483;&#20570;<span class="emphasis"><em>&#22810;&#23545;&#22810;(many-to-many)</em></span>&#20851;&#32852;&#12290;&#22240;&#32780;&#65292;&#25105;&#20204;&#20351;&#29992;Hibernate&#30340;&#22810;&#23545;&#22810;&#26144;&#23556;&#65306;
            </p><pre class="programlisting">&lt;class name="events.Person" table="PERSON"&gt;
    &lt;id name="id" column="PERSON_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="age"/&gt;
    &lt;property name="firstname"/&gt;
    &lt;property name="lastname"/&gt;

    &lt;set name="events" table="PERSON_EVENT"&gt;
        &lt;key column="PERSON_ID"/&gt;
        &lt;many-to-many column="EVENT_ID" class="events.Event"/&gt;
    &lt;/set&gt;

&lt;/class&gt;</pre><p>
	Hibernate&#25903;&#25345;&#21508;&#31181;&#21508;&#26679;&#30340;&#38598;&#21512;&#26144;&#23556;&#65292;<tt class="literal">&lt;set&gt;</tt>&#20351;&#29992;&#30340;&#26368;&#20026;&#26222;&#36941;&#12290;&#23545;&#20110;&#22810;&#23545;&#22810;&#20851;&#32852;&#65288;&#25110;&#21483;<span class="emphasis"><em>n:m</em></span>&#23454;&#20307;&#20851;&#31995;&#65289;, &#38656;&#35201;&#19968;&#20010;&#20851;&#32852;&#34920;&#65288;association table&#65289;&#12290;<tt class="literal">&#34920;</tt>&#37324;&#38754;&#30340;&#27599;&#19968;&#34892;&#20195;&#34920;&#20174;person&#21040;event&#30340;&#19968;&#20010;&#20851;&#32852;&#12290;&#34920;&#21517;&#26159;&#30001;<tt class="literal">set</tt>&#20803;&#32032;&#30340;<tt class="literal">table</tt>&#23646;&#24615;&#37197;&#32622;&#30340;&#12290;&#20851;&#32852;&#37324;&#38754;&#30340;&#26631;&#35782;&#31526;&#23383;&#27573;&#21517;&#65292;&#23545;&#20110;person&#30340;&#19968;&#31471;&#65292;&#26159;&#30001;<tt class="literal">&lt;key&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#65292;&#32780;event&#19968;&#31471;&#30340;&#23383;&#27573;&#21517;&#26159;&#30001;<tt class="literal">&lt;many-to-many&gt;</tt>&#20803;&#32032;&#30340;<tt class="literal">column</tt>&#23646;&#24615;&#23450;&#20041;&#12290;&#20320;&#20063;&#24517;&#39035;&#21578;&#35785;Hibernate&#38598;&#21512;&#20013;&#23545;&#35937;&#30340;&#31867;&#65288;&#20063;&#23601;&#26159;&#20301;&#20110;&#36825;&#20010;&#38598;&#21512;&#25152;&#20195;&#34920;&#30340;&#20851;&#32852;&#21478;&#22806;&#19968;&#31471;&#30340;&#31867;&#65289;&#12290;
            </p><p>
	 &#22240;&#32780;&#36825;&#20010;&#26144;&#23556;&#30340;&#25968;&#25454;&#24211;schema&#26159;&#65306;
            </p><pre class="programlisting">
    _____________        __________________
   |             |      |                  |       _____________
   |   EVENTS    |      |   PERSON_EVENT   |      |             |
   |_____________|      |__________________|      |    PERSON   |
   |             |      |                  |      |_____________|
   | *EVENT_ID   | &lt;--&gt; | *EVENT_ID        |      |             |
   |  EVENT_DATE |      | *PERSON_ID       | &lt;--&gt; | *PERSON_ID  |
   |  TITLE      |      |__________________|      |  AGE        |
   |_____________|                                |  FIRSTNAME  |
                                                  |  LASTNAME   |
                                                  |_____________|
 </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-associations-working"></a>1.3.3.&nbsp;
	&#20351;&#20851;&#32852;&#24037;&#20316;
	</h3></div></div><div></div></div><p>
	&#25105;&#20204;&#25226;&#19968;&#20123;people&#21644;events &#19968;&#36215;&#25918;&#21040;<tt class="literal">EventManager</tt>&#30340;&#26032;&#26041;&#27861;&#20013;&#65306;
            </p><pre class="programlisting">private void addPersonToEvent(Long personId, Long eventId) {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();

    Person aPerson = (Person) session.load(Person.class, personId);
    Event anEvent = (Event) session.load(Event.class, eventId);

    aPerson.getEvents().add(anEvent);

    session.getTransaction().commit();
}</pre><p>
	&#22312;&#21152;&#36733;&#19968;<tt class="literal">Person</tt>&#21644;<tt class="literal">Event</tt>&#21518;&#65292;&#20351;&#29992;&#26222;&#36890;&#30340;&#38598;&#21512;&#26041;&#27861;&#23601;&#21487;&#23481;&#26131;&#22320;&#20462;&#25913;&#25105;&#20204;&#23450;&#20041;&#30340;&#38598;&#21512;&#12290;&#22914;&#20320;&#25152;&#35265;&#65292;&#27809;&#26377;&#26174;&#24335;&#30340;<tt class="literal">update()</tt>&#25110;<tt class="literal">save()</tt>&#65292;Hibernate&#20250;&#33258;&#21160;&#26816;&#27979;&#21040;&#38598;&#21512;&#24050;&#32463;&#34987;&#20462;&#25913;&#24182;&#38656;&#35201;&#26356;&#26032;&#22238;&#25968;&#25454;&#24211;&#12290;&#36825;&#21483;&#20570;&#33258;&#21160;&#33039;&#26816;&#26597;&#65288;<span class="emphasis"><em>automatic dirty checking</em></span>&#65289;&#65292;&#20320;&#20063;&#21487;&#20197;&#23581;&#35797;&#20462;&#25913;&#20219;&#20309;&#23545;&#35937;&#30340;name&#25110;&#32773;date&#23646;&#24615;&#65292;&#21482;&#35201;&#20182;&#20204;&#22788;&#20110;<span class="emphasis"><em>&#25345;&#20037;&#21270;</em></span>&#29366;&#24577;&#65292;&#20063;&#23601;&#26159;&#34987;&#32465;&#23450;&#21040;&#26576;&#20010;Hibernate &#30340;<tt class="literal">Session</tt>&#19978;&#65288;&#22914;&#65306;&#20182;&#20204;&#21018;&#21018;&#22312;&#19968;&#20010;&#21333;&#20803;&#25805;&#20316;&#34987;&#21152;&#36733;&#25110;&#32773;&#20445;&#23384;&#65289;&#65292;Hibernate&#30417;&#35270;&#20219;&#20309;&#25913;&#21464;&#24182;&#22312;&#21518;&#21488;&#38544;&#24335;&#20889;&#30340;&#26041;&#24335;&#25191;&#34892;SQL&#12290;&#21516;&#27493;&#20869;&#23384;&#29366;&#24577;&#21644;&#25968;&#25454;&#24211;&#30340;&#36807;&#31243;&#65292;&#36890;&#24120;&#21482;&#22312;&#21333;&#20803;&#25805;&#20316;&#32467;&#26463;&#30340;&#26102;&#20505;&#21457;&#29983;&#65292;&#31216;&#27492;&#36807;&#31243;&#20026;&#28165;&#29702;&#32531;&#23384;<span class="emphasis"><em>&#65288;flushing&#65289;</em></span>&#12290;&#22312;&#25105;&#20204;&#30340;&#20195;&#30721;&#20013;&#65292;&#24037;&#20316;&#21333;&#20803;&#30001;&#25968;&#25454;&#24211;&#20107;&#21153;&#30340;&#25552;&#20132;&#65288;&#25110;&#32773;&#22238;&#28378;&#65289;&#26469;&#32467;&#26463;&#8212;&#8212;&#36825;&#26159;&#30001;<tt class="literal">CurrentSessionContext</tt>&#31867;&#30340;<tt class="literal">thread</tt>&#37197;&#32622;&#36873;&#39033;&#23450;&#20041;&#30340;&#12290;
            </p><p>
	&#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#22312;&#19981;&#21516;&#30340;&#21333;&#20803;&#25805;&#20316;&#37324;&#38754;&#21152;&#36733;person&#21644;event&#12290;&#25110;&#22312;<tt class="literal">Session</tt>&#20197;&#22806;&#20462;&#25913;&#19981;&#26159;&#22788;&#22312;&#25345;&#20037;&#21270;&#65288;persistent&#65289;&#29366;&#24577;&#19979;&#30340;&#23545;&#35937;&#65288;&#22914;&#26524;&#35813;&#23545;&#35937;&#20197;&#21069;&#26366;&#32463;&#34987;&#25345;&#20037;&#21270;&#65292;&#37027;&#20040;&#25105;&#20204;&#31216;&#36825;&#20010;&#29366;&#24577;&#20026;<span class="emphasis"><em>&#33073;&#31649;&#65288;detached&#65289;</em></span>&#65289;&#12290;&#20320;&#29978;&#33267;&#21487;&#20197;&#22312;&#19968;&#20010;&#38598;&#21512;&#34987;&#33073;&#31649;&#26102;&#20462;&#25913;&#23427;&#65306;
            </p><pre class="programlisting">private void addPersonToEvent(Long personId, Long eventId) {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();

    Person aPerson = (Person) session
            .createQuery("select p from Person p left join fetch p.events where p.id = :pid")
            .setParameter("pid", personId)
            .uniqueResult(); // Eager fetch the collection so we can use it detached

    Event anEvent = (Event) session.load(Event.class, eventId);

    session.getTransaction().commit();

    // End of first unit of work

    aPerson.getEvents().add(anEvent); // aPerson (and its collection) is detached

    // Begin second unit of work

    Session session2 = HibernateUtil.getSessionFactory().getCurrentSession();
    session2.beginTransaction();

    session2.update(aPerson); // Reattachment of aPerson

    session2.getTransaction().commit();
}</pre><p>
	&#23545;<tt class="literal">update</tt>&#30340;&#35843;&#29992;&#20351;&#19968;&#20010;&#33073;&#31649;&#23545;&#35937;&#37325;&#26032;&#25345;&#20037;&#21270;&#65292;&#20320;&#21487;&#20197;&#35828;&#23427;&#34987;&#32465;&#23450;&#21040;&#19968;&#20010;&#26032;&#30340;&#21333;&#20803;&#25805;&#20316;&#19978;&#65292;&#25152;&#20197;&#22312;&#33073;&#31649;&#29366;&#24577;&#19979;&#23545;&#23427;&#25152;&#20570;&#30340;&#20219;&#20309;&#20462;&#25913;&#37117;&#20250;&#34987;&#20445;&#23384;&#21040;&#25968;&#25454;&#24211;&#37324;&#12290;&#36825;&#20063;&#21253;&#25324;&#20320;&#23545;&#36825;&#20010;&#23454;&#20307;&#23545;&#35937;&#30340;&#38598;&#21512;&#25152;&#20316;&#30340;&#20219;&#20309;&#25913;&#21160;&#65288;&#22686;&#21152;/&#21024;&#38500;&#65289;&#12290;
            </p><p>
	&#36825;&#23545;&#25105;&#20204;&#24403;&#21069;&#30340;&#24773;&#24418;&#19981;&#26159;&#24456;&#26377;&#29992;&#65292;&#20294;&#23427;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#27010;&#24565;&#65292;&#20320;&#21487;&#20197;&#25226;&#23427;&#34701;&#20837;&#21040;&#20320;&#33258;&#24049;&#30340;&#24212;&#29992;&#31243;&#24207;&#35774;&#35745;&#20013;&#12290;&#22312;<tt class="literal">EventManager</tt>&#30340;main&#26041;&#27861;&#20013;&#28155;&#21152;&#19968;&#20010;&#26032;&#30340;&#21160;&#20316;&#65292;&#24182;&#20174;&#21629;&#20196;&#34892;&#36816;&#34892;&#23427;&#26469;&#23436;&#25104;&#25105;&#20204;&#25152;&#20570;&#30340;&#32451;&#20064;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;person&#21450;event&#30340;&#26631;&#35782;&#31526; &#8212; &#37027;&#23601;&#29992;<tt class="literal">save()</tt>&#26041;&#27861;&#36820;&#22238;&#23427;&#65288;&#20320;&#21487;&#33021;&#38656;&#35201;&#20462;&#25913;&#21069;&#38754;&#30340;&#19968;&#20123;&#26041;&#27861;&#26469;&#36820;&#22238;&#37027;&#20010;&#26631;&#35782;&#31526;&#65289;&#65306;
            </p><pre class="programlisting">else if (args[0].equals("addpersontoevent")) {
    Long eventId = mgr.createAndStoreEvent("My Event", new Date());
    Long personId = mgr.createAndStorePerson("Foo", "Bar");
    mgr.addPersonToEvent(personId, eventId);
    System.out.println("Added person " + personId + " to event " + eventId);</pre><p>
	&#19978;&#38754;&#26159;&#20010;&#20851;&#20110;&#20004;&#20010;&#21516;&#31561;&#37325;&#35201;&#30340;&#23454;&#20307;&#31867;&#38388;&#20851;&#32852;&#30340;&#20363;&#23376;&#12290;&#20687;&#21069;&#38754;&#25152;&#25552;&#21040;&#30340;&#37027;&#26679;&#65292;&#22312;&#29305;&#23450;&#30340;&#27169;&#22411;&#20013;&#20063;&#23384;&#22312;&#20854;&#23427;&#30340;&#31867;&#21644;&#31867;&#22411;&#65292;&#36825;&#20123;&#31867;&#21644;&#31867;&#22411;&#36890;&#24120;&#26159;&#8220;&#27425;&#35201;&#30340;&#8221;&#12290;&#20320;&#24050;&#30475;&#21040;&#36807;&#20854;&#20013;&#30340;&#19968;&#20123;&#65292;&#20687;<tt class="literal">int</tt>&#25110;<tt class="literal">String</tt>&#12290;&#25105;&#20204;&#31216;&#36825;&#20123;&#31867;&#20026;<span class="emphasis"><em>&#20540;&#31867;&#22411;&#65288;value type&#65289;</em></span>&#65292;&#23427;&#20204;&#30340;&#23454;&#20363;<span class="emphasis"><em>&#20381;&#36182;&#65288;depend&#65289;</em></span>&#22312;&#26576;&#20010;&#29305;&#23450;&#30340;&#23454;&#20307;&#19978;&#12290;&#36825;&#20123;&#31867;&#22411;&#30340;&#23454;&#20363;&#27809;&#26377;&#23427;&#20204;&#33258;&#24049;&#30340;&#26631;&#35782;&#65288;identity&#65289;&#65292;&#20063;&#19981;&#33021;&#22312;&#23454;&#20307;&#38388;&#34987;&#20849;&#20139;&#65288;&#27604;&#22914;&#65292;&#20004;&#20010;person&#19981;&#33021;&#24341;&#29992;&#21516;&#19968;&#20010;<tt class="literal">firstname</tt>&#23545;&#35937;&#65292;&#21363;&#20351;&#20182;&#20204;&#26377;&#30456;&#21516;&#30340;first name&#65289;&#12290;&#24403;&#28982;&#65292;&#20540;&#31867;&#22411;&#24182;&#19981;&#20165;&#20165;&#22312;JDK&#20013;&#23384;&#22312;&#65288;&#20107;&#23454;&#19978;&#65292;&#22312;&#19968;&#20010;Hibernate&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#25152;&#26377;&#30340;JDK&#31867;&#37117;&#34987;&#35270;&#20026;&#20540;&#31867;&#22411;&#65289;&#65292;&#32780;&#19988;&#20320;&#20063;&#21487;&#20197;&#32534;&#20889;&#20320;&#33258;&#24049;&#30340;&#20381;&#36182;&#31867;&#65292;&#20363;&#22914;<tt class="literal">Address</tt>&#65292;<tt class="literal">MonetaryAmount</tt>&#12290;
            </p><p>
	&#20320;&#20063;&#21487;&#20197;&#35774;&#35745;&#19968;&#20010;&#20540;&#31867;&#22411;&#30340;&#38598;&#21512;&#65292;&#36825;&#22312;&#27010;&#24565;&#19978;&#19982;&#24341;&#29992;&#20854;&#23427;&#23454;&#20307;&#30340;&#38598;&#21512;&#26377;&#24456;&#22823;&#30340;&#19981;&#21516;&#65292;&#20294;&#26159;&#22312;Java&#37324;&#38754;&#30475;&#36215;&#26469;&#20960;&#20046;&#26159;&#19968;&#26679;&#30340;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-associations-valuecollections"></a>1.3.4.&nbsp;
	&#20540;&#31867;&#22411;&#30340;&#38598;&#21512;
	</h3></div></div><div></div></div><p>
	&#25105;&#20204;&#25226;&#19968;&#20010;&#20540;&#31867;&#22411;&#23545;&#35937;&#30340;&#38598;&#21512;&#21152;&#20837;<tt class="literal">Person</tt>&#23454;&#20307;&#20013;&#12290;&#25105;&#20204;&#24076;&#26395;&#20445;&#23384;email&#22320;&#22336;&#65292;&#25152;&#20197;&#20351;&#29992;<tt class="literal">String</tt>&#31867;&#22411;&#65292;&#32780;&#19988;&#36825;&#27425;&#30340;&#38598;&#21512;&#31867;&#22411;&#21448;&#26159;<tt class="literal">Set</tt>&#65306;
            </p><pre class="programlisting">private Set emailAddresses = new HashSet();

public Set getEmailAddresses() {
    return emailAddresses;
}

public void setEmailAddresses(Set emailAddresses) {
    this.emailAddresses = emailAddresses;
}</pre><p>
	&#36825;&#20010;<tt class="literal">Set</tt>&#30340;&#26144;&#23556;
            </p><pre class="programlisting">&lt;set name="emailAddresses" table="PERSON_EMAIL_ADDR"&gt;
    &lt;key column="PERSON_ID"/&gt;
    &lt;element type="string" column="EMAIL_ADDR"/&gt;
&lt;/set&gt;</pre><p>
	&#27604;&#36739;&#36825;&#27425;&#21644;&#27492;&#21069;&#26144;&#23556;&#30340;&#24046;&#21035;&#65292;&#20027;&#35201;&#22312;&#20110;<tt class="literal">element</tt>&#37096;&#20998;&#65292;&#36825;&#27425;&#24182;&#27809;&#26377;&#21253;&#21547;&#23545;&#20854;&#23427;&#23454;&#20307;&#24341;&#29992;&#30340;&#38598;&#21512;&#65292;&#32780;&#26159;&#20803;&#32032;&#31867;&#22411;&#20026;<tt class="literal">String</tt>&#30340;&#38598;&#21512;&#65288;&#22312;&#26144;&#23556;&#20013;&#20351;&#29992;&#23567;&#20889;&#30340;&#21517;&#23383;&#8221;string&#8220;&#26159;&#21521;&#20320;&#34920;&#26126;&#23427;&#26159;&#19968;&#20010;Hibernate&#30340;&#26144;&#23556;&#31867;&#22411;&#25110;&#32773;&#31867;&#22411;&#36716;&#25442;&#22120;&#65289;&#12290;&#21644;&#20043;&#21069;&#19968;&#26679;&#65292;<tt class="literal">set</tt>&#20803;&#32032;&#30340;<tt class="literal">table</tt>&#23646;&#24615;&#20915;&#23450;&#20102;&#29992;&#20110;&#38598;&#21512;&#30340;&#34920;&#21517;&#12290;<tt class="literal">key</tt>&#20803;&#32032;&#23450;&#20041;&#20102;&#22312;&#38598;&#21512;&#34920;&#20013;&#22806;&#38190;&#30340;&#23383;&#27573;&#21517;&#12290;<tt class="literal">element</tt>&#20803;&#32032;&#30340;<tt class="literal">column</tt>&#23646;&#24615;&#23450;&#20041;&#29992;&#20110;&#23454;&#38469;&#20445;&#23384;<tt class="literal">String</tt>&#20540;&#30340;&#23383;&#27573;&#21517;&#12290;
            </p><p>
	&#30475;&#19968;&#19979;&#20462;&#25913;&#21518;&#30340;&#25968;&#25454;&#24211;schema&#12290;
            </p><pre class="programlisting">
  _____________        __________________
 |             |      |                  |       _____________
 |   EVENTS    |      |   PERSON_EVENT   |      |             |       ___________________
 |_____________|      |__________________|      |    PERSON   |      |                   |
 |             |      |                  |      |_____________|      | PERSON_EMAIL_ADDR |
 | *EVENT_ID   | &lt;--&gt; | *EVENT_ID        |      |             |      |___________________|
 |  EVENT_DATE |      | *PERSON_ID       | &lt;--&gt; | *PERSON_ID  | &lt;--&gt; |  *PERSON_ID       |
 |  TITLE      |      |__________________|      |  AGE        |      |  *EMAIL_ADDR      |
 |_____________|                                |  FIRSTNAME  |      |___________________|
                                                |  LASTNAME   |
                                                |_____________|
 </pre><p>
	&#20320;&#21487;&#20197;&#30475;&#21040;&#38598;&#21512;&#34920;&#30340;&#20027;&#38190;&#23454;&#38469;&#19978;&#26159;&#20010;&#22797;&#21512;&#20027;&#38190;&#65292;&#21516;&#26102;&#20351;&#29992;&#20102;2&#20010;&#23383;&#27573;&#12290;&#36825;&#20063;&#26263;&#31034;&#20102;&#23545;&#20110;&#21516;&#19968;&#20010;person&#19981;&#33021;&#26377;&#37325;&#22797;&#30340;email&#22320;&#22336;&#65292;&#36825;&#27491;&#26159;Java&#37324;&#38754;&#20351;&#29992;Set&#26102;&#20505;&#25152;&#38656;&#35201;&#30340;&#35821;&#20041;&#65288;Set&#37324;&#20803;&#32032;&#19981;&#33021;&#37325;&#22797;&#65289;&#12290;
            </p><p>
	&#20320;&#29616;&#22312;&#21487;&#20197;&#35797;&#30528;&#25226;&#20803;&#32032;&#21152;&#20837;&#21040;&#36825;&#20010;&#38598;&#21512;&#65292;&#23601;&#20687;&#25105;&#20204;&#22312;&#20043;&#21069;&#20851;&#32852;person&#21644;event&#30340;&#37027;&#26679;&#12290;&#20854;&#23454;&#29616;&#30340;Java&#20195;&#30721;&#26159;&#30456;&#21516;&#30340;&#65306;
            </p><pre class="programlisting">private void addEmailToPerson(Long personId, String emailAddress) {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();

    Person aPerson = (Person) session.load(Person.class, personId);

    // The getEmailAddresses() might trigger a lazy load of the collection
    aPerson.getEmailAddresses().add(emailAddress);

    session.getTransaction().commit();
}</pre><p>
                &#36825;&#27425;&#25105;&#20204;&#27809;&#26377;&#20351;&#29992;<span class="emphasis"><em>fetch</em></span>&#26597;&#35810;&#26469;&#21021;&#22987;&#21270;&#38598;&#21512;&#12290;&#22240;&#27492;&#65292;&#35843;&#29992;&#20854;getter&#26041;&#27861;&#20250;&#35302;&#21457;&#21478;&#19968;&#38468;&#21152;&#30340;select&#26469;&#21021;&#22987;&#21270;&#38598;&#21512;&#65292;&#36825;&#26679;&#25105;&#20204;&#25165;&#33021;&#25226;&#20803;&#32032;&#28155;&#21152;&#36827;&#21435;&#12290;&#26816;&#26597;SQL log&#65292;&#35797;&#30528;&#36890;&#36807;&#39044;&#20808;&#25235;&#21462;&#26469;&#20248;&#21270;&#23427;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-associations-bidirectional"></a>1.3.5.&nbsp;
	&#21452;&#21521;&#20851;&#32852;
	</h3></div></div><div></div></div><p>
	&#25509;&#19979;&#26469;&#25105;&#20204;&#23558;&#26144;&#23556;&#21452;&#21521;&#20851;&#32852;&#65288;bi-directional association&#65289;&#65293; &#22312;Java&#37324;&#35753;person&#21644;event&#21487;&#20197;&#20174;&#20851;&#32852;&#30340;&#20219;&#20309;&#19968;&#31471;&#35775;&#38382;&#21478;&#19968;&#31471;&#12290;&#24403;&#28982;&#65292;&#25968;&#25454;&#24211;schema&#27809;&#26377;&#25913;&#21464;&#65292;&#25105;&#20204;&#20173;&#28982;&#38656;&#35201;&#22810;&#23545;&#22810;&#30340;&#38454;&#25968;&#12290;&#19968;&#20010;&#20851;&#31995;&#22411;&#25968;&#25454;&#24211;&#35201;&#27604;&#32593;&#32476;&#32534;&#31243;&#35821;&#35328;	&#26356;&#21152;&#28789;&#27963;&#65292;&#25152;&#20197;&#23427;&#24182;&#19981;&#38656;&#35201;&#20219;&#20309;&#20687;&#23548;&#33322;&#26041;&#21521;&#65288;navigation direction&#65289;&#30340;&#19996;&#35199; &#65293; &#25968;&#25454;&#21487;&#20197;&#29992;&#20219;&#20309;&#21487;&#33021;&#30340;&#26041;&#24335;&#36827;&#34892;&#26597;&#30475;&#21644;&#33719;&#21462;&#12290;
            </p><p>
	&#39318;&#20808;&#65292;&#25226;&#19968;&#20010;&#21442;&#19982;&#32773;&#65288;person&#65289;&#30340;&#38598;&#21512;&#21152;&#20837;<tt class="literal">Event</tt>&#31867;&#20013;&#65306;
            </p><pre class="programlisting">private Set participants = new HashSet();

public Set getParticipants() {
    return participants;
}

public void setParticipants(Set participants) {
    this.participants = participants;
}</pre><p>
	&#22312;<tt class="literal">Event.hbm.xml</tt>&#37324;&#38754;&#20063;&#26144;&#23556;&#36825;&#20010;&#20851;&#32852;&#12290;
            </p><pre class="programlisting">&lt;set name="participants" table="PERSON_EVENT" inverse="true"&gt;
    &lt;key column="EVENT_ID"/&gt;
    &lt;many-to-many column="PERSON_ID" class="events.Person"/&gt;
&lt;/set&gt;</pre><p>
	&#22914;&#20320;&#25152;&#35265;&#65292;&#20004;&#20010;&#26144;&#23556;&#25991;&#20214;&#37324;&#37117;&#26377;&#26222;&#36890;&#30340;<tt class="literal">set</tt>&#26144;&#23556;&#12290;&#27880;&#24847;&#22312;&#20004;&#20010;&#26144;&#23556;&#25991;&#20214;&#20013;&#65292;&#20114;&#25442;&#20102;<tt class="literal">key</tt>&#21644;<tt class="literal">many-to-many</tt>&#30340;&#23383;&#27573;&#21517;&#12290;&#36825;&#37324;&#26368;&#37325;&#35201;&#30340;&#26159;<tt class="literal">Event</tt>&#26144;&#23556;&#25991;&#20214;&#37324;&#22686;&#21152;&#20102;<tt class="literal">set</tt>&#20803;&#32032;&#30340;<tt class="literal">inverse="true"</tt>&#23646;&#24615;&#12290;
            </p><p>
	&#36825;&#24847;&#21619;&#30528;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#65292;Hibernate&#33021;&#22312;&#20851;&#32852;&#30340;&#21478;&#19968;&#31471; &#65293; <tt class="literal">Person</tt>&#31867;&#24471;&#21040;&#20004;&#20010;&#23454;&#20307;&#38388;&#20851;&#32852;&#30340;&#20449;&#24687;&#12290;&#36825;&#23558;&#20250;&#26497;&#22823;&#22320;&#24110;&#21161;&#20320;&#29702;&#35299;&#21452;&#21521;&#20851;&#32852;&#26159;&#22914;&#20309;&#22312;&#20004;&#20010;&#23454;&#20307;&#38388;&#34987;&#21019;&#24314;&#30340;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-associations-usingbidir"></a>1.3.6.&nbsp;
	&#20351;&#21452;&#21521;&#36830;&#36215;&#26469;
	</h3></div></div><div></div></div><p>
	&#39318;&#20808;&#35831;&#35760;&#20303;&#65292;Hibernate&#24182;&#19981;&#24433;&#21709;&#36890;&#24120;&#30340;Java&#35821;&#20041;&#12290;	&#22312;&#21333;&#21521;&#20851;&#32852;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#26159;&#24590;&#26679;&#22312;<tt class="literal">Person</tt>&#21644;<tt class="literal">Event</tt>&#20043;&#38388;&#21019;&#24314;&#32852;&#31995;&#30340;&#65311;&#25105;&#20204;&#25226;<tt class="literal">Event</tt>&#23454;&#20363;&#28155;&#21152;&#21040;<tt class="literal">Person</tt>&#23454;&#20363;&#20869;&#30340;event&#24341;&#29992;&#38598;&#21512;&#37324;&#12290;&#22240;&#27492;&#24456;&#26174;&#28982;&#65292;&#22914;&#26524;&#25105;&#20204;&#35201;&#35753;&#36825;&#20010;&#20851;&#32852;&#21487;&#20197;&#21452;&#21521;&#22320;&#24037;&#20316;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;&#21478;&#22806;&#19968;&#31471;&#20570;&#21516;&#26679;&#30340;&#20107;&#24773; &#65293; &#25226;<tt class="literal">Person</tt>&#23454;&#20363;&#21152;&#20837;<tt class="literal">Event</tt>&#31867;&#20869;&#30340;Person&#24341;&#29992;&#38598;&#21512;&#12290;&#36825;&#8220;&#22312;&#20851;&#32852;&#30340;&#20004;&#31471;&#35774;&#32622;&#32852;&#31995;&#8221;&#26159;&#23436;&#20840;&#24517;&#35201;&#30340;&#32780;&#19988;&#20320;&#37117;&#24471;&#36825;&#20040;&#20570;&#12290;
            </p><p>
	&#35768;&#22810;&#24320;&#21457;&#20154;&#21592;&#38450;&#24481;&#24335;&#22320;&#32534;&#31243;&#65292;&#21019;&#24314;&#31649;&#29702;&#20851;&#32852;&#30340;&#26041;&#27861;&#26469;&#20445;&#35777;&#27491;&#30830;&#30340;&#35774;&#32622;&#20102;&#20851;&#32852;&#30340;&#20004;&#31471;&#65292;&#27604;&#22914;&#22312;<tt class="literal">Person</tt>&#37324;&#65306;
            </p><pre class="programlisting">protected Set getEvents() {
    return events;
}

protected void setEvents(Set events) {
    this.events = events;
}

public void addToEvent(Event event) {
    this.getEvents().add(event);
    event.getParticipants().add(this);
}

public void removeFromEvent(Event event) {
    this.getEvents().remove(event);
    event.getParticipants().remove(this);
}</pre><p>
	&#27880;&#24847;&#29616;&#22312;&#23545;&#20110;&#38598;&#21512;&#30340;get&#21644;set&#26041;&#27861;&#30340;&#35775;&#38382;&#32423;&#21035;&#26159;protected - &#36825;&#20801;&#35768;&#22312;&#20301;&#20110;&#21516;&#19968;&#20010;&#21253;&#65288;package&#65289;&#20013;&#30340;&#31867;&#20197;&#21450;&#32487;&#25215;&#33258;&#36825;&#20010;&#31867;&#30340;&#23376;&#31867;&#21487;&#20197;&#35775;&#38382;&#36825;&#20123;&#26041;&#27861;&#65292;&#20294;&#31105;&#27490;&#20854;&#20182;&#20219;&#20309;&#20154;&#30340;&#30452;&#25509;&#35775;&#38382;&#65292;&#36991;&#20813;&#20102;&#38598;&#21512;&#20869;&#23481;&#30340;&#28151;&#20081;&#12290;&#20320;&#24212;&#23613;&#21487;&#33021;&#22320;&#22312;&#21478;&#19968;&#31471;&#20063;&#25226;&#38598;&#21512;&#30340;&#35775;&#38382;&#32423;&#21035;&#35774;&#25104;protected&#12290;
            </p><p>
	<tt class="literal">inverse</tt>&#26144;&#23556;&#23646;&#24615;&#31350;&#31455;&#34920;&#31034;&#20160;&#20040;&#21602;&#65311;&#23545;&#20110;&#20320;&#21644;Java&#26469;&#35828;&#65292;&#19968;&#20010;&#21452;&#21521;&#20851;&#32852;&#20165;&#20165;&#26159;&#22312;&#20004;&#31471;&#31616;&#21333;&#22320;&#27491;&#30830;&#35774;&#32622;&#24341;&#29992;&#12290;&#28982;&#32780;&#65292;Hibernate&#24182;&#27809;&#26377;&#36275;&#22815;&#30340;&#20449;&#24687;&#21435;&#27491;&#30830;&#22320;&#25191;&#34892;<tt class="literal">INSERT</tt>&#21644;<tt class="literal">UPDATE</tt>&#35821;&#21477;&#65288;&#20197;&#36991;&#20813;&#36829;&#21453;&#25968;&#25454;&#24211;&#32422;&#26463;&#65289;&#65292;&#25152;&#20197;&#23427;&#38656;&#35201;&#19968;&#20123;&#24110;&#21161;&#26469;&#27491;&#30830;&#30340;&#22788;&#29702;&#21452;&#21521;&#20851;&#32852;&#12290;&#25226;&#20851;&#32852;&#30340;&#19968;&#31471;&#35774;&#32622;&#20026;<tt class="literal">inverse</tt>&#23558;&#21578;&#35785;Hibernate&#24573;&#30053;&#20851;&#32852;&#30340;&#36825;&#19968;&#31471;&#65292;&#25226;&#36825;&#31471;&#30475;&#25104;&#26159;&#21478;&#22806;&#19968;&#31471;&#30340;&#19968;&#20010;<span class="emphasis"><em>&#38236;&#35937;&#65288;mirror&#65289;</em></span>&#12290;&#36825;&#23601;&#26159;&#25152;&#38656;&#30340;&#20840;&#37096;&#20449;&#24687;&#65292;Hibernate&#21033;&#29992;&#36825;&#20123;&#20449;&#24687;&#26469;&#22788;&#29702;&#25226;&#19968;&#20010;&#26377;&#21521;&#23548;&#33322;&#27169;&#22411;&#36716;&#31227;&#21040;&#25968;&#25454;&#24211;schema&#26102;&#30340;&#25152;&#26377;&#38382;&#39064;&#12290;&#20320;&#21482;&#38656;&#35201;&#35760;&#20303;&#36825;&#20010;&#30452;&#35266;&#30340;&#35268;&#21017;&#65306;&#25152;&#26377;&#30340;&#21452;&#21521;&#20851;&#32852;&#38656;&#35201;&#26377;&#19968;&#31471;&#34987;&#35774;&#32622;&#20026;<tt class="literal">inverse</tt>&#12290;&#22312;&#19968;&#23545;&#22810;&#20851;&#32852;&#20013;&#23427;&#24517;&#39035;&#26159;&#20195;&#34920;&#22810;&#65288;many&#65289;&#30340;&#37027;&#31471;&#12290;&#32780;&#22312;&#22810;&#23545;&#22810;&#65288;many-to-many&#65289;&#20851;&#32852;&#20013;&#65292;&#20320;&#21487;&#20197;&#20219;&#24847;&#36873;&#21462;&#19968;&#31471;&#65292;&#22240;&#20026;&#20004;&#31471;&#20043;&#38388;&#24182;&#27809;&#26377;&#24046;&#21035;&#12290;
            </p></div><p>
	&#35753;&#25105;&#20204;&#25226;&#36827;&#20837;&#19968;&#20010;&#23567;&#22411;&#30340;web&#24212;&#29992;&#31243;&#24207;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tutorial-webapp"></a>1.4.&nbsp;&#31532;&#19977;&#37096;&#20998; - EventManager web&#24212;&#29992;&#31243;&#24207;</h2></div></div><div></div></div><p>
            Hibernate web&#24212;&#29992;&#31243;&#24207;&#20351;&#29992;<tt class="literal">Session</tt> &#21644;<tt class="literal">Transaction</tt>&#30340;&#26041;&#24335;&#20960;&#20046;&#21644;&#29420;&#31435;&#24212;&#29992;&#31243;&#24207;&#26159;&#19968;&#26679;&#30340;&#12290;&#20294;&#26159;&#65292;&#26377;&#19968;&#20123;&#24120;&#35265;&#30340;&#27169;&#24335;&#65288;pattern&#65289;&#38750;&#24120;&#26377;&#29992;&#12290;&#29616;&#22312;&#25105;&#20204;&#32534;&#20889;&#19968;&#20010;<tt class="literal">EventManagerServlet</tt>&#12290;&#36825;&#20010;servlet&#21487;&#20197;&#21015;&#20986;&#25968;&#25454;&#24211;&#20013;&#20445;&#23384;&#30340;&#25152;&#26377;&#30340;events&#65292;&#36824;&#25552;&#20379;&#19968;&#20010;HTML&#34920;&#21333;&#26469;&#22686;&#21152;&#26032;&#30340;events&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-webapp-servlet"></a>1.4.1.&nbsp;&#32534;&#20889;&#22522;&#26412;&#30340;servlet</h3></div></div><div></div></div><p>
                &#22312;&#20320;&#30340;&#28304;&#20195;&#30721;&#30446;&#24405;&#30340;<tt class="literal">events</tt>&#21253;&#20013;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#31867;&#65306;
            </p><pre class="programlisting">package events;

// Imports

public class EventManagerServlet extends HttpServlet {

    private final SimpleDateFormat dateFormatter =
                            new SimpleDateFormat("dd.MM.yyyy");

    // Servlet code
}</pre><p>
                &#25105;&#20204;&#21518;&#38754;&#20250;&#29992;&#21040;<tt class="literal">dateFormatter</tt> &#30340;&#24037;&#20855;&#65292; &#23427;&#25226;<tt class="literal">Date</tt>&#23545;&#35937;&#36716;&#25442;&#20026;&#23383;&#31526;&#20018;&#12290;&#21482;&#35201;&#19968;&#20010;formatter&#20316;&#20026;servlet&#30340;&#25104;&#21592;&#23601;&#21487;&#20197;&#20102;&#12290;
            </p><p>
                &#36825;&#20010;servlet&#21482;&#22788;&#29702; HTTP <tt class="literal">GET</tt> &#35831;&#27714;&#65292;&#22240;&#27492;&#65292;&#25105;&#20204;&#35201;&#23454;&#29616;&#30340;&#26159;<tt class="literal">doGet()</tt>&#26041;&#27861;&#65306;
            </p><pre class="programlisting">protected void doGet(HttpServletRequest request,
                     HttpServletResponse response)
        throws ServletException, IOException {

    try {
        // Begin unit of work
        HibernateUtil.getSessionFactory()
                .getCurrentSession().beginTransaction();

        // Process request and render page...

        // End unit of work
        HibernateUtil.getSessionFactory()
                .getCurrentSession().getTransaction().commit();

    } catch (Exception ex) {
        HibernateUtil.getSessionFactory()
                .getCurrentSession().getTransaction().rollback();
        throw new ServletException(ex);
    }

}</pre><p>
&#25105;&#20204;&#31216;&#36825;&#37324;&#24212;&#29992;&#30340;&#27169;&#24335;&#20026;&#27599;&#27425;&#35831;&#27714;&#19968;&#20010;session<span class="emphasis"><em>(session-per-request)</em></span>&#12290;&#24403;&#26377;&#35831;&#27714;&#21040;&#36798;&#36825;&#20010;servlet&#30340;&#26102;&#20505;&#65292;&#36890;&#36807;&#23545;<tt class="literal">SessionFactory</tt>&#30340;&#31532;&#19968;&#27425;&#35843;&#29992;&#65292;&#25171;&#24320;&#19968;&#20010;&#26032;&#30340;Hibernate <tt class="literal">Session</tt>&#12290;&#28982;&#21518;&#21551;&#21160;&#19968;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#8212;&#25152;&#26377;&#30340;&#25968;&#25454;&#35775;&#38382;&#37117;&#26159;&#22312;&#20107;&#21153;&#20013;&#36827;&#34892;&#65292;&#19981;&#31649;&#26159;&#35835;&#36824;&#26159;&#20889;&#65288;&#25105;&#20204;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#19981;&#20351;&#29992;auto-commit&#27169;&#24335;&#65289;&#12290;
            </p><p>
                &#19979;&#19968;&#27493;&#65292;&#23545;&#35831;&#27714;&#30340;&#21487;&#33021;&#21160;&#20316;&#36827;&#34892;&#22788;&#29702;&#65292;&#28210;&#26579;&#20986;&#21453;&#39304;&#30340;HTML&#12290;&#25105;&#20204;&#24456;&#24555;&#23601;&#20250;&#28041;&#21450;&#21040;&#37027;&#37096;&#20998;&#12290;
            </p><p>
                &#26368;&#21518;&#65292;&#24403;&#22788;&#29702;&#19982;&#28210;&#26579;&#37117;&#32467;&#26463;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#24037;&#20316;&#21333;&#20803;&#23601;&#32467;&#26463;&#20102;&#12290;&#20551;&#33509;&#22312;&#22788;&#29702;&#25110;&#28210;&#26579;&#30340;&#26102;&#20505;&#26377;&#20219;&#20309;&#38169;&#35823;&#21457;&#29983;&#65292;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65292;&#22238;&#28378;&#25968;&#25454;&#24211;&#20107;&#21153;&#12290;&#36825;&#26679;&#65292;<tt class="literal">session-per-request</tt>&#27169;&#24335;&#23601;&#23436;&#25104;&#20102;&#12290;&#20026;&#20102;&#36991;&#20813;&#22312;&#27599;&#20010;servlet&#20013;&#37117;&#32534;&#20889;&#20107;&#21153;&#36793;&#30028;&#30028;&#23450;&#30340;&#20195;&#30721;&#65292;&#21487;&#20197;&#32771;&#34385;&#20889;&#19968;&#20010;servlet &#36807;&#28388;&#22120;&#65288;filter&#65289;&#26469;&#26356;&#22909;&#22320;&#35299;&#20915;&#12290;&#20851;&#20110;&#36825;&#19968;&#27169;&#24335;&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#21442;&#38405;Hibernate&#32593;&#31449;&#21644;Wiki&#65292;&#36825;&#19968;&#27169;&#24335;&#21483;&#20570;<span class="emphasis"><em>Open Session in View</em></span>&#8212;&#21482;&#35201;&#20320;&#32771;&#34385;&#29992;JSP&#26469;&#28210;&#26579;&#20320;&#30340;&#35270;&#22270;&#65288;view&#65289;&#65292;&#32780;&#19981;&#26159;&#22312;servlet&#20013;&#65292;&#20320;&#23601;&#20250;&#24456;&#24555;&#29992;&#21040;&#23427;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-webapp-processing"></a>1.4.2.&nbsp;&#22788;&#29702;&#19982;&#28210;&#26579;</h3></div></div><div></div></div><p>
                &#25105;&#20204;&#26469;&#23454;&#29616;&#22788;&#29702;&#35831;&#27714;&#20197;&#21450;&#28210;&#26579;&#39029;&#38754;&#30340;&#24037;&#20316;&#12290;
            </p><pre class="programlisting">// Write HTML header
PrintWriter out = response.getWriter();
out.println("&lt;html&gt;&lt;head&gt;&lt;title&gt;Event Manager&lt;/title&gt;&lt;/head&gt;&lt;body&gt;");

// Handle actions
if ( "store".equals(request.getParameter("action")) ) {

    String eventTitle = request.getParameter("eventTitle");
    String eventDate = request.getParameter("eventDate");

    if ( "".equals(eventTitle) || "".equals(eventDate) ) {
        out.println("&lt;b&gt;&lt;i&gt;Please enter event title and date.&lt;/i&gt;&lt;/b&gt;");
    } else {
        createAndStoreEvent(eventTitle, dateFormatter.parse(eventDate));
        out.println("&lt;b&gt;&lt;i&gt;Added event.&lt;/i&gt;&lt;/b&gt;");
    }
}

// Print page
printEventForm(out);
listEvents(out);

// Write HTML footer
out.println("&lt;/body&gt;&lt;/html&gt;");
out.flush();
out.close();</pre><p>
                &#24517;&#39035;&#25215;&#35748;&#65292;&#36825;&#31181;&#32534;&#30721;&#39118;&#26684;&#35753;Java&#19982;HTML&#28151;&#21512;&#22312;&#20102;&#19968;&#36215;&#65292;&#22312;&#26356;&#22797;&#26434;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#19981;&#24212;&#22823;&#37327;&#22320;&#20351;&#29992;&#8212;&#35760;&#20303;&#25105;&#20204;&#22312;&#31456;&#20013;&#20165;&#20026;&#20102;&#23637;&#31034;Hibernate&#30340;&#22522;&#26412;&#27010;&#24565;&#12290;&#36825;&#27573;&#20195;&#30721;&#25171;&#21360;&#20986;&#20102;HTML&#22836;&#21644;&#23614;&#37096;&#12290;&#22312;&#39029;&#38754;&#20013;&#65292;&#25171;&#21360;&#20986;&#19968;&#20010;&#36755;&#20837;event&#26465;&#30446;&#30340;&#34920;&#21333;&#65292;&#24182;&#21015;&#20986;&#25968;&#25454;&#24211;&#20013;&#25152;&#26377;events&#12290;&#31532;&#19968;&#20010;&#26041;&#27861;&#24494;&#19981;&#36275;&#36947;&#65292;&#20165;&#20165;&#26159;&#36755;&#20986;HTML:
            </p><pre class="programlisting">private void printEventForm(PrintWriter out) {
    out.println("&lt;h2&gt;Add new event:&lt;/h2&gt;");
    out.println("&lt;form&gt;");
    out.println("Title: &lt;input name='eventTitle' length='50'/&gt;&lt;br/&gt;");
    out.println("Date (e.g. 24.12.2009): &lt;input name='eventDate' length='10'/&gt;&lt;br/&gt;");
    out.println("&lt;input type='submit' name='action' value='store'/&gt;");
    out.println("&lt;/form&gt;");
}</pre><p>
                <tt class="literal">listEvents()</tt>&#26041;&#27861;&#20351;&#29992;&#32465;&#23450;&#21040;&#24403;&#21069;&#32447;&#31243;&#30340;Hibernate <tt class="literal">Session</tt>&#26469;&#25191;&#34892;&#26597;&#35810;&#65306;
            </p><pre class="programlisting">private void listEvents(PrintWriter out) {
    List result = HibernateUtil.getSessionFactory()
                    .getCurrentSession().createCriteria(Event.class).list();
    if (result.size() &gt; 0) {
        out.println("&lt;h2&gt;Events in database:&lt;/h2&gt;");
        out.println("&lt;table border='1'&gt;");
        out.println("&lt;tr&gt;");
        out.println("&lt;th&gt;Event title&lt;/th&gt;");
        out.println("&lt;th&gt;Event date&lt;/th&gt;");
        out.println("&lt;/tr&gt;");
        for (Iterator it = result.iterator(); it.hasNext();) {
            Event event = (Event) it.next();
            out.println("&lt;tr&gt;");
            out.println("&lt;td&gt;" + event.getTitle() + "&lt;/td&gt;");
            out.println("&lt;td&gt;" + dateFormatter.format(event.getDate()) + "&lt;/td&gt;");
            out.println("&lt;/tr&gt;");
        }
        out.println("&lt;/table&gt;");
    }
}</pre><p>
                &#26368;&#21518;&#65292;<tt class="literal">store</tt>&#21160;&#20316;&#20250;&#34987;&#23548;&#21521;&#21040;<tt class="literal">createAndStoreEvent()</tt>&#26041;&#27861;&#65292;&#23427;&#20063;&#20351;&#29992;&#24403;&#21069;&#32447;&#31243;&#30340;<tt class="literal">Session</tt>:
            </p><pre class="programlisting">protected void createAndStoreEvent(String title, Date theDate) {
    Event theEvent = new Event();
    theEvent.setTitle(title);
    theEvent.setDate(theDate);

    HibernateUtil.getSessionFactory()
                    .getCurrentSession().save(theEvent);
}</pre><p>
	&#22823;&#21151;&#21578;&#25104;&#65292;&#36825;&#20010;servlet&#20889;&#23436;&#20102;&#12290;Hibernate&#20250;&#22312;&#21333;&#19968;&#30340;<tt class="literal">Session</tt> &#21644;<tt class="literal">Transaction</tt>&#20013;&#22788;&#29702;&#21040;&#36798;&#30340;servlet&#35831;&#27714;&#12290;&#22914;&#21516;&#22312;&#21069;&#38754;&#30340;&#29420;&#31435;&#24212;&#29992;&#31243;&#24207;&#20013;&#37027;&#26679;&#65292;Hibernate&#21487;&#20197;&#33258;&#21160;&#30340;&#25226;&#36825;&#20123;&#23545;&#35937;&#32465;&#23450;&#21040;&#24403;&#21069;&#36816;&#34892;&#30340;&#32447;&#31243;&#20013;&#12290;&#36825;&#32473;&#20102;&#20320;&#29992;&#20219;&#20309;&#20320;&#21916;&#27426;&#30340;&#26041;&#24335;&#26469;&#23545;&#20195;&#30721;&#20998;&#23618;&#21450;&#35775;&#38382;<tt class="literal">SessionFactory</tt>&#30340;&#33258;&#30001;&#12290;&#36890;&#24120;&#65292;&#20320;&#20250;&#29992;&#26356;&#21152;&#23436;&#22791;&#30340;&#35774;&#35745;&#65292;&#25226;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#36716;&#31227;&#21040;&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#20013;(DAO&#27169;&#24335;&#65289;&#12290;&#35831;&#21442;&#35265;Hibernate Wiki&#65292;&#37027;&#37324;&#26377;&#26356;&#22810;&#30340;&#20363;&#23376;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="tutorial-webapp-deploy"></a>1.4.3.&nbsp;&#37096;&#32626;&#19982;&#27979;&#35797;</h3></div></div><div></div></div><p>
	&#35201;&#21457;&#24067;&#36825;&#20010;&#31243;&#24207;&#65292;&#20320;&#24471;&#25226;&#23427;&#25171;&#25104;web&#21457;&#24067;&#21253;&#65306;WAR&#25991;&#20214;&#12290;&#25226;&#19979;&#38754;&#30340;&#33050;&#26412;&#21152;&#20837;&#21040;&#20320;&#30340;<tt class="literal">build.xml</tt>&#20013;&#65306;
            </p><pre class="programlisting">&lt;target name="war" depends="compile"&gt;
    &lt;war destfile="hibernate-tutorial.war" webxml="web.xml"&gt;
        &lt;lib dir="${librarydir}"&gt;
          &lt;exclude name="jsdk*.jar"/&gt;
        &lt;/lib&gt;

        &lt;classes dir="${targetdir}"/&gt;
    &lt;/war&gt;
&lt;/target&gt;</pre><p>
	&#36825;&#27573;&#20195;&#30721;&#22312;&#20320;&#30340;&#24320;&#21457;&#30446;&#24405;&#20013;&#21019;&#24314;&#19968;&#20010;<tt class="literal">hibernate-tutorial.war</tt>&#30340;&#25991;&#20214;&#12290;&#23427;&#25226;&#25152;&#26377;&#30340;&#31867;&#24211;&#21644;<tt class="literal">web.xml</tt>&#25551;&#36848;&#25991;&#20214;&#37117;&#25171;&#21253;&#36827;&#21435;&#65292;web.xml &#25991;&#20214;&#24212;&#35813;&#20301;&#20110;&#20320;&#30340;&#24320;&#21457;&#26681;&#30446;&#24405;&#20013;&#65306;
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;Event Manager&lt;/servlet-name&gt;
        &lt;servlet-class&gt;events.EventManagerServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Event Manager&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/eventmanager&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre><p>
                &#35831;&#27880;&#24847;&#22312;&#20320;&#32534;&#35793;&#21644;&#37096;&#32626;web&#24212;&#29992;&#31243;&#20043;&#21069;&#65292;&#38656;&#35201;&#19968;&#20010;&#38468;&#21152;&#30340;&#31867;&#24211;&#65306;<tt class="literal">jsdk.jar</tt>&#12290;&#36825;&#26159;Java Servlet&#24320;&#21457;&#21253;&#65292;&#20551;&#33509;&#20320;&#36824;&#27809;&#26377;&#65292;&#21487;&#20197;&#20174;Sun&#32593;&#31449;&#19978;&#19979;&#36733;&#65292;&#25226;&#23427;copy&#21040;&#20320;&#30340;lib&#30446;&#24405;&#12290;&#20294;&#26159;&#65292;&#23427;&#20165;&#20165;&#26159;&#22312;&#32534;&#35793;&#26102;&#38656;&#35201;&#65292;&#19981;&#20250;&#34987;&#25171;&#20837;WAR&#21253;&#12290;
            </p><p>
                &#22312;&#20320;&#30340;&#24320;&#21457;&#30446;&#24405;&#20013;&#65292;&#35843;&#29992;<tt class="literal">ant war</tt>&#26469;&#26500;&#24314;&#12289;&#25171;&#21253;&#65292;&#28982;&#21518;&#25226;<tt class="literal">hibernate-tutorial.war</tt>&#25991;&#20214;&#25335;&#36125;&#21040;&#20320;&#30340;tomcat&#30340;<tt class="literal">webapps</tt>&#30446;&#24405;&#19979;&#12290;&#20551;&#33509;&#20320;&#36824;&#27809;&#23433;&#35013;Tomcat&#65292;&#23601;&#21435;&#19979;&#36733;&#19968;&#20010;&#65292;&#25353;&#29031;&#25351;&#21335;&#26469;&#23433;&#35013;&#12290;&#23545;&#27492;&#24212;&#29992;&#30340;&#21457;&#24067;&#65292;&#20320;&#19981;&#38656;&#35201;&#20462;&#25913;&#20219;&#20309;Tomcat&#30340;&#37197;&#32622;&#12290;
            </p><p>
		&#22312;&#37096;&#32626;&#23436;&#65292;&#21551;&#21160;Tomcat&#20043;&#21518;&#65292;&#36890;&#36807;<tt class="literal">http://localhost:8080/hibernate-tutorial/eventmanager</tt>&#36827;&#34892;&#35775;&#38382;&#20320;&#30340;&#24212;&#29992;&#65292;&#22312;&#31532;&#19968;&#27425;servlet &#35831;&#27714;&#21457;&#29983;&#26102;&#65292;&#35831;&#22312;Tomcat log&#20013;&#30830;&#35748;&#20320;&#30475;&#21040;Hibernate&#34987;&#21021;&#22987;&#21270;&#20102;&#65288;<tt class="literal">HibernateUtil</tt>&#30340;&#38745;&#24577;&#21021;&#22987;&#21270;&#22120;&#34987;&#35843;&#29992;&#65289;&#65292;&#20551;&#33509;&#26377;&#20219;&#20309;&#24322;&#24120;&#25243;&#20986;&#65292;&#20063;&#21487;&#20197;&#30475;&#21040;&#35814;&#32454;&#30340;&#36755;&#20986;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tutorial-summary"></a>1.5.&nbsp;
  	         &#24635;&#32467;
  	         </h2></div></div><div></div></div><p>
	&#26412;&#31456;&#35206;&#30422;&#20102;&#22914;&#20309;&#32534;&#20889;&#19968;&#20010;&#31616;&#21333;&#29420;&#31435;&#30340;Hibernate&#21629;&#20196;&#34892;&#24212;&#29992;&#31243;&#24207;&#21450;&#23567;&#22411;&#30340;Hibernate web&#24212;&#29992;&#31243;&#24207;&#30340;&#22522;&#26412;&#35201;&#32032;&#12290;
  	         </p><p>
	&#22914;&#26524;&#20320;&#24050;&#32463;&#23545;Hibernate&#24863;&#21040;&#33258;&#20449;&#65292;&#36890;&#36807;&#24320;&#21457;&#25351;&#21335;&#30446;&#24405;&#65292;&#32487;&#32493;&#27983;&#35272;&#20320;&#24863;&#20852;&#36259;&#30340;&#20869;&#23481;&#65293;&#37027;&#20123;&#20250;&#34987;&#38382;&#21040;&#30340;&#38382;&#39064;&#22823;&#22810;&#26159;&#20107;&#21153;&#22788;&#29702; (<a href="#transactions" title="&#31532;&nbsp;11&nbsp;&#31456;&nbsp;&#20107;&#21153;&#21644;&#24182;&#21457;">&#31532;&nbsp;11&nbsp;&#31456; <i>&#20107;&#21153;&#21644;&#24182;&#21457;</i></a>)&#65292;&#25235;&#21462;&#65288;fetch&#65289;&#30340;&#25928;&#29575; (<a href="#performance" title="&#31532;&nbsp;19&nbsp;&#31456;&nbsp;&#25552;&#21319;&#24615;&#33021;&#xA;	">&#31532;&nbsp;19&nbsp;&#31456; <i>&#25552;&#21319;&#24615;&#33021;
	</i></a>)&#65292;&#25110;&#32773;API&#30340;&#20351;&#29992; (<a href="#objectstate" title="&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#19982;&#23545;&#35937;&#20849;&#20107;">&#31532;&nbsp;10&nbsp;&#31456; <i>&#19982;&#23545;&#35937;&#20849;&#20107;</i></a>)&#21644;&#26597;&#35810;&#30340;&#29305;&#24615;(<a href="#objectstate-querying" title="10.4.&nbsp;&#26597;&#35810;">&#31532;&nbsp;10.4&nbsp;&#33410; &#8220;&#26597;&#35810;&#8221;</a>)&#12290;
  	         </p><p>
  	          &#21035;&#24536;&#20102;&#21435;Hibernate&#30340;&#32593;&#31449;&#26597;&#30475;&#26356;&#22810;&#65288;&#26377;&#38024;&#23545;&#24615;&#30340;&#65289;&#31034;&#20363;&#12290;
  	         </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="architecture"></a>&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20307;&#31995;&#32467;&#26500;(Architecture)</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="architecture-overview"></a>2.1.&nbsp;&#27010;&#20917;(Overview)</h2></div></div><div></div></div><p>
            &#19968;&#20010;&#38750;&#24120;&#31616;&#35201;&#30340;Hibernate&#20307;&#31995;&#32467;&#26500;&#30340;&#27010;&#35201;&#22270;&#65306;
        </p><div class="mediaobject" align="center"><img src="../shared/images/overview.gif" align="middle"></div><p>
            &#20174;&#36825;&#20010;&#22270;&#21487;&#20197;&#30475;&#20986;&#65292;Hibernate&#20351;&#29992;&#25968;&#25454;&#24211;&#21644;&#37197;&#32622;&#20449;&#24687;&#26469;&#20026;&#24212;&#29992;&#31243;&#24207;&#25552;&#20379;&#25345;&#20037;&#21270;&#26381;&#21153;&#65288;&#20197;&#21450;&#25345;&#20037;&#30340;&#23545;&#35937;&#65289;&#12290;
        </p><p>
            &#25105;&#20204;&#26469;&#26356;&#35814;&#32454;&#22320;&#30475;&#19968;&#19979;Hibernate&#36816;&#34892;&#26102;&#20307;&#31995;&#32467;&#26500;&#12290;&#30001;&#20110;Hibernate&#38750;&#24120;&#28789;&#27963;&#65292;&#19988;&#25903;&#25345;&#22810;&#31181;&#24212;&#29992;&#26041;&#26696;&#65292;
            &#25152;&#20197;&#25105;&#20204;&#36825;&#21482;&#25551;&#36848;&#19968;&#19979;&#20004;&#31181;&#26497;&#31471;&#30340;&#24773;&#20917;&#12290;&#8220;&#36731;&#22411;&#8221;&#30340;&#20307;&#31995;&#32467;&#26500;&#26041;&#26696;&#65292;&#35201;&#27714;&#24212;&#29992;&#31243;&#24207;&#25552;&#20379;&#33258;&#24049;&#30340;JDBC
            &#36830;&#25509;&#24182;&#31649;&#29702;&#33258;&#24049;&#30340;&#20107;&#21153;&#12290;&#36825;&#31181;&#26041;&#26696;&#20351;&#29992;&#20102;Hibernate API&#30340;&#26368;&#23567;&#23376;&#38598;&#65306;
        </p><div class="mediaobject" align="center"><img src="../shared/images/lite.gif" align="middle"></div><p>
            &#8220;&#20840;&#38754;&#35299;&#20915;&#8221;&#30340;&#20307;&#31995;&#32467;&#26500;&#26041;&#26696;&#65292;&#23558;&#24212;&#29992;&#23618;&#20174;&#24213;&#23618;&#30340;JDBC/JTA API&#20013;&#25277;&#35937;&#20986;&#26469;&#65292;&#32780;&#35753;Hibernate&#26469;&#22788;&#29702;&#36825;&#20123;&#32454;&#33410;&#12290;
        </p><div class="mediaobject" align="center"><img src="../shared/images/full_cream.gif" align="middle"></div><p>
            &#22270;&#20013;&#21508;&#20010;&#23545;&#35937;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306;

            </p><div class="variablelist"><dl><dt><span class="term">SessionFactory (<tt class="literal">org.hibernate.SessionFactory</tt>)</span></dt><dd><p>
                            &#38024;&#23545;&#21333;&#20010;&#25968;&#25454;&#24211;&#26144;&#23556;&#20851;&#31995;&#32463;&#36807;&#32534;&#35793;&#21518;&#30340;&#20869;&#23384;&#38236;&#20687;&#65292;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65288;&#19981;&#21487;&#21464;&#65289;&#12290;
                            &#23427;&#26159;&#29983;&#25104;<tt class="literal">Session</tt>&#30340;&#24037;&#21378;&#65292;&#26412;&#36523;&#35201;&#29992;&#21040;<tt class="literal">ConnectionProvider</tt>&#12290;
                            &#35813;&#23545;&#35937;&#21487;&#20197;&#22312;&#36827;&#31243;&#25110;&#38598;&#32676;&#30340;&#32423;&#21035;&#19978;&#65292;&#20026;&#37027;&#20123;&#20107;&#21153;&#20043;&#38388;&#21487;&#20197;&#37325;&#29992;&#30340;&#25968;&#25454;&#25552;&#20379;&#21487;&#36873;&#30340;&#20108;&#32423;&#32531;&#23384;&#12290;
                        </p></dd><dt><span class="term">Session (<tt class="literal">org.hibernate.Session</tt>)</span></dt><dd><p>
                            &#34920;&#31034;&#24212;&#29992;&#31243;&#24207;&#19982;&#25345;&#20037;&#20648;&#23384;&#23618;&#20043;&#38388;&#20132;&#20114;&#25805;&#20316;&#30340;&#19968;&#20010;&#21333;&#32447;&#31243;&#23545;&#35937;&#65292;&#27492;&#23545;&#35937;&#29983;&#23384;&#26399;&#24456;&#30701;&#12290;
                            &#20854;&#38544;&#34255;&#20102;JDBC&#36830;&#25509;&#65292;&#20063;&#26159;<tt class="literal">Transaction</tt>&#30340;&#24037;&#21378;&#12290;
                            &#20854;&#20250;&#25345;&#26377;&#19968;&#20010;&#38024;&#23545;&#25345;&#20037;&#21270;&#23545;&#35937;&#30340;&#24517;&#36873;&#65288;&#31532;&#19968;&#32423;&#65289;&#32531;&#23384;&#65292;&#22312;&#36941;&#21382;&#23545;&#35937;&#22270;&#25110;&#32773;&#26681;&#25454;&#25345;&#20037;&#21270;&#26631;&#35782;&#26597;&#25214;&#23545;&#35937;&#26102;&#20250;&#29992;&#21040;&#12290;
                        </p></dd><dt><span class="term">&#25345;&#20037;&#30340;&#23545;&#35937;&#21450;&#20854;&#38598;&#21512;</span></dt><dd><p>
                            &#24102;&#26377;&#25345;&#20037;&#21270;&#29366;&#24577;&#30340;&#12289;&#20855;&#26377;&#19994;&#21153;&#21151;&#33021;&#30340;&#21333;&#32447;&#31243;&#23545;&#35937;&#65292;&#27492;&#23545;&#35937;&#29983;&#23384;&#26399;&#24456;&#30701;&#12290;
                            &#36825;&#20123;&#23545;&#35937;&#21487;&#33021;&#26159;&#26222;&#36890;&#30340;JavaBeans/POJO&#65292;&#21807;&#19968;&#29305;&#27530;&#30340;&#26159;&#20182;&#20204;&#27491;&#19982;&#65288;&#20165;&#20165;&#19968;&#20010;&#65289;<tt class="literal">Session</tt>&#30456;&#20851;&#32852;&#12290;
                            &#19968;&#26086;&#36825;&#20010;<tt class="literal">Session</tt>&#34987;&#20851;&#38381;&#65292;&#36825;&#20123;&#23545;&#35937;&#23601;&#20250;&#33073;&#31163;&#25345;&#20037;&#21270;&#29366;&#24577;&#65292;&#36825;&#26679;&#23601;&#21487;&#34987;&#24212;&#29992;&#31243;&#24207;&#30340;&#20219;&#20309;&#23618;&#33258;&#30001;&#20351;&#29992;&#12290;
                           &#65288;&#20363;&#22914;&#65292;&#29992;&#20316;&#36319;&#34920;&#31034;&#23618;&#25171;&#20132;&#36947;&#30340;&#25968;&#25454;&#20256;&#36755;&#23545;&#35937;&#12290;&#65289;
                        </p></dd><dt><span class="term">&#30636;&#24577;(transient)&#21644;&#33073;&#31649;(detached)&#30340;&#23545;&#35937;&#21450;&#20854;&#38598;&#21512;</span></dt><dd><p>
                            &#37027;&#20123;&#30446;&#21069;&#27809;&#26377;&#19982;session&#20851;&#32852;&#30340;&#25345;&#20037;&#21270;&#31867;&#23454;&#20363;&#12290;
                            &#20182;&#20204;&#21487;&#33021;&#26159;&#22312;&#34987;&#24212;&#29992;&#31243;&#24207;&#23454;&#20363;&#21270;&#21518;&#65292;&#23578;&#26410;&#36827;&#34892;&#25345;&#20037;&#21270;&#30340;&#23545;&#35937;&#12290;
                            &#20063;&#21487;&#33021;&#26159;&#22240;&#20026;&#23454;&#20363;&#21270;&#20182;&#20204;&#30340;<tt class="literal">Session</tt>&#24050;&#32463;&#34987;&#20851;&#38381;&#32780;&#33073;&#31163;&#25345;&#20037;&#21270;&#30340;&#23545;&#35937;&#12290;
                        </p></dd><dt><span class="term">&#20107;&#21153;Transaction (<tt class="literal">org.hibernate.Transaction</tt>)</span></dt><dd><p>
                            &#65288;&#21487;&#36873;&#30340;&#65289;&#24212;&#29992;&#31243;&#24207;&#29992;&#26469;&#25351;&#23450;&#21407;&#23376;&#25805;&#20316;&#21333;&#20803;&#33539;&#22260;&#30340;&#23545;&#35937;&#65292;&#23427;&#26159;&#21333;&#32447;&#31243;&#30340;&#65292;&#29983;&#21629;&#21608;&#26399;&#24456;&#30701;&#12290;
                            &#23427;&#36890;&#36807;&#25277;&#35937;&#23558;&#24212;&#29992;&#20174;&#24213;&#23618;&#20855;&#20307;&#30340;JDBC&#12289;JTA&#20197;&#21450;CORBA&#20107;&#21153;&#38548;&#31163;&#24320;&#12290;
                            &#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#19968;&#20010;<tt class="literal">Session</tt>&#20043;&#20869;&#21487;&#33021;&#21253;&#21547;&#22810;&#20010;<tt class="literal">Transaction</tt>&#23545;&#35937;&#12290;
                            &#23613;&#31649;&#26159;&#21542;&#20351;&#29992;&#35813;&#23545;&#35937;&#26159;&#21487;&#36873;&#30340;&#65292;&#20294;&#26080;&#35770;&#26159;&#20351;&#29992;&#24213;&#23618;&#30340;API&#36824;&#26159;&#20351;&#29992;<tt class="literal">Transaction</tt>&#23545;&#35937;&#65292;&#20107;&#21153;&#36793;&#30028;&#30340;&#24320;&#21551;&#19982;&#20851;&#38381;&#26159;&#24517;&#19981;&#21487;&#23569;&#30340;&#12290;
                        </p></dd><dt><span class="term">ConnectionProvider (<tt class="literal">org.hibernate.connection.ConnectionProvider</tt>)</span></dt><dd><p>
                            &#65288;&#21487;&#36873;&#30340;&#65289;&#29983;&#25104;JDBC&#36830;&#25509;&#30340;&#24037;&#21378;&#65288;&#21516;&#26102;&#20063;&#36215;&#21040;&#36830;&#25509;&#27744;&#30340;&#20316;&#29992;&#65289;&#12290;
                            &#23427;&#36890;&#36807;&#25277;&#35937;&#23558;&#24212;&#29992;&#20174;&#24213;&#23618;&#30340;<tt class="literal">Datasource</tt>&#25110;<tt class="literal">DriverManager</tt>&#38548;&#31163;&#24320;&#12290;
                            &#20165;&#20379;&#24320;&#21457;&#32773;&#25193;&#23637;/&#23454;&#29616;&#29992;&#65292;&#24182;&#19981;&#26292;&#38706;&#32473;&#24212;&#29992;&#31243;&#24207;&#20351;&#29992;&#12290;
                        </p></dd><dt><span class="term">TransactionFactory (<tt class="literal">org.hibernate.TransactionFactory</tt>)</span></dt><dd><p>
                           &#65288;&#21487;&#36873;&#30340;&#65289;&#29983;&#25104;<tt class="literal">Transaction</tt>&#23545;&#35937;&#23454;&#20363;&#30340;&#24037;&#21378;&#12290;
                           &#20165;&#20379;&#24320;&#21457;&#32773;&#25193;&#23637;/&#23454;&#29616;&#29992;&#65292;&#24182;&#19981;&#26292;&#38706;&#32473;&#24212;&#29992;&#31243;&#24207;&#20351;&#29992;&#12290;
                        </p></dd><dt><span class="term"><span class="emphasis"><em>&#25193;&#23637;&#25509;&#21475;</em></span></span></dt><dd><p>
                             Hibernate&#25552;&#20379;&#20102;&#24456;&#22810;&#21487;&#36873;&#30340;&#25193;&#23637;&#25509;&#21475;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#23454;&#29616;&#23427;&#20204;&#26469;&#23450;&#21046;&#20320;&#30340;&#25345;&#20037;&#23618;&#30340;&#34892;&#20026;&#12290;
                             &#20855;&#20307;&#35831;&#21442;&#32771;API&#25991;&#26723;&#12290;
                        </p></dd></dl></div><p>
        </p><p>
            &#22312;&#29305;&#23450;&#8220;&#36731;&#22411;&#8221;&#30340;&#20307;&#31995;&#32467;&#26500;&#20013;&#65292;&#24212;&#29992;&#31243;&#24207;&#21487;&#33021;&#32469;&#36807;
            <tt class="literal">Transaction</tt>/<tt class="literal">TransactionFactory</tt> &#20197;&#21450;
            <tt class="literal">ConnectionProvider</tt> &#31561;API&#30452;&#25509;&#36319;JTA&#25110;JDBC&#25171;&#20132;&#36947;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="architecture-states"></a>2.2.&nbsp;&#23454;&#20363;&#29366;&#24577;</h2></div></div><div></div></div><p>
            &#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#30340;&#23454;&#20363;&#21487;&#33021;&#22788;&#20110;&#19977;&#31181;&#19981;&#21516;&#29366;&#24577;&#20013;&#30340;&#26576;&#19968;&#31181;&#12290;
            &#36825;&#19977;&#31181;&#29366;&#24577;&#30340;&#23450;&#20041;&#21017;&#19982;&#25152;&#35859;&#30340;<span class="emphasis"><em>&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;(persistence context)</em></span>&#26377;&#20851;&#12290;
            Hibernate&#30340;<tt class="literal">Session</tt>&#23545;&#35937;&#23601;&#26159;&#36825;&#20010;&#25152;&#35859;&#30340;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#65306;
        </p><div class="variablelist"><dl><dt><span class="term">&#30636;&#24577;&#65288;transient&#65289;</span></dt><dd><p>
                        &#35813;&#23454;&#20363;&#20174;&#26410;&#19982;&#20219;&#20309;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#20851;&#32852;&#36807;&#12290;&#23427;&#27809;&#26377;&#25345;&#20037;&#21270;&#26631;&#35782;&#65288;&#30456;&#24403;&#20110;&#20027;&#38190;&#20540;&#65289;&#12290;
                    </p></dd><dt><span class="term">&#25345;&#20037;&#21270;(persistent)</span></dt><dd><p>
                        &#23454;&#20363;&#30446;&#21069;&#19982;&#26576;&#20010;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#26377;&#20851;&#32852;&#12290;
                        &#23427;&#25317;&#26377;&#25345;&#20037;&#21270;&#26631;&#35782;&#65288;&#30456;&#24403;&#20110;&#20027;&#38190;&#20540;&#65289;&#65292;&#24182;&#19988;&#21487;&#33021;&#22312;&#25968;&#25454;&#24211;&#20013;&#26377;&#19968;&#20010;&#23545;&#24212;&#30340;&#34892;&#12290;
                        &#23545;&#20110;&#26576;&#19968;&#20010;&#29305;&#23450;&#30340;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#65292;Hibernate<span class="emphasis"><em>&#20445;&#35777;</em></span>&#25345;&#20037;&#21270;&#26631;&#35782;&#19982;Java&#26631;&#35782;&#65288;&#20854;&#20540;&#20195;&#34920;&#23545;&#35937;&#22312;&#20869;&#23384;&#20013;&#30340;&#20301;&#32622;&#65289;&#31561;&#20215;&#12290;
                    </p></dd><dt><span class="term">&#33073;&#31649;(detached)</span></dt><dd><p>
                        &#23454;&#20363;&#26366;&#32463;&#19982;&#26576;&#20010;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#21457;&#29983;&#36807;&#20851;&#32852;&#65292;&#19981;&#36807;&#37027;&#20010;&#19978;&#19979;&#25991;&#34987;&#20851;&#38381;&#20102;&#65292;
                        &#25110;&#32773;&#36825;&#20010;&#23454;&#20363;&#26159;&#34987;&#24207;&#21015;&#21270;(serialize)&#21040;&#21478;&#22806;&#30340;&#36827;&#31243;&#12290;
                        &#23427;&#25317;&#26377;&#25345;&#20037;&#21270;&#26631;&#35782;&#65292;&#24182;&#19988;&#22312;&#25968;&#25454;&#24211;&#20013;&#21487;&#33021;&#23384;&#22312;&#19968;&#20010;&#23545;&#24212;&#30340;&#34892;&#12290;
                        &#23545;&#20110;&#33073;&#31649;&#29366;&#24577;&#30340;&#23454;&#20363;&#65292;Hibernate&#19981;&#20445;&#35777;&#20219;&#20309;&#25345;&#20037;&#21270;&#26631;&#35782;&#21644;Java&#26631;&#35782;&#30340;&#20851;&#31995;&#12290;
                    </p></dd></dl></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="architecture-jmx"></a>2.3.&nbsp;JMX&#25972;&#21512;</h2></div></div><div></div></div><p>
            JMX&#26159;&#31649;&#29702;Java&#32452;&#20214;(Java components)&#30340;J2EE&#26631;&#20934;&#12290; Hibernate &#21487;&#20197;&#36890;&#36807;&#19968;&#20010;JMX&#26631;&#20934;&#26381;&#21153;&#26469;&#31649;&#29702;&#12290;
            &#22312;&#36825;&#20010;&#21457;&#34892;&#29256;&#26412;&#20013;&#65292;&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;MBean&#25509;&#21475;&#30340;&#23454;&#29616;,&#21363;
            <tt class="literal">org.hibernate.jmx.HibernateService</tt>&#12290;
        </p><p>
            &#24819;&#35201;&#30475;&#22914;&#20309;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#23558;Hibernate&#37096;&#32626;&#20026;&#19968;&#20010;JMX&#26381;&#21153;&#30340;&#20363;&#23376;&#65292;&#24744;&#21487;&#20197;&#21442;&#32771;JBoss&#29992;&#25143;&#25351;&#21335;&#12290;
            &#25105;&#20204;&#29616;&#22312;&#35828;&#19968;&#19979;&#22312;Jboss&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#65292;&#20351;&#29992;JMX&#26469;&#37096;&#32626;Hibernate&#30340;&#22909;&#22788;&#65306;
        </p><div class="itemizedlist"><ul type="disc"><li><p>
                    <span class="emphasis"><em>Session&#31649;&#29702;&#65306;</em></span> Hibernate&#30340;<tt class="literal">Session</tt>&#23545;&#35937;&#30340;&#29983;&#21629;&#21608;&#26399;&#21487;&#20197;
                    &#33258;&#21160;&#36319;&#19968;&#20010;JTA&#20107;&#21153;&#36793;&#30028;&#32465;&#23450;&#12290;&#36825;&#24847;&#21619;&#30528;&#20320;&#26080;&#38656;&#25163;&#24037;&#24320;&#20851;<tt class="literal">Session</tt>&#20102;, &#36825;&#39033;
                    &#24037;&#20316;&#20250;&#30001;JBoss EJB &#25318;&#25130;&#22120;&#26469;&#23436;&#25104;&#12290;&#20320;&#20877;&#20063;&#19981;&#29992;&#25285;&#24515;&#20320;&#30340;&#20195;&#30721;&#20013;&#30340;&#20107;&#21153;&#36793;&#30028;&#20102;(&#38500;&#38750;&#20320;&#24819;&#21033;&#29992;Hibernate&#25552;&#20379;&#21487;&#36873;
                    &#30340;<tt class="literal">Transaction</tt> API&#26469;&#33258;&#24049;&#20889;&#19968;&#20010;&#20415;&#20110;&#31227;&#26893;&#30340;&#30340;&#25345;&#20037;&#23618;)&#12290; 
                    &#20320;&#36890;&#36807;&#35843;&#29992;<tt class="literal">HibernateContext</tt>&#26469;&#35775;&#38382;<tt class="literal">Session</tt>&#12290;
                </p></li><li><p>
                    <span class="emphasis"><em>HAR &#37096;&#32626;:</em></span> &#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#20320;&#20250;&#20351;&#29992;JBoss&#30340;&#26381;&#21153;&#37096;&#32626;&#25551;&#36848;&#31526;&#65288;&#22312;EAR&#25110;/&#21644;SAR&#25991;&#20214;&#20013;&#65289;&#26469;&#37096;&#32626;Hibernate JMX&#26381;&#21153;&#12290;
                    &#36825;&#31181;&#37096;&#32626;&#26041;&#24335;&#25903;&#25345;&#25152;&#26377;&#24120;&#35265;&#30340;Hibernate <tt class="literal">SessionFactory</tt>&#30340;&#37197;&#32622;&#36873;&#39033;&#12290;
                    &#19981;&#36807;&#65292;&#20320;&#20173;&#38656;&#22312;&#37096;&#32626;&#25551;&#36848;&#31526;&#20013;&#65292;&#21015;&#20986;&#20320;&#25152;&#26377;&#30340;&#26144;&#23556;&#25991;&#20214;&#30340;&#21517;&#23383;&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;HAR&#37096;&#32626;&#26041;&#24335;, JBoss 
                    &#20250;&#33258;&#21160;&#25506;&#27979;&#20986;&#20320;&#30340;HAR&#25991;&#20214;&#20013;&#25152;&#26377;&#30340;&#26144;&#23556;&#25991;&#20214;&#12290;
                </p></li></ul></div><p>
            &#36825;&#20123;&#36873;&#39033;&#26356;&#22810;&#30340;&#25551;&#36848;&#65292;&#35831;&#21442;&#32771;JBoss &#24212;&#29992;&#31243;&#24207;&#29992;&#25143;&#25351;&#21335;&#12290;
        </p><p>
            &#23558;Hibernate&#20197;&#37096;&#32626;&#20026;JMX&#26381;&#21153;&#30340;&#21478;&#19968;&#20010;&#22909;&#22788;&#65292;&#26159;&#21487;&#20197;&#26597;&#30475;Hibernate&#30340;&#36816;&#34892;&#26102;&#32479;&#35745;&#20449;&#24687;&#12290;&#21442;&#30475;
            <a href="#configuration-optional-statistics" title="3.4.6.&nbsp;&#xA;                Hibernate&#30340;&#32479;&#35745;(statistics)&#26426;&#21046;&#xA;            ">&#31532;&nbsp;3.4.6&nbsp;&#33410; &#8220;
                Hibernate&#30340;&#32479;&#35745;(statistics)&#26426;&#21046;
            &#8221;</a>.
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="architecture-jca"></a>2.4.&nbsp;&#23545;JCA&#30340;&#25903;&#25345;</h2></div></div><div></div></div><p>
            Hibernate&#20063;&#21487;&#20197;&#34987;&#37197;&#32622;&#20026;&#19968;&#20010;JCA&#36830;&#25509;&#22120;&#65288;JCA connector&#65289;&#12290;&#26356;&#22810;&#20449;&#24687;&#35831;&#21442;&#30475;&#32593;&#31449;&#12290;
            &#35831;&#27880;&#24847;&#65292;Hibernate&#23545;JCA&#30340;&#25903;&#25345;&#65292;&#20173;&#22788;&#20110;&#23454;&#39564;&#24615;&#38454;&#27573;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="architecture-current-session"></a>2.5.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session</h2></div></div><div></div></div><p>
           	&#20351;&#29992;Hibernate&#30340;&#22823;&#22810;&#25968;&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#26576;&#31181;&#24418;&#24335;&#30340;&#8220;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#8221; session&#65292;&#29305;&#23450;&#30340;session&#22312;&#25972;&#20010;&#29305;&#23450;&#30340;&#19978;&#19979;&#25991;&#33539;&#22260;&#20869;&#22987;&#32456;&#26377;&#25928;&#12290;&#28982;&#32780;&#65292;&#23545;&#19981;&#21516;&#31867;&#22411;&#30340;&#24212;&#29992;&#31243;&#24207;&#32780;&#35328;&#65292;&#35201;&#20026;&#20160;&#20040;&#26159;&#32452;&#25104;&#36825;&#31181;&#8220;&#19978;&#19979;&#25991;&#8221;&#19979;&#19968;&#20010;&#23450;&#20041;&#36890;&#24120;&#26159;&#22256;&#38590;&#30340;&#65307;&#19981;&#21516;&#30340;&#19978;&#19979;&#25991;&#23545;&#8220;&#24403;&#21069;&#8221;&#36825;&#20010;&#27010;&#24565;&#23450;&#20041;&#20102;&#19981;&#21516;&#30340;&#33539;&#22260;&#12290;&#22312;3.0&#29256;&#26412;&#20043;&#21069;&#65292;&#20351;&#29992;Hibernate&#30340;&#31243;&#24207;&#35201;&#20040;&#37319;&#29992;&#33258;&#34892;&#32534;&#20889;&#30340;&#22522;&#20110;<tt class="literal">ThreadLocal</tt>&#30340;&#19978;&#19979;&#25991;session&#65292;&#35201;&#20040;&#37319;&#29992;<tt class="literal">HibernateUtil</tt>&#36825;&#26679;&#30340;&#36741;&#21161;&#31867;&#65292;&#35201;&#20040;&#37319;&#29992;&#31532;&#19977;&#26041;&#26694;&#26550;&#65288;&#27604;&#22914;Spring&#25110;Pico)&#65292;&#23427;&#20204;&#25552;&#20379;&#20102;&#22522;&#20110;&#20195;&#29702;(proxy)&#25110;&#32773;&#22522;&#20110;&#25318;&#25130;&#22120;(interception)&#30340;&#19978;&#19979;&#25991;&#30456;&#20851;session&#12290;
        </p><p>
            &#20174;3.0.1&#29256;&#26412;&#24320;&#22987;&#65292;Hibernate&#22686;&#21152;&#20102;<tt class="literal">SessionFactory.getCurrentSession()</tt>&#26041;&#27861;&#12290;&#19968;&#24320;&#22987;&#65292;&#23427;&#20551;&#23450;&#20102;&#37319;&#29992;<tt class="literal">JTA</tt>&#20107;&#21153;&#65292;<tt class="literal">JTA</tt>&#20107;&#21153;&#23450;&#20041;&#20102;&#24403;&#21069;session&#30340;&#33539;&#22260;&#21644;&#19978;&#19979;&#25991;(scope and context)&#12290;Hibernate&#24320;&#21457;&#22242;&#38431;&#22362;&#20449;&#65292;&#22240;&#20026;&#26377;&#22909;&#20960;&#20010;&#29420;&#31435;&#30340;<tt class="literal">JTA TransactionManager</tt>&#23454;&#29616;&#31283;&#23450;&#21487;&#29992;&#65292;&#19981;&#35770;&#26159;&#21542;&#34987;&#37096;&#32626;&#21040;&#19968;&#20010;<tt class="literal">J2EE</tt>&#23481;&#22120;&#20013;&#65292;&#22823;&#22810;&#25968;(&#20551;&#33509;&#19981;&#26159;&#25152;&#26377;&#30340;&#65289;&#24212;&#29992;&#31243;&#24207;&#37117;&#24212;&#35813;&#37319;&#29992;<tt class="literal">JTA</tt>&#20107;&#21153;&#31649;&#29702;&#12290;&#22522;&#20110;&#36825;&#19968;&#28857;&#65292;&#37319;&#29992;<tt class="literal">JTA</tt>&#30340;&#19978;&#19979;&#25991;&#30456;&#20851;session&#21487;&#20197;&#28385;&#36275;&#20320;&#19968;&#20999;&#38656;&#35201;&#12290;
        </p><p>
            &#26356;&#22909;&#30340;&#26159;&#65292;&#20174;3.1&#24320;&#22987;&#65292;<tt class="literal">SessionFactory.getCurrentSession()</tt>&#30340;&#21518;&#21488;&#23454;&#29616;&#26159;&#21487;&#25300;&#25554;&#30340;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#24341;&#20837;&#20102;&#26032;&#30340;&#25193;&#23637;&#25509;&#21475;(<tt class="literal">org.hibernate.context.CurrentSessionContext</tt>)&#21644;&#26032;&#30340;&#37197;&#32622;&#21442;&#25968;(<tt class="literal">hibernate.current_session_context_class</tt>)&#65292;&#20197;&#20415;&#23545;&#20160;&#20040;&#26159;&#8220;&#24403;&#21069;session&#8221;&#30340;&#33539;&#22260;&#21644;&#19978;&#19979;&#25991;(scope and context)&#30340;&#23450;&#20041;&#36827;&#34892;&#25300;&#25554;&#12290;
        </p><p>
            &#35831;&#21442;&#38405;<tt class="literal">org.hibernate.context.CurrentSessionContext</tt>&#25509;&#21475;&#30340;Javadoc,&#37027;&#37324;&#26377;&#20851;&#20110;&#23427;&#30340;&#22865;&#32422;&#30340;&#35814;&#32454;&#35752;&#35770;&#12290;&#23427;&#23450;&#20041;&#20102;&#21333;&#19968;&#30340;&#26041;&#27861;&#65292;<tt class="literal">currentSession()</tt>&#65292;&#29305;&#23450;&#30340;&#23454;&#29616;&#29992;&#23427;&#26469;&#36127;&#36131;&#36319;&#36394;&#24403;&#21069;&#30340;&#19978;&#19979;&#25991;session&#12290;Hibernate&#20869;&#32622;&#20102;&#27492;&#25509;&#21475;&#30340;&#20004;&#31181;&#23454;&#29616;&#12290;
        </p><div class="itemizedlist"><ul type="disc"><li><p>
                    <tt class="literal">org.hibernate.context.JTASessionContext</tt> - &#24403;&#21069;session&#26681;&#25454;<tt class="literal">JTA</tt>&#26469;&#36319;&#36394;&#21644;&#30028;&#23450;&#12290;&#36825;&#21644;&#20197;&#21069;&#30340;&#20165;&#25903;&#25345;JTA&#30340;&#26041;&#27861;&#26159;&#23436;&#20840;&#19968;&#26679;&#30340;&#12290;&#35814;&#24773;&#35831;&#21442;&#38405;Javadoc&#12290;
                </p></li><li><p>
                    <tt class="literal">org.hibernate.context.ThreadLocalSessionContext</tt> - &#24403;&#21069;session&#36890;&#36807;&#24403;&#21069;&#25191;&#34892;&#30340;&#32447;&#31243;&#26469;&#36319;&#36394;&#21644;&#30028;&#23450;&#12290;&#35814;&#24773;&#20063;&#35831;&#21442;&#38405;Javadoc&#12290;
                </p></li></ul></div><p>
            &#36825;&#20004;&#31181;&#23454;&#29616;&#37117;&#25552;&#20379;&#20102;&#8220;&#27599;&#25968;&#25454;&#24211;&#20107;&#21153;&#23545;&#24212;&#19968;&#20010;session&#8221;&#30340;&#32534;&#31243;&#27169;&#22411;&#65292;&#20063;&#31216;&#20316;<span class="emphasis"><em>&#27599;&#27425;&#35831;&#27714;&#19968;&#20010;session</em></span>&#12290;Hibernate session&#30340;&#36215;&#22987;&#21644;&#32456;&#32467;&#30001;&#25968;&#25454;&#24211;&#20107;&#21153;&#30340;&#29983;&#23384;&#26469;&#25511;&#21046;&#12290;&#20551;&#33509;&#20320;&#37319;&#29992;&#33258;&#34892;&#32534;&#20889;&#20195;&#30721;&#26469;&#31649;&#29702;&#20107;&#21153;&#65288;&#27604;&#22914;&#65292;&#22312;&#32431;&#31929;&#30340;J2SE,&#25110;&#32773;JTA/UserTransaction/BMT&#65289;&#65292;&#24314;&#35758;&#20320;&#20351;&#29992;Hibernate <tt class="literal">Transaction</tt> API&#26469;&#25226;&#24213;&#23618;&#20107;&#21153;&#23454;&#29616;&#20174;&#20320;&#30340;&#20195;&#30721;&#20013;&#38544;&#34255;&#25481;&#12290;&#22914;&#26524;&#20320;&#22312;&#25903;&#25345;CMT&#30340;EJB&#23481;&#22120;&#20013;&#25191;&#34892;&#65292;&#20107;&#21153;&#36793;&#30028;&#26159;&#22768;&#26126;&#24335;&#23450;&#20041;&#30340;&#65292;&#20320;&#19981;&#38656;&#35201;&#22312;&#20195;&#30721;&#20013;&#36827;&#34892;&#20219;&#20309;&#20107;&#21153;&#25110;session&#31649;&#29702;&#25805;&#20316;&#12290;&#35831;&#21442;&#38405;<a href="#transactions" title="&#31532;&nbsp;11&nbsp;&#31456;&nbsp;&#20107;&#21153;&#21644;&#24182;&#21457;">&#31532;&nbsp;11&nbsp;&#31456; <i>&#20107;&#21153;&#21644;&#24182;&#21457;</i></a>&#19968;&#33410;&#26469;&#38405;&#35835;&#26356;&#22810;&#30340;&#20869;&#23481;&#21644;&#31034;&#20363;&#20195;&#30721;&#12290;
        </p><p>
            <tt class="literal">hibernate.current_session_context_class</tt>&#37197;&#32622;&#21442;&#25968;&#23450;&#20041;&#20102;&#24212;&#35813;&#37319;&#29992;&#21738;&#20010;<tt class="literal">org.hibernate.context.CurrentSessionContext</tt>&#23454;&#29616;&#12290;&#27880;&#24847;&#65292;&#20026;&#20102;&#21521;&#19979;&#20860;&#23481;&#65292;&#22914;&#26524;&#26410;&#37197;&#32622;&#27492;&#21442;&#25968;&#65292;&#20294;&#26159;&#23384;&#22312;<tt class="literal">org.hibernate.transaction.TransactionManagerLookup</tt>&#30340;&#37197;&#32622;&#65292;Hibernate&#20250;&#37319;&#29992;<tt class="literal">org.hibernate.context.JTASessionContext</tt>&#12290;&#19968;&#33324;&#32780;&#35328;&#65292;&#27492;&#21442;&#25968;&#30340;&#20540;&#25351;&#26126;&#20102;&#35201;&#20351;&#29992;&#30340;&#23454;&#29616;&#31867;&#30340;&#20840;&#21517;&#65292;&#20294;&#37027;&#20004;&#20010;&#20869;&#32622;&#30340;&#23454;&#29616;&#21487;&#20197;&#20351;&#29992;&#31616;&#20889;&#65292;&#21363;"jta"&#21644;"thread"&#12290;
            
        </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="session-configuration"></a>&#31532;&nbsp;3&nbsp;&#31456;&nbsp;
        &#37197;&#32622;
    </h2></div></div><div></div></div><p>
        &#30001;&#20110;Hibernate&#26159;&#20026;&#20102;&#33021;&#22312;&#21508;&#31181;&#19981;&#21516;&#29615;&#22659;&#19979;&#24037;&#20316;&#32780;&#35774;&#35745;&#30340;, &#22240;&#27492;&#23384;&#22312;&#30528;&#22823;&#37327;&#30340;&#37197;&#32622;&#21442;&#25968;. &#24184;&#36816;&#30340;&#26159;&#22810;&#25968;&#37197;&#32622;&#21442;&#25968;&#37117;
        &#26377;&#27604;&#36739;&#30452;&#35266;&#30340;&#40664;&#35748;&#20540;, &#24182;&#26377;&#38543;Hibernate&#19968;&#21516;&#20998;&#21457;&#30340;&#37197;&#32622;&#26679;&#20363;<tt class="literal">hibernate.properties</tt>
        (&#20301;&#20110;<tt class="literal">etc/</tt>)&#26469;&#23637;&#31034;&#21508;&#31181;&#37197;&#32622;&#36873;&#39033;. &#25152;&#38656;&#20570;&#30340;&#20165;&#20165;&#26159;&#23558;&#36825;&#20010;&#26679;&#20363;&#25991;&#20214;&#22797;&#21046;&#21040;&#31867;&#36335;&#24452;
        (classpath)&#19979;&#24182;&#20570;&#19968;&#20123;&#33258;&#23450;&#20041;&#30340;&#20462;&#25913;.
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-programmatic"></a>3.1.&nbsp;
            &#21487;&#32534;&#31243;&#30340;&#37197;&#32622;&#26041;&#24335;
        </h2></div></div><div></div></div><p>
            &#19968;&#20010;<tt class="literal">org.hibernate.cfg.Configuration</tt>&#23454;&#20363;&#20195;&#34920;&#20102;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#20013;Java&#31867;&#22411;
            &#21040;SQL&#25968;&#25454;&#24211;&#26144;&#23556;&#30340;&#23436;&#25972;&#38598;&#21512;. <tt class="literal">Configuration</tt>&#34987;&#29992;&#26469;&#26500;&#24314;&#19968;&#20010;(&#19981;&#21487;&#21464;&#30340;
            (immutable))<tt class="literal">SessionFactory</tt>. &#26144;&#23556;&#23450;&#20041;&#21017;&#30001;&#19981;&#21516;&#30340;XML&#26144;&#23556;&#23450;&#20041;&#25991;&#20214;&#32534;&#35793;&#32780;&#26469;.
        </p><p>
            &#20320;&#21487;&#20197;&#30452;&#25509;&#23454;&#20363;&#21270;<tt class="literal">Configuration</tt>&#26469;&#33719;&#21462;&#19968;&#20010;&#23454;&#20363;&#65292;&#24182;&#20026;&#23427;&#25351;&#23450;XML&#26144;&#23556;&#23450;&#20041;
            &#25991;&#20214;. &#22914;&#26524;&#26144;&#23556;&#23450;
            &#20041;&#25991;&#20214;&#22312;&#31867;&#36335;&#24452;(classpath)&#20013;, &#35831;&#20351;&#29992;<tt class="literal">addResource()</tt>:
        </p><pre class="programlisting">Configuration cfg = new Configuration()
    .addResource("Item.hbm.xml")
    .addResource("Bid.hbm.xml");</pre><p>
            &#19968;&#20010;&#26367;&#20195;&#26041;&#27861;&#65288;&#26377;&#26102;&#26159;&#26356;&#22909;&#30340;&#36873;&#25321;&#65289;&#26159;&#65292;&#25351;&#23450;&#34987;&#26144;&#23556;&#30340;&#31867;&#65292;&#35753;Hibernate&#24110;&#20320;&#23547;&#25214;&#26144;&#23556;&#23450;&#20041;&#25991;&#20214;:
        </p><pre class="programlisting">Configuration cfg = new Configuration()
    .addClass(org.hibernate.auction.Item.class)
    .addClass(org.hibernate.auction.Bid.class);</pre><p>
            Hibernate&#23558;&#20250;&#22312;&#31867;&#36335;&#24452;(classpath)&#20013;&#23547;&#25214;&#21517;&#23383;&#20026;
            <tt class="literal">/org/hibernate/auction/Item.hbm.xml</tt>&#21644;
            <tt class="literal">/org/hibernate/auction/Bid.hbm.xml</tt>&#26144;&#23556;&#23450;&#20041;&#25991;&#20214;.
            &#36825;&#31181;&#26041;&#24335;&#28040;&#38500;&#20102;&#20219;&#20309;&#23545;&#25991;&#20214;&#21517;&#30340;&#30828;&#32534;&#30721;(hardcoded).
        </p><p>
            <tt class="literal">Configuration</tt>&#20063;&#20801;&#35768;&#20320;&#25351;&#23450;&#37197;&#32622;&#23646;&#24615;:
        </p><pre class="programlisting">Configuration cfg = new Configuration()
    .addClass(org.hibernate.auction.Item.class)
    .addClass(org.hibernate.auction.Bid.class)
    .setProperty("hibernate.dialect", "org.hibernate.dialect.MySQLInnoDBDialect")
    .setProperty("hibernate.connection.datasource", "java:comp/env/jdbc/test")
    .setProperty("hibernate.order_updates", "true");</pre><p>
            &#24403;&#28982;&#36825;&#19981;&#26159;&#21807;&#19968;&#30340;&#20256;&#36882;Hibernate&#37197;&#32622;&#23646;&#24615;&#30340;&#26041;&#24335;, &#20854;&#20182;&#21487;&#36873;&#26041;&#24335;&#36824;&#21253;&#25324;:
        </p><div class="orderedlist"><ol type="1" compact><li><p>
                    &#20256;&#19968;&#20010;<tt class="literal">java.util.Properties</tt>&#23454;&#20363;&#32473;
                    <tt class="literal">Configuration.setProperties()</tt>.
                </p></li><li><p>
                    &#23558;<tt class="literal">hibernate.properties</tt>&#25918;&#32622;&#22312;&#31867;&#36335;&#24452;(classpath)&#30340;&#26681;&#30446;&#24405;&#19979;
                    (root directory).
                </p></li><li><p>
                    &#36890;&#36807;<tt class="literal">java -Dproperty=value</tt>&#26469;&#35774;&#32622;&#31995;&#32479;
                    (<tt class="literal">System</tt>)&#23646;&#24615;.
                </p></li><li><p>
                    &#22312;<tt class="literal">hibernate.cfg.xml</tt>&#20013;&#21152;&#20837;&#20803;&#32032;
                    <tt class="literal">&lt;property&gt;</tt> (&#31245;&#21518;&#35752;&#35770;).
                </p></li></ol></div><p>
            &#22914;&#26524;&#24819;&#23613;&#24555;&#20307;&#39564;Hibernate, <tt class="literal">hibernate.properties</tt>&#26159;&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;.
        </p><p>
            <tt class="literal">Configuration</tt>&#23454;&#20363;&#34987;&#35774;&#35745;&#25104;&#21551;&#21160;&#26399;&#38388;&#65288;startup-time&#65289;&#23545;&#35937;, 
            &#19968;&#26086;<tt class="literal">SessionFactory</tt>&#21019;&#24314;&#23436;&#25104;&#23427;&#23601;&#34987;&#20002;&#24323;&#20102;.
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-sessionfactory"></a>3.2.&nbsp;
            &#33719;&#24471;SessionFactory
        </h2></div></div><div></div></div><p>
            &#24403;&#25152;&#26377;&#26144;&#23556;&#23450;&#20041;&#34987;<tt class="literal">Configuration</tt>&#35299;&#26512;&#21518;, 
            &#24212;&#29992;&#31243;&#24207;&#24517;&#39035;&#33719;&#24471;&#19968;&#20010;&#29992;&#20110;&#26500;&#36896;<tt class="literal">Session</tt>&#23454;&#20363;&#30340;&#24037;&#21378;. 
            &#36825;&#20010;&#24037;&#21378;&#23558;&#34987;&#24212;&#29992;&#31243;&#24207;&#30340;&#25152;&#26377;&#32447;&#31243;&#20849;&#20139;:
        </p><pre class="programlisting">SessionFactory sessions = cfg.buildSessionFactory();</pre><p>
            Hibernate&#20801;&#35768;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#21019;&#24314;&#22810;&#20010;<tt class="literal">SessionFactory</tt>&#23454;&#20363;. &#36825;&#23545;
            &#20351;&#29992;&#22810;&#20010;&#25968;&#25454;&#24211;&#30340;&#24212;&#29992;&#26469;&#35828;&#24456;&#26377;&#29992;.
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-hibernatejdbc"></a>3.3.&nbsp;
            JDBC&#36830;&#25509;
        </h2></div></div><div></div></div><p>
            &#36890;&#24120;&#20320;&#24076;&#26395;<tt class="literal">SessionFactory</tt>&#26469;&#20026;&#20320;&#21019;&#24314;&#21644;&#32531;&#23384;(pool)JDBC&#36830;&#25509;. &#22914;&#26524;&#20320;&#37319;&#29992;&#36825;&#31181;&#26041;&#24335;, 
            &#21482;&#38656;&#35201;&#22914;&#19979;&#20363;&#25152;&#31034;&#37027;&#26679;&#65292;&#25171;&#24320;&#19968;&#20010;<tt class="literal">Session</tt>:
        </p><pre class="programlisting">Session session = sessions.openSession(); // open a new Session</pre><p>
            &#19968;&#26086;&#20320;&#38656;&#35201;&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;&#26102;, &#23601;&#20250;&#20174;&#36830;&#25509;&#27744;(connection pool)&#33719;&#24471;&#19968;&#20010;JDBC&#36830;&#25509;.
        </p><p>
            &#20026;&#20102;&#20351;&#36825;&#31181;&#26041;&#24335;&#24037;&#20316;&#36215;&#26469;, &#25105;&#20204;&#38656;&#35201;&#21521;Hibernate&#20256;&#36882;&#19968;&#20123;JDBC&#36830;&#25509;&#30340;&#23646;&#24615;.
            &#25152;&#26377;Hibernate&#23646;&#24615;&#30340;&#21517;&#23383;&#21644;&#35821;&#20041;&#37117;&#22312;<tt class="literal">org.hibernate.cfg.Environment</tt>&#20013;&#23450;&#20041;. 
            &#25105;&#20204;&#29616;&#22312;&#23558;&#25551;&#36848;JDBC&#36830;&#25509;&#37197;&#32622;&#20013;&#26368;&#37325;&#35201;&#30340;&#35774;&#32622;.
        </p><p>
            &#22914;&#26524;&#20320;&#35774;&#32622;&#22914;&#19979;&#23646;&#24615;&#65292;Hibernate&#23558;&#20351;&#29992;<tt class="literal">java.sql.DriverManager</tt>&#26469;&#33719;&#24471;(&#21644;&#32531;&#23384;)JDBC&#36830;&#25509; :
        </p><div class="table"><a name="d0e2006"></a><p class="title"><b>&#34920;&nbsp;3.1.&nbsp;
                Hibernate JDBC&#23646;&#24615;
            </b></p><table summary="&#xA;                Hibernate JDBC&#23646;&#24615;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                            &#23646;&#24615;&#21517;
                        </th><th>
                            &#29992;&#36884;
                        </th></tr></thead><tbody><tr><td><tt class="literal">hibernate.connection.driver_class</tt></td><td><span class="emphasis"><em>jdbc&#39537;&#21160;&#31867;</em></span></td></tr><tr><td><tt class="literal">hibernate.connection.url</tt></td><td><span class="emphasis"><em>jdbc URL</em></span></td></tr><tr><td><tt class="literal">hibernate.connection.username</tt></td><td><span class="emphasis"><em>&#25968;&#25454;&#24211;&#29992;&#25143;</em></span></td></tr><tr><td><tt class="literal">hibernate.connection.password</tt></td><td><span class="emphasis"><em>&#25968;&#25454;&#24211;&#29992;&#25143;&#23494;&#30721;</em></span></td></tr><tr><td><tt class="literal">hibernate.connection.pool_size</tt></td><td><span class="emphasis"><em>&#36830;&#25509;&#27744;&#23481;&#37327;&#19978;&#38480;&#25968;&#30446;</em></span></td></tr></tbody></table></div><p>
            &#20294;Hibernate&#33258;&#24102;&#30340;&#36830;&#25509;&#27744;&#31639;&#27861;&#30456;&#24403;&#19981;&#25104;&#29087;. 
            &#23427;&#21482;&#26159;&#20026;&#20102;&#35753;&#20320;&#24555;&#20123;&#19978;&#25163;<span class="emphasis"><em>&#65292;&#24182;&#19981;&#36866;&#21512;&#29992;&#20110;&#20135;&#21697;&#31995;&#32479;</em></span>&#25110;&#24615;&#33021;&#27979;&#35797;&#20013;&#12290;
            &#20986;&#20110;&#26368;&#20339;&#24615;&#33021;&#21644;&#31283;&#23450;&#24615;&#32771;&#34385;&#20320;&#24212;&#35813;&#20351;&#29992;&#31532;&#19977;&#26041;&#30340;&#36830;&#25509;&#27744;&#12290;&#21482;&#38656;&#35201;&#29992;&#29305;&#23450;&#36830;&#25509;&#27744;&#30340;&#35774;&#32622;&#26367;&#25442;
            <tt class="literal">hibernate.connection.pool_size</tt>&#21363;&#21487;&#12290;&#36825;&#23558;&#20851;&#38381;Hibernate&#33258;&#24102;&#30340;&#36830;&#25509;&#27744;.
            &#20363;&#22914;, &#20320;&#21487;&#33021;&#20250;&#24819;&#29992;C3P0.
        </p><p>
            C3P0&#26159;&#19968;&#20010;&#38543;Hibernate&#19968;&#21516;&#20998;&#21457;&#30340;&#24320;&#28304;&#30340;JDBC&#36830;&#25509;&#27744;, &#23427;&#20301;&#20110;<tt class="literal">lib</tt>&#30446;&#24405;&#19979;&#12290;
            &#22914;&#26524;&#20320;&#35774;&#32622;&#20102;<tt class="literal">hibernate.c3p0.*</tt>&#30456;&#20851;&#30340;&#23646;&#24615;, Hibernate&#23558;&#20351;&#29992;
            <tt class="literal">C3P0ConnectionProvider</tt>&#26469;&#32531;&#23384;JDBC&#36830;&#25509;. &#22914;&#26524;&#20320;&#26356;&#21407;&#24847;&#20351;&#29992;Proxool, &#35831;&#21442;&#32771;&#21457;
            &#34892;&#21253;&#20013;&#30340;<tt class="literal">hibernate.properties</tt>&#24182;&#21040;Hibernate&#32593;&#31449;&#33719;&#21462;&#26356;&#22810;&#30340;&#20449;&#24687;.
        </p><p>
            &#36825;&#26159;&#19968;&#20010;&#20351;&#29992;C3P0&#30340;<tt class="literal">hibernate.properties</tt>&#26679;&#20363;&#25991;&#20214;:
        </p><a name="c3p0-configuration"></a><pre class="programlisting">hibernate.connection.driver_class = org.postgresql.Driver
hibernate.connection.url = jdbc:postgresql://localhost/mydatabase
hibernate.connection.username = myuser
hibernate.connection.password = secret
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=20
hibernate.c3p0.timeout=1800
hibernate.c3p0.max_statements=50
hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect</pre><p>
            &#20026;&#20102;&#33021;&#22312;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;(application server)&#20013;&#20351;&#29992;Hibernate, &#24212;&#24403;&#24635;&#26159;&#23558;Hibernate
            &#37197;&#32622;&#25104;&#20174;&#27880;&#20876;&#22312;JNDI&#20013;&#30340;<tt class="literal">Datasource</tt>&#22788;&#33719;&#24471;&#36830;&#25509;&#65292;&#20320;&#33267;&#23569;&#38656;&#35201;&#35774;&#32622;&#19979;&#21015;&#23646;&#24615;&#20013;&#30340;&#19968;&#20010;:
        </p><div class="table"><a name="d0e2088"></a><p class="title"><b>&#34920;&nbsp;3.2.&nbsp;
                Hibernate&#25968;&#25454;&#28304;&#23646;&#24615;
            </b></p><table summary="&#xA;                Hibernate&#25968;&#25454;&#28304;&#23646;&#24615;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                            &#23646;&#24615;&#21517;
                        </th><th>
                            &#29992;&#36884;
                        </th></tr></thead><tbody><tr><td><tt class="literal">hibernate.connection.datasource</tt></td><td><span class="emphasis"><em>&#25968;&#25454;&#28304;JNDI&#21517;&#23383;</em></span></td></tr><tr><td><tt class="literal">hibernate.jndi.url</tt></td><td><span class="emphasis"><em>JNDI&#25552;&#20379;&#32773;&#30340;URL</em></span> (&#21487;&#36873;)
                </td></tr><tr><td><tt class="literal">hibernate.jndi.class</tt></td><td><span class="emphasis"><em>JNDI <tt class="literal">InitialContextFactory</tt>&#31867;</em></span> (&#21487;&#36873;)
                </td></tr><tr><td><tt class="literal">hibernate.connection.username</tt></td><td><span class="emphasis"><em>&#25968;&#25454;&#24211;&#29992;&#25143;</em></span> (&#21487;&#36873;)
                </td></tr><tr><td><tt class="literal">hibernate.connection.password</tt></td><td><span class="emphasis"><em>&#25968;&#25454;&#24211;&#29992;&#25143;&#23494;&#30721;</em></span> (&#21487;&#36873;)
                </td></tr></tbody></table></div><p>
            &#36825;&#26159;&#19968;&#20010;&#20351;&#29992;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#25552;&#20379;&#30340;JNDI&#25968;&#25454;&#28304;&#30340;<tt class="literal">hibernate.properties</tt>&#26679;&#20363;&#25991;&#20214;:
        </p><pre class="programlisting">hibernate.connection.datasource = java:/comp/env/jdbc/test
hibernate.transaction.factory_class = \
    org.hibernate.transaction.JTATransactionFactory
hibernate.transaction.manager_lookup_class = \
    org.hibernate.transaction.JBossTransactionManagerLookup
hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect</pre><p>
            &#20174;JNDI&#25968;&#25454;&#28304;&#33719;&#24471;&#30340;JDBC&#36830;&#25509;&#23558;&#33258;&#21160;&#21442;&#19982;&#21040;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#20013;&#23481;&#22120;&#31649;&#29702;&#30340;&#20107;&#21153;(container-managed transactions)&#20013;&#21435;.
        </p><p>
            &#20219;&#20309;&#36830;&#25509;(connection)&#23646;&#24615;&#30340;&#23646;&#24615;&#21517;&#37117;&#35201;&#20197;"<tt class="literal">hibernate.connnection</tt>"&#24320;&#22836;. 
            &#20363;&#22914;, &#20320;&#21487;&#33021;&#20250;&#20351;&#29992;<tt class="literal">hibernate.connection.charSet</tt>&#26469;&#25351;&#23450;&#23383;&#31526;&#38598;<tt class="literal">charSet</tt>.
        </p><p>
            &#36890;&#36807;&#23454;&#29616;<tt class="literal">org.hibernate.connection.ConnectionProvider</tt>&#25509;&#21475;&#65292;&#20320;&#21487;&#20197;&#23450;&#20041;&#23646;&#20110;
            &#20320;&#33258;&#24049;&#30340;&#33719;&#24471;JDBC&#36830;&#25509;&#30340;&#25554;&#20214;&#31574;&#30053;&#12290;&#36890;&#36807;&#35774;&#32622;<tt class="literal">hibernate.connection.provider_class</tt>&#65292;
            &#20320;&#21487;&#20197;&#36873;&#25321;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#23454;&#29616;.
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-optional"></a>3.4.&nbsp;
            &#21487;&#36873;&#30340;&#37197;&#32622;&#23646;&#24615;
        </h2></div></div><div></div></div><p>
            &#26377;&#22823;&#37327;&#23646;&#24615;&#33021;&#29992;&#26469;&#25511;&#21046;Hibernate&#22312;&#36816;&#34892;&#26399;&#30340;&#34892;&#20026;. &#23427;&#20204;&#37117;&#26159;&#21487;&#36873;&#30340;, &#24182;&#25317;&#26377;&#36866;&#24403;&#30340;&#40664;&#35748;&#20540;.
        </p><p>
            <span class="emphasis"><em>&#35686;&#21578;: &#20854;&#20013;&#19968;&#20123;&#23646;&#24615;&#26159;"&#31995;&#32479;&#32423;(system-level)&#30340;".</em></span>
            &#31995;&#32479;&#32423;&#23646;&#24615;&#21482;&#33021;&#36890;&#36807;<tt class="literal">java -Dproperty=value</tt>&#25110;
            <tt class="literal">hibernate.properties</tt>&#26469;&#35774;&#32622;, &#32780;<span class="emphasis"><em>&#19981;&#33021;</em></span>&#29992;&#19978;&#38754;&#25551;&#36848;&#30340;&#20854;&#20182;&#26041;&#27861;&#26469;&#35774;&#32622;.
        </p><div class="table"><a name="configuration-optional-properties"></a><p class="title"><b>&#34920;&nbsp;3.3.&nbsp;
                Hibernate&#37197;&#32622;&#23646;&#24615;
            </b></p><table summary="&#xA;                Hibernate&#37197;&#32622;&#23646;&#24615;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                            &#23646;&#24615;&#21517;
                        </th><th>
                            &#29992;&#36884;
                        </th></tr></thead><tbody><tr><td><tt class="literal">hibernate.dialect</tt></td><td>
                            &#19968;&#20010;Hibernate <tt class="literal">Dialect</tt>&#31867;&#21517;&#20801;&#35768;Hibernate&#38024;&#23545;&#29305;&#23450;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#29983;&#25104;&#20248;&#21270;&#30340;SQL.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">full.classname.of.Dialect</tt>
               
             </p></td></tr><tr><td><tt class="literal">hibernate.show_sql</tt></td><td>
                            &#36755;&#20986;&#25152;&#26377;SQL&#35821;&#21477;&#21040;&#25511;&#21046;&#21488;.
							&#26377;&#19968;&#20010;&#21478;&#22806;&#30340;&#36873;&#25321;&#26159;&#25226;<tt class="literal">org.hibernate.SQL</tt>&#36825;&#20010;log category&#35774;&#20026;<tt class="literal">debug</tt>&#12290;
                            <p>
                                <span class="strong">eg.</span> 
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.format_sql</tt></td><td>
                            &#22312;log&#21644;console&#20013;&#25171;&#21360;&#20986;&#26356;&#28418;&#20142;&#30340;SQL&#12290;
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.default_schema</tt></td><td>
                            &#22312;&#29983;&#25104;&#30340;SQL&#20013;, &#23558;&#32473;&#23450;&#30340;schema/tablespace&#38468;&#21152;&#20110;&#38750;&#20840;&#38480;&#23450;&#21517;&#30340;&#34920;&#21517;&#19978;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">SCHEMA_NAME</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.default_catalog</tt></td><td>
                            &#22312;&#29983;&#25104;&#30340;SQL&#20013;, &#23558;&#32473;&#23450;&#30340;catalog&#38468;&#21152;&#20110;&#38750;&#20840;&#38480;&#23450;&#21517;&#30340;&#34920;&#21517;&#19978;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">CATALOG_NAME</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.session_factory_name</tt></td><td><tt class="literal">SessionFactory</tt>&#21019;&#24314;&#21518;&#65292;&#23558;&#33258;&#21160;&#20351;&#29992;&#36825;&#20010;&#21517;&#23383;&#32465;&#23450;&#21040;JNDI&#20013;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">jndi/composite/name</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.max_fetch_depth</tt></td><td>
                            &#20026;&#21333;&#21521;&#20851;&#32852;(&#19968;&#23545;&#19968;, &#22810;&#23545;&#19968;)&#30340;&#22806;&#36830;&#25509;&#25235;&#21462;&#65288;outer join fetch&#65289;&#26641;&#35774;&#32622;&#26368;&#22823;&#28145;&#24230;.
                            &#20540;&#20026;<tt class="literal">0</tt>&#24847;&#21619;&#30528;&#23558;&#20851;&#38381;&#40664;&#35748;&#30340;&#22806;&#36830;&#25509;&#25235;&#21462;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                &#24314;&#35758;&#22312;<tt class="literal">0</tt>&#21040;<tt class="literal">3</tt>&#20043;&#38388;&#21462;&#20540;
                            </p></td></tr><tr><td><tt class="literal">hibernate.default_batch_fetch_size</tt></td><td>
                            &#20026;Hibernate&#20851;&#32852;&#30340;&#25209;&#37327;&#25235;&#21462;&#35774;&#32622;&#40664;&#35748;&#25968;&#37327;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                &#24314;&#35758;&#30340;&#21462;&#20540;&#20026;<tt class="literal">4</tt>, <tt class="literal">8</tt>, 
                                &#21644;<tt class="literal">16</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.default_entity_mode</tt></td><td>
                            &#20026;&#30001;&#36825;&#20010;<tt class="literal">SessionFactory</tt>&#25171;&#24320;&#30340;&#25152;&#26377;Session&#25351;&#23450;&#40664;&#35748;&#30340;&#23454;&#20307;&#34920;&#29616;&#27169;&#24335;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">dynamic-map</tt>, <tt class="literal">dom4j</tt>,
                                <tt class="literal">pojo</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.order_updates</tt></td><td>
                            &#24378;&#21046;Hibernate&#25353;&#29031;&#34987;&#26356;&#26032;&#25968;&#25454;&#30340;&#20027;&#38190;&#65292;&#20026;SQL&#26356;&#26032;&#25490;&#24207;&#12290;&#36825;&#20040;&#20570;&#23558;&#20943;&#23569;&#22312;&#39640;&#24182;&#21457;&#31995;&#32479;&#20013;&#20107;&#21153;&#30340;&#27515;&#38145;&#12290;
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.generate_statistics</tt></td><td>
                            &#22914;&#26524;&#24320;&#21551;, Hibernate&#23558;&#25910;&#38598;&#26377;&#21161;&#20110;&#24615;&#33021;&#35843;&#33410;&#30340;&#32479;&#35745;&#25968;&#25454;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.use_identifer_rollback</tt></td><td>
                            &#22914;&#26524;&#24320;&#21551;, &#22312;&#23545;&#35937;&#34987;&#21024;&#38500;&#26102;&#29983;&#25104;&#30340;&#26631;&#35782;&#23646;&#24615;&#23558;&#34987;&#37325;&#35774;&#20026;&#40664;&#35748;&#20540;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.use_sql_comments</tt></td><td>
                            &#22914;&#26524;&#24320;&#21551;, Hibernate&#23558;&#22312;SQL&#20013;&#29983;&#25104;&#26377;&#21161;&#20110;&#35843;&#35797;&#30340;&#27880;&#37322;&#20449;&#24687;, &#40664;&#35748;&#20540;&#20026;<tt class="literal">false</tt>.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr></tbody></table></div><div class="table"><a name="configuration-jdbc-properties"></a><p class="title"><b>&#34920;&nbsp;3.4.&nbsp;
                Hibernate JDBC&#21644;&#36830;&#25509;(connection)&#23646;&#24615;
            </b></p><table summary="&#xA;                Hibernate JDBC&#21644;&#36830;&#25509;(connection)&#23646;&#24615;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                            &#23646;&#24615;&#21517;
                        </th><th>
                            &#29992;&#36884;
                        </th></tr></thead><tbody><tr><td><tt class="literal">hibernate.jdbc.fetch_size</tt></td><td>
                            &#38750;&#38646;&#20540;&#65292;&#25351;&#23450;JDBC&#25235;&#21462;&#25968;&#37327;&#30340;&#22823;&#23567; (&#35843;&#29992;<tt class="literal">Statement.setFetchSize()</tt>).
                        </td></tr><tr><td><tt class="literal">hibernate.jdbc.batch_size</tt></td><td>
                            &#38750;&#38646;&#20540;&#65292;&#20801;&#35768;Hibernate&#20351;&#29992;JDBC2&#30340;&#25209;&#37327;&#26356;&#26032;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                &#24314;&#35758;&#21462;<tt class="literal">5</tt>&#21040;<tt class="literal">30</tt>&#20043;&#38388;&#30340;&#20540;
                            </p></td></tr><tr><td><tt class="literal">hibernate.jdbc.batch_versioned_data</tt></td><td>
                            &#22914;&#26524;&#20320;&#24819;&#35753;&#20320;&#30340;JDBC&#39537;&#21160;&#20174;<tt class="literal">executeBatch()</tt>&#36820;&#22238;&#27491;&#30830;&#30340;&#34892;&#35745;&#25968; , 
                            &#37027;&#20040;&#23558;&#27492;&#23646;&#24615;&#35774;&#20026;<tt class="literal">true</tt>(&#24320;&#21551;&#36825;&#20010;&#36873;&#39033;&#36890;&#24120;&#26159;&#23433;&#20840;&#30340;). 
                            &#21516;&#26102;&#65292;Hibernate&#23558;&#20026;&#33258;&#21160;&#29256;&#26412;&#21270;&#30340;&#25968;&#25454;&#20351;&#29992;&#25209;&#37327;DML. &#40664;&#35748;&#20540;&#20026;<tt class="literal">false</tt>.
                            <p>
                                <span class="strong">eg.</span>
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.jdbc.factory_class</tt></td><td>
                            &#36873;&#25321;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;<tt class="literal">Batcher</tt>. &#22810;&#25968;&#24212;&#29992;&#31243;&#24207;&#19981;&#38656;&#35201;&#36825;&#20010;&#37197;&#32622;&#23646;&#24615;.
                            <p>
                                <span class="strong">eg.</span>
                                <tt class="literal">classname.of.Batcher</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.jdbc.use_scrollable_resultset</tt></td><td>
                            &#20801;&#35768;Hibernate&#20351;&#29992;JDBC2&#30340;&#21487;&#28378;&#21160;&#32467;&#26524;&#38598;.
                            &#21482;&#26377;&#22312;&#20351;&#29992;&#29992;&#25143;&#25552;&#20379;&#30340;JDBC&#36830;&#25509;&#26102;&#65292;&#36825;&#20010;&#36873;&#39033;&#25165;&#26159;&#24517;&#35201;&#30340;, 
                            &#21542;&#21017;Hibernate&#20250;&#20351;&#29992;&#36830;&#25509;&#30340;&#20803;&#25968;&#25454;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.jdbc.use_streams_for_binary</tt></td><td>
                            &#22312;JDBC&#35835;&#20889;<tt class="literal">binary (&#20108;&#36827;&#21046;)</tt>&#25110;<tt class="literal">serializable (&#21487;&#24207;&#21015;&#21270;)</tt>
                            &#30340;&#31867;&#22411;&#26102;&#20351;&#29992;&#27969;(stream)(&#31995;&#32479;&#32423;&#23646;&#24615;).
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.jdbc.use_get_generated_keys</tt></td><td>
                            &#22312;&#25968;&#25454;&#25554;&#20837;&#25968;&#25454;&#24211;&#20043;&#21518;&#65292;&#20801;&#35768;&#20351;&#29992;JDBC3 <tt class="literal">PreparedStatement.getGeneratedKeys()</tt>
                            &#26469;&#33719;&#21462;&#25968;&#25454;&#24211;&#29983;&#25104;&#30340;key(&#38190;)&#12290;&#38656;&#35201;JDBC3+&#39537;&#21160;&#21644;JRE1.4+, &#22914;&#26524;&#20320;&#30340;&#25968;&#25454;&#24211;&#39537;&#21160;&#22312;&#20351;&#29992;Hibernate&#30340;&#26631;
                            &#35782;&#29983;&#25104;&#22120;&#26102;&#36935;&#21040;&#38382;&#39064;&#65292;&#35831;&#23558;&#27492;&#20540;&#35774;&#20026;false. &#40664;&#35748;&#24773;&#20917;&#19979;&#23558;&#20351;&#29992;&#36830;&#25509;&#30340;&#20803;&#25968;&#25454;&#26469;&#21028;&#23450;&#39537;&#21160;&#30340;&#33021;&#21147;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">true|false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.connection.provider_class</tt></td><td>
                            &#33258;&#23450;&#20041;<tt class="literal">ConnectionProvider</tt>&#30340;&#31867;&#21517;, &#27492;&#31867;&#29992;&#26469;&#21521;Hibernate&#25552;&#20379;JDBC&#36830;&#25509;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">classname.of.ConnectionProvider</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.connection.isolation</tt></td><td>
                        &#35774;&#32622;JDBC&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;. &#26597;&#30475;<tt class="literal">java.sql.Connection</tt>&#26469;&#20102;&#35299;&#21508;&#20010;&#20540;&#30340;&#20855;&#20307;&#24847;&#20041;, 
                        &#20294;&#35831;&#27880;&#24847;&#22810;&#25968;&#25968;&#25454;&#24211;&#37117;&#19981;&#25903;&#25345;&#25152;&#26377;&#30340;&#38548;&#31163;&#32423;&#21035;.
                        <p>
                            <span class="strong">&#21462;&#20540;</span> 
                            <tt class="literal">1, 2, 4, 8</tt>
                        </p></td></tr><tr><td><tt class="literal">hibernate.connection.autocommit</tt></td><td>
                            &#20801;&#35768;&#34987;&#32531;&#23384;&#30340;JDBC&#36830;&#25509;&#24320;&#21551;&#33258;&#21160;&#25552;&#20132;(autocommit) (&#19981;&#24314;&#35758;).
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.connection.release_mode</tt></td><td>
                            &#25351;&#23450;Hibernate&#22312;&#20309;&#26102;&#37322;&#25918;JDBC&#36830;&#25509;. &#40664;&#35748;&#24773;&#20917;&#19979;,&#30452;&#21040;Session&#34987;&#26174;&#24335;&#20851;&#38381;&#25110;&#34987;&#26029;&#24320;&#36830;&#25509;&#26102;,&#25165;&#20250;&#37322;&#25918;JDBC&#36830;&#25509;. 
                            &#23545;&#20110;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#30340;JTA&#25968;&#25454;&#28304;, &#20320;&#24212;&#24403;&#20351;&#29992;<tt class="literal">after_statement</tt>, &#36825;&#26679;&#22312;&#27599;&#27425;JDBC&#35843;&#29992;&#21518;&#65292;&#37117;&#20250;&#20027;&#21160;&#30340;&#37322;&#25918;&#36830;&#25509;. 
                            &#23545;&#20110;&#38750;JTA&#30340;&#36830;&#25509;, &#20351;&#29992;<tt class="literal">after_transaction</tt>&#22312;&#27599;&#20010;&#20107;&#21153;&#32467;&#26463;&#26102;&#37322;&#25918;&#36830;&#25509;&#26159;&#21512;&#29702;&#30340;. 
                            <tt class="literal">auto</tt>&#23558;&#20026;JTA&#21644;CMT&#20107;&#21153;&#31574;&#30053;&#36873;&#25321;<tt class="literal">after_statement</tt>, 
                            &#20026;JDBC&#20107;&#21153;&#31574;&#30053;&#36873;&#25321;<tt class="literal">after_transaction</tt>.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">on_close</tt> | <tt class="literal">after_transaction</tt> |
                                <tt class="literal">after_statement</tt> | <tt class="literal">auto</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.connection.<span class="emphasis"><em>&lt;propertyName&gt;</em></span></tt></td><td>
                            &#23558;JDBC&#23646;&#24615;<tt class="literal">propertyName</tt>&#20256;&#36882;&#21040;<tt class="literal">DriverManager.getConnection()</tt>&#20013;&#21435;.
                        </td></tr><tr><td><tt class="literal">hibernate.jndi.<span class="emphasis"><em>&lt;propertyName&gt;</em></span></tt></td><td>
                            &#23558;&#23646;&#24615;<tt class="literal">propertyName</tt>&#20256;&#36882;&#21040;JNDI <tt class="literal">InitialContextFactory</tt>&#20013;&#21435;.
                        </td></tr></tbody></table></div><div class="table"><a name="configuration-cache-properties"></a><p class="title"><b>&#34920;&nbsp;3.5.&nbsp;
                Hibernate&#32531;&#23384;&#23646;&#24615;
            </b></p><table summary="&#xA;                Hibernate&#32531;&#23384;&#23646;&#24615;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                            &#23646;&#24615;&#21517;
                        </th><th>
                            &#29992;&#36884;
                        </th></tr></thead><tbody><tr><td><tt class="literal">hibernate.cache.provider_class</tt></td><td>
                            &#33258;&#23450;&#20041;&#30340;<tt class="literal">CacheProvider</tt>&#30340;&#31867;&#21517;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">classname.of.CacheProvider</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.cache.use_minimal_puts</tt></td><td>
                            &#20197;&#39057;&#32321;&#30340;&#35835;&#25805;&#20316;&#20026;&#20195;&#20215;, &#20248;&#21270;&#20108;&#32423;&#32531;&#23384;&#26469;&#26368;&#23567;&#21270;&#20889;&#25805;&#20316;. &#22312;Hibernate3&#20013;&#65292;&#36825;&#20010;&#35774;&#32622;&#23545;&#30340;&#38598;&#32676;&#32531;&#23384;&#38750;&#24120;&#26377;&#29992;, 
                            &#23545;&#38598;&#32676;&#32531;&#23384;&#30340;&#23454;&#29616;&#32780;&#35328;&#65292;&#40664;&#35748;&#26159;&#24320;&#21551;&#30340;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true|false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.cache.use_query_cache</tt></td><td>
                            &#20801;&#35768;&#26597;&#35810;&#32531;&#23384;, &#20010;&#21035;&#26597;&#35810;&#20173;&#28982;&#38656;&#35201;&#34987;&#35774;&#32622;&#20026;&#21487;&#32531;&#23384;&#30340;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true|false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.cache.use_second_level_cache</tt></td><td>
                            &#33021;&#29992;&#26469;&#23436;&#20840;&#31105;&#27490;&#20351;&#29992;&#20108;&#32423;&#32531;&#23384;. &#23545;&#37027;&#20123;&#22312;&#31867;&#30340;&#26144;&#23556;&#23450;&#20041;&#20013;&#25351;&#23450;<tt class="literal">&lt;cache&gt;</tt>&#30340;&#31867;&#65292;&#20250;&#40664;&#35748;&#24320;&#21551;&#20108;&#32423;&#32531;&#23384;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true|false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.cache.query_cache_factory</tt></td><td>
                            &#33258;&#23450;&#20041;&#23454;&#29616;<tt class="literal">QueryCache</tt>&#25509;&#21475;&#30340;&#31867;&#21517;,
                            &#40664;&#35748;&#20026;&#20869;&#24314;&#30340;<tt class="literal">StandardQueryCache</tt>.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">classname.of.QueryCache</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.cache.region_prefix</tt></td><td>
                            &#20108;&#32423;&#32531;&#23384;&#21306;&#22495;&#21517;&#30340;&#21069;&#32512;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">prefix</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.cache.use_structured_entries</tt></td><td>
                            &#24378;&#21046;Hibernate&#20197;&#26356;&#20154;&#24615;&#21270;&#30340;&#26684;&#24335;&#23558;&#25968;&#25454;&#23384;&#20837;&#20108;&#32423;&#32531;&#23384;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span>
                                <tt class="literal">true|false</tt>
                            </p></td></tr></tbody></table></div><div class="table"><a name="configuration-transaction-properties"></a><p class="title"><b>&#34920;&nbsp;3.6.&nbsp;
                Hibernate&#20107;&#21153;&#23646;&#24615;
            </b></p><table summary="&#xA;                Hibernate&#20107;&#21153;&#23646;&#24615;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                            &#23646;&#24615;&#21517;
                        </th><th>
                            &#29992;&#36884;
                        </th></tr></thead><tbody><tr><td><tt class="literal">hibernate.transaction.factory_class</tt></td><td>
                            &#19968;&#20010;<tt class="literal">TransactionFactory</tt>&#30340;&#31867;&#21517;, &#29992;&#20110;Hibernate <tt class="literal">Transaction</tt> API
                            (&#40664;&#35748;&#20026;<tt class="literal">JDBCTransactionFactory</tt>).
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">classname.of.TransactionFactory</tt>
                            </p></td></tr><tr><td><tt class="literal">jta.UserTransaction</tt></td><td>
                            &#19968;&#20010;JNDI&#21517;&#23383;&#65292;&#34987;<tt class="literal">JTATransactionFactory</tt>&#29992;&#26469;&#20174;&#24212;&#29992;&#26381;&#21153;&#22120;&#33719;&#21462;JTA <tt class="literal">UserTransaction</tt>.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">jndi/composite/name</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.transaction.manager_lookup_class</tt></td><td>
                            &#19968;&#20010;<tt class="literal">TransactionManagerLookup</tt>&#30340;&#31867;&#21517;
                            - &#24403;&#20351;&#29992;JVM&#32423;&#32531;&#23384;&#65292;&#25110;&#22312;JTA&#29615;&#22659;&#20013;&#20351;&#29992;hilo&#29983;&#25104;&#22120;&#30340;&#26102;&#20505;&#38656;&#35201;&#35813;&#31867;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">classname.of.TransactionManagerLookup</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.transaction.flush_before_completion</tt></td><td>
                            &#22914;&#26524;&#24320;&#21551;, session&#22312;&#20107;&#21153;&#23436;&#25104;&#21518;&#23558;&#34987;&#33258;&#21160;&#28165;&#27927;(flush)&#12290; &#29616;&#22312;&#26356;&#22909;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;&#33258;&#21160;session&#19978;&#19979;&#25991;&#31649;&#29702;&#12290;&#35831;&#21442;&#35265;<a href="#architecture-current-session" title="2.5.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session">&#31532;&nbsp;2.5&nbsp;&#33410; &#8220;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session&#8221;</a>&#12290;
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.transaction.auto_close_session</tt></td><td>
                            &#22914;&#26524;&#24320;&#21551;, session&#22312;&#20107;&#21153;&#23436;&#25104;&#21518;&#23558;&#34987;&#33258;&#21160;&#20851;&#38381;&#12290; &#29616;&#22312;&#26356;&#22909;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;&#33258;&#21160;session&#19978;&#19979;&#25991;&#31649;&#29702;&#12290;&#35831;&#21442;&#35265;<a href="#architecture-current-session" title="2.5.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session">&#31532;&nbsp;2.5&nbsp;&#33410; &#8220;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session&#8221;</a>&#12290;
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr></tbody></table></div><div class="table"><a name="configuration-misc-properties"></a><p class="title"><b>&#34920;&nbsp;3.7.&nbsp;
                &#20854;&#20182;&#23646;&#24615;
            </b></p><table summary="&#xA;                &#20854;&#20182;&#23646;&#24615;&#xA;            " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                            &#23646;&#24615;&#21517;
                            </th><th>
                            &#29992;&#36884;
                        </th></tr></thead><tbody><tr><td><tt class="literal">hibernate.current_session_context_class</tt></td><td>
                            &#20026;"&#24403;&#21069;"
                            <tt class="literal">Session</tt>&#25351;&#23450;&#19968;&#20010;(&#33258;&#23450;&#20041;&#30340;)&#31574;&#30053;&#12290;&#20851;&#20110;&#20869;&#32622;&#31574;&#30053;&#30340;&#35814;&#24773;&#65292;&#35831;&#21442;&#35265;<a href="#architecture-current-session" title="2.5.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session">&#31532;&nbsp;2.5&nbsp;&#33410; &#8220;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session&#8221;</a> &#12290;
                            <p>
                                <span class="strong">eg.</span>
                                <tt class="literal">jta</tt> | <tt class="literal">thread</tt> |
                                <tt class="literal">custom.Class</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.query.factory_class</tt></td><td>
                            &#36873;&#25321;HQL&#35299;&#26512;&#22120;&#30340;&#23454;&#29616;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">org.hibernate.hql.ast.ASTQueryTranslatorFactory</tt> or
                                <tt class="literal">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.query.substitutions</tt></td><td>
                            &#23558;Hibernate&#26597;&#35810;&#20013;&#30340;&#31526;&#21495;&#26144;&#23556;&#21040;SQL&#26597;&#35810;&#20013;&#30340;&#31526;&#21495;
                            (&#31526;&#21495;&#21487;&#33021;&#26159;&#20989;&#25968;&#21517;&#25110;&#24120;&#37327;&#21517;&#23383;).
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">hqlLiteral=SQL_LITERAL, hqlFunction=SQLFUNC</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.hbm2ddl.auto</tt></td><td>
                            &#22312;<tt class="literal">SessionFactory</tt>&#21019;&#24314;&#26102;&#65292;&#33258;&#21160;&#26816;&#26597;&#25968;&#25454;&#24211;&#32467;&#26500;&#65292;&#25110;&#32773;&#23558;&#25968;&#25454;&#24211;schema&#30340;DDL&#23548;&#20986;&#21040;&#25968;&#25454;&#24211;. &#20351;&#29992;
                            <tt class="literal">create-drop</tt>&#26102;,&#22312;&#26174;&#24335;&#20851;&#38381;<tt class="literal">SessionFactory</tt>&#26102;&#65292;&#23558;drop&#25481;&#25968;&#25454;&#24211;schema.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">validate</tt> | <tt class="literal">update</tt> | 
                                <tt class="literal">create</tt> | <tt class="literal">create-drop</tt>
                            </p></td></tr><tr><td><tt class="literal">hibernate.cglib.use_reflection_optimizer</tt></td><td>
                            &#24320;&#21551;CGLIB&#26469;&#26367;&#20195;&#36816;&#34892;&#26102;&#21453;&#23556;&#26426;&#21046;(&#31995;&#32479;&#32423;&#23646;&#24615;). &#21453;&#23556;&#26426;&#21046;&#26377;&#26102;&#22312;&#38500;&#38169;&#26102;&#27604;&#36739;&#26377;&#29992;. 
                            &#27880;&#24847;&#21363;&#20351;&#20851;&#38381;&#36825;&#20010;&#20248;&#21270;, Hibernate&#36824;&#26159;&#38656;&#35201;CGLIB. &#20320;&#19981;&#33021;&#22312;<tt class="literal">hibernate.cfg.xml</tt>&#20013;&#35774;&#32622;&#27492;&#23646;&#24615;.
                            <p>
                                <span class="strong">&#21462;&#20540;</span> 
                                <tt class="literal">true</tt> | <tt class="literal">false</tt>
                            </p></td></tr></tbody></table></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-dialects"></a>3.4.1.&nbsp;
                SQL&#26041;&#35328;
            </h3></div></div><div></div></div><p>
                &#20320;&#24212;&#24403;&#24635;&#26159;&#20026;&#20320;&#30340;&#25968;&#25454;&#24211;&#23558;<tt class="literal">hibernate.dialect</tt>&#23646;&#24615;&#35774;&#32622;&#25104;&#27491;&#30830;&#30340;
                <tt class="literal">org.hibernate.dialect.Dialect</tt>&#23376;&#31867;. &#22914;&#26524;&#20320;&#25351;&#23450;&#19968;&#31181;&#26041;&#35328;, 
                Hibernate&#23558;&#20026;&#19978;&#38754;&#21015;&#20986;&#30340;&#19968;&#20123;&#23646;&#24615;&#20351;&#29992;&#21512;&#29702;&#30340;&#40664;&#35748;&#20540;, &#20026;&#20320;&#30465;&#21435;&#20102;&#25163;&#24037;&#25351;&#23450;&#23427;&#20204;&#30340;&#21151;&#22827;.
            </p><div class="table"><a name="sql-dialects"></a><p class="title"><b>&#34920;&nbsp;3.8.&nbsp;
                    Hibernate SQL&#26041;&#35328; (<tt class="literal">hibernate.dialect</tt>)
                </b></p><table summary="&#xA;                    Hibernate SQL&#26041;&#35328; (hibernate.dialect)&#xA;                " border="1"><colgroup><col><col></colgroup><thead><tr><th>RDBMS</th><th>
                                &#26041;&#35328;
                            </th></tr></thead><tbody><tr><td>DB2</td><td><tt class="literal">org.hibernate.dialect.DB2Dialect</tt></td></tr><tr><td>DB2 AS/400</td><td><tt class="literal">org.hibernate.dialect.DB2400Dialect</tt></td></tr><tr><td>DB2 OS390</td><td><tt class="literal">org.hibernate.dialect.DB2390Dialect</tt></td></tr><tr><td>PostgreSQL</td><td><tt class="literal">org.hibernate.dialect.PostgreSQLDialect</tt></td></tr><tr><td>MySQL</td><td><tt class="literal">org.hibernate.dialect.MySQLDialect</tt></td></tr><tr><td>MySQL with InnoDB</td><td><tt class="literal">org.hibernate.dialect.MySQLInnoDBDialect</tt></td></tr><tr><td>MySQL with MyISAM</td><td><tt class="literal">org.hibernate.dialect.MySQLMyISAMDialect</tt></td></tr><tr><td>Oracle (any version)</td><td><tt class="literal">org.hibernate.dialect.OracleDialect</tt></td></tr><tr><td>Oracle 9i/10g</td><td><tt class="literal">org.hibernate.dialect.Oracle9Dialect</tt></td></tr><tr><td>Sybase</td><td><tt class="literal">org.hibernate.dialect.SybaseDialect</tt></td></tr><tr><td>Sybase Anywhere</td><td><tt class="literal">org.hibernate.dialect.SybaseAnywhereDialect</tt></td></tr><tr><td>Microsoft SQL Server</td><td><tt class="literal">org.hibernate.dialect.SQLServerDialect</tt></td></tr><tr><td>SAP DB</td><td><tt class="literal">org.hibernate.dialect.SAPDBDialect</tt></td></tr><tr><td>Informix</td><td><tt class="literal">org.hibernate.dialect.InformixDialect</tt></td></tr><tr><td>HypersonicSQL</td><td><tt class="literal">org.hibernate.dialect.HSQLDialect</tt></td></tr><tr><td>Ingres</td><td><tt class="literal">org.hibernate.dialect.IngresDialect</tt></td></tr><tr><td>Progress</td><td><tt class="literal">org.hibernate.dialect.ProgressDialect</tt></td></tr><tr><td>Mckoi SQL</td><td><tt class="literal">org.hibernate.dialect.MckoiDialect</tt></td></tr><tr><td>Interbase</td><td><tt class="literal">org.hibernate.dialect.InterbaseDialect</tt></td></tr><tr><td>Pointbase</td><td><tt class="literal">org.hibernate.dialect.PointbaseDialect</tt></td></tr><tr><td>FrontBase</td><td><tt class="literal">org.hibernate.dialect.FrontbaseDialect</tt></td></tr><tr><td>Firebird</td><td><tt class="literal">org.hibernate.dialect.FirebirdDialect</tt></td></tr></tbody></table></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-outerjoin"></a>3.4.2.&nbsp;
                &#22806;&#36830;&#25509;&#25235;&#21462;(Outer Join Fetching)
            </h3></div></div><div></div></div><p>
                &#22914;&#26524;&#20320;&#30340;&#25968;&#25454;&#24211;&#25903;&#25345;ANSI, Oracle&#25110;Sybase&#39118;&#26684;&#30340;&#22806;&#36830;&#25509;, <span class="emphasis"><em>&#22806;&#36830;&#25509;&#25235;&#21462;</em></span>&#36890;&#24120;&#33021;&#36890;&#36807;&#38480;&#21046;&#24448;&#36820;&#25968;&#25454;&#24211;&#27425;&#25968;
                (&#26356;&#22810;&#30340;&#24037;&#20316;&#20132;&#30001;&#25968;&#25454;&#24211;&#33258;&#24049;&#26469;&#23436;&#25104;)&#26469;&#25552;&#39640;&#25928;&#29575;. &#22806;&#36830;&#25509;&#25235;&#21462;&#20801;&#35768;&#22312;&#21333;&#20010;<tt class="literal">SELECT</tt>SQL&#35821;&#21477;&#20013;&#65292;
                &#36890;&#36807;many-to-one, one-to-many, many-to-many&#21644;one-to-one&#20851;&#32852;&#33719;&#21462;&#36830;&#25509;&#23545;&#35937;&#30340;&#25972;&#20010;&#23545;&#35937;&#22270;.
            </p><p>
                &#23558;<tt class="literal">hibernate.max_fetch_depth</tt>&#35774;&#20026;<tt class="literal">0</tt>&#33021;&#22312;<span class="emphasis"><em>&#20840;&#23616;</em></span>
                &#33539;&#22260;&#20869;&#31105;&#27490;&#22806;&#36830;&#25509;&#25235;&#21462;. &#35774;&#20026;<tt class="literal">1</tt>&#25110;&#26356;&#39640;&#20540;&#33021;&#21551;&#29992;one-to-one&#21644;many-to-oneouter&#20851;&#32852;&#30340;&#22806;&#36830;&#25509;&#25235;&#21462;, &#23427;&#20204;&#36890;&#36807;
                <tt class="literal">fetch="join"</tt>&#26469;&#26144;&#23556;.
            </p><p>
                &#21442;&#35265;<a href="#performance-fetching" title="19.1.&nbsp;&#xA;			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)&#xA;		">&#31532;&nbsp;19.1&nbsp;&#33410; &#8220;
			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)
		&#8221;</a>&#33719;&#24471;&#26356;&#22810;&#20449;&#24687;.
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-binarystreams"></a>3.4.3.&nbsp;
                &#20108;&#36827;&#21046;&#27969; (Binary Streams)
            </h3></div></div><div></div></div><p>
                Oracle&#38480;&#21046;&#37027;&#20123;&#36890;&#36807;JDBC&#39537;&#21160;&#20256;&#36755;&#30340;<tt class="literal">&#23383;&#33410;</tt>&#25968;&#32452;&#30340;&#25968;&#30446;. &#22914;&#26524;&#20320;&#24076;&#26395;&#20351;&#29992;<tt class="literal">&#20108;&#36827;&#20540; (binary)</tt>&#25110;
                <tt class="literal">&#21487;&#24207;&#21015;&#21270;&#30340; (serializable)</tt>&#31867;&#22411;&#30340;&#22823;&#23545;&#35937;, &#20320;&#24212;&#35813;&#24320;&#21551;
                <tt class="literal">hibernate.jdbc.use_streams_for_binary</tt>&#23646;&#24615;.
                <span class="emphasis"><em>&#36825;&#26159;&#31995;&#32479;&#32423;&#23646;&#24615;.</em></span>
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-cacheprovider"></a>3.4.4.&nbsp;
                &#20108;&#32423;&#32531;&#23384;&#19982;&#26597;&#35810;&#32531;&#23384;
            </h3></div></div><div></div></div><p>
                &#20197;<tt class="literal">hibernate.cache</tt>&#20026;&#21069;&#32512;&#30340;&#23646;&#24615;&#20801;&#35768;&#20320;&#22312;Hibernate&#20013;&#65292;&#20351;&#29992;&#36827;&#31243;&#25110;&#32676;&#38598;&#33539;&#22260;&#20869;&#30340;&#20108;&#32423;&#32531;&#23384;&#31995;&#32479;.
                &#21442;&#35265;<a href="#performance-cache" title="19.2.&nbsp;&#20108;&#32423;&#32531;&#23384;&#65288;The Second Level Cache&#65289;&#xA;		">&#31532;&nbsp;19.2&nbsp;&#33410; &#8220;&#20108;&#32423;&#32531;&#23384;&#65288;The Second Level Cache&#65289;
		&#8221;</a>&#33719;&#21462;&#26356;&#22810;&#30340;&#35814;&#24773;.
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-querysubstitution"></a>3.4.5.&nbsp;
                &#26597;&#35810;&#35821;&#35328;&#20013;&#30340;&#26367;&#25442;
            </h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">hibernate.query.substitutions</tt>&#22312;Hibernate&#20013;&#23450;&#20041;&#26032;&#30340;&#26597;&#35810;&#31526;&#21495;.
                &#20363;&#22914;:         
            </p><pre class="programlisting">hibernate.query.substitutions true=1, false=0</pre><p>
                &#23558;&#23548;&#33268;&#31526;&#21495;<tt class="literal">true</tt>&#21644;<tt class="literal">false</tt>&#22312;&#29983;&#25104;&#30340;SQL&#20013;&#34987;&#32763;&#35793;&#25104;&#25972;&#25968;&#24120;&#37327;.
            </p><pre class="programlisting">hibernate.query.substitutions toLowercase=LOWER</pre><p>
                &#23558;&#20801;&#35768;&#20320;&#37325;&#21629;&#21517;SQL&#20013;&#30340;<tt class="literal">LOWER</tt>&#20989;&#25968;.
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-statistics"></a>3.4.6.&nbsp;
                Hibernate&#30340;&#32479;&#35745;(statistics)&#26426;&#21046;
            </h3></div></div><div></div></div><p>
                &#22914;&#26524;&#20320;&#24320;&#21551;<tt class="literal">hibernate.generate_statistics</tt>, &#37027;&#20040;&#24403;&#20320;&#36890;&#36807;
                <tt class="literal">SessionFactory.getStatistics()</tt>&#35843;&#25972;&#27491;&#22312;&#36816;&#34892;&#30340;&#31995;&#32479;&#26102;&#65292;Hibernate&#23558;&#23548;&#20986;&#22823;&#37327;&#26377;&#29992;&#30340;&#25968;&#25454;.
                Hibernate&#29978;&#33267;&#33021;&#34987;&#37197;&#32622;&#25104;&#36890;&#36807;JMX&#23548;&#20986;&#36825;&#20123;&#32479;&#35745;&#20449;&#24687;. &#21442;&#32771;<tt class="literal">org.hibernate.stats</tt>&#20013;&#25509;&#21475;&#30340;Javadoc&#65292;&#20197;&#33719;&#24471;&#26356;&#22810;&#20449;&#24687;.
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-logging"></a>3.5.&nbsp;
            &#26085;&#24535;
        </h2></div></div><div></div></div><p>
            Hibernate&#20351;&#29992;Apache commons-logging&#26469;&#20026;&#21508;&#31181;&#20107;&#20214;&#35760;&#24405;&#26085;&#24535;.
        </p><p>
            commons-logging&#23558;&#30452;&#25509;&#36755;&#20986;&#21040;Apache Log4j(&#22914;&#26524;&#22312;&#31867;&#36335;&#24452;&#20013;&#21253;&#25324;<tt class="literal">log4j.jar</tt>)&#25110;
            JDK1.4 logging (&#22914;&#26524;&#36816;&#34892;&#22312;JDK1.4&#25110;&#20197;&#19978;&#30340;&#29615;&#22659;&#19979;). &#20320;&#21487;&#20197;&#20174;<tt class="literal">http://jakarta.apache.org</tt>
                &#19979;&#36733;Log4j. &#35201;&#20351;&#29992;Log4j&#65292;&#20320;&#38656;&#35201;&#23558;<tt class="literal">log4j.properties</tt>&#25991;&#20214;&#25918;&#32622;&#22312;&#31867;&#36335;&#24452;&#19979;, &#38543;Hibernate
                &#19968;&#21516;&#20998;&#21457;&#30340;&#26679;&#20363;&#23646;&#24615;&#25991;&#20214;&#22312;<tt class="literal">src/</tt>&#30446;&#24405;&#19979;.
        </p><p>
            &#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#20320;&#29087;&#24713;&#19968;&#19979;Hibernate&#30340;&#26085;&#24535;&#28040;&#24687;. &#22312;&#19981;&#22833;&#21487;&#35835;&#24615;&#30340;&#21069;&#25552;&#19979;&#65292;
            &#25105;&#20204;&#20570;&#20102;&#24456;&#22810;&#24037;&#20316;&#65292;&#20351;Hibernate&#30340;&#26085;&#24535;&#21487;&#33021;&#22320;&#35814;&#32454;. &#36825;&#26159;&#24517;&#35201;&#30340;&#26597;&#38169;&#21033;&#22120;.
             &#26368;&#20196;&#20154;&#24863;&#20852;&#36259;&#30340;&#26085;&#24535;&#20998;&#31867;&#26377;&#22914;&#19979;&#36825;&#20123;:
        </p><div class="table"><a name="log-categories"></a><p class="title"><b>&#34920;&nbsp;3.9.&nbsp;
                    Hibernate&#26085;&#24535;&#31867;&#21035;
                </b></p><table summary="&#xA;                    Hibernate&#26085;&#24535;&#31867;&#21035;&#xA;                " border="1"><colgroup><col><col></colgroup><thead><tr><th>
                                &#31867;&#21035;
                            </th><th>
                                &#21151;&#33021;
                            </th></tr></thead><tbody><tr><td><tt class="literal">org.hibernate.SQL</tt></td><td>
                                &#22312;&#25152;&#26377;SQL DML&#35821;&#21477;&#34987;&#25191;&#34892;&#26102;&#20026;&#23427;&#20204;&#35760;&#24405;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.type</tt></td><td>
                                &#20026;&#25152;&#26377;JDBC&#21442;&#25968;&#35760;&#24405;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.tool.hbm2ddl</tt></td><td>
                                &#22312;&#25152;&#26377;SQL DDL&#35821;&#21477;&#25191;&#34892;&#26102;&#20026;&#23427;&#20204;&#35760;&#24405;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.pretty</tt></td><td>
                                &#22312;session&#28165;&#27927;(flush)&#26102;&#65292;&#20026;&#25152;&#26377;&#19982;&#20854;&#20851;&#32852;&#30340;&#23454;&#20307;(&#26368;&#22810;20&#20010;)&#30340;&#29366;&#24577;&#35760;&#24405;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.cache</tt></td><td>
                                &#20026;&#25152;&#26377;&#20108;&#32423;&#32531;&#23384;&#30340;&#27963;&#21160;&#35760;&#24405;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.transaction</tt></td><td>
                                &#20026;&#20107;&#21153;&#30456;&#20851;&#30340;&#27963;&#21160;&#35760;&#24405;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.jdbc</tt></td><td>
                                &#20026;&#25152;&#26377;JDBC&#36164;&#28304;&#30340;&#33719;&#21462;&#35760;&#24405;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.hql.AST</tt></td><td>
                                &#22312;&#35299;&#26512;&#26597;&#35810;&#30340;&#26102;&#20505;,&#35760;&#24405;HQL&#21644;SQL&#30340;AST&#20998;&#26512;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate.secure</tt></td><td>
                                &#20026;JAAS&#35748;&#35777;&#35831;&#27714;&#20570;&#26085;&#24535;
                            </td></tr><tr><td><tt class="literal">org.hibernate</tt></td><td>
                                &#20026;&#20219;&#20309;Hibernate&#30456;&#20851;&#20449;&#24687;&#20570;&#26085;&#24535; (&#20449;&#24687;&#37327;&#36739;&#22823;, &#20294;&#23545;&#26597;&#38169;&#38750;&#24120;&#26377;&#24110;&#21161;)
                            </td></tr></tbody></table></div><p>
            &#22312;&#20351;&#29992;Hibernate&#24320;&#21457;&#24212;&#29992;&#31243;&#24207;&#26102;, &#20320;&#24212;&#24403;&#24635;&#26159;&#20026;<tt class="literal">org.hibernate.SQL</tt>
            &#24320;&#21551;<tt class="literal">debug</tt>&#32423;&#21035;&#30340;&#26085;&#24535;&#35760;&#24405;,&#25110;&#32773;&#24320;&#21551;<tt class="literal">hibernate.show_sql</tt>&#23646;&#24615;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-namingstrategy"></a>3.6.&nbsp;
            &#23454;&#29616;<tt class="literal">NamingStrategy</tt>
        </h2></div></div><div></div></div><p>
            <tt class="literal">org.hibernate.cfg.NamingStrategy</tt>&#25509;&#21475;&#20801;&#35768;&#20320;&#20026;&#25968;&#25454;&#24211;&#20013;&#30340;&#23545;&#35937;&#21644;schema
            &#20803;&#32032;&#25351;&#23450;&#19968;&#20010;&#8220;&#21629;&#21517;&#26631;&#20934;&#8221;.
        </p><p>
            &#20320;&#21487;&#33021;&#20250;&#25552;&#20379;&#19968;&#20123;&#36890;&#36807;Java&#26631;&#35782;&#29983;&#25104;&#25968;&#25454;&#24211;&#26631;&#35782;&#25110;&#23558;&#26144;&#23556;&#23450;&#20041;&#25991;&#20214;&#20013;"&#36923;&#36753;"&#34920;/&#21015;&#21517;&#22788;&#29702;&#25104;"&#29289;&#29702;"&#34920;/&#21015;&#21517;&#30340;&#35268;&#21017;.
            &#36825;&#20010;&#29305;&#24615;&#26377;&#21161;&#20110;&#20943;&#23569;&#20887;&#38271;&#30340;&#26144;&#23556;&#23450;&#20041;&#25991;&#20214;.
        </p><p>
            &#22312;&#21152;&#20837;&#26144;&#23556;&#23450;&#20041;&#21069;&#65292;&#20320;&#21487;&#20197;&#35843;&#29992;
            <tt class="literal">Configuration.setNamingStrategy()</tt>&#25351;&#23450;&#19968;&#20010;&#19981;&#21516;&#30340;&#21629;&#21517;&#31574;&#30053;:
        </p><pre class="programlisting">SessionFactory sf = new Configuration()
    .setNamingStrategy(ImprovedNamingStrategy.INSTANCE)
    .addFile("Item.hbm.xml")
    .addFile("Bid.hbm.xml")
    .buildSessionFactory();</pre><p>
            <tt class="literal">org.hibernate.cfg.ImprovedNamingStrategy</tt>&#26159;&#19968;&#20010;&#20869;&#24314;&#30340;&#21629;&#21517;&#31574;&#30053;, &#23545;
            &#19968;&#20123;&#24212;&#29992;&#31243;&#24207;&#32780;&#35328;&#65292;&#21487;&#33021;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#36215;&#28857;.
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-xmlconfig"></a>3.7.&nbsp;
            XML&#37197;&#32622;&#25991;&#20214;
        </h2></div></div><div></div></div><p>
            &#21478;&#19968;&#20010;&#37197;&#32622;&#26041;&#27861;&#26159;&#22312;<tt class="literal">hibernate.cfg.xml</tt>&#25991;&#20214;&#20013;&#25351;&#23450;&#19968;&#22871;&#23436;&#25972;&#30340;&#37197;&#32622;. 
            &#36825;&#20010;&#25991;&#20214;&#21487;&#20197;&#24403;&#25104;<tt class="literal">hibernate.properties</tt>&#30340;&#26367;&#20195;&#12290; &#33509;&#20004;&#20010;&#25991;&#20214;&#21516;&#26102;&#23384;&#22312;&#65292;&#23427;&#23558;&#35206;&#30422;&#21069;&#32773;&#30340;&#23646;&#24615;.
        </p><p>
            XML&#37197;&#32622;&#25991;&#20214;&#34987;&#40664;&#35748;&#26159;&#25918;&#22312;<tt class="literal">CLASSPATH</tt>&#30340;&#26681;&#30446;&#24405;&#19979;. &#36825;&#26159;&#19968;&#20010;&#20363;&#23376;:
        </p><p>
            
        </p><pre class="programlisting">&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;

&lt;hibernate-configuration&gt;

    &lt;!-- &#20197;/jndi/name&#32465;&#23450;&#21040;JNDI&#30340;SessionFactory&#23454;&#20363; --&gt;
    &lt;session-factory
        name="java:hibernate/SessionFactory"&gt;

        &lt;!-- &#23646;&#24615; --&gt;
        &lt;property name="connection.datasource"&gt;java:/comp/env/jdbc/MyDB&lt;/property&gt;
        &lt;property name="dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
        &lt;property name="show_sql"&gt;false&lt;/property&gt;
        &lt;property name="transaction.factory_class"&gt;
            org.hibernate.transaction.JTATransactionFactory
        &lt;/property&gt;
        &lt;property name="jta.UserTransaction"&gt;java:comp/UserTransaction&lt;/property&gt;

        &lt;!-- &#26144;&#23556;&#23450;&#20041;&#25991;&#20214; --&gt;
        &lt;mapping resource="org/hibernate/auction/Item.hbm.xml"/&gt;
        &lt;mapping resource="org/hibernate/auction/Bid.hbm.xml"/&gt;

        &lt;!-- &#32531;&#23384;&#35774;&#32622; --&gt;
        &lt;class-cache class="org.hibernate.auction.Item" usage="read-write"/&gt;
        &lt;class-cache class="org.hibernate.auction.Bid" usage="read-only"/&gt;
        &lt;collection-cache collection="org.hibernate.auction.Item.bids" usage="read-write"/&gt;

    &lt;/session-factory&gt;

&lt;/hibernate-configuration&gt;</pre><p>
            &#22914;&#20320;&#25152;&#35265;, &#36825;&#20010;&#26041;&#27861;&#20248;&#21183;&#22312;&#20110;&#65292;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#25351;&#20986;&#20102;&#26144;&#23556;&#23450;&#20041;&#25991;&#20214;&#30340;&#21517;&#23383;. &#19968;&#26086;&#20320;&#38656;&#35201;&#35843;&#25972;Hibernate&#30340;&#32531;&#23384;&#65292;
            <tt class="literal">hibernate.cfg.xml</tt>&#20063;&#26159;&#26356;&#26041;&#20415;. &#27880;&#24847;&#65292;&#20351;&#29992;<tt class="literal">hibernate.properties</tt>&#36824;&#26159;
            <tt class="literal">hibernate.cfg.xml</tt>&#23436;&#20840;&#26159;&#30001;&#20320;&#26469;&#20915;&#23450;, &#38500;&#20102;&#19978;&#38754;&#25552;&#21040;&#30340;XML&#35821;&#27861;&#30340;&#20248;&#21183;&#20043;&#22806;, &#20004;&#32773;&#26159;&#31561;&#20215;&#30340;.
        </p><p>
            &#20351;&#29992;XML&#37197;&#32622;&#65292;&#20351;&#24471;&#21551;&#21160;Hibernate&#21464;&#30340;&#24322;&#24120;&#31616;&#21333;, &#22914;&#19979;&#25152;&#31034;&#65292;&#19968;&#34892;&#20195;&#30721;&#23601;&#21487;&#20197;&#25630;&#23450;&#65306;
        </p><pre class="programlisting">SessionFactory sf = new Configuration().configure().buildSessionFactory();</pre><p>
            &#20320;&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#20195;&#30721;&#26469;&#28155;&#21152;&#19968;&#20010;&#19981;&#21516;&#30340;XML&#37197;&#32622;&#25991;&#20214;
        </p><pre class="programlisting">SessionFactory sf = new Configuration()
    .configure("catdb.cfg.xml")
    .buildSessionFactory();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuration-j2ee"></a>3.8.&nbsp;
            J2EE&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;
        </h2></div></div><div></div></div><p>
            &#38024;&#23545;J2EE&#20307;&#31995;,Hibernate&#26377;&#22914;&#19979;&#20960;&#20010;&#38598;&#25104;&#30340;&#26041;&#38754;:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
                <span class="emphasis"><em>&#23481;&#22120;&#31649;&#29702;&#30340;&#25968;&#25454;&#28304;(Container-managed datasources)</em></span>: 
                Hibernate&#33021;&#20351;&#29992;&#36890;&#36807;&#23481;&#22120;&#31649;&#29702;&#65292;&#24182;&#30001;JNDI&#25552;&#20379;&#30340;JDBC&#36830;&#25509;. &#36890;&#24120;, &#29305;&#21035;&#26159;&#24403;&#22788;&#29702;&#22810;&#20010;&#25968;&#25454;&#28304;&#30340;&#20998;&#24067;&#24335;&#20107;&#21153;&#30340;&#26102;&#20505;, 
                &#30001;&#19968;&#20010;JTA&#20860;&#23481;&#30340;<tt class="literal">TransactionManager</tt>&#21644;&#19968;&#20010;
                <tt class="literal">ResourceManager</tt>&#26469;&#22788;&#29702;&#20107;&#21153;&#31649;&#29702;(CMT, &#23481;&#22120;&#31649;&#29702;&#30340;&#20107;&#21153;). &#24403;&#28982;&#20320;&#21487;&#20197;&#36890;&#36807;
                &#32534;&#31243;&#26041;&#24335;&#26469;&#21010;&#20998;&#20107;&#21153;&#36793;&#30028;(BMT, Bean&#31649;&#29702;&#30340;&#20107;&#21153;). &#25110;&#32773;&#20026;&#20102;&#20195;&#30721;&#30340;&#21487;&#31227;&#26893;&#24615;&#65292;&#20320;&#20063;&#20063;&#35768;&#20250;&#24819;&#20351;&#29992;&#21487;&#36873;&#30340;
                Hibernate <tt class="literal">Transaction</tt> API.
                </p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>
                <span class="emphasis"><em>&#33258;&#21160;JNDI&#32465;&#23450;</em></span>: Hibernate&#21487;&#20197;&#22312;&#21551;&#21160;&#21518;&#23558;
                <tt class="literal">SessionFactory</tt>&#32465;&#23450;&#21040;JNDI.
                </p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>
                <span class="emphasis"><em>JTA Session&#32465;&#23450;:</em></span> Hibernate <tt class="literal">Session</tt>
                &#21487;&#20197;&#33258;&#21160;&#32465;&#23450;&#21040;JTA&#20107;&#21153;&#20316;&#29992;&#30340;&#33539;&#22260;. &#21482;&#38656;&#31616;&#21333;&#22320;&#20174;JNDI&#26597;&#25214;<tt class="literal">SessionFactory</tt>&#24182;&#33719;&#24471;&#24403;&#21069;&#30340;
                <tt class="literal">Session</tt>. &#24403;JTA&#20107;&#21153;&#23436;&#25104;&#26102;, &#35753;Hibernate&#26469;&#22788;&#29702;
                <tt class="literal">Session</tt>&#30340;&#28165;&#27927;(flush)&#19982;&#20851;&#38381;. &#20107;&#21153;&#30340;&#21010;&#20998;&#21487;&#20197;&#26159;&#22768;&#26126;&#24335;&#30340;(CMT),&#20063;&#21487;&#20197;&#26159;&#32534;&#31243;&#24335;&#30340;(BMT/UserTransaction).
                </p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>
                <span class="emphasis"><em>JMX&#37096;&#32626;:</em></span> &#22914;&#26524;&#20320;&#20351;&#29992;&#25903;&#25345;JMX&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;(&#22914;, JBoss AS), &#37027;&#20040;&#20320;&#21487;&#20197;&#36873;&#25321;&#23558;Hibernate&#37096;&#32626;&#25104;&#25176;&#31649;MBean. 
                &#36825;&#23558;&#20026;&#20320;&#30465;&#21435;&#19968;&#34892;&#20174;<tt class="literal">Configuration</tt>&#26500;&#24314;<tt class="literal">SessionFactory</tt>&#30340;&#21551;&#21160;&#20195;&#30721;. 
                &#23481;&#22120;&#23558;&#21551;&#21160;&#20320;&#30340;<tt class="literal">HibernateService</tt>, &#24182;&#23436;&#32654;&#22320;&#22788;&#29702;&#22909;&#26381;&#21153;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995; (&#22312;Hibernate&#21551;&#21160;&#21069;&#65292;&#25968;&#25454;&#28304;&#24517;&#39035;&#26159;&#21487;&#29992;&#30340;&#65292;&#31561;&#31561;).
                </p></li></ul></div><p>
            &#22914;&#26524;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#25243;&#20986;"connection containment"&#24322;&#24120;, &#26681;&#25454;&#20320;&#30340;&#29615;&#22659;&#65292;&#20063;&#35768;&#35813;&#23558;&#37197;&#32622;&#23646;&#24615;
            <tt class="literal">hibernate.connection.release_mode</tt>&#35774;&#20026;<tt class="literal">after_statement</tt>.
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-transactionstrategy"></a>3.8.1.&nbsp;
                &#20107;&#21153;&#31574;&#30053;&#37197;&#32622;
            </h3></div></div><div></div></div><p>
                &#22312;&#20320;&#30340;&#26550;&#26500;&#20013;&#65292;Hibernate&#30340;<tt class="literal">Session</tt> API&#26159;&#29420;&#31435;&#20110;&#20219;&#20309;&#20107;&#21153;&#20998;&#30028;&#31995;&#32479;&#30340;. 
                &#22914;&#26524;&#20320;&#35753;Hibernate&#36890;&#36807;&#36830;&#25509;&#27744;&#30452;&#25509;&#20351;&#29992;JDBC, &#20320;&#38656;&#35201;&#35843;&#29992;JDBC API&#26469;&#25171;&#24320;&#21644;&#20851;&#38381;&#20320;&#30340;&#20107;&#21153;. 
                &#22914;&#26524;&#20320;&#36816;&#34892;&#22312;J2EE&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#20013;, &#20320;&#20063;&#35768;&#24819;&#29992;Bean&#31649;&#29702;&#30340;&#20107;&#21153;&#24182;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#35843;&#29992;JTA API&#21644;<tt class="literal">UserTransaction</tt>.
            </p><p>
                &#20026;&#20102;&#35753;&#20320;&#30340;&#20195;&#30721;&#22312;&#20004;&#31181;(&#25110;&#20854;&#20182;)&#29615;&#22659;&#20013;&#21487;&#20197;&#31227;&#26893;&#65292;&#25105;&#20204;&#24314;&#35758;&#20351;&#29992;&#21487;&#36873;&#30340;Hibernate <tt class="literal">Transaction</tt> API, 
                &#23427;&#21253;&#35013;&#24182;&#38544;&#34255;&#20102;&#24213;&#23618;&#31995;&#32479;. &#20320;&#24517;&#39035;&#36890;&#36807;&#35774;&#32622;Hibernate&#37197;&#32622;&#23646;&#24615;<tt class="literal">hibernate.transaction.factory_class</tt>&#26469;&#25351;&#23450;
                &#19968;&#20010;<tt class="literal">Transaction</tt>&#23454;&#20363;&#30340;&#24037;&#21378;&#31867;.
            </p><p>
                &#26377;&#19977;&#20010;&#26631;&#20934;(&#20869;&#24314;)&#30340;&#36873;&#25321;:
            </p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">org.hibernate.transaction.JDBCTransactionFactory</tt></span></dt><dd><p>
                            &#22996;&#25176;&#32473;&#25968;&#25454;&#24211;(JDBC)&#20107;&#21153;&#65288;&#40664;&#35748;&#65289;
                        </p></dd><dt><span class="term"><tt class="literal">org.hibernate.transaction.JTATransactionFactory</tt></span></dt><dd><p>
                            &#22914;&#26524;&#22312;&#19978;&#19979;&#25991;&#29615;&#22659;&#20013;&#23384;&#22312;&#36816;&#34892;&#30528;&#30340;&#20107;&#21153;(&#22914;, EJB&#20250;&#35805;Bean&#30340;&#26041;&#27861;), &#21017;&#22996;&#25176;&#32473;&#23481;&#22120;&#31649;
                            &#29702;&#30340;&#20107;&#21153;, &#21542;&#21017;&#65292;&#23558;&#21551;&#21160;&#19968;&#20010;&#26032;&#30340;&#20107;&#21153;&#65292;&#24182;&#20351;&#29992;Bean&#31649;&#29702;&#30340;&#20107;&#21153;.
                        </p></dd><dt><span class="term"><tt class="literal">org.hibernate.transaction.CMTTransactionFactory</tt></span></dt><dd><p>
                            &#22996;&#25176;&#32473;&#23481;&#22120;&#31649;&#29702;&#30340;JTA&#20107;&#21153;
                        </p></dd></dl></div><p>
                &#20320;&#20063;&#21487;&#20197;&#23450;&#20041;&#23646;&#20110;&#20320;&#33258;&#24049;&#30340;&#20107;&#21153;&#31574;&#30053; (&#22914;, &#38024;&#23545;CORBA&#30340;&#20107;&#21153;&#26381;&#21153;)
            </p><p>
                Hibernate&#30340;&#19968;&#20123;&#29305;&#24615; (&#27604;&#22914;&#20108;&#32423;&#32531;&#23384;, Contextual Sessions with JTA&#31561;&#31561;)&#38656;&#35201;&#35775;&#38382;&#22312;&#25176;&#31649;&#29615;&#22659;&#20013;&#30340;JTA <tt class="literal">TransactionManager</tt>. 
                &#30001;&#20110;J2EE&#27809;&#26377;&#26631;&#20934;&#21270;&#19968;&#20010;&#21333;&#19968;&#30340;&#26426;&#21046;,Hibernate&#22312;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#20013;&#65292;&#20320;&#24517;&#39035;&#25351;&#23450;Hibernate&#22914;&#20309;&#33719;&#24471;<tt class="literal">TransactionManager</tt>&#30340;&#24341;&#29992;:
            </p><div class="table"><a name="jtamanagerlookup"></a><p class="title"><b>&#34920;&nbsp;3.10.&nbsp;JTA TransactionManagers</b></p><table summary="JTA TransactionManagers" border="1"><colgroup><col><col></colgroup><thead><tr><th>
                                Transaction&#24037;&#21378;&#31867;
                            </th><th align="center">
                                &#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;
                            </th></tr></thead><tbody><tr><td><tt class="literal">org.hibernate.transaction.JBossTransactionManagerLookup</tt></td><td align="center">JBoss</td></tr><tr><td><tt class="literal">org.hibernate.transaction.WeblogicTransactionManagerLookup</tt></td><td align="center">Weblogic</td></tr><tr><td><tt class="literal">org.hibernate.transaction.WebSphereTransactionManagerLookup</tt></td><td align="center">WebSphere</td></tr><tr><td><tt class="literal">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</tt></td><td align="center">WebSphere 6</td></tr><tr><td><tt class="literal">org.hibernate.transaction.OrionTransactionManagerLookup</tt></td><td align="center">Orion</td></tr><tr><td><tt class="literal">org.hibernate.transaction.ResinTransactionManagerLookup</tt></td><td align="center">Resin</td></tr><tr><td><tt class="literal">org.hibernate.transaction.JOTMTransactionManagerLookup</tt></td><td align="center">JOTM</td></tr><tr><td><tt class="literal">org.hibernate.transaction.JOnASTransactionManagerLookup</tt></td><td align="center">JOnAS</td></tr><tr><td><tt class="literal">org.hibernate.transaction.JRun4TransactionManagerLookup</tt></td><td align="center">JRun4</td></tr><tr><td><tt class="literal">org.hibernate.transaction.BESTransactionManagerLookup</tt></td><td align="center">Borland ES</td></tr></tbody></table></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-optional-jndi"></a>3.8.2.&nbsp;
                JNDI&#32465;&#23450;&#30340;<tt class="literal">SessionFactory</tt>
            </h3></div></div><div></div></div><p>
                &#19982;JNDI&#32465;&#23450;&#30340;Hibernate&#30340;<tt class="literal">SessionFactory</tt>&#33021;&#31616;&#21270;&#24037;&#21378;&#30340;&#26597;&#35810;&#65292;&#31616;&#21270;&#21019;&#24314;&#26032;&#30340;<tt class="literal">Session</tt>. 
                &#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#36825;&#19982;JNDI&#32465;&#23450;<tt class="literal">Datasource</tt>&#27809;&#26377;&#20851;&#31995;, &#23427;&#20204;&#21482;&#26159;&#24688;&#24039;&#29992;&#20102;&#30456;&#21516;&#30340;&#27880;&#20876;&#34920;!
            </p><p>
                &#22914;&#26524;&#20320;&#24076;&#26395;&#23558;<tt class="literal">SessionFactory</tt>&#32465;&#23450;&#21040;&#19968;&#20010;JNDI&#30340;&#21517;&#23383;&#31354;&#38388;, 
                &#29992;&#23646;&#24615;<tt class="literal">hibernate.session_factory_name</tt>&#25351;&#23450;&#19968;&#20010;&#21517;&#23383;(&#22914;, <tt class="literal">java:hibernate/SessionFactory</tt>). 
                &#22914;&#26524;&#19981;&#35774;&#32622;&#36825;&#20010;&#23646;&#24615;, <tt class="literal">SessionFactory</tt>&#23558;&#19981;&#20250;&#34987;&#32465;&#23450;&#21040;JNDI&#20013;. (&#22312;&#20197;&#21482;&#35835;JNDI&#20026;&#40664;&#35748;&#23454;&#29616;&#30340;&#29615;&#22659;&#20013;&#65292;&#36825;&#20010;&#35774;&#32622;&#23588;&#20854;&#26377;&#29992;, &#22914;Tomcat.)
            </p><p>
                &#22312;&#23558;<tt class="literal">SessionFactory</tt>&#32465;&#23450;&#33267;JNDI&#26102;, Hibernate&#23558;&#20351;&#29992;<tt class="literal">hibernate.jndi.url</tt>, 
                &#21644;<tt class="literal">hibernate.jndi.class</tt>&#30340;&#20540;&#26469;&#23454;&#20363;&#21270;&#21021;&#22987;&#29615;&#22659;(initial context). 
                &#22914;&#26524;&#23427;&#20204;&#27809;&#26377;&#34987;&#25351;&#23450;, &#23558;&#20351;&#29992;&#40664;&#35748;&#30340;<tt class="literal">InitialContext</tt>.
            </p><p>
                &#22312;&#20320;&#35843;&#29992;<tt class="literal">cfg.buildSessionFactory()</tt>&#21518;, Hibernate&#20250;&#33258;&#21160;&#23558;<tt class="literal">SessionFactory</tt>&#27880;&#20876;&#21040;JNDI.
                &#36825;&#24847;&#21619;&#36825;&#20320;&#33267;&#23569;&#38656;&#35201;&#22312;&#20320;&#24212;&#29992;&#31243;&#24207;&#30340;&#21551;&#21160;&#20195;&#30721;(&#25110;&#24037;&#20855;&#31867;)&#20013;&#23436;&#25104;&#36825;&#20010;&#35843;&#29992;, &#38500;&#38750;&#20320;&#20351;&#29992;<tt class="literal">HibernateService</tt>&#26469;&#20570;JMX&#37096;&#32626; (&#35265;&#21518;&#38754;&#35752;&#35770;).
            </p><p>
                &#20551;&#33509;&#20320;&#20351;&#29992;JNDI <tt class="literal">SessionFactory</tt>,EJB&#25110;&#32773;&#20219;&#20309;&#20854;&#23427;&#31867;&#37117;&#21487;&#20197;&#20174;JNDI&#20013;&#25214;&#21040;&#27492;<tt class="literal">SessionFactory</tt>&#12290;
            </p><p>
                &#25105;&#20204;&#24314;&#35758;&#65292;&#22312;&#21463;&#31649;&#29702;&#30340;&#29615;&#22659;&#20013;&#65292;&#25226;<tt class="literal">SessionFactory</tt>&#32465;&#23450;&#21040;JNDI&#65292;&#22312;&#20854;&#23427;&#24773;&#20917;&#19979;&#65292;&#20351;&#29992;&#19968;&#20010;<tt class="literal">static(&#38745;&#24577;&#30340;)</tt>singleton&#12290;&#20026;&#20102;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#20013;&#38544;&#34255;&#36825;&#20123;&#32454;&#33410;&#65292;&#25105;&#20204;&#36824;&#24314;&#35758;&#20320;&#29992;&#19968;&#20010;helper&#31867;&#25226;&#23454;&#38469;&#26597;&#25214;<tt class="literal">SessionFactory</tt>&#30340;&#20195;&#30721;&#38544;&#34255;&#36215;&#26469;,&#27604;&#22914;<tt class="literal">HibernateUtil.getSessionFactory()</tt>&#12290;&#27880;&#24847;&#65292;&#36825;&#20010;&#31867;&#20063;&#23601;&#21487;&#20197;&#26041;&#20415;&#22320;&#21551;&#21160;Hibernate&#65292;&#21442;&#35265;&#31532;&#19968;&#31456;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-j2ee-currentsession"></a>3.8.3.&nbsp;&#22312;JTA&#29615;&#22659;&#19979;&#20351;&#29992;Current Session context (&#24403;&#21069;session&#19978;&#19979;&#25991;)&#31649;&#29702;</h3></div></div><div></div></div><p>
	            &#22312;Hibernate&#20013;&#65292;&#31649;&#29702;<tt class="literal">Session</tt>&#21644;transaction&#26368;&#22909;&#30340;&#26041;&#27861;&#26159;&#33258;&#21160;&#30340;"&#24403;&#21069;"<tt class="literal">Session</tt>&#31649;&#29702;&#12290;&#35831;&#21442;&#35265;<a href="#architecture-current-session" title="2.5.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session">&#31532;&nbsp;2.5&nbsp;&#33410; &#8220;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session&#8221;</a>&#19968;&#33410;&#30340;&#35752;&#35770;&#12290;&#20351;&#29992;<tt class="literal">"jta"</tt>session&#19978;&#19979;&#25991;&#65292;&#20551;&#33509;&#22312;&#24403;&#21069;JTA&#20107;&#21153;&#20013;&#36824;&#27809;&#26377;Hibernate<tt class="literal">Session</tt>&#20851;&#32852;&#65292;&#31532;&#19968;&#27425;<tt class="literal">sessionFactory.getCurrentSession()</tt>&#35843;&#29992;&#20250;&#21551;&#21160;&#19968;&#20010;Session,&#24182;&#20851;&#32852;&#21040;&#24403;&#21069;&#30340;JTA&#20107;&#21153;&#12290;&#22312;<tt class="literal">"jta"</tt>&#19978;&#19979;&#25991;&#20013;&#35843;&#29992;<tt class="literal">getCurrentSession()</tt>&#33719;&#24471;&#30340;<tt class="literal">Session</tt>&#65292;&#20250;&#34987;&#35774;&#32622;&#20026;&#22312;transaction&#20851;&#38381;&#30340;&#26102;&#20505;&#33258;&#21160;flush&#65288;&#28165;&#27927;&#65289;&#12289;&#22312;transaction&#20851;&#38381;&#20043;&#21518;&#33258;&#21160;&#20851;&#38381;&#65292;&#27599;&#21477;&#35821;&#21477;&#20043;&#21518;&#20027;&#21160;&#37322;&#25918;JDBC&#36830;&#25509;&#12290;&#36825;&#23601;&#21487;&#20197;&#26681;&#25454;JTA&#20107;&#21153;&#30340;&#29983;&#21629;&#21608;&#26399;&#26469;&#31649;&#29702;&#19982;&#20043;&#20851;&#32852;&#30340;<tt class="literal">Session</tt>&#65292;&#29992;&#25143;&#20195;&#30721;&#20013;&#23601;&#21487;&#20197;&#19981;&#20877;&#32771;&#34385;&#36825;&#20123;&#31649;&#29702;&#12290;&#20320;&#30340;&#20195;&#30721;&#20063;&#21487;&#20197;&#36890;&#36807;<tt class="literal">UserTransaction</tt>&#29992;&#32534;&#31243;&#26041;&#24335;&#20351;&#29992;JTA&#65292;&#25110;&#32773;(&#25105;&#20204;&#24314;&#35758;&#65292;&#20026;&#20102;&#20415;&#20110;&#31227;&#26893;&#20195;&#30721;&#65289;&#20351;&#29992;Hibernate&#30340;<tt class="literal">Transaction</tt> API&#26469;&#35774;&#32622;transaction&#36793;&#30028;&#12290;&#22914;&#26524;&#20320;&#30340;&#20195;&#30721;&#36816;&#34892;&#22312;EJB&#23481;&#22120;&#20013;&#65292;&#24314;&#35758;&#23545;CMT&#20351;&#29992;&#22768;&#26126;&#24335;&#20107;&#21153;&#22768;&#26126;&#12290;
	            
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="configuration-j2ee-jmx"></a>3.8.4.&nbsp;
                JMX&#37096;&#32626;
            </h3></div></div><div></div></div><p>
                &#20026;&#20102;&#23558;<tt class="literal">SessionFactory</tt>&#27880;&#20876;&#21040;JNDI&#20013;&#65292;<tt class="literal">cfg.buildSessionFactory()</tt>&#36825;&#34892;&#20195;&#30721;&#20173;&#38656;&#22312;&#26576;&#22788;&#34987;&#25191;&#34892;.
                &#20320;&#21487;&#22312;&#19968;&#20010;<tt class="literal">static</tt>&#21021;&#22987;&#21270;&#22359;(&#20687;<tt class="literal">HibernateUtil</tt>&#20013;&#30340;&#37027;&#26679;)&#20013;&#25191;&#34892;&#23427;&#25110;&#23558;Hibernate&#37096;&#32626;&#20026;&#19968;&#20010;<span class="emphasis"><em>&#25176;&#31649;&#30340;&#26381;&#21153;</em></span>.
            </p><p>
                &#20026;&#20102;&#37096;&#32626;&#22312;&#19968;&#20010;&#25903;&#25345;JMX&#30340;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#19978;&#65292;Hibernate&#21644;
                <tt class="literal">org.hibernate.jmx.HibernateService</tt>&#19968;&#21516;&#20998;&#21457;&#65292;&#22914;Jboss AS&#12290;
                &#23454;&#38469;&#30340;&#37096;&#32626;&#21644;&#37197;&#32622;&#26159;&#30001;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#25552;&#20379;&#32773;&#25351;&#23450;&#30340;. &#36825;&#37324;&#26159;JBoss 4.0.x&#30340;<tt class="literal">jboss-service.xml</tt>&#26679;&#20363;:
            </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;server&gt;

&lt;mbean code="org.hibernate.jmx.HibernateService"
    name="jboss.jca:service=HibernateFactory,name=HibernateFactory"&gt;

    &lt;!-- &#24517;&#39035;&#30340;&#26381;&#21153; --&gt;
    &lt;depends&gt;jboss.jca:service=RARDeployer&lt;/depends&gt;
    &lt;depends&gt;jboss.jca:service=LocalTxCM,name=HsqlDS&lt;/depends&gt;

    &lt;!-- &#23558;Hibernate&#26381;&#21153;&#32465;&#23450;&#21040;JNDI --&gt;
    &lt;attribute name="JndiName"&gt;java:/hibernate/SessionFactory&lt;/attribute&gt;

    &lt;!-- &#25968;&#25454;&#28304;&#35774;&#32622; --&gt;
    &lt;attribute name="Datasource"&gt;java:HsqlDS&lt;/attribute&gt;
    &lt;attribute name="Dialect"&gt;org.hibernate.dialect.HSQLDialect&lt;/attribute&gt;

    &lt;!-- &#20107;&#21153;&#38598;&#25104; --&gt;
    &lt;attribute name="TransactionStrategy"&gt;
        org.hibernate.transaction.JTATransactionFactory&lt;/attribute&gt;
    &lt;attribute name="TransactionManagerLookupStrategy"&gt;
        org.hibernate.transaction.JBossTransactionManagerLookup&lt;/attribute&gt;
    &lt;attribute name="FlushBeforeCompletionEnabled"&gt;true&lt;/attribute&gt;
    &lt;attribute name="AutoCloseSessionEnabled"&gt;true&lt;/attribute&gt;

    &lt;!-- &#25235;&#21462;&#36873;&#39033; --&gt;
    &lt;attribute name="MaximumFetchDepth"&gt;5&lt;/attribute&gt;

    &lt;!-- &#20108;&#32423;&#32531;&#23384; --&gt;
    &lt;attribute name="SecondLevelCacheEnabled"&gt;true&lt;/attribute&gt;
    &lt;attribute name="CacheProviderClass"&gt;org.hibernate.cache.EhCacheProvider&lt;/attribute&gt;
    &lt;attribute name="QueryCacheEnabled"&gt;true&lt;/attribute&gt;

    &lt;!-- &#26085;&#24535; --&gt;
    &lt;attribute name="ShowSqlEnabled"&gt;true&lt;/attribute&gt;

    &lt;!-- &#26144;&#23556;&#23450;&#20041;&#25991;&#20214; --&gt;
    &lt;attribute name="MapResources"&gt;auction/Item.hbm.xml,auction/Category.hbm.xml&lt;/attribute&gt;

&lt;/mbean&gt;

&lt;/server&gt;</pre><p>
                &#36825;&#20010;&#25991;&#20214;&#26159;&#37096;&#32626;&#22312;<tt class="literal">META-INF</tt>&#30446;&#24405;&#19979;&#30340;, &#24182;&#20250;&#34987;&#25171;&#21253;&#21040;&#20197;<tt class="literal">.sar</tt> (service archive)&#20026;&#25193;&#23637;&#21517;&#30340;JAR&#25991;&#20214;&#20013;.
                &#21516;&#26102;&#65292;&#20320;&#38656;&#35201;&#23558;Hibernate&#12289;&#23427;&#25152;&#38656;&#35201;&#30340;&#31532;&#19977;&#26041;&#24211;&#12289;&#20320;&#32534;&#35793;&#22909;&#30340;&#25345;&#20037;&#21270;&#31867;&#20197;&#21450;&#20320;&#30340;&#26144;&#23556;&#23450;&#20041;&#25991;&#20214;&#25171;&#21253;&#36827;&#21516;&#19968;&#20010;&#25991;&#26723;. 
                &#20320;&#30340;&#20225;&#19994;Bean(&#19968;&#33324;&#20026;&#20250;&#35805;Bean)&#21487;&#33021;&#20250;&#34987;&#25171;&#21253;&#25104;&#23427;&#20204;&#33258;&#24049;&#30340;JAR&#25991;&#20214;, &#20294;&#20320;&#20063;&#35768;&#20250;&#23558;EJB JAR&#25991;&#20214;&#19968;&#21516;&#21253;&#21547;&#36827;&#33021;&#29420;&#31435;(&#28909;)&#37096;&#32626;&#30340;&#20027;&#26381;&#21153;&#25991;&#26723;.
                &#21442;&#32771;JBoss AS&#25991;&#26723;&#20197;&#20102;&#35299;&#26356;&#22810;&#30340;JMX&#26381;&#21153;&#19982;EJB&#37096;&#32626;&#30340;&#20449;&#24687;.
            </p></div></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="persistent-classes"></a>&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#25345;&#20037;&#21270;&#31867;(Persistent Classes)</h2></div></div><div></div></div><p>
        &#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#29992;&#26469;&#23454;&#29616;&#19994;&#21153;&#38382;&#39064;&#23454;&#20307;&#30340;&#65288;&#22914;&#65292;&#22312;&#30005;&#23376;&#21830;&#21153;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;Customer&#21644;Order&#65289;
        &#31867;&#23601;&#26159;&#25345;&#20037;&#21270;&#31867;&#12290;&#19981;&#33021;&#35748;&#20026;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#31867;&#30340;&#23454;&#20363;&#37117;&#26159;&#25345;&#20037;&#30340;&#29366;&#24577;&#8212;&#8212;&#19968;&#20010;&#23454;&#20363;&#30340;&#29366;&#24577;&#20063;&#21487;&#33021;
        &#26159;&#30636;&#26102;&#30340;&#25110;&#33073;&#31649;&#30340;&#12290;
   </p><p>
        &#22914;&#26524;&#36825;&#20123;&#25345;&#20037;&#21270;&#31867;&#36981;&#24490;&#19968;&#20123;&#31616;&#21333;&#30340;&#35268;&#21017;&#65292;Hibernate&#33021;&#22815;&#24037;&#20316;&#24471;&#26356;&#22909;&#65292;&#36825;&#20123;&#35268;&#21017;&#20063;&#34987;&#31216;&#20316;
        &#31616;&#21333;&#20256;&#32479;Java&#23545;&#35937;(POJO:Plain Old Java Object)&#32534;&#31243;&#27169;&#22411;&#12290;&#20294;&#26159;&#36825;&#20123;&#35268;&#21017;&#24182;&#19981;&#26159;&#24517;&#38656;&#30340;&#12290;
        &#23454;&#38469;&#19978;&#65292;Hibernate3&#23545;&#20110;&#20320;&#30340;&#25345;&#20037;&#21270;&#31867;&#20960;&#20046;&#19981;&#20570;&#20219;&#20309;&#35774;&#24819;&#12290;&#20320;&#21487;&#20197;&#29992;&#20854;&#20182;&#30340;&#26041;&#27861;&#26469;&#34920;&#36798;&#39046;&#22495;&#27169;&#22411;&#65306;
        &#27604;&#22914;&#65292;&#20351;&#29992;<tt class="literal">Map</tt>&#23454;&#20363;&#30340;&#26641;&#22411;&#32467;&#26500;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-pojo"></a>4.1.&nbsp;&#19968;&#20010;&#31616;&#21333;&#30340;POJO&#20363;&#23376;</h2></div></div><div></div></div><p>
            &#22823;&#22810;&#25968;Java&#31243;&#24207;&#38656;&#35201;&#29992;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#26469;&#34920;&#31034;&#29483;&#31185;&#21160;&#29289;&#12290;
        </p><pre class="programlisting">package eg;
import java.util.Set;
import java.util.Date;

public class Cat {
    private Long id; // identifier

    private Date birthdate;
    private Color color;
    private char sex;
    private float weight;
    private int litterId;

    private Cat mother;
    private Set kittens = new HashSet();

    private void setId(Long id) {
        this.id=id;
    }
    public Long getId() {
        return id;
    }

    void setBirthdate(Date date) {
        birthdate = date;
    }
    public Date getBirthdate() {
        return birthdate;
    }

    void setWeight(float weight) {
        this.weight = weight;
    }
    public float getWeight() {
        return weight;
    }

    public Color getColor() {
        return color;
    }
    void setColor(Color color) {
        this.color = color;
    }

    void setSex(char sex) {
        this.sex=sex;
    }
    public char getSex() {
        return sex;
    }

    void setLitterId(int id) {
        this.litterId = id;
    }
    public int getLitterId() {
        return litterId;
    }

    void setMother(Cat mother) {
        this.mother = mother;
    }
    public Cat getMother() {
        return mother;
    }
    void setKittens(Set kittens) {
        this.kittens = kittens;
    }
    public Set getKittens() {
        return kittens;
    }
    
    // addKitten not needed by Hibernate
    public void addKitten(Cat kitten) {
    	kitten.setMother(this);
	kitten.setLitterId( kittens.size() ); 
        kittens.add(kitten);
    }
}</pre><p>
            &#36825;&#37324;&#35201;&#36981;&#24490;&#22235;&#26465;&#20027;&#35201;&#30340;&#35268;&#21017;&#65306;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-constructor"></a>4.1.1.&nbsp;&#23454;&#29616;&#19968;&#20010;&#40664;&#35748;&#30340;&#65288;&#21363;&#26080;&#21442;&#25968;&#30340;&#65289;&#26500;&#36896;&#26041;&#27861;&#65288;constructor&#65289;</h3></div></div><div></div></div><p>
                <tt class="literal">Cat</tt>&#26377;&#19968;&#20010;&#26080;&#21442;&#25968;&#30340;&#26500;&#36896;&#26041;&#27861;&#12290;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#31867;&#37117;&#24517;&#39035;&#26377;&#19968;&#20010;
                &#40664;&#35748;&#30340;&#26500;&#36896;&#26041;&#27861;&#65288;&#21487;&#20197;&#19981;&#26159;public&#30340;&#65289;&#65292;&#36825;&#26679;&#30340;&#35805;Hibernate&#23601;&#21487;&#20197;&#20351;&#29992;
                <tt class="literal">Constructor.newInstance()</tt>&#26469;&#23454;&#20363;&#21270;&#23427;&#20204;&#12290;
                &#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#65292;&#22312;Hibernate&#20013;&#65292;&#20026;&#20102;&#36816;&#34892;&#26399;&#20195;&#29702;&#30340;&#29983;&#25104;&#65292;&#26500;&#36896;&#26041;&#27861;&#33267;&#23569;&#26159;
                <span class="emphasis"><em>&#21253;(package)</em></span>&#20869;&#21487;&#35265;&#30340;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-identifier"></a>4.1.2.&nbsp;&#25552;&#20379;&#19968;&#20010;&#26631;&#35782;&#23646;&#24615;&#65288;identifier property&#65289;&#65288;&#21487;&#36873;&#65289; </h3></div></div><div></div></div><p>
                <tt class="literal">Cat</tt>&#26377;&#19968;&#20010;&#23646;&#24615;&#21483;&#20570;<tt class="literal">id</tt>&#12290;&#36825;&#20010;&#23646;&#24615;&#26144;&#23556;&#25968;&#25454;&#24211;&#34920;&#30340;&#20027;
                &#38190;&#23383;&#27573;&#12290;&#36825;&#20010;&#23646;&#24615;&#21487;&#20197;&#21483;&#20219;&#20309;&#21517;&#23383;&#65292;&#20854;&#31867;&#22411;&#21487;&#20197;&#26159;&#20219;&#20309;&#30340;&#21407;&#22987;&#31867;&#22411;&#12289;&#21407;&#22987;&#31867;&#22411;&#30340;&#21253;&#35013;&#31867;&#22411;&#12289;
                <tt class="literal">java.lang.String</tt> &#25110;&#32773;&#26159; <tt class="literal">java.util.Date</tt>&#12290;
                &#65288;&#22914;&#26524;&#20320;&#30340;&#36951;&#30041;&#25968;&#25454;&#24211;&#34920;&#26377;&#32852;&#21512;&#20027;&#38190;&#65292;&#20320;&#29978;&#33267;&#21487;&#20197;&#29992;&#19968;&#20010;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#31867;&#65292;&#35813;&#31867;&#25317;&#26377;&#36825;&#20123;&#31867;&#22411;
                &#30340;&#23646;&#24615;&#12290;&#21442;&#35265;&#21518;&#38754;&#30340;&#20851;&#20110;&#32852;&#21512;&#26631;&#35782;&#31526;&#30340;&#31456;&#33410;&#12290;&#65289;
            </p><p>
                &#26631;&#35782;&#31526;&#23646;&#24615;&#26159;&#21487;&#36873;&#30340;&#12290;&#21487;&#20197;&#19981;&#29992;&#31649;&#23427;&#65292;&#35753;Hibernate&#20869;&#37096;&#26469;&#36861;&#36394;&#23545;&#35937;&#30340;&#35782;&#21035;&#12290;
                &#20294;&#26159;&#25105;&#20204;&#24182;&#19981;&#25512;&#33616;&#36825;&#26679;&#20570;&#12290;
            </p><p>
                &#23454;&#38469;&#19978;&#65292;&#19968;&#20123;&#21151;&#33021;&#21482;&#23545;&#37027;&#20123;&#22768;&#26126;&#20102;&#26631;&#35782;&#31526;&#23646;&#24615;&#30340;&#31867;&#36215;&#20316;&#29992;&#65306;
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        &#25176;&#31649;&#23545;&#35937;&#30340;&#20256;&#25773;&#24615;&#20877;&#36830;&#25509;&#65288;&#32423;&#32852;&#26356;&#26032;&#25110;&#32423;&#32852;&#21512;&#24182;&#65289;
                        &#8212;&#8212;&#21442;&#38405; <a href="#objectstate-transitive" title="10.11.&nbsp;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)">&#31532;&nbsp;10.11&nbsp;&#33410; &#8220;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)&#8221;</a>
                    </p></li><li><p>
                        <tt class="literal">Session.saveOrUpdate()</tt>
                    </p></li><li><p>
                        <tt class="literal">Session.merge()</tt>
                    </p></li></ul></div><p>
            	&#25105;&#20204;&#24314;&#35758;&#20320;&#23545;&#25345;&#20037;&#21270;&#31867;&#22768;&#26126;&#21629;&#21517;&#19968;&#33268;&#30340;&#26631;&#35782;&#23646;&#24615;&#12290;&#25105;&#20204;&#36824;&#24314;&#35758;&#20320;&#20351;&#29992;&#19968;
            	&#20010;&#21487;&#20197;&#20026;&#31354;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#19981;&#26159;&#21407;&#22987;&#31867;&#22411;&#65289;&#30340;&#31867;&#22411;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-final"></a>4.1.3.&nbsp;&#20351;&#29992;&#38750;final&#30340;&#31867; (&#21487;&#36873;)</h3></div></div><div></div></div><p>
            	<span class="emphasis"><em>&#20195;&#29702;&#65288;proxies&#65289;</em></span>&#26159;Hibernate&#30340;&#19968;&#20010;&#37325;&#35201;&#30340;&#21151;&#33021;&#65292;&#23427;&#20381;&#36182;&#30340;&#26465;&#20214;&#26159;&#65292;&#25345;&#20037;
            	&#21270;&#31867;&#25110;&#32773;&#26159;&#38750;final&#30340;&#65292;&#25110;&#32773;&#26159;&#23454;&#29616;&#20102;&#19968;&#20010;&#25152;&#26377;&#26041;&#27861;&#37117;&#22768;&#26126;&#20026;public&#30340;&#25509;&#21475;&#12290;
            </p><p>
            	&#20320;&#21487;&#20197;&#29992;Hibernate&#25345;&#20037;&#21270;&#19968;&#20010;&#27809;&#26377;&#23454;&#29616;&#20219;&#20309;&#25509;&#21475;&#30340;<tt class="literal">final</tt>&#31867;&#65292;&#20294;&#26159;&#20320;
            	&#19981;&#33021;&#20351;&#29992;&#20195;&#29702;&#26469;&#24310;&#36831;&#20851;&#32852;&#21152;&#36733;&#65292;&#36825;&#20250;&#38480;&#21046;&#20320;&#36827;&#34892;&#24615;&#33021;&#20248;&#21270;&#30340;&#36873;&#25321;&#12290;
            </p><p> 
            	&#20320;&#20063;&#24212;&#35813;&#36991;&#20813;&#22312;&#38750;final&#31867;&#20013;&#22768;&#26126; <tt class="literal">public final</tt>&#30340;&#26041;&#27861;&#12290;&#22914;&#26524;&#20320;&#24819;&#20351;&#29992;&#19968;
            	&#20010;&#26377;<tt class="literal">public final</tt>&#26041;&#27861;&#30340;&#31867;&#65292;&#20320;&#24517;&#39035;&#36890;&#36807;&#35774;&#32622;<tt class="literal">lazy="false"</tt>
            	&#26469;&#26126;&#30830;&#22320;&#31105;&#29992;&#20195;&#29702;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-classes-pojo-accessors"></a>4.1.4.&nbsp;&#20026;&#25345;&#20037;&#21270;&#23383;&#27573;&#22768;&#26126;&#35775;&#38382;&#22120;(accessors)&#21644;&#26159;&#21542;&#21487;&#21464;&#30340;&#26631;&#24535;(mutators)(&#21487;&#36873;)</h3></div></div><div></div></div><p>
                <tt class="literal">Cat</tt>&#20026;&#23427;&#30340;&#25152;&#26377;&#25345;&#20037;&#21270;&#23383;&#27573;&#22768;&#26126;&#20102;&#35775;&#38382;&#26041;&#27861;&#12290;&#24456;&#22810;&#20854;&#20182;ORM&#24037;&#20855;&#30452;&#25509;&#23545;
                &#23454;&#20363;&#21464;&#37327;&#36827;&#34892;&#25345;&#20037;&#21270;&#12290;&#25105;&#20204;&#30456;&#20449;&#65292;&#22312;&#20851;&#31995;&#25968;&#25454;&#24211;schema&#21644;&#31867;&#30340;&#20869;&#37096;&#25968;&#25454;&#32467;&#26500;&#20043;&#38388;&#24341;&#20837;&#38388;&#25509;&#23618;(&#21407;&#25991;&#20026;"&#38750;&#30452;&#25509;"&#65292;indirection)&#20250;&#22909;&#19968;&#20123;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;Hibernate&#25345;&#20037;&#21270;JavaBeans&#39118;&#26684;&#30340;&#23646;&#24615;&#65292;&#35748;&#21487;
                <tt class="literal">getFoo</tt>&#65292;<tt class="literal">isFoo</tt> &#21644; <tt class="literal">setFoo</tt>&#36825;&#31181;&#24418;&#24335;&#30340;&#26041;&#27861;&#21517;&#12290;
                &#22914;&#26524;&#38656;&#35201;&#65292;&#20320;&#21487;&#20197;&#23545;&#26576;&#20123;&#29305;&#23450;&#23646;&#24615;&#23454;&#34892;&#30452;&#25509;&#23383;&#27573;&#35775;&#38382;&#12290;
            </p><p>
                &#23646;&#24615;<span class="emphasis"><em>&#19981;&#38656;&#35201;</em></span>&#35201;&#22768;&#26126;&#20026;public&#30340;&#12290;Hibernate&#21487;&#20197;&#25345;&#20037;&#21270;&#19968;&#20010;&#26377;
                <tt class="literal">default</tt>&#12289;<tt class="literal">protected</tt>&#25110;<tt class="literal">private</tt>&#30340;get/set&#26041;&#27861;&#23545;
                &#30340;&#23646;&#24615;&#36827;&#34892;&#25345;&#20037;&#21270;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-inheritance"></a>4.2.&nbsp;&#23454;&#29616;&#32487;&#25215;&#65288;Inheritance&#65289;</h2></div></div><div></div></div><p>
            &#23376;&#31867;&#20063;&#24517;&#39035;&#36981;&#23432;&#31532;&#19968;&#26465;&#21644;&#31532;&#20108;&#26465;&#35268;&#21017;&#12290;&#23427;&#20174;&#36229;&#31867;<tt class="literal">Cat</tt>&#32487;&#25215;&#20102;&#26631;&#35782;&#23646;&#24615;&#12290;
        </p><pre class="programlisting">package eg;

public class DomesticCat extends Cat {
        private String name;

        public String getName() {
                return name;
        }
        protected void setName(String name) {
                this.name=name;
        }
}</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-equalshashcode"></a>4.3.&nbsp;&#23454;&#29616;<tt class="literal">equals()</tt>&#21644;<tt class="literal">hashCode()</tt></h2></div></div><div></div></div><p>
            &#22914;&#26524;&#20320;&#26377;&#22914;&#19979;&#38656;&#27714;&#65292;&#20320;&#24517;&#39035;&#37325;&#36733;
            <tt class="literal">equals()</tt> &#21644; <tt class="literal">hashCode()</tt>&#26041;&#27861;&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p> 
										&#24819;&#25226;&#25345;&#20037;&#31867;&#30340;&#23454;&#20363;&#25918;&#20837;<tt class="literal">Set</tt>&#20013;&#65288;&#24403;&#34920;&#31034;&#22810;&#20540;&#20851;&#32852;&#26102;&#65292;&#25512;&#33616;&#36825;&#20040;&#20570;&#65289;										
								</p></li><li><p>
                		&#24819;&#37325;&#29992;&#33073;&#31649;&#23454;&#20363;
                </p></li></ul></div><p>
						Hibernate&#20445;&#35777;&#65292;&#20165;&#22312;&#29305;&#23450;&#20250;&#35805;&#33539;&#22260;&#20869;&#65292;&#25345;&#20037;&#21270;&#26631;&#35782;&#65288;&#25968;&#25454;&#24211;&#30340;&#34892;&#65289;&#21644;Java&#26631;&#35782;&#26159;&#31561;&#20215;&#30340;&#12290;&#22240;&#27492;&#65292;&#19968;&#26086;
						&#25105;&#20204;&#28151;&#21512;&#20102;&#20174;&#19981;&#21516;&#20250;&#35805;&#20013;&#33719;&#21462;&#30340;&#23454;&#20363;&#65292;&#22914;&#26524;&#24076;&#26395;<tt class="literal">Set</tt>&#26377;&#26126;&#30830;&#30340;&#35821;&#20041;&#65292;&#23601;&#24517;
						&#39035;&#23454;&#29616;<tt class="literal">equals()</tt> &#21644;<tt class="literal">hashCode()</tt>&#12290;
				</p><p>
						&#23454;&#29616;<tt class="literal">equals()</tt>/<tt class="literal">hashCode()</tt>&#26368;&#26174;&#32780;&#26131;&#35265;&#30340;&#26041;&#27861;&#26159;&#27604;&#36739;&#20004;&#20010;&#23545;&#35937;
						&#26631;&#35782;&#31526;&#30340;&#20540;&#12290;&#22914;&#26524;&#20540;&#30456;&#21516;&#65292;&#21017;&#20004;&#20010;&#23545;&#35937;&#23545;&#24212;&#20110;&#25968;&#25454;&#24211;&#30340;&#21516;&#19968;&#34892;&#65292;&#22240;&#27492;&#23427;&#20204;&#26159;&#30456;&#31561;&#30340;&#65288;&#22914;&#26524;&#37117;&#34987;&#28155;&#21152;&#21040;
						<tt class="literal">Set</tt>&#65292;&#21017;&#22312;<tt class="literal">Set</tt>&#20013;&#21482;&#26377;&#19968;&#20010;&#20803;&#32032;&#65289;&#12290;&#19981;&#24184;&#30340;&#26159;&#65292;&#23545;&#29983;&#25104;&#30340;&#26631;&#35782;&#19981;&#33021;
						&#20351;&#29992;&#36825;&#31181;&#26041;&#27861;&#12290;Hibernate&#20165;&#23545;&#37027;&#20123;&#25345;&#20037;&#21270;&#23545;&#35937;&#36171;&#26631;&#35782;&#20540;&#65292;&#19968;&#20010;&#26032;&#21019;&#24314;&#30340;&#23454;&#20363;&#23558;&#19981;&#20250;&#26377;&#20219;&#20309;&#26631;&#35782;&#20540;&#12290;&#27492;&#22806;&#65292;
						&#22914;&#26524;&#19968;&#20010;&#23454;&#20363;&#27809;&#26377;&#34987;&#20445;&#23384;(unsaved)&#65292;&#24182;&#19988;&#23427;&#24403;&#21069;&#27491;&#22312;&#19968;&#20010;<tt class="literal">Set</tt>&#20013;&#65292;&#20445;&#23384;&#23427;&#23558;&#20250;&#32473;&#36825;&#20010;&#23545;&#35937;
						&#36171;&#19968;&#20010;&#26631;&#35782;&#20540;&#12290;&#22914;&#26524;<tt class="literal">equals()</tt> &#21644; <tt class="literal">hashCode()</tt>&#26159;&#22522;&#20110;&#26631;&#35782;&#20540;
						&#23454;&#29616;&#30340;&#65292;&#21017;&#20854;&#21704;&#24076;&#30721;&#23558;&#20250;&#25913;&#21464;&#65292;&#36825;&#36829;&#21453;&#20102;<tt class="literal">Set</tt>&#30340;&#22865;&#32422;&#12290;&#24314;&#35758;&#21435;Hibernate&#30340;&#31449;&#28857;&#38405;&#35835;&#20851;&#20110;&#36825;&#20010;
						&#38382;&#39064;&#30340;&#20840;&#37096;&#35752;&#35770;&#12290;&#27880;&#24847;&#65292;&#36825;&#19981;&#26159;Hibernate&#30340;&#38382;&#39064;&#65292;&#32780;&#26159;&#19968;&#33324;&#30340;Java&#23545;&#35937;&#26631;&#35782;&#21644;Java&#23545;&#35937;&#31561;&#20215;&#30340;&#35821;&#20041;&#38382;&#39064;&#12290;
				</p><p>
						&#25105;&#20204;&#24314;&#35758;&#20351;&#29992;<span class="emphasis"><em>&#19994;&#21153;&#38190;&#20540;&#30456;&#31561;(Business key equality)</em></span>&#26469;&#23454;&#29616;<tt class="literal">equals()</tt>
						&#21644; <tt class="literal">hashCode()</tt>&#12290;&#19994;&#21153;&#38190;&#20540;&#30456;&#31561;&#30340;&#24847;&#24605;&#26159;&#65292;<tt class="literal">equals()</tt>&#26041;&#27861;
						&#20165;&#20165;&#27604;&#36739;&#24418;&#25104;&#19994;&#21153;&#38190;&#30340;&#23646;&#24615;&#65292;&#23427;&#33021;&#22312;&#29616;&#23454;&#19990;&#30028;&#37324;&#26631;&#35782;&#25105;&#20204;&#30340;&#23454;&#20363;&#65288;&#26159;&#19968;&#20010;<span class="emphasis"><em>&#33258;&#28982;&#30340;</em></span>&#20505;&#36873;&#30721;&#65289;&#12290;
				</p><pre class="programlisting">public class Cat {

    ...
    public boolean equals(Object other) {
        if (this == other) return true;
        if ( !(other instanceof Cat) ) return false;

        final Cat cat = (Cat) other;

        if ( !cat.getLitterId().equals( getLitterId() ) ) return false;
        if ( !cat.getMother().equals( getMother() ) ) return false;

        return true;
    }

    public int hashCode() {
        int result;
        result = getMother().hashCode();
        result = 29 * result + getLitterId();
        return result;
    }

}</pre><p>
						&#27880;&#24847;&#65292;&#19994;&#21153;&#38190;&#19981;&#24517;&#20687;&#25968;&#25454;&#24211;&#30340;&#20027;&#38190;&#37027;&#26679;&#22266;&#23450;&#19981;&#21464;&#65288;&#21442;&#35265;<a href="#transactions-basics-identity" title="11.1.3.&nbsp;&#20851;&#27880;&#23545;&#35937;&#26631;&#35782;(Considering object identity)">&#31532;&nbsp;11.1.3&nbsp;&#33410; &#8220;&#20851;&#27880;&#23545;&#35937;&#26631;&#35782;(Considering object identity)&#8221;</a>&#65289;&#12290;
						&#23545;&#19994;&#21153;&#38190;&#32780;&#35328;&#65292;&#19981;&#21487;&#21464;&#25110;&#21807;&#19968;&#30340;&#23646;&#24615;&#26159;&#19981;&#38169;&#30340;&#36873;&#25321;&#12290;
				</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-dynamicmodels"></a>4.4.&nbsp;&#21160;&#24577;&#27169;&#22411;(Dynamic models)</h2></div></div><div></div></div><p>
						<span class="emphasis"><em>&#27880;&#24847;&#65292;&#20197;&#19979;&#29305;&#24615;&#22312;&#24403;&#21069;&#22788;&#20110;&#35797;&#39564;&#38454;&#27573;&#65292;&#23558;&#26469;&#21487;&#33021;&#20250;&#26377;&#21464;&#21270;&#12290;</em></span>
				</p><p>
						&#36816;&#34892;&#26399;&#30340;&#25345;&#20037;&#21270;&#23454;&#20307;&#27809;&#26377;&#24517;&#35201;&#19968;&#23450;&#34920;&#31034;&#20026;&#20687;POJO&#31867;&#25110;JavaBean&#23545;&#35937;&#37027;&#26679;&#30340;&#24418;&#24335;&#12290;Hibernate&#20063;&#25903;&#25345;&#21160;&#24577;&#27169;&#22411;
						&#65288;&#22312;&#36816;&#34892;&#26399;&#20351;&#29992;<tt class="literal">Map</tt>&#30340;<tt class="literal">Map</tt>&#65289;&#21644;&#35937;DOM4J&#30340;&#26641;&#27169;&#22411;&#37027;
						&#26679;&#30340;&#23454;&#20307;&#34920;&#31034;&#12290;&#20351;&#29992;&#36825;&#31181;&#26041;&#27861;&#65292;&#20320;&#19981;&#29992;&#20889;&#25345;&#20037;&#21270;&#31867;&#65292;&#21482;&#20889;&#26144;&#23556;&#25991;&#20214;&#23601;&#34892;&#20102;&#12290;
				</p><p>
						Hibernate&#40664;&#35748;&#24037;&#20316;&#22312;&#26222;&#36890;POJO&#27169;&#24335;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;&#37197;&#32622;&#36873;&#39033;<tt class="literal">default_entity_mode</tt>&#65292;
						&#23545;&#29305;&#23450;&#30340;<tt class="literal">SessionFactory</tt>&#65292;&#35774;&#32622;&#19968;&#20010;&#40664;&#35748;&#30340;&#23454;&#20307;&#34920;&#31034;&#27169;&#24335;&#12290;
						&#65288;&#21442;&#35265;<a href="#configuration-optional-properties" title="&#34920;&nbsp;3.3.&nbsp;&#xA;                Hibernate&#37197;&#32622;&#23646;&#24615;&#xA;            ">&#34920;&nbsp;3.3 &#8220;
                Hibernate&#37197;&#32622;&#23646;&#24615;
            &#8221;</a>&#12290;&#65289;
				</p><p>
						&#19979;&#38754;&#26159;&#29992;<tt class="literal">Map</tt>&#26469;&#34920;&#31034;&#30340;&#20363;&#23376;&#12290;&#39318;&#20808;&#65292;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#65292;&#35201;&#22768;&#26126;
						<tt class="literal">entity-name</tt>&#26469;&#20195;&#26367;&#19968;&#20010;&#31867;&#21517;&#65288;&#25110;&#20316;&#20026;&#19968;&#31181;&#38468;&#23646;&#65289;&#12290;
				</p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class entity-name="Customer"&gt;

        &lt;id name="id"
            type="long"
            column="ID"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;

        &lt;property name="name"
            column="NAME"
            type="string"/&gt;

        &lt;property name="address"
            column="ADDRESS"
            type="string"/&gt;

        &lt;many-to-one name="organization"
            column="ORGANIZATION_ID"
            class="Organization"/&gt;

        &lt;bag name="orders"
            inverse="true"
            lazy="false"
            cascade="all"&gt;
            &lt;key column="CUSTOMER_ID"/&gt;
            &lt;one-to-many class="Order"/&gt;
        &lt;/bag&gt;

    &lt;/class&gt;
    
&lt;/hibernate-mapping&gt;</pre><p>
						&#27880;&#24847;&#65292;&#34429;&#28982;&#26159;&#29992;&#30446;&#26631;&#31867;&#21517;&#26469;&#22768;&#26126;&#20851;&#32852;&#30340;&#65292;&#20294;&#26159;&#20851;&#32852;&#30340;&#30446;&#26631;&#31867;&#22411;&#38500;&#20102;&#26159;POJO&#20043;&#22806;&#65292;&#20063;&#21487;&#20197;
						&#26159;&#19968;&#20010;&#21160;&#24577;&#30340;&#23454;&#20307;&#12290;
				</p><p>
						&#22312;&#20351;&#29992;<tt class="literal">dynamic-map</tt>&#20026;<tt class="literal">SessionFactory</tt>
						&#35774;&#32622;&#20102;&#40664;&#35748;&#30340;&#23454;&#20307;&#27169;&#24335;&#20043;&#21518;&#65292;&#21487;&#20197;&#22312;&#36816;&#34892;&#26399;&#20351;&#29992;<tt class="literal">Map</tt>&#30340;
						<tt class="literal">Map</tt>&#12290;
				</p><pre class="programlisting">Session s = openSession();
Transaction tx = s.beginTransaction();
Session s = openSession();

// Create a customer
Map david = new HashMap();
david.put("name", "David");

// Create an organization
Map foobar = new HashMap();
foobar.put("name", "Foobar Inc.");

// Link both
david.put("organization", foobar);

// Save both
s.save("Customer", david);
s.save("Organization", foobar);

tx.commit();
s.close();</pre><p>
						&#21160;&#24577;&#26144;&#23556;&#30340;&#22909;&#22788;&#26159;&#65292;&#21464;&#21270;&#25152;&#38656;&#35201;&#30340;&#26102;&#38388;&#23569;&#20102;&#65292;&#22240;&#20026;&#21407;&#22411;&#19981;&#38656;&#35201;&#23454;&#29616;&#23454;&#20307;&#31867;&#12290;&#28982;&#32780;&#65292;&#20320;&#26080;&#27861;&#36827;&#34892;
						&#32534;&#35793;&#26399;&#30340;&#31867;&#22411;&#26816;&#26597;&#65292;&#24182;&#21487;&#33021;&#30001;&#27492;&#20250;&#22788;&#29702;&#24456;&#22810;&#30340;&#36816;&#34892;&#26399;&#24322;&#24120;&#12290;&#24184;&#20111;&#26377;&#20102;Hibernate&#26144;&#23556;&#65292;&#23427;&#20351;&#24471;&#25968;
						&#25454;&#24211;&#30340;schema&#33021;&#23481;&#26131;&#30340;&#35268;&#26684;&#21270;&#21644;&#21512;&#29702;&#21270;&#65292;&#24182;&#20801;&#35768;&#31245;&#21518;&#22312;&#27492;&#20043;&#19978;&#28155;&#21152;&#21512;&#36866;&#30340;&#39046;&#22495;&#27169;&#22411;&#23454;&#29616;&#12290;
				</p><p>
						&#23454;&#20307;&#34920;&#31034;&#27169;&#24335;&#20063;&#33021;&#22312;&#27599;&#20010;<tt class="literal">Session</tt>&#30340;&#22522;&#30784;&#19978;&#35774;&#32622;&#65306;
				</p><pre class="programlisting">Session dynamicSession = pojoSession.getSession(EntityMode.MAP);

// Create a customer
Map david = new HashMap();
david.put("name", "David");
dynamicSession.save("Customer", david);
...
dynamicSession.flush();
dynamicSession.close()
...
// Continue on pojoSession
</pre><p>
						&#35831;&#27880;&#24847;&#65292;&#29992;<tt class="literal">EntityMode</tt>&#35843;&#29992;<tt class="literal">getSession()</tt>&#26159;&#22312;
						<tt class="literal">Session</tt>&#30340;API&#20013;&#65292;&#32780;&#19981;&#26159;<tt class="literal">SessionFactory</tt>&#12290;
						&#36825;&#26679;&#65292;&#26032;&#30340;<tt class="literal">Session</tt>&#20849;&#20139;&#24213;&#23618;&#30340;JDBC&#36830;&#25509;&#65292;&#20107;&#21153;&#65292;&#21644;&#20854;&#20182;&#30340;&#19978;&#19979;&#25991;&#20449;
						&#24687;&#12290;&#36825;&#24847;&#21619;&#30528;&#65292;&#20320;&#19981;&#38656;&#35201;&#22312;&#31532;&#20108;&#20010;<tt class="literal">Session</tt>&#20013;&#35843;&#29992;
						<tt class="literal">flush()</tt>&#21644;<tt class="literal">close()</tt>&#65292;&#21516;&#26679;&#30340;&#65292;&#25226;&#20107;&#21153;&#21644;&#36830;&#25509;&#30340;&#22788;&#29702;
						&#20132;&#32473;&#21407;&#26469;&#30340;&#24037;&#20316;&#21333;&#20803;&#12290;
				</p><p>
						&#20851;&#20110;XML&#34920;&#31034;&#33021;&#21147;&#30340;&#26356;&#22810;&#20449;&#24687;&#21487;&#20197;&#22312;<a href="#xml" title="&#31532;&nbsp;18&nbsp;&#31456;&nbsp;XML&#26144;&#23556;">&#31532;&nbsp;18&nbsp;&#31456; <i>XML&#26144;&#23556;</i></a>&#20013;&#25214;&#21040;&#12290;
				</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistent-classes-tuplizers"></a>4.5.&nbsp;&#20803;&#32452;&#29255;&#26029;&#26144;&#23556;(Tuplizers)</h2></div></div><div></div></div><p>
            <tt class="literal">org.hibernate.tuple.Tuplizer</tt>&#65292;&#20197;&#21450;&#20854;&#23376;&#25509;&#21475;&#65292;&#36127;&#36131;&#26681;&#25454;&#32473;&#23450;&#30340;<tt class="literal">org.hibernate.EntityMode</tt>&#65292;&#26469;&#22797;&#29616;&#29255;&#26029;&#25968;&#25454;&#12290;&#22914;&#26524;&#32473;&#23450;&#30340;&#29255;&#26029;&#25968;&#25454;&#34987;&#35748;&#20026;&#20854;&#26159;&#19968;&#31181;&#25968;&#25454;&#32467;&#26500;&#65292;"tuplizer"&#23601;&#26159;&#19968;&#20010;&#30693;&#36947;&#22914;&#20309;&#21019;&#24314;&#36825;&#26679;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#20197;&#21450;&#22914;&#20309;&#32473;&#36825;&#20010;&#25968;&#25454;&#32467;&#26500;&#36171;&#20540;&#30340;&#19996;&#35199;&#12290;&#27604;&#22914;&#35828;&#65292;&#23545;&#20110;POJO&#36825;&#31181;Entity Mode&#65292;&#23545;&#24212;&#30340;tuplizer&#30693;&#36947;&#36890;&#36807;&#20854;&#26500;&#36896;&#26041;&#27861;&#26469;&#21019;&#24314;&#19968;&#20010;POJO&#65292;&#20877;&#36890;&#36807;&#20854;&#23646;&#24615;&#35775;&#38382;&#22120;&#26469;&#35775;&#38382;POJO&#23646;&#24615;&#12290;&#26377;&#20004;&#22823;&#31867;&#39640;&#23618;Tuplizer&#65292;&#20998;&#21035;&#26159;<tt class="literal">org.hibernate.tuple.EntityTuplizer</tt> &#21644;<tt class="literal">org.hibernate.tuple.ComponentTuplizer</tt>&#25509;&#21475;&#12290;<tt class="literal">EntityTuplizer</tt>&#36127;&#36131;&#31649;&#29702;&#19978;&#38754;&#25552;&#21040;&#30340;&#23454;&#20307;&#30340;&#22865;&#32422;&#65292;&#32780;<tt class="literal">ComponentTuplizer</tt>&#21017;&#26159;&#38024;&#23545;&#32452;&#20214;&#30340;&#12290;
        </p><p>
            &#29992;&#25143;&#20063;&#21487;&#20197;&#25554;&#20837;&#20854;&#33258;&#23450;&#20041;&#30340;tuplizer&#12290;&#25110;&#35768;&#24744;&#38656;&#35201;&#19968;&#31181;&#19981;&#21516;&#20110;dynamic-map entity-mode&#20013;&#20351;&#29992;&#30340;<tt class="literal">java.util.HashMap</tt>&#30340;<tt class="literal">java.util.Map</tt>&#23454;&#29616;&#65307;&#25110;&#35768;&#24744;&#38656;&#35201;&#19982;&#40664;&#35748;&#31574;&#30053;&#19981;&#21516;&#30340;&#20195;&#29702;&#29983;&#25104;&#31574;&#30053;(proxy generation strategy)&#12290;&#36890;&#36807;&#33258;&#23450;&#20041;tuplizer&#23454;&#29616;&#65292;&#36825;&#20004;&#20010;&#30446;&#26631;&#24744;&#37117;&#21487;&#20197;&#36798;&#21040;&#12290;Tuplizer&#23450;&#20041;&#34987;&#38468;&#21152;&#21040;&#23427;&#20204;&#26399;&#26395;&#31649;&#29702;&#30340;entity&#25110;&#32773;component&#26144;&#23556;&#20013;&#12290;&#22238;&#21040;&#25105;&#20204;&#30340;customer entity&#20363;&#23376;&#65306;
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
    &lt;class entity-name="Customer"&gt;
        &lt;!--
            Override the dynamic-map entity-mode
            tuplizer for the customer entity
        --&gt;
        &lt;tuplizer entity-mode="dynamic-map"
                class="CustomMapTuplizerImpl"/&gt;

        &lt;id name="id" type="long" column="ID"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;

        &lt;!-- other properties --&gt;
        ...
    &lt;/class&gt;
&lt;/hibernate-mapping&gt;


public class CustomMapTuplizerImpl
        extends org.hibernate.tuple.DynamicMapEntityTuplizer {
    // override the buildInstantiator() method to plug in our custom map...
    protected final Instantiator buildInstantiator(
            org.hibernate.mapping.PersistentClass mappingInfo) {
        return new CustomMapInstantiator( mappingInfo );
    }

    private static final class CustomMapInstantiator
            extends org.hibernate.tuple.DynamicMapInstantitor {
        // override the generateMap() method to return our custom map...
	    protected final Map generateMap() {
		    return new CustomMap();
	    }
    }
}</pre></div><p>
    		TODO&#65306;property&#21644;proxy&#21253;&#37324;&#30340;&#29992;&#25143;&#25193;&#23637;&#26694;&#26550;&#25991;&#26723;&#12290;
    </p></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="mapping"></a>&#31532;&nbsp;5&nbsp;&#31456;&nbsp;&#23545;&#35937;/&#20851;&#31995;&#25968;&#25454;&#24211;&#26144;&#23556;&#22522;&#30784;(Basic O/R Mapping)</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-declaration"></a>5.1.&nbsp;&#26144;&#23556;&#23450;&#20041;&#65288;Mapping declaration&#65289;</h2></div></div><div></div></div><p>
            &#23545;&#35937;&#21644;&#20851;&#31995;&#25968;&#25454;&#24211;&#20043;&#38388;&#30340;&#26144;&#23556;&#36890;&#24120;&#26159;&#29992;&#19968;&#20010;XML&#25991;&#26723;(XML document)&#26469;&#23450;&#20041;&#30340;&#12290;&#36825;&#20010;&#26144;&#23556;&#25991;&#26723;&#34987;&#35774;&#35745;&#20026;&#26131;&#35835;&#30340;&#65292;
            &#24182;&#19988;&#21487;&#20197;&#25163;&#24037;&#20462;&#25913;&#12290;&#26144;&#23556;&#35821;&#35328;&#26159;&#20197;Java&#20026;&#20013;&#24515;&#65292;&#36825;&#24847;&#21619;&#30528;&#26144;&#23556;&#25991;&#26723;&#26159;&#25353;&#29031;&#25345;&#20037;&#21270;&#31867;&#30340;&#23450;&#20041;&#26469;&#21019;&#24314;&#30340;&#65292;
            &#32780;&#38750;&#34920;&#30340;&#23450;&#20041;&#12290;
        </p><p>
            &#35831;&#27880;&#24847;&#65292;&#34429;&#28982;&#24456;&#22810;Hibernate&#29992;&#25143;&#36873;&#25321;&#25163;&#20889;XML&#26144;&#23556;&#25991;&#26723;&#65292;&#20294;&#20063;&#26377;&#19968;&#20123;&#24037;&#20855;&#21487;&#20197;&#29992;&#26469;&#29983;&#25104;&#26144;&#23556;&#25991;&#26723;&#65292;
            &#21253;&#25324;XDoclet,Middlegen&#21644;AndroMDA&#12290;
        </p><p>
            &#35753;&#25105;&#20204;&#20174;&#19968;&#20010;&#26144;&#23556;&#30340;&#20363;&#23376;&#24320;&#22987;&#65306;
        </p><a name="mapping-declaration-ex1"></a><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
      "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;

        &lt;class name="Cat" 
            table="cats"
            discriminator-value="C"&gt;
                
                &lt;id name="id"&gt;
                        &lt;generator class="native"/&gt;
                &lt;/id&gt;

                &lt;discriminator column="subclass" 
                     type="character"/&gt;

                &lt;property name="weight"/&gt;

                &lt;property name="birthdate"
                    type="date" 
                    not-null="true" 
                    update="false"/&gt;

                &lt;property name="color"
                    type="eg.types.ColorUserType"
                    not-null="true"
                    update="false"/&gt;

                &lt;property name="sex"
                    not-null="true" 
                    update="false"/&gt;

                &lt;property name="litterId"
                    column="litterId"
                    update="false"/&gt;

                &lt;many-to-one name="mother"
                    column="mother_id"
                    update="false"/&gt;

                &lt;set name="kittens"
                    inverse="true"
                    order-by="litter_id"&gt;
                        &lt;key column="mother_id"/&gt;
                        &lt;one-to-many class="Cat"/&gt;
                &lt;/set&gt;

                &lt;subclass name="DomesticCat"
                    discriminator-value="D"&gt;

                        &lt;property name="name" 
                            type="string"/&gt;

                &lt;/subclass&gt;

        &lt;/class&gt;

        &lt;class name="Dog"&gt;
                &lt;!-- mapping for Dog could go here --&gt;
        &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
             &#25105;&#20204;&#29616;&#22312;&#24320;&#22987;&#35752;&#35770;&#26144;&#23556;&#25991;&#26723;&#30340;&#20869;&#23481;&#12290;&#25105;&#20204;&#21482;&#25551;&#36848;Hibernate&#22312;&#36816;&#34892;&#26102;&#29992;&#21040;&#30340;&#25991;&#26723;&#20803;&#32032;&#21644;&#23646;&#24615;&#12290;
             &#26144;&#23556;&#25991;&#26723;&#36824;&#21253;&#25324;&#19968;&#20123;&#39069;&#22806;&#30340;&#21487;&#36873;&#23646;&#24615;&#21644;&#20803;&#32032;&#65292;&#23427;&#20204;&#22312;&#20351;&#29992;schema&#23548;&#20986;&#24037;&#20855;&#30340;&#26102;&#20505;&#20250;&#24433;&#21709;&#23548;&#20986;&#30340;&#25968;&#25454;&#24211;schema&#32467;&#26524;&#12290;
             &#65288;&#27604;&#22914;&#65292;<tt class="literal"> not-null</tt> &#23646;&#24615;&#12290;&#65289;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-doctype"></a>5.1.1.&nbsp;Doctype</h3></div></div><div></div></div><p>
                &#25152;&#26377;&#30340;XML&#26144;&#23556;&#37117;&#38656;&#35201;&#23450;&#20041;&#22914;&#19978;&#25152;&#31034;&#30340;doctype&#12290;DTD&#21487;&#20197;&#20174;&#19978;&#36848;URL&#20013;&#33719;&#21462;&#65292;
                &#20063;&#21487;&#20197;&#20174;<tt class="literal">hibernate-x.x.x/src/net/sf/hibernate</tt>&#30446;&#24405;&#20013;&#12289;
                &#25110;<tt class="literal">hibernate.jar</tt>&#25991;&#20214;&#20013;&#25214;&#21040;&#12290;Hibernate&#24635;&#26159;&#20250;&#39318;&#20808;&#22312;&#23427;&#30340;classptah&#20013;&#25628;&#32034;DTD&#25991;&#20214;&#12290;
                &#22914;&#26524;&#20320;&#21457;&#29616;&#23427;&#26159;&#36890;&#36807;&#36830;&#25509;Internet&#26597;&#25214;DTD&#25991;&#20214;&#65292;&#23601;&#23545;&#29031;&#20320;&#30340;classpath&#30446;&#24405;&#26816;&#26597;XML&#25991;&#20214;&#37324;&#30340;DTD&#22768;&#26126;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-mapping"></a>5.1.2.&nbsp;hibernate-mapping</h3></div></div><div></div></div><p>
                &#36825;&#20010;&#20803;&#32032;&#21253;&#25324;&#19968;&#20123;&#21487;&#36873;&#30340;&#23646;&#24615;&#12290;<tt class="literal">schema</tt>&#21644;<tt class="literal">catalog</tt>&#23646;&#24615;&#65292;
                &#25351;&#26126;&#20102;&#36825;&#20010;&#26144;&#23556;&#25152;&#36830;&#25509;&#65288;refer&#65289;&#30340;&#34920;&#25152;&#22312;&#30340;schema&#21644;/&#25110;catalog&#21517;&#31216;&#12290;
                &#20551;&#33509;&#25351;&#23450;&#20102;&#36825;&#20010;&#23646;&#24615;&#65292;&#34920;&#21517;&#20250;&#21152;&#19978;&#25152;&#25351;&#23450;&#30340;schema&#21644;catalog&#30340;&#21517;&#23383;&#25193;&#23637;&#20026;&#20840;&#38480;&#23450;&#21517;&#12290;&#20551;&#33509;&#27809;&#26377;&#25351;&#23450;&#65292;&#34920;&#21517;&#23601;&#19981;&#20250;&#20351;&#29992;&#20840;&#38480;&#23450;&#21517;&#12290;
                <tt class="literal">default-cascade</tt>&#25351;&#23450;&#20102;&#26410;&#26126;&#30830;&#27880;&#26126;<tt class="literal">cascade</tt>&#23646;&#24615;&#30340;Java&#23646;&#24615;&#21644;
                &#38598;&#21512;&#31867;Hibernate&#20250;&#37319;&#21462;&#20160;&#20040;&#26679;&#30340;&#40664;&#35748;&#32423;&#32852;&#39118;&#26684;&#12290;<tt class="literal">auto-import</tt>&#23646;&#24615;&#40664;&#35748;&#35753;&#25105;&#20204;&#22312;&#26597;&#35810;&#35821;&#35328;&#20013;&#21487;&#20197;&#20351;&#29992;
                &#38750;&#20840;&#38480;&#23450;&#21517;&#30340;&#31867;&#21517;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;hibernate-mapping
         schema="schemaName"                          <span class="co">(1)</span>
         catalog="catalogName"                        <span class="co">(2)</span>
         default-cascade="cascade_style"              <span class="co">(3)</span>
         default-access="field|property|ClassName"    <span class="co">(4)</span>
         default-lazy="true|false"                    <span class="co">(5)</span>
         auto-import="true|false"                     <span class="co">(6)</span>
         package="package.name"                       <span class="co">(7)</span>
 /&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                             <tt class="literal">schema</tt> (&#21487;&#36873;): &#25968;&#25454;&#24211;schema&#30340;&#21517;&#31216;&#12290;
                         </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                             <tt class="literal">catalog</tt> (&#21487;&#36873;): &#25968;&#25454;&#24211;catalog&#30340;&#21517;&#31216;&#12290;
                         </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                             <tt class="literal">default-cascade</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">none</tt>): 
                             &#40664;&#35748;&#30340;&#32423;&#32852;&#39118;&#26684;&#12290;
                         </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                             <tt class="literal">default-access</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">property</tt>):
                             Hibernate&#29992;&#26469;&#35775;&#38382;&#25152;&#26377;&#23646;&#24615;&#30340;&#31574;&#30053;&#12290;&#21487;&#20197;&#36890;&#36807;&#23454;&#29616;<tt class="literal">PropertyAccessor</tt>&#25509;&#21475;
                             &#33258;&#23450;&#20041;&#12290;
                         </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                         		 <tt class="literal">default-lazy</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">true</tt>):
                             &#25351;&#23450;&#20102;&#26410;&#26126;&#30830;&#27880;&#26126;<tt class="literal">lazy</tt>&#23646;&#24615;&#30340;Java&#23646;&#24615;&#21644;&#38598;&#21512;&#31867;&#65292;
                             Hibernate&#20250;&#37319;&#21462;&#20160;&#20040;&#26679;&#30340;&#40664;&#35748;&#21152;&#36733;&#39118;&#26684;&#12290;
                         </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                         		 <tt class="literal">auto-import</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">true</tt>):
                             &#25351;&#23450;&#25105;&#20204;&#26159;&#21542;&#21487;&#20197;&#22312;&#26597;&#35810;&#35821;&#35328;&#20013;&#20351;&#29992;&#38750;&#20840;&#38480;&#23450;&#30340;&#31867;&#21517;&#65288;&#20165;&#38480;&#20110;&#26412;&#26144;&#23556;&#25991;&#20214;&#20013;&#30340;&#31867;&#65289;&#12290;
                         </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                             <tt class="literal">package</tt> (&#21487;&#36873;): &#25351;&#23450;&#19968;&#20010;&#21253;&#21069;&#32512;&#65292;&#22914;&#26524;&#22312;&#26144;&#23556;&#25991;&#26723;&#20013;&#27809;&#26377;&#25351;&#23450;&#20840;&#38480;&#23450;&#30340;&#31867;&#21517;&#65292;
                             &#23601;&#20351;&#29992;&#36825;&#20010;&#20316;&#20026;&#21253;&#21517;&#12290;
                         </p></td></tr></table></div></div><p>
                 &#20551;&#33509;&#20320;&#26377;&#20004;&#20010;&#25345;&#20037;&#21270;&#31867;&#65292;&#23427;&#20204;&#30340;&#38750;&#20840;&#38480;&#23450;&#21517;&#26159;&#19968;&#26679;&#30340;&#65288;&#23601;&#26159;&#20004;&#20010;&#31867;&#30340;&#21517;&#23383;&#19968;&#26679;&#65292;&#25152;&#22312;&#30340;&#21253;&#19981;&#19968;&#26679;--&#35793;&#32773;&#27880;&#65289;&#65292;
                 &#20320;&#24212;&#35813;&#35774;&#32622;<tt class="literal">auto-import="false"</tt>&#12290;&#22914;&#26524;&#20320;&#25226;&#19968;&#20010;&#8220;import&#36807;&#8221;&#30340;&#21517;&#23383;&#21516;&#26102;&#23545;&#24212;&#20004;&#20010;&#31867;&#65292;
                  Hibernate&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;
             </p><p>
                 &#27880;&#24847;<tt class="literal">hibernate-mapping</tt> &#20803;&#32032;&#20801;&#35768;&#20320;&#23884;&#22871;&#22810;&#20010;&#22914;&#19978;&#25152;&#31034;&#30340;
                 <tt class="literal">&lt;class&gt;</tt>&#26144;&#23556;&#12290;&#20294;&#26159;&#26368;&#22909;&#30340;&#20570;&#27861;&#65288;&#20063;&#35768;&#19968;&#20123;&#24037;&#20855;&#38656;&#35201;&#30340;&#65289;&#26159;&#19968;&#20010;
                 &#25345;&#20037;&#21270;&#31867;&#65288;&#25110;&#19968;&#20010;&#31867;&#30340;&#32487;&#25215;&#23618;&#27425;&#65289;&#23545;&#24212;&#19968;&#20010;&#26144;&#23556;&#25991;&#20214;&#65292;&#24182;&#20197;&#25345;&#20037;&#21270;&#30340;&#36229;&#31867;&#21517;&#31216;&#21629;&#21517;&#65292;&#20363;&#22914;&#65306;
                 <tt class="literal">Cat.hbm.xml</tt>&#65292;
                 <tt class="literal">Dog.hbm.xml</tt>&#65292;&#25110;&#32773;&#22914;&#26524;&#20351;&#29992;&#32487;&#25215;&#65292;<tt class="literal">Animal.hbm.xml</tt>&#12290;
             </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-class"></a>5.1.3.&nbsp;class</h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">class</tt>&#20803;&#32032;&#26469;&#23450;&#20041;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#65306;
            </p><div class="programlistingco"><pre class="programlisting">&lt;class
        name="ClassName"                              <span class="co">(1)</span>
        table="tableName"                             <span class="co">(2)</span>
        discriminator-value="discriminator_value"     <span class="co">(3)</span>
        mutable="true|false"                          <span class="co">(4)</span>
        schema="owner"                                <span class="co">(5)</span>
        catalog="catalog"                             <span class="co">(6)</span>
        proxy="ProxyInterface"                        <span class="co">(7)</span>
        dynamic-update="true|false"                   <span class="co">(8)</span>
        dynamic-insert="true|false"                   <span class="co">(9)</span>
        select-before-update="true|false"             <span class="co">(10)</span>
        polymorphism="implicit|explicit"              <span class="co">(11)</span>
        where="arbitrary sql where condition"         <span class="co">(12)</span>
        persister="PersisterClass"                    <span class="co">(13)</span>
        batch-size="N"                                <span class="co">(14)</span>
        optimistic-lock="none|version|dirty|all"      <span class="co">(15)</span>
        lazy="true|false"                             <span class="co">(16)</span>
        entity-name="EntityName"                      <span class="co">(17)</span>
        check="arbitrary sql check condition"         <span class="co">(18)</span>
        rowid="rowid"                                 <span class="co">(19)</span>
        subselect="SQL expression"                    <span class="co">(20)</span>
        abstract="true|false"                         <span class="co">(21)</span>
        node="element-name"
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt> (&#21487;&#36873;): &#25345;&#20037;&#21270;&#31867;&#65288;&#25110;&#32773;&#25509;&#21475;&#65289;&#30340;Java&#20840;&#38480;&#23450;&#21517;&#12290;
                            &#22914;&#26524;&#36825;&#20010;&#23646;&#24615;&#19981;&#23384;&#22312;&#65292;Hibernate&#23558;&#20551;&#23450;&#36825;&#26159;&#19968;&#20010;&#38750;POJO&#30340;&#23454;&#20307;&#26144;&#23556;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159;&#31867;&#30340;&#38750;&#20840;&#38480;&#23450;&#21517;):  &#23545;&#24212;&#30340;&#25968;&#25454;&#24211;&#34920;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">discriminator-value</tt> (&#21487;&#36873; - &#40664;&#35748;&#21644;&#31867;&#21517;&#19968;&#26679;): 
                            &#19968;&#20010;&#29992;&#20110;&#21306;&#20998;&#19981;&#21516;&#30340;&#23376;&#31867;&#30340;&#20540;&#65292;&#22312;&#22810;&#24577;&#34892;&#20026;&#26102;&#20351;&#29992;&#12290;&#23427;&#21487;&#20197;&#25509;&#21463;&#30340;&#20540;&#21253;&#25324;
                            <tt class="literal">null</tt> &#21644; <tt class="literal">not null</tt>&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">mutable</tt> (&#21487;&#36873;&#65292;&#40664;&#35748;&#20540;&#20026;<tt class="literal">true</tt>):
                            &#34920;&#26126;&#35813;&#31867;&#30340;&#23454;&#20363;&#26159;&#21487;&#21464;&#30340;&#25110;&#32773;&#19981;&#21487;&#21464;&#30340;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema</tt> (&#21487;&#36873;):
                            &#35206;&#30422;&#22312;&#26681;<tt class="literal">&lt;hibernate-mapping&gt;</tt>&#20803;&#32032;&#20013;&#25351;&#23450;&#30340;schema&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">catalog</tt> (&#21487;&#36873;):
                            &#35206;&#30422;&#22312;&#26681;<tt class="literal">&lt;hibernate-mapping&gt;</tt>&#20803;&#32032;&#20013;&#25351;&#23450;&#30340;catalog&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">proxy</tt> (&#21487;&#36873;): &#25351;&#23450;&#19968;&#20010;&#25509;&#21475;&#65292;&#22312;&#24310;&#36831;&#35013;&#36733;&#26102;&#20316;&#20026;&#20195;&#29702;&#20351;&#29992;&#12290;
                            &#20320;&#21487;&#20197;&#22312;&#36825;&#37324;&#20351;&#29992;&#35813;&#31867;&#33258;&#24049;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">dynamic-update</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026; <tt class="literal">false</tt>): 
                            &#25351;&#23450;&#29992;&#20110;<tt class="literal">UPDATE</tt> &#30340;SQL&#23558;&#20250;&#22312;&#36816;&#34892;&#26102;&#21160;&#24577;&#29983;&#25104;&#65292;&#24182;&#19988;&#21482;&#26356;&#26032;&#37027;&#20123;&#25913;&#21464;&#36807;&#30340;&#23383;&#27573;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">dynamic-insert</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026; <tt class="literal">false</tt>): 
                            &#25351;&#23450;&#29992;&#20110;<tt class="literal">INSERT</tt>&#30340; SQL &#23558;&#20250;&#22312;&#36816;&#34892;&#26102;&#21160;&#24577;&#29983;&#25104;&#65292;&#24182;&#19988;&#21482;&#21253;&#21547;&#37027;&#20123;&#38750;&#31354;&#20540;&#23383;&#27573;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">select-before-update</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026; <tt class="literal">false</tt>): 
                            &#25351;&#23450;Hibernate&#38500;&#38750;&#30830;&#23450;&#23545;&#35937;&#30495;&#27491;&#34987;&#20462;&#25913;&#20102;&#65288;&#22914;&#26524;&#35813;&#20540;&#20026;true&#65293;&#35793;&#27880;&#65289;&#65292;&#21542;&#21017;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#25191;&#34892;SQL
                             <tt class="literal">UPDATE</tt>&#25805;&#20316;&#12290;&#22312;&#29305;&#23450;&#22330;&#21512;&#65288;&#23454;&#38469;&#19978;&#65292;&#23427;&#21482;&#22312;&#19968;&#20010;&#30636;&#26102;&#23545;&#35937;&#65288;transient object&#65289;&#20851;&#32852;&#21040;&#19968;&#20010;
                             &#26032;&#30340;session&#20013;&#26102;&#25191;&#34892;&#30340;update()&#20013;&#29983;&#25928;&#65289;&#65292;&#36825;&#35828;&#26126;Hibernate&#20250;&#22312;<tt class="literal">UPDATE</tt>
                             &#20043;&#21069;&#25191;&#34892;&#19968;&#27425;&#39069;&#22806;&#30340;SQL <tt class="literal">SELECT</tt>&#25805;&#20316;&#65292;&#26469;&#20915;&#23450;&#26159;&#21542;&#24212;&#35813;&#25191;&#34892;
                             <tt class="literal">UPDATE</tt>&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">polymorphism&#65288;&#22810;&#24577;&#65289;</tt> (&#21487;&#36873;, &#40664;&#35748;&#20540;&#20026; <tt class="literal">implicit (&#38544;&#24335;)
                            </tt>): &#30028;&#23450;&#26159;&#38544;&#24335;&#36824;&#26159;&#26174;&#24335;&#30340;&#20351;&#29992;&#22810;&#24577;&#26597;&#35810;&#65288;&#36825;&#21482;&#22312;Hibernate&#30340;&#20855;&#20307;&#34920;&#32487;&#25215;&#31574;&#30053;&#20013;&#29992;&#21040;&#65293;&#35793;&#27880;&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(12)</td><td valign="top" align="left"><p>
                            <tt class="literal">where</tt> (&#21487;&#36873;) &#25351;&#23450;&#19968;&#20010;&#38468;&#21152;&#30340;SQL<tt class="literal">WHERE</tt> &#26465;&#20214;&#65292;
                            &#22312;&#25235;&#21462;&#36825;&#20010;&#31867;&#30340;&#23545;&#35937;&#26102;&#20250;&#19968;&#30452;&#22686;&#21152;&#36825;&#20010;&#26465;&#20214;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(13)</td><td valign="top" align="left"><p>
                            <tt class="literal">persister</tt> (&#21487;&#36873;): &#25351;&#23450;&#19968;&#20010;&#23450;&#21046;&#30340;<tt class="literal">ClassPersister</tt>&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(14)</td><td valign="top" align="left"><p>
                            <tt class="literal">batch-size</tt> (&#21487;&#36873;,&#40664;&#35748;&#26159;<tt class="literal">1</tt>) &#25351;&#23450;&#19968;&#20010;&#29992;&#20110;
                            &#26681;&#25454;&#26631;&#35782;&#31526;&#65288;identifier&#65289;&#25235;&#21462;&#23454;&#20363;&#26102;&#20351;&#29992;&#30340;"batch size"&#65288;&#25209;&#27425;&#25235;&#21462;&#25968;&#37327;&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(15)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock&#65288;&#20048;&#35266;&#38145;&#23450;&#65289;</tt> 
                            (&#21487;&#36873;&#65292;&#40664;&#35748;&#26159;<tt class="literal">version</tt>): &#20915;&#23450;&#20048;&#35266;&#38145;&#23450;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(16)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873;): &#36890;&#36807;&#35774;&#32622;<tt class="literal">lazy="false"</tt>&#65292;
                            &#25152;&#26377;&#30340;&#24310;&#36831;&#21152;&#36733;&#65288;Lazy fetching&#65289;&#21151;&#33021;&#23558;&#34987;&#20840;&#37096;&#31105;&#29992;&#65288;disabled&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(17)</td><td valign="top" align="left"><p>
                            <tt class="literal">entity-name</tt> (&#21487;&#36873;&#65292;&#40664;&#35748;&#20026;&#31867;&#21517;): Hibernate3&#20801;&#35768;&#19968;&#20010;&#31867;&#36827;&#34892;&#22810;&#27425;&#26144;&#23556;&#65288;
                            &#21069;&#25552;&#26159;&#26144;&#23556;&#21040;&#19981;&#21516;&#30340;&#34920;&#65289;&#65292;&#24182;&#19988;&#20801;&#35768;&#20351;&#29992;Maps&#25110;XML&#20195;&#26367;Java&#23618;&#27425;&#30340;&#23454;&#20307;&#26144;&#23556;
                            &#65288;&#20063;&#23601;&#26159;&#23454;&#29616;&#21160;&#24577;&#39046;&#22495;&#27169;&#22411;&#65292;&#19981;&#29992;&#20889;&#25345;&#20037;&#21270;&#31867;&#65293;&#35793;&#27880;&#65289;&#12290;
                            &#26356;&#22810;&#20449;&#24687;&#35831;&#30475;<a href="#persistent-classes-dynamicmodels" title="4.4.&nbsp;&#21160;&#24577;&#27169;&#22411;(Dynamic models)">&#31532;&nbsp;4.4&nbsp;&#33410; &#8220;&#21160;&#24577;&#27169;&#22411;(Dynamic models)&#8221;</a> and <a href="#xml" title="&#31532;&nbsp;18&nbsp;&#31456;&nbsp;XML&#26144;&#23556;">&#31532;&nbsp;18&nbsp;&#31456; <i>XML&#26144;&#23556;</i></a>&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(18)</td><td valign="top" align="left"><p>
                            <tt class="literal">check</tt> (&#21487;&#36873;): &#36825;&#26159;&#19968;&#20010;SQL&#34920;&#36798;&#24335;&#65292;
                            &#29992;&#20110;&#20026;&#33258;&#21160;&#29983;&#25104;&#30340;schema&#28155;&#21152;&#22810;&#34892;&#65288;multi-row&#65289;&#32422;&#26463;<span class="emphasis"><em>&#26816;&#26597;</em></span>&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(19)</td><td valign="top" align="left"><p>
                            <tt class="literal">rowid</tt> (&#21487;&#36873;): Hibernate&#21487;&#20197;&#20351;&#29992;&#25968;&#25454;&#24211;&#25903;&#25345;&#30340;&#25152;&#35859;&#30340;ROWIDs&#65292;&#20363;&#22914;&#65306;
                            Oracle&#25968;&#25454;&#24211;&#65292;&#22914;&#26524;&#20320;&#35774;&#32622;&#36825;&#20010;&#21487;&#36873;&#30340;<tt class="literal">rowid</tt>&#65292;
                            Hibernate&#21487;&#20197;&#20351;&#29992;&#39069;&#22806;&#30340;&#23383;&#27573;<tt class="literal">rowid</tt>&#23454;&#29616;&#24555;&#36895;&#26356;&#26032;&#12290;ROWID&#26159;&#36825;&#20010;&#21151;&#33021;&#23454;&#29616;&#30340;&#37325;&#28857;&#65292;
                            &#23427;&#20195;&#34920;&#20102;&#19968;&#20010;&#23384;&#20648;&#20803;&#32452;&#65288;tuple&#65289;&#30340;&#29289;&#29702;&#20301;&#32622;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(20)</td><td valign="top" align="left"><p>
                            <tt class="literal">subselect</tt> (&#21487;&#36873;): &#23427;&#23558;&#19968;&#20010;&#19981;&#21487;&#21464;&#65288;immutable&#65289;&#24182;&#19988;&#21482;&#35835;&#30340;&#23454;&#20307;&#26144;&#23556;&#21040;&#19968;&#20010;&#25968;&#25454;&#24211;&#30340;
                            &#23376;&#26597;&#35810;&#20013;&#12290;&#24403;&#20320;&#24819;&#29992;&#35270;&#22270;&#20195;&#26367;&#19968;&#24352;&#22522;&#26412;&#34920;&#30340;&#26102;&#20505;&#65292;&#36825;&#26159;&#26377;&#29992;&#30340;&#65292;&#20294;&#26368;&#22909;&#19981;&#35201;&#36825;&#26679;&#20570;&#12290;&#26356;&#22810;&#30340;&#20171;&#32461;&#35831;&#30475;&#19979;&#38754;&#20869;&#23481;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(21)</td><td valign="top" align="left"><p>
                            <tt class="literal">abstract</tt> (&#21487;&#36873;): &#29992;&#20110;&#22312;<tt class="literal">&lt;union-subclass&gt;</tt>&#30340;&#32487;&#25215;&#32467;&#26500;
                            &#65288;hierarchies&#65289;&#20013;&#26631;&#35782;&#25277;&#35937;&#36229;&#31867;&#12290;
                        </p></td></tr></table></div></div><p>
                &#33509;&#25351;&#26126;&#30340;&#25345;&#20037;&#21270;&#31867;&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;&#25509;&#21475;&#65292;&#36825;&#20063;&#26159;&#23436;&#20840;&#21487;&#20197;&#25509;&#21463;&#30340;&#12290;
                &#20043;&#21518;&#20320;&#21487;&#20197;&#29992;&#20803;&#32032;<tt class="literal">&lt;subclass&gt;</tt>&#26469;&#25351;&#23450;&#35813;&#25509;&#21475;&#30340;&#23454;&#38469;&#23454;&#29616;&#31867;&#12290;
                &#20320;&#21487;&#20197;&#25345;&#20037;&#21270;&#20219;&#20309;<span class="emphasis"><em>static</em></span>&#65288;&#38745;&#24577;&#30340;&#65289;&#20869;&#37096;&#31867;&#12290;
                &#20320;&#24212;&#35813;&#20351;&#29992;&#26631;&#20934;&#30340;&#31867;&#21517;&#26684;&#24335;&#26469;&#25351;&#23450;&#31867;&#21517;&#65292;<tt class="literal">&#27604;&#22914;&#65306;Foo$Bar</tt>&#12290;
            </p><p>
                &#19981;&#21487;&#21464;&#31867;&#65292;<tt class="literal">mutable="false"</tt>&#19981;&#21487;&#20197;&#34987;&#24212;&#29992;&#31243;&#24207;&#26356;&#26032;&#25110;&#32773;&#21024;&#38500;&#12290;
                &#36825;&#21487;&#20197;&#35753;Hibernate&#20570;&#19968;&#20123;&#23567;&#23567;&#30340;&#24615;&#33021;&#20248;&#21270;&#12290;
            </p><p>
                &#21487;&#36873;&#30340;<tt class="literal">proxy</tt>&#23646;&#24615;&#20801;&#35768;&#24310;&#36831;&#21152;&#36733;&#31867;&#30340;&#25345;&#20037;&#21270;&#23454;&#20363;&#12290;
                Hibernate&#24320;&#22987;&#20250;&#36820;&#22238;&#23454;&#29616;&#20102;&#36825;&#20010;&#21629;&#21517;&#25509;&#21475;&#30340;CGLIB&#20195;&#29702;&#12290;&#24403;&#20195;&#29702;&#30340;&#26576;&#20010;&#26041;&#27861;&#34987;&#23454;&#38469;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;
                &#30495;&#23454;&#30340;&#25345;&#20037;&#21270;&#23545;&#35937;&#25165;&#20250;&#34987;&#35013;&#36733;&#12290;&#21442;&#35265;&#19979;&#38754;&#30340;&#8220;&#29992;&#20110;&#24310;&#36831;&#35013;&#36733;&#30340;&#20195;&#29702;&#8221;&#12290;
            </p><p><span class="emphasis"><em>Implicit</em></span> (&#38544;&#24335;)&#30340;&#22810;&#24577;&#26159;&#25351;&#65292;&#22914;&#26524;&#26597;&#35810;&#26102;&#32473;&#20986;&#30340;&#26159;&#20219;&#20309;&#36229;&#31867;&#12289;&#35813;&#31867;&#23454;&#29616;&#30340;&#25509;&#21475;&#25110;&#32773;&#35813;&#31867;&#30340;
            &#21517;&#23383;&#65292;&#37117;&#20250;&#36820;&#22238;&#36825;&#20010;&#31867;&#30340;&#23454;&#20363;&#65307;&#22914;&#26524;&#26597;&#35810;&#20013;&#32473;&#20986;&#30340;&#26159;&#23376;&#31867;&#30340;&#21517;&#23383;&#65292;&#21017;&#20250;&#36820;&#22238;&#23376;&#31867;&#30340;&#23454;&#20363;&#12290;
                <span class="emphasis"><em>Explicit</em></span> &#65288;&#26174;&#24335;&#65289;&#30340;&#22810;&#24577;&#26159;&#25351;&#65292;&#21482;&#26377;&#22312;&#26597;&#35810;&#26102;&#32473;&#20986;&#26126;&#30830;&#30340;&#35813;&#31867;&#21517;&#23383;&#26102;&#25165;&#20250;&#36820;&#22238;&#36825;&#20010;&#31867;&#30340;&#23454;&#20363;&#65307;
                &#21516;&#26102;&#21482;&#26377;&#22312;&#36825;&#20010;<tt class="literal">&lt;class&gt;</tt>&#30340;&#23450;&#20041;&#20013;&#20316;&#20026;<tt class="literal">&lt;subclass&gt;</tt>
                &#25110;&#32773;<tt class="literal">&lt;joined-subclass&gt;</tt>&#20986;&#29616;&#30340;&#23376;&#31867;&#65292;&#25165;&#20250;&#21487;&#33021;&#36820;&#22238;&#12290;
                &#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#40664;&#35748;&#30340;<tt class="literal">polymorphism="implicit"</tt>&#37117;&#26159;&#21512;&#36866;&#30340;&#12290;
                &#26174;&#24335;&#30340;&#22810;&#24577;&#22312;&#26377;&#20004;&#20010;&#19981;&#21516;&#30340;&#31867;&#26144;&#23556;&#21040;&#21516;&#19968;&#20010;&#34920;&#30340;&#26102;&#20505;&#24456;&#26377;&#29992;&#12290;&#65288;&#20801;&#35768;&#19968;&#20010;&#8220;&#36731;&#22411;&#8221;&#30340;&#31867;&#65292;&#21482;&#21253;&#21547;&#37096;&#20998;&#34920;&#23383;&#27573;&#65289;&#12290;
            </p><p>
                <tt class="literal">persister</tt>&#23646;&#24615;&#21487;&#20197;&#35753;&#20320;&#23450;&#21046;&#36825;&#20010;&#31867;&#20351;&#29992;&#30340;&#25345;&#20037;&#21270;&#31574;&#30053;&#12290;
                &#20320;&#21487;&#20197;&#25351;&#23450;&#20320;&#33258;&#24049;&#23454;&#29616;
                <tt class="literal">org.hibernate.persister.EntityPersister</tt>&#30340;&#23376;&#31867;&#65292;&#20320;&#29978;&#33267;&#21487;&#20197;&#23436;&#20840;&#20174;&#22836;&#24320;&#22987;&#32534;&#20889;&#19968;&#20010;
                <tt class="literal">org.hibernate.persister.ClassPersister</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#65292;
                &#27604;&#22914;&#26159;&#29992;&#20648;&#23384;&#36807;&#31243;&#35843;&#29992;&#12289;&#24207;&#21015;&#21270;&#21040;&#25991;&#20214;&#25110;&#32773;LDAP&#25968;&#25454;&#24211;&#26469;&#23454;&#29616;&#12290;
                &#21442;&#38405;<tt class="literal">org.hibernate.test.CustomPersister</tt>&#65292;&#36825;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;
                &#65288;&#8220;&#25345;&#20037;&#21270;&#8221;&#21040;&#19968;&#20010;<tt class="literal">Hashtable</tt>&#65289;&#12290;
            </p><p>
                &#35831;&#27880;&#24847;<tt class="literal">dynamic-update</tt>&#21644;<tt class="literal">dynamic-insert</tt>&#30340;&#35774;&#32622;&#24182;&#19981;&#20250;&#32487;&#25215;&#21040;&#23376;&#31867;&#65292;
                &#25152;&#20197;&#22312;<tt class="literal">&lt;subclass&gt;</tt>&#25110;&#32773;<tt class="literal">&lt;joined-subclass&gt;</tt>&#20803;&#32032;&#20013;&#21487;&#33021;
                &#38656;&#35201;&#20877;&#27425;&#35774;&#32622;&#12290;&#36825;&#20123;&#35774;&#32622;&#26159;&#21542;&#33021;&#22815;&#25552;&#39640;&#25928;&#29575;&#35201;&#35270;&#24773;&#24418;&#32780;&#23450;&#12290;&#35831;&#29992;&#20320;&#30340;&#26234;&#24935;&#20915;&#23450;&#26159;&#21542;&#20351;&#29992;&#12290;
            </p><p>
                &#20351;&#29992;<tt class="literal">select-before-update</tt>&#36890;&#24120;&#20250;&#38477;&#20302;&#24615;&#33021;&#12290;&#22914;&#26524;&#20320;&#37325;&#26032;&#36830;&#25509;&#19968;&#20010;&#33073;&#31649;&#65288;detache&#65289;&#23545;&#35937;&#23454;&#20363;
                &#21040;&#19968;&#20010;<tt class="literal">Session</tt>&#20013;&#26102;&#65292;&#23427;&#21487;&#20197;&#38450;&#27490;&#25968;&#25454;&#24211;&#19981;&#24517;&#35201;&#30340;&#35302;&#21457;update&#12290;
                &#36825;&#23601;&#24456;&#26377;&#29992;&#20102;&#12290;
            </p><p>
            	&#22914;&#26524;&#20320;&#25171;&#24320;&#20102;<tt class="literal">dynamic-update</tt>&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#20960;&#31181;&#20048;&#35266;&#38145;&#23450;&#30340;&#31574;&#30053;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
            					<tt class="literal">version&#65288;&#29256;&#26412;&#26816;&#26597;&#65289;</tt> &#26816;&#26597;version/timestamp&#23383;&#27573;
            				</p></li><li><p>
            					<tt class="literal">all&#65288;&#20840;&#37096;&#65289;</tt> &#26816;&#26597;&#20840;&#37096;&#23383;&#27573;
            				</p></li><li><p>
            					<tt class="literal">dirty&#65288;&#33039;&#26816;&#26597;&#65289;</tt>&#21482;&#26816;&#23519;&#20462;&#25913;&#36807;&#30340;&#23383;&#27573;
            				</p></li><li><p>
            					<tt class="literal">none&#65288;&#19981;&#26816;&#26597;&#65289;</tt>&#19981;&#20351;&#29992;&#20048;&#35266;&#38145;&#23450;
            				</p></li></ul></div><p>
            	&#25105;&#20204;<span class="emphasis"><em>&#38750;&#24120;</em></span>&#24378;&#28872;&#24314;&#35758;&#20320;&#22312;Hibernate&#20013;&#20351;&#29992;version/timestamp&#23383;&#27573;&#26469;&#36827;&#34892;&#20048;&#35266;&#38145;&#23450;&#12290;
            	&#23545;&#24615;&#33021;&#26469;&#35828;&#65292;&#36825;&#26159;&#26368;&#22909;&#30340;&#36873;&#25321;&#65292;&#24182;&#19988;&#36825;&#20063;&#26159;&#21807;&#19968;&#33021;&#22815;&#22788;&#29702;&#22312;session&#22806;&#36827;&#34892;&#25805;&#20316;&#30340;&#31574;&#30053;&#65288;&#20363;&#22914;&#65306;
            	&#22312;&#20351;&#29992;<tt class="literal">Session.merge()</tt>&#30340;&#26102;&#20505;&#65289;&#12290;
            </p><p>
                &#23545;Hibernate&#26144;&#23556;&#26469;&#35828;&#35270;&#22270;&#21644;&#34920;&#26159;&#27809;&#26377;&#21306;&#21035;&#30340;&#65292;&#36825;&#26159;&#22240;&#20026;&#23427;&#20204;&#22312;&#25968;&#25454;&#23618;&#37117;&#26159;&#36879;&#26126;&#30340;&#65288;
                &#27880;&#24847;&#65306;&#19968;&#20123;&#25968;&#25454;&#24211;&#19981;&#25903;&#25345;&#35270;&#22270;&#23646;&#24615;&#65292;&#29305;&#21035;&#26159;&#26356;&#26032;&#30340;&#26102;&#20505;&#65289;&#12290;&#26377;&#26102;&#20320;&#24819;&#20351;&#29992;&#35270;&#22270;&#65292;&#20294;&#21364;&#19981;&#33021;&#22312;&#25968;&#25454;&#24211;
                &#20013;&#21019;&#24314;&#23427;&#65288;&#20363;&#22914;&#65306;&#22312;&#36951;&#30041;&#30340;schema&#20013;&#65289;&#12290;&#36825;&#26679;&#30340;&#35805;&#65292;&#20320;&#21487;&#20197;&#26144;&#23556;&#19968;&#20010;&#19981;&#21487;&#21464;&#30340;&#65288;immutable&#65289;&#24182;&#19988;&#26159;
                &#21482;&#35835;&#30340;&#23454;&#20307;&#21040;&#19968;&#20010;&#32473;&#23450;&#30340;SQL&#23376;&#26597;&#35810;&#34920;&#36798;&#24335;&#65306;
            </p><pre class="programlisting">&lt;class name="Summary"&gt;
    &lt;subselect&gt;
        select item.name, max(bid.amount), count(*)
        from item
        join bid on bid.item_id = item.id
        group by item.name
    &lt;/subselect&gt;
    &lt;synchronize table="item"/&gt;
    &lt;synchronize table="bid"/&gt;
    &lt;id name="name"/&gt;
    ...
&lt;/class&gt;</pre><p>
                &#23450;&#20041;&#36825;&#20010;&#23454;&#20307;&#29992;&#21040;&#30340;&#34920;&#20026;&#21516;&#27493;&#65288;synchronize&#65289;&#65292;&#30830;&#20445;&#33258;&#21160;&#21047;&#26032;&#65288;auto-flush&#65289;&#27491;&#30830;&#25191;&#34892;&#65292;
                &#24182;&#19988;&#20381;&#36182;&#21407;&#23454;&#20307;&#30340;&#26597;&#35810;&#19981;&#20250;&#36820;&#22238;&#36807;&#26399;&#25968;&#25454;&#12290;<tt class="literal">&lt;subselect&gt;</tt>&#22312;&#23646;&#24615;&#20803;&#32032;
                &#21644;&#19968;&#20010;&#23884;&#22871;&#26144;&#23556;&#20803;&#32032;&#20013;&#37117;&#21487;&#35265;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-id"></a>5.1.4.&nbsp;id</h3></div></div><div></div></div><p>
                &#34987;&#26144;&#23556;&#30340;&#31867;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#23450;&#20041;&#23545;&#24212;&#25968;&#25454;&#24211;&#34920;&#20027;&#38190;&#23383;&#27573;&#12290;&#22823;&#22810;&#25968;&#31867;&#26377;&#19968;&#20010;JavaBeans&#39118;&#26684;&#30340;&#23646;&#24615;&#65292;
                &#20026;&#27599;&#19968;&#20010;&#23454;&#20363;&#21253;&#21547;&#21807;&#19968;&#30340;&#26631;&#35782;&#12290;<tt class="literal">&lt;id&gt;</tt> &#20803;&#32032;&#23450;&#20041;&#20102;&#35813;&#23646;&#24615;&#21040;&#25968;&#25454;&#24211;&#34920;&#20027;&#38190;&#23383;&#27573;&#30340;&#26144;&#23556;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;id
        name="propertyName"                                          <span class="co">(1)</span>
        type="typename"                                              <span class="co">(2)</span>
        column="column_name"                                         <span class="co">(3)</span>
        unsaved-value="null|any|none|undefined|id_value"             <span class="co">(4)</span>
        access="field|property|ClassName"                            <span class="co">(5)</span>
        node="element-name|@attribute-name|element/@attribute|."&gt;

        &lt;generator class="generatorClass"/&gt;
&lt;/id&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt> (&#21487;&#36873;): &#26631;&#35782;&#23646;&#24615;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#21487;&#36873;): &#26631;&#35782;Hibernate&#31867;&#22411;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#23646;&#24615;&#21517;): &#20027;&#38190;&#23383;&#27573;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">unsaved-value</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#19968;&#20010;&#20999;&#21512;&#23454;&#38469;&#65288;sensible&#65289;&#30340;&#20540;): 
                            &#19968;&#20010;&#29305;&#23450;&#30340;&#26631;&#35782;&#23646;&#24615;&#20540;&#65292;&#29992;&#26469;&#26631;&#24535;&#35813;&#23454;&#20363;&#26159;&#21018;&#21018;&#21019;&#24314;&#30340;&#65292;&#23578;&#26410;&#20445;&#23384;&#12290;
                            &#36825;&#21487;&#20197;&#25226;&#36825;&#31181;&#23454;&#20363;&#21644;&#20174;&#20197;&#21069;&#30340;session&#20013;&#35013;&#36733;&#36807;&#65288;&#21487;&#33021;&#21448;&#20570;&#36807;&#20462;&#25913;--&#35793;&#32773;&#27880;&#65289;
                            &#20294;&#26410;&#20877;&#27425;&#25345;&#20037;&#21270;&#30340;&#23454;&#20363;&#21306;&#20998;&#24320;&#26469;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;<tt class="literal">property</tt>):
                             Hibernate&#29992;&#26469;&#35775;&#38382;&#23646;&#24615;&#20540;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr></table></div></div><p>
                &#22914;&#26524; <tt class="literal">name</tt>&#23646;&#24615;&#19981;&#23384;&#22312;&#65292;&#20250;&#35748;&#20026;&#36825;&#20010;&#31867;&#27809;&#26377;&#26631;&#35782;&#23646;&#24615;&#12290;
            </p><p>
                <tt class="literal">unsaved-value</tt> &#23646;&#24615;&#22312;Hibernate3&#20013;&#20960;&#20046;&#19981;&#20877;&#38656;&#35201;&#12290;
            </p><p>
                &#36824;&#26377;&#19968;&#20010;&#21478;&#22806;&#30340;<tt class="literal">&lt;composite-id&gt;</tt>&#23450;&#20041;&#21487;&#20197;&#35775;&#38382;&#26087;&#24335;&#30340;&#22810;&#20027;&#38190;&#25968;&#25454;&#12290;
                &#25105;&#20204;&#24378;&#28872;&#19981;&#24314;&#35758;&#20351;&#29992;&#36825;&#31181;&#26041;&#24335;&#12290;
            </p><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-generator"></a>5.1.4.1.&nbsp;Generator</h4></div></div><div></div></div><p>
                &#21487;&#36873;&#30340;<tt class="literal">&lt;generator&gt;</tt>&#23376;&#20803;&#32032;&#26159;&#19968;&#20010;Java&#31867;&#30340;&#21517;&#23383;&#65292;
                &#29992;&#26469;&#20026;&#35813;&#25345;&#20037;&#21270;&#31867;&#30340;&#23454;&#20363;&#29983;&#25104;&#21807;&#19968;&#30340;&#26631;&#35782;&#12290;&#22914;&#26524;&#36825;&#20010;&#29983;&#25104;&#22120;&#23454;&#20363;&#38656;&#35201;&#26576;&#20123;&#37197;&#32622;&#20540;&#25110;&#32773;&#21021;&#22987;&#21270;&#21442;&#25968;&#65292;
                &#29992;<tt class="literal">&lt;param&gt;</tt>&#20803;&#32032;&#26469;&#20256;&#36882;&#12290;
            		</p><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="org.hibernate.id.TableHiLoGenerator"&gt;
                &lt;param name="table"&gt;uid_table&lt;/param&gt;
                &lt;param name="column"&gt;next_hi_value_column&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                    
                    &#25152;&#26377;&#30340;&#29983;&#25104;&#22120;&#37117;&#23454;&#29616;<tt class="literal">org.hibernate.id.IdentifierGenerator</tt>&#25509;&#21475;&#12290;
                    &#36825;&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;&#25509;&#21475;&#65307;&#26576;&#20123;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#36873;&#25321;&#25552;&#20379;&#20182;&#20204;&#33258;&#24049;&#29305;&#23450;&#30340;&#23454;&#29616;&#12290;&#24403;&#28982;&#65292;
                    Hibernate&#25552;&#20379;&#20102;&#24456;&#22810;&#20869;&#32622;&#30340;&#23454;&#29616;&#12290;&#19979;&#38754;&#26159;&#19968;&#20123;&#20869;&#32622;&#29983;&#25104;&#22120;&#30340;&#24555;&#25463;&#21517;&#23383;&#65306;

                    </p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">increment</tt></span></dt><dd><p>
                                &#29992;&#20110;&#20026;<tt class="literal">long</tt>, <tt class="literal">short</tt>&#25110;&#32773;<tt class="literal">int</tt>&#31867;&#22411;&#29983;&#25104;
                                &#21807;&#19968;&#26631;&#35782;&#12290;&#21482;&#26377;&#22312;&#27809;&#26377;&#20854;&#20182;&#36827;&#31243;&#24448;&#21516;&#19968;&#24352;&#34920;&#20013;&#25554;&#20837;&#25968;&#25454;&#26102;&#25165;&#33021;&#20351;&#29992;&#12290;
                                <span class="emphasis"><em>&#22312;&#38598;&#32676;&#19979;&#19981;&#35201;&#20351;&#29992;&#12290;</em></span>
                            </p></dd><dt><span class="term"><tt class="literal">identity</tt></span></dt><dd><p>
                                &#23545;DB2,MySQL, MS SQL Server, Sybase&#21644;HypersonicSQL&#30340;&#20869;&#32622;&#26631;&#35782;&#23383;&#27573;&#25552;&#20379;&#25903;&#25345;&#12290;
                                &#36820;&#22238;&#30340;&#26631;&#35782;&#31526;&#26159;<tt class="literal">long</tt>, <tt class="literal">short</tt> &#25110;&#32773;<tt class="literal">int</tt>&#31867;&#22411;&#30340;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">sequence</tt></span></dt><dd><p>
                                &#22312;DB2,PostgreSQL, Oracle, SAP DB, McKoi&#20013;&#20351;&#29992;&#24207;&#21015;&#65288;sequence)&#65292;
                                &#32780;&#22312;Interbase&#20013;&#20351;&#29992;&#29983;&#25104;&#22120;(generator)&#12290;&#36820;&#22238;&#30340;&#26631;&#35782;&#31526;&#26159;<tt class="literal">long</tt>, 
                                <tt class="literal">short</tt>&#25110;&#32773; <tt class="literal">int</tt>&#31867;&#22411;&#30340;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">hilo</tt></span></dt><dd><p><a name="mapping-declaration-id-hilodescription"></a>
                                &#20351;&#29992;&#19968;&#20010;&#39640;/&#20302;&#20301;&#31639;&#27861;&#39640;&#25928;&#30340;&#29983;&#25104;<tt class="literal">long</tt>, <tt class="literal">short</tt>
                                &#25110;&#32773; <tt class="literal">int</tt>&#31867;&#22411;&#30340;&#26631;&#35782;&#31526;&#12290;&#32473;&#23450;&#19968;&#20010;&#34920;&#21644;&#23383;&#27573;&#65288;&#40664;&#35748;&#20998;&#21035;&#26159;
                                <tt class="literal">hibernate_unique_key</tt> &#21644;<tt class="literal">next_hi</tt>&#65289;&#20316;&#20026;&#39640;&#20301;&#20540;&#30340;&#26469;&#28304;&#12290;
                                &#39640;/&#20302;&#20301;&#31639;&#27861;&#29983;&#25104;&#30340;&#26631;&#35782;&#31526;&#21482;&#22312;&#19968;&#20010;&#29305;&#23450;&#30340;&#25968;&#25454;&#24211;&#20013;&#26159;&#21807;&#19968;&#30340;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">seqhilo</tt></span></dt><dd><p>
                                &#20351;&#29992;&#19968;&#20010;&#39640;/&#20302;&#20301;&#31639;&#27861;&#26469;&#39640;&#25928;&#30340;&#29983;&#25104;<tt class="literal">long</tt>, <tt class="literal">short</tt>
                                &#25110;&#32773; <tt class="literal">int</tt>&#31867;&#22411;&#30340;&#26631;&#35782;&#31526;&#65292;&#32473;&#23450;&#19968;&#20010;&#25968;&#25454;&#24211;&#24207;&#21015;&#65288;sequence)&#30340;&#21517;&#23383;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">uuid</tt></span></dt><dd><p>
                                &#29992;&#19968;&#20010;128-bit&#30340;UUID&#31639;&#27861;&#29983;&#25104;&#23383;&#31526;&#20018;&#31867;&#22411;&#30340;&#26631;&#35782;&#31526;&#65292;
                                &#36825;&#22312;&#19968;&#20010;&#32593;&#32476;&#20013;&#26159;&#21807;&#19968;&#30340;&#65288;&#20351;&#29992;&#20102;IP&#22320;&#22336;&#65289;&#12290;UUID&#34987;&#32534;&#30721;&#20026;&#19968;&#20010;32&#20301;16&#36827;&#21046;&#25968;&#23383;&#30340;&#23383;&#31526;&#20018;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">guid</tt></span></dt><dd><p>
                                &#22312;MS SQL Server &#21644; MySQL &#20013;&#20351;&#29992;&#25968;&#25454;&#24211;&#29983;&#25104;&#30340;GUID&#23383;&#31526;&#20018;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">native</tt></span></dt><dd><p>
                                &#26681;&#25454;&#24213;&#23618;&#25968;&#25454;&#24211;&#30340;&#33021;&#21147;&#36873;&#25321;<tt class="literal">identity</tt>, <tt class="literal">sequence</tt> 
                                &#25110;&#32773;<tt class="literal">hilo</tt>&#20013;&#30340;&#19968;&#20010;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">assigned</tt></span></dt><dd><p>
                                &#35753;&#24212;&#29992;&#31243;&#24207;&#22312;<tt class="literal">save()</tt>&#20043;&#21069;&#20026;&#23545;&#35937;&#20998;&#37197;&#19968;&#20010;&#26631;&#31034;&#31526;&#12290;&#36825;&#26159;
                                <tt class="literal">&lt;generator&gt;</tt>&#20803;&#32032;&#27809;&#26377;&#25351;&#23450;&#26102;&#30340;&#40664;&#35748;&#29983;&#25104;&#31574;&#30053;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">select</tt></span></dt><dd><p>
                                &#36890;&#36807;&#25968;&#25454;&#24211;&#35302;&#21457;&#22120;&#36873;&#25321;&#19968;&#20123;&#21807;&#19968;&#20027;&#38190;&#30340;&#34892;&#24182;&#36820;&#22238;&#20027;&#38190;&#20540;&#26469;&#20998;&#37197;&#19968;&#20010;&#20027;&#38190;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">foreign</tt></span></dt><dd><p>
                                &#20351;&#29992;&#21478;&#22806;&#19968;&#20010;&#30456;&#20851;&#32852;&#30340;&#23545;&#35937;&#30340;&#26631;&#35782;&#31526;&#12290;&#36890;&#24120;&#21644;<tt class="literal">&lt;one-to-one&gt;</tt>&#32852;&#21512;&#36215;&#26469;&#20351;&#29992;&#12290;
                            </p></dd></dl></div><p>

                </p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-hilo"></a>5.1.4.2.&nbsp;&#39640;/&#20302;&#20301;&#31639;&#27861;&#65288;Hi/Lo Algorithm&#65289;</h4></div></div><div></div></div><p>
                <tt class="literal">hilo</tt> &#21644; <tt class="literal">seqhilo</tt>&#29983;&#25104;&#22120;&#32473;&#20986;&#20102;&#20004;&#31181;hi/lo&#31639;&#27861;&#30340;&#23454;&#29616;&#65292;
                &#36825;&#26159;&#19968;&#31181;&#24456;&#20196;&#20154;&#28385;&#24847;&#30340;&#26631;&#35782;&#31526;&#29983;&#25104;&#31639;&#27861;&#12290;&#31532;&#19968;&#31181;&#23454;&#29616;&#38656;&#35201;&#19968;&#20010;&#8220;&#29305;&#27530;&#8221;&#30340;&#25968;&#25454;&#24211;&#34920;&#26469;&#20445;&#23384;&#19979;&#19968;&#20010;&#21487;&#29992;&#30340;&#8220;hi&#8221;&#20540;&#12290;
                &#31532;&#20108;&#31181;&#23454;&#29616;&#20351;&#29992;&#19968;&#20010;Oracle&#39118;&#26684;&#30340;&#24207;&#21015;&#65288;&#22312;&#34987;&#25903;&#25345;&#30340;&#24773;&#20917;&#19979;&#65289;&#12290;
            </p><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="hilo"&gt;
                &lt;param name="table"&gt;hi_value&lt;/param&gt;
                &lt;param name="column"&gt;next_value&lt;/param&gt;
                &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="seqhilo"&gt;
                &lt;param name="sequence"&gt;hi_value&lt;/param&gt;
                &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                &#24456;&#19981;&#24184;&#65292;&#20320;&#22312;&#20026;Hibernate&#33258;&#34892;&#25552;&#20379;<tt class="literal">Connection</tt>&#26102;&#26080;&#27861;&#20351;&#29992;<tt class="literal">hilo</tt>&#12290;
                &#24403;Hibernate&#20351;&#29992;JTA&#33719;&#21462;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#25968;&#25454;&#28304;&#36830;&#25509;&#26102;,&#20320;&#24517;&#39035;&#27491;&#30830;&#22320;&#37197;&#32622;
                <tt class="literal">hibernate.transaction.manager_lookup_class</tt>&#12290;
            </p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-uuid"></a>5.1.4.3.&nbsp;UUID&#31639;&#27861;&#65288;UUID Algorithm &#65289;</h4></div></div><div></div></div><p>
                UUID&#21253;&#21547;&#65306;IP&#22320;&#22336;&#65292;JVM&#30340;&#21551;&#21160;&#26102;&#38388;&#65288;&#31934;&#30830;&#21040;1/4&#31186;&#65289;&#65292;&#31995;&#32479;&#26102;&#38388;&#21644;&#19968;&#20010;&#35745;&#25968;&#22120;&#20540;&#65288;&#22312;JVM&#20013;&#21807;&#19968;&#65289;&#12290;
                &#22312;Java&#20195;&#30721;&#20013;&#19981;&#21487;&#33021;&#33719;&#24471;MAC&#22320;&#22336;&#25110;&#32773;&#20869;&#23384;&#22320;&#22336;&#65292;&#25152;&#20197;&#36825;&#24050;&#32463;&#26159;&#25105;&#20204;&#22312;&#19981;&#20351;&#29992;JNI&#30340;&#21069;&#25552;&#19979;&#30340;&#33021;&#20570;&#30340;&#26368;&#22909;&#23454;&#29616;&#20102;&#12290;
            </p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-sequences"></a>5.1.4.4.&nbsp;&#26631;&#35782;&#23383;&#27573;&#21644;&#24207;&#21015;&#65288;Identity columns and Sequences&#65289;</h4></div></div><div></div></div><p>
                	&#23545;&#20110;&#20869;&#37096;&#25903;&#25345;&#26631;&#35782;&#23383;&#27573;&#30340;&#25968;&#25454;&#24211;(DB2,MySQL,Sybase,MS SQL)&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">identity</tt>&#20851;&#38190;&#23383;&#29983;&#25104;&#12290;
                	&#23545;&#20110;&#20869;&#37096;&#25903;&#25345;&#24207;&#21015;&#30340;&#25968;&#25454;&#24211;&#65288;DB2,Oracle, PostgreSQL, Interbase, McKoi,SAP DB),
                	&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">sequence</tt>&#39118;&#26684;&#30340;&#20851;&#38190;&#23383;&#29983;&#25104;&#12290;
                	&#36825;&#20004;&#31181;&#26041;&#24335;&#23545;&#20110;&#25554;&#20837;&#19968;&#20010;&#26032;&#30340;&#23545;&#35937;&#37117;&#38656;&#35201;&#20004;&#27425;SQL&#26597;&#35810;&#12290;
            		</p><pre class="programlisting">&lt;id name="id" type="long" column="person_id"&gt;
        &lt;generator class="sequence"&gt;
                &lt;param name="sequence"&gt;person_id_sequence&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><pre class="programlisting">&lt;id name="id" type="long" column="person_id" unsaved-value="0"&gt;
        &lt;generator class="identity"/&gt;
&lt;/id&gt;</pre><p>
                &#23545;&#20110;&#36328;&#24179;&#21488;&#24320;&#21457;&#65292;<tt class="literal">native</tt>&#31574;&#30053;&#20250;&#20174;<tt class="literal">identity</tt>,
                 <tt class="literal">sequence</tt> &#21644;<tt class="literal">hilo</tt>&#20013;&#36827;&#34892;&#36873;&#25321;&#65292;&#36873;&#25321;&#21738;&#19968;&#20010;&#65292;&#36825;&#21462;&#20915;&#20110;&#24213;&#23618;&#25968;&#25454;&#24211;&#30340;&#25903;&#25345;&#33021;&#21147;&#12290;
            </p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-assigned"></a>5.1.4.5.&nbsp;&#31243;&#24207;&#20998;&#37197;&#30340;&#26631;&#35782;&#31526;&#65288;Assigned Identifiers&#65289;</h4></div></div><div></div></div><p>
                &#22914;&#26524;&#20320;&#38656;&#35201;&#24212;&#29992;&#31243;&#24207;&#20998;&#37197;&#19968;&#20010;&#26631;&#31034;&#31526;&#65288;&#32780;&#38750;Hibernate&#26469;&#29983;&#25104;&#65289;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">assigned</tt>
                &#29983;&#25104;&#22120;&#12290;&#36825;&#31181;&#29305;&#27530;&#30340;&#29983;&#25104;&#22120;&#20250;&#20351;&#29992;&#24050;&#32463;&#20998;&#37197;&#32473;&#23545;&#35937;&#30340;&#26631;&#35782;&#31526;&#23646;&#24615;&#30340;&#26631;&#35782;&#31526;&#20540;&#12290;
                &#36825;&#20010;&#29983;&#25104;&#22120;&#20351;&#29992;&#19968;&#20010;&#33258;&#28982;&#38190;&#65288;natural key&#65292;&#26377;&#21830;&#19994;&#24847;&#20041;&#30340;&#21015;&#65293;&#35793;&#27880;&#65289;&#20316;&#20026;&#20027;&#38190;&#65292;&#32780;&#19981;&#26159;&#20351;&#29992;&#19968;&#20010;&#20195;&#29702;&#38190;&#65288;
                surrogate key&#65292;&#27809;&#26377;&#21830;&#19994;&#24847;&#20041;&#30340;&#21015;&#65293;&#35793;&#27880;&#65289;&#12290;&#36825;&#26159;&#27809;&#26377;&#25351;&#23450;<tt class="literal">&lt;generator&gt;</tt>&#20803;&#32032;&#26102;&#30340;&#40664;&#35748;&#34892;&#20026;
            </p><p>
                    &#24403;&#36873;&#25321;<tt class="literal">assigned</tt>&#29983;&#25104;&#22120;&#26102;&#65292;&#38500;&#38750;&#26377;&#19968;&#20010;version&#25110;timestamp&#23646;&#24615;&#65292;&#25110;&#32773;&#20320;&#23450;&#20041;&#20102;
                    <tt class="literal">Interceptor.isUnsaved()</tt>&#65292;&#21542;&#21017;&#38656;&#35201;&#35753;Hiberante&#20351;&#29992;
                    <tt class="literal">unsaved-value="undefined"</tt>&#65292;&#24378;&#21046;Hibernatet&#26597;&#35810;&#25968;&#25454;&#24211;&#26469;&#30830;&#23450;&#19968;&#20010;&#23454;&#20363;&#26159;&#30636;&#26102;&#30340;&#65288;transient&#65289;
                    &#36824;&#26159;&#33073;&#31649;&#30340;&#65288;detached&#65289;&#12290;
                </p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-select"></a>5.1.4.6.&nbsp;&#35302;&#21457;&#22120;&#23454;&#29616;&#30340;&#20027;&#38190;&#29983;&#25104;&#22120;&#65288;Primary keys assigned by triggers&#65289;</h4></div></div><div></div></div><p>
                    &#20165;&#20165;&#29992;&#20110;&#36951;&#30041;&#30340;schema&#20013; (Hibernate&#19981;&#33021;&#20351;&#29992;&#35302;&#21457;&#22120;&#29983;&#25104;DDL)&#12290;
                </p><pre class="programlisting">&lt;id name="id" type="long" column="person_id"&gt;
        &lt;generator class="select"&gt;
                &lt;param name="key"&gt;socialSecurityNumber&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                    &#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#31867;&#23450;&#20041;&#20102;&#19968;&#20010;&#21629;&#21517;&#20026;<tt class="literal">socialSecurityNumber</tt>&#30340;&#21807;&#19968;&#20540;&#23646;&#24615;&#65292;
                    &#23427;&#26159;&#19968;&#20010;&#33258;&#28982;&#38190;&#65288;natural key&#65289;&#65292;&#21629;&#21517;&#20026;<tt class="literal">person_id</tt>&#30340;&#20195;&#29702;&#38190;&#65288;surrogate key&#65289;
                    &#30340;&#20540;&#30001;&#35302;&#21457;&#22120;&#29983;&#25104;&#12290;
                </p></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-compositeid"></a>5.1.5.&nbsp;composite-id</h3></div></div><div></div></div><pre class="programlisting">&lt;composite-id
        name="propertyName"
        class="ClassName"
        mapped="true|false"
        access="field|property|ClassName"
        node="element-name|."
        &gt;

        &lt;key-property name="propertyName" type="typename" column="column_name"/&gt;
        &lt;key-many-to-one name="propertyName class="ClassName" column="column_name"/&gt;
        ......
&lt;/composite-id&gt;</pre><p>
                &#22914;&#26524;&#34920;&#20351;&#29992;&#32852;&#21512;&#20027;&#38190;&#65292;&#20320;&#21487;&#20197;&#26144;&#23556;&#31867;&#30340;&#22810;&#20010;&#23646;&#24615;&#20026;&#26631;&#35782;&#31526;&#23646;&#24615;&#12290;
                <tt class="literal">&lt;composite-id&gt;</tt>&#20803;&#32032;&#25509;&#21463;<tt class="literal">&lt;key-property&gt;</tt>
                &#23646;&#24615;&#26144;&#23556;&#21644;<tt class="literal">&lt;key-many-to-one&gt;</tt>&#23646;&#24615;&#26144;&#23556;&#20316;&#20026;&#23376;&#20803;&#32032;&#12290;
            </p><pre class="programlisting">&lt;composite-id&gt;
        &lt;key-property name="medicareNumber"/&gt;
        &lt;key-property name="dependent"/&gt;
&lt;/composite-id&gt;</pre><p>
                &#20320;&#30340;&#25345;&#20037;&#21270;&#31867;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#37325;&#36733;<tt class="literal">equals()</tt>&#21644;
                <tt class="literal">hashCode()</tt>&#26041;&#27861;&#65292;&#26469;&#23454;&#29616;&#32452;&#21512;&#30340;&#26631;&#35782;&#31526;&#30340;&#30456;&#31561;&#21028;&#26029;&#12290;
                &#23454;&#29616;<tt class="literal">Serializable</tt>&#25509;&#21475;&#20063;&#26159;&#24517;&#39035;&#30340;&#12290;
            </p><p>
                &#19981;&#24184;&#30340;&#26159;&#65292;&#36825;&#31181;&#32452;&#21512;&#20851;&#38190;&#23383;&#30340;&#26041;&#27861;&#24847;&#21619;&#30528;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#26159;&#23427;&#33258;&#24049;&#30340;&#26631;&#35782;&#12290;&#38500;&#20102;&#23545;&#35937;&#33258;&#24049;&#20043;&#22806;&#65292;
                &#27809;&#26377;&#20160;&#20040;&#26041;&#20415;&#30340;&#8220;&#25226;&#25163;&#8221;&#21487;&#29992;&#12290;&#20320;&#24517;&#39035;&#21021;&#22987;&#21270;&#25345;&#20037;&#21270;&#31867;&#30340;&#23454;&#20363;&#65292;&#22635;&#20805;&#23427;&#30340;&#26631;&#35782;&#31526;&#23646;&#24615;&#65292;&#20877;<tt class="literal">load()</tt>
                &#32452;&#21512;&#20851;&#38190;&#23383;&#20851;&#32852;&#30340;&#25345;&#20037;&#29366;&#24577;&#12290;&#25105;&#20204;&#25226;&#36825;&#31181;&#26041;&#27861;&#31216;&#20026;<span class="emphasis"><em>embedded&#65288;&#23884;&#20837;&#24335;&#65289;</em></span>&#30340;&#32452;&#21512;&#26631;&#35782;&#31526;&#65292;&#22312;&#37325;&#35201;&#30340;&#24212;&#29992;&#20013;&#19981;&#40723;&#21169;&#20351;&#29992;&#36825;&#31181;&#29992;&#27861;&#12290;
            </p><p>
                &#31532;&#20108;&#31181;&#26041;&#27861;&#25105;&#20204;&#31216;&#20026;<span class="emphasis"><em>mapped(&#26144;&#23556;&#24335;)</em></span>&#32452;&#21512;&#26631;&#35782;&#31526; (mapped composite identifier),<tt class="literal">&lt;composite-id&gt;</tt>&#20803;&#32032;&#20013;&#21015;&#20986;&#30340;&#26631;&#35782;&#23646;&#24615;&#19981;&#20294;&#22312;&#25345;&#20037;&#21270;&#31867;&#20986;&#29616;&#65292;&#36824;&#24418;&#25104;&#19968;&#20010;&#29420;&#31435;&#30340;&#26631;&#35782;&#31526;&#31867;&#12290;
            </p><pre class="programlisting">&lt;composite-id class="MedicareId" mapped="true"&gt;
        &lt;key-property name="medicareNumber"/&gt;
        &lt;key-property name="dependent"/&gt;
&lt;/composite-id&gt;</pre><p>
                &#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#32452;&#21512;&#26631;&#35782;&#31526;&#31867;<tt class="literal">MedicareId</tt>&#21644;&#23454;&#20307;&#31867;&#37117;&#21547;&#26377;<tt class="literal">medicareNumber</tt>&#21644;<tt class="literal">dependent</tt>&#23646;&#24615;&#12290;&#26631;&#35782;&#31526;&#31867;&#24517;&#39035;&#37325;&#36733;<tt class="literal">equals()</tt>&#21644;<tt class="literal">hashCode()</tt>&#24182;&#19988;&#23454;&#29616;<tt class="literal">Serializable</tt>&#25509;&#21475;&#12290;&#36825;&#31181;&#26041;&#27861;&#30340;&#32570;&#28857;&#26159;&#20986;&#29616;&#20102;&#26126;&#26174;&#30340;&#20195;&#30721;&#37325;&#22797;&#12290;
            </p><p>
                &#19979;&#38754;&#21015;&#20986;&#30340;&#23646;&#24615;&#26159;&#29992;&#26469;&#25351;&#23450;&#19968;&#20010;&#26144;&#23556;&#24335;&#32452;&#21512;&#26631;&#35782;&#31526;&#30340;&#65306;
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        <tt class="literal">mapped</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026;<tt class="literal">false</tt>):
                        &#25351;&#26126;&#20351;&#29992;&#19968;&#20010;&#26144;&#23556;&#24335;&#32452;&#21512;&#26631;&#35782;&#31526;&#65292;&#20854;&#21253;&#21547;&#30340;&#23646;&#24615;&#26144;&#23556;&#21516;&#26102;&#22312;&#23454;&#20307;&#31867;&#21644;&#32452;&#21512;&#26631;&#35782;&#31526;&#31867;&#20013;&#20986;&#29616;&#12290;
                    </p></li><li><p>
                        <tt class="literal">class</tt> (&#21487;&#36873;,&#20294;&#23545;&#26144;&#23556;&#24335;&#32452;&#21512;&#26631;&#35782;&#31526;&#24517;&#39035;&#25351;&#23450;): 
                        &#20316;&#20026;&#32452;&#21512;&#26631;&#35782;&#31526;&#31867;&#20351;&#29992;&#30340;&#31867;&#21517;.
                    </p></li></ul></div><p>
                &#22312;<a href="#components-compositeid" title="8.4.&nbsp;&#32452;&#20214;&#20316;&#20026;&#32852;&#21512;&#26631;&#35782;&#31526;(Components as composite identifiers)">&#31532;&nbsp;8.4&nbsp;&#33410; &#8220;&#32452;&#20214;&#20316;&#20026;&#32852;&#21512;&#26631;&#35782;&#31526;(Components as composite identifiers)&#8221;</a>&#19968;&#33410;&#20013;,&#25105;&#20204;&#20250;&#25551;&#36848;&#31532;&#19977;&#31181;&#26041;&#24335;,&#37027;&#23601;&#26159;&#25226;&#32452;&#21512;&#26631;&#35782;&#31526;&#23454;&#29616;&#20026;&#19968;&#20010;&#32452;&#20214;(component)&#31867;,&#36825;&#26159;&#26356;&#26041;&#20415;&#30340;&#26041;&#27861;&#12290;&#19979;&#38754;&#30340;&#23646;&#24615;&#20165;&#23545;&#31532;&#19977;&#31181;&#26041;&#27861;&#26377;&#25928;&#65306;
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        <tt class="literal">name</tt> (&#21487;&#36873;,&#20294;&#23545;&#36825;&#31181;&#26041;&#27861;&#32780;&#35328;&#24517;&#39035;): &#21253;&#21547;&#27492;&#32452;&#20214;&#26631;&#35782;&#31526;&#30340;&#32452;&#20214;&#31867;&#22411;&#30340;&#21517;&#23383; (&#21442;&#38405;&#31532;9&#31456;).
                        
                    </p></li><li><p>
                        <tt class="literal">access</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;<tt class="literal">property</tt>): 
                        Hibernate&#24212;&#35813;&#20351;&#29992;&#30340;&#35775;&#38382;&#27492;&#23646;&#24615;&#20540;&#30340;&#31574;&#30053;
                    </p></li><li><p>
                        <tt class="literal">class</tt> (&#21487;&#36873; - &#40664;&#35748;&#20250;&#29992;&#21453;&#23556;&#26469;&#33258;&#21160;&#21028;&#23450;&#23646;&#24615;&#31867;&#22411;
                        ): &#29992;&#26469;&#20316;&#20026;&#32452;&#21512;&#26631;&#35782;&#31526;&#30340;&#32452;&#20214;&#31867;&#30340;&#31867;&#21517;&#65288;&#21442;&#38405;&#19979;&#19968;&#33410;&#65289;
                        
                    </p></li></ul></div><p>
                &#31532;&#19977;&#31181;&#26041;&#24335;&#65292;&#34987;&#31216;&#20026;<span class="emphasis"><em>identifier component(&#26631;&#35782;&#31526;&#32452;&#20214;)</em></span>&#26159;&#25105;&#20204;&#23545;&#20960;&#20046;&#25152;&#26377;&#24212;&#29992;&#37117;&#25512;&#33616;&#20351;&#29992;&#30340;&#26041;&#24335;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-discriminator"></a>5.1.6.&nbsp;&#37492;&#21035;&#22120;&#65288;discriminator&#65289;</h3></div></div><div></div></div><p>
                &#22312;"&#19968;&#26869;&#23545;&#35937;&#32487;&#25215;&#26641;&#23545;&#24212;&#19968;&#20010;&#34920;"&#30340;&#31574;&#30053;&#20013;,<tt class="literal">&lt;discriminator&gt;</tt>&#20803;&#32032;&#26159;&#24517;&#38656;&#30340;,
                &#23427;&#23450;&#20041;&#20102;&#34920;&#30340;&#37492;&#21035;&#22120;&#23383;&#27573;&#12290;&#37492;&#21035;&#22120;&#23383;&#27573;&#21253;&#21547;&#26631;&#24535;&#20540;&#65292;&#29992;&#20110;&#21578;&#30693;&#25345;&#20037;&#21270;&#23618;&#24212;&#35813;&#20026;&#26576;&#20010;&#29305;&#23450;&#30340;&#34892;&#21019;&#24314;&#21738;&#19968;&#20010;&#23376;&#31867;&#30340;&#23454;&#20363;&#12290;
                &#22914;&#19979;&#36825;&#20123;&#21463;&#21040;&#38480;&#21046;&#30340;&#31867;&#22411;&#21487;&#20197;&#20351;&#29992;&#65306; 
                <tt class="literal">string</tt>, <tt class="literal">character</tt>, <tt class="literal">integer</tt>, 
                <tt class="literal">byte</tt>, <tt class="literal">short</tt>, <tt class="literal">boolean</tt>, 
                <tt class="literal">yes_no</tt>, <tt class="literal">true_false</tt>.
            </p><div class="programlistingco"><pre class="programlisting">&lt;discriminator
        column="discriminator_column"                      <span class="co">(1)</span>
        type="discriminator_type"                          <span class="co">(2)</span>
        force="true|false"                                 <span class="co">(3)</span>
        insert="true|false"                                <span class="co">(4)</span>
        formula="arbitrary sql expression"                 <span class="co">(5)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">class</tt>) &#37492;&#21035;&#22120;&#23383;&#27573;&#30340;&#21517;&#23383;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">string</tt>) &#19968;&#20010;Hibernate&#23383;&#27573;&#31867;&#22411;&#30340;&#21517;&#23383;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">force(&#24378;&#21046;)</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">false</tt>) 
                            "&#24378;&#21046;"Hibernate&#25351;&#23450;&#20801;&#35768;&#30340;&#37492;&#21035;&#22120;&#20540;,&#21363;&#20351;&#24403;&#21462;&#24471;&#30340;&#25152;&#26377;&#23454;&#20363;&#37117;&#26159;&#26681;&#31867;&#30340;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;<tt class="literal">true</tt>)
                            &#22914;&#26524;&#20320;&#30340;&#37492;&#21035;&#22120;&#23383;&#27573;&#20063;&#26159;&#26144;&#23556;&#20026;&#22797;&#21512;&#26631;&#35782;&#65288;composite identifier&#65289;&#30340;&#19968;&#37096;&#20998;&#65292;&#21017;&#38656;&#23558;
                            &#36825;&#20010;&#20540;&#35774;&#20026;<tt class="literal">false</tt>&#12290;&#65288;&#21578;&#35785;Hibernate&#22312;&#20570;SQL <tt class="literal">INSERT</tt>
                            &#26102;&#19981;&#21253;&#21547;&#35813;&#21015;&#65289;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula</tt> (&#21487;&#36873;) 
                            &#19968;&#20010;SQL&#34920;&#36798;&#24335;&#65292;&#22312;&#31867;&#22411;&#21028;&#26029;&#65288;&#21028;&#26029;&#26159;&#29238;&#31867;&#36824;&#26159;&#20855;&#20307;&#23376;&#31867;&#65293;&#35793;&#27880;&#65289;&#26102;&#25191;&#34892;&#12290;&#21487;&#29992;&#20110;&#22522;&#20110;&#20869;&#23481;&#30340;&#37492;&#21035;&#22120;&#12290;
                        </p></td></tr></table></div></div><p>
                &#37492;&#21035;&#22120;&#23383;&#27573;&#30340;&#23454;&#38469;&#20540;&#26159;&#26681;&#25454;<tt class="literal">&lt;class&gt;</tt>&#21644;<tt class="literal">&lt;subclass&gt;</tt>&#20803;&#32032;&#20013;
                &#30340;<tt class="literal">discriminator-value</tt>&#23646;&#24615;&#24471;&#26469;&#30340;&#12290;
            </p><p>
                <tt class="literal">force</tt>&#23646;&#24615;&#20165;&#20165;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#26377;&#29992;&#30340;&#65306;&#34920;&#20013;&#21253;&#21547;&#27809;&#26377;&#34987;&#26144;&#23556;&#21040;&#25345;&#20037;&#21270;&#31867;&#30340;&#38468;&#21152;&#36776;&#21035;&#22120;&#20540;&#12290;
                &#36825;&#31181;&#24773;&#20917;&#19981;&#20250;&#32463;&#24120;&#36935;&#21040;&#12290;          
            </p><p>
                &#20351;&#29992;<tt class="literal">formula</tt>&#23646;&#24615;&#20320;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;SQL&#34920;&#36798;&#24335;&#65292;&#29992;&#26469;&#21028;&#26029;&#19968;&#20010;&#34892;&#25968;&#25454;&#30340;&#31867;&#22411;&#12290;
            </p><pre class="programlisting">&lt;discriminator
    formula="case when CLASS_TYPE in ('a', 'b', 'c') then 0 else 1 end"
    type="integer"/&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-version"></a>5.1.7.&nbsp;&#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)</h3></div></div><div></div></div><p>
                <tt class="literal">&lt;version&gt;</tt>&#20803;&#32032;&#26159;&#21487;&#36873;&#30340;&#65292;&#34920;&#26126;&#34920;&#20013;&#21253;&#21547;&#38468;&#24102;&#29256;&#26412;&#20449;&#24687;&#30340;&#25968;&#25454;&#12290;
                &#36825;&#22312;&#20320;&#20934;&#22791;&#20351;&#29992;<span class="emphasis"><em> &#38271;&#20107;&#21153;&#65288;long transactions&#65289;</em></span>&#30340;&#26102;&#20505;&#29305;&#21035;&#26377;&#29992;&#12290;&#65288;&#35265;&#21518;&#65289;
            </p><div class="programlistingco"><pre class="programlisting">&lt;version
        column="version_column"                                      <span class="co">(1)</span>
        name="propertyName"                                          <span class="co">(2)</span>
        type="typename"                                              <span class="co">(3)</span>
        access="field|property|ClassName"                            <span class="co">(4)</span>
        unsaved-value="null|negative|undefined"                      <span class="co">(5)</span>
        generated="never|always"                                     <span class="co">(6)</span>
        insert="true|false"                                          <span class="co">(7)</span>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#23646;&#24615;&#21517;): &#25351;&#23450;&#25345;&#26377;&#29256;&#26412;&#21495;&#30340;&#23383;&#27573;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#25345;&#20037;&#21270;&#31867;&#30340;&#23646;&#24615;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">integer</tt>): &#29256;&#26412;&#21495;&#30340;&#31867;&#22411;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">property</tt>):  
                            Hibernate&#29992;&#20110;&#35775;&#38382;&#23646;&#24615;&#20540;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">unsaved-value</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159;<tt class="literal">undefined</tt>): 
                            &#29992;&#20110;&#26631;&#26126;&#26576;&#20010;&#23454;&#20363;&#26102;&#21018;&#21018;&#34987;&#23454;&#20363;&#21270;&#30340;&#65288;&#23578;&#26410;&#20445;&#23384;&#65289;&#29256;&#26412;&#23646;&#24615;&#20540;&#65292;&#20381;&#38752;&#36825;&#20010;&#20540;&#23601;&#21487;&#20197;&#25226;&#36825;&#31181;&#24773;&#20917;
                            &#21644;&#24050;&#32463;&#22312;&#20808;&#21069;&#30340;session&#20013;&#20445;&#23384;&#25110;&#35013;&#36733;&#30340;&#33073;&#31649;&#65288;detached&#65289;&#23454;&#20363;&#21306;&#20998;&#24320;&#26469;&#12290;
                            &#65288;<tt class="literal">undefined</tt>&#25351;&#26126;&#24212;&#34987;&#20351;&#29992;&#30340;&#26631;&#35782;&#23646;&#24615;&#20540;&#12290;&#65289;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">generated</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">never</tt>):
                            &#34920;&#26126;&#27492;&#29256;&#26412;&#23646;&#24615;&#20540;&#26159;&#21542;&#23454;&#38469;&#19978;&#26159;&#30001;&#25968;&#25454;&#24211;&#29983;&#25104;&#30340;&#12290;&#35831;&#21442;&#38405;<a href="#mapping-generated" title="5.6.&nbsp;&#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;">&#31532;&nbsp;5.6&nbsp;&#33410; &#8220;&#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;&#8221;</a>&#37096;&#20998;&#30340;&#35752;&#35770;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">true</tt>):
                            &#34920;&#26126;&#27492;&#29256;&#26412;&#21015;&#24212;&#35813;&#21253;&#21547;&#22312;SQL&#25554;&#20837;&#35821;&#21477;&#20013;&#12290;&#21482;&#26377;&#24403;&#25968;&#25454;&#24211;&#23383;&#27573;&#26377;&#40664;&#35748;&#20540;<tt class="literal">0</tt>&#30340;&#26102;&#20505;&#65292;&#25165;&#21487;&#20197;&#35774;&#32622;&#20026;<tt class="literal">false</tt>&#12290;
                        </p></td></tr></table></div></div><p>
                &#29256;&#26412;&#21495;&#24517;&#39035;&#26159;&#20197;&#19979;&#31867;&#22411;&#65306;<tt class="literal">long</tt>, <tt class="literal">integer</tt>,
                <tt class="literal">short</tt>, <tt class="literal">timestamp</tt>&#25110;&#32773;<tt class="literal">calendar</tt>&#12290;
            </p><p>
                &#19968;&#20010;&#33073;&#31649;&#65288;detached&#65289;&#23454;&#20363;&#30340;version&#25110;timestamp&#23646;&#24615;&#19981;&#33021;&#20026;&#31354;&#65288;null&#65289;&#65292;&#22240;&#20026;Hibernate&#19981;&#31649;
                <tt class="literal">unsaved-value</tt>&#34987;&#25351;&#23450;&#20026;&#20309;&#31181;&#31574;&#30053;&#65292;&#23427;&#23558;&#20219;&#20309;&#23646;&#24615;&#20026;&#31354;&#30340;version&#25110;timestamp
                &#23454;&#20363;&#30475;&#20316;&#20026;&#30636;&#26102;&#65288;transient&#65289;&#23454;&#20363;&#12290;
                <span class="emphasis"><em>&#36991;&#20813;Hibernate&#20013;&#30340;&#20256;&#36882;&#37325;&#38468;&#65288;transitive reattachment&#65289;&#38382;&#39064;&#30340;&#19968;&#20010;&#31616;&#21333;&#26041;&#27861;&#26159;
              	&#23450;&#20041;&#19968;&#20010;&#19981;&#33021;&#20026;&#31354;&#30340;version&#25110;timestamp&#23646;&#24615;&#65292;&#29305;&#21035;&#26159;&#22312;&#20154;&#20204;&#20351;&#29992;&#31243;&#24207;&#20998;&#37197;&#30340;&#26631;&#35782;&#31526;&#65288;assigned identifiers&#65289;
              	&#25110;&#22797;&#21512;&#20027;&#38190;&#26102;&#38750;&#24120;&#26377;&#29992;&#65281;</em></span>
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-timestamp"></a>5.1.8.&nbsp;timestamp (&#21487;&#36873;)</h3></div></div><div></div></div><p>
                &#21487;&#36873;&#30340;<tt class="literal">&lt;timestamp&gt;</tt>&#20803;&#32032;&#25351;&#26126;&#20102;&#34920;&#20013;&#21253;&#21547;&#26102;&#38388;&#25139;&#25968;&#25454;&#12290;
                &#36825;&#29992;&#26469;&#20316;&#20026;&#29256;&#26412;&#30340;&#26367;&#20195;&#12290;&#26102;&#38388;&#25139;&#26412;&#36136;&#19978;&#26159;&#19968;&#31181;&#23545;&#20048;&#35266;&#38145;&#23450;&#30340;&#19968;&#31181;&#19981;&#26159;&#29305;&#21035;&#23433;&#20840;&#30340;&#23454;&#29616;&#12290;&#24403;&#28982;&#65292;
                &#26377;&#26102;&#20505;&#24212;&#29992;&#31243;&#24207;&#21487;&#33021;&#22312;&#20854;&#20182;&#26041;&#38754;&#20351;&#29992;&#26102;&#38388;&#25139;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;timestamp
        column="timestamp_column"                                    <span class="co">(1)</span>
        name="propertyName"                                          <span class="co">(2)</span>
        access="field|property|ClassName"                            <span class="co">(3)</span>
        unsaved-value="null|undefined"                               <span class="co">(4)</span>
        source="vm|db"                                               <span class="co">(5)</span>
        generated="never|always"                                     <span class="co">(6)</span>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#23646;&#24615;&#21517;): &#25345;&#26377;&#26102;&#38388;&#25139;&#30340;&#23383;&#27573;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#22312;&#25345;&#20037;&#21270;&#31867;&#20013;&#30340;JavaBeans&#39118;&#26684;&#30340;&#23646;&#24615;&#21517;&#65292;
                            &#20854;Java&#31867;&#22411;&#26159; <tt class="literal">Date</tt> &#25110;&#32773; <tt class="literal">Timestamp</tt>&#30340;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">property</tt>): 
                             Hibernate&#29992;&#20110;&#35775;&#38382;&#23646;&#24615;&#20540;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">unsaved-value</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159;<tt class="literal">null</tt>): 
                            &#29992;&#20110;&#26631;&#26126;&#26576;&#20010;&#23454;&#20363;&#26102;&#21018;&#21018;&#34987;&#23454;&#20363;&#21270;&#30340;&#65288;&#23578;&#26410;&#20445;&#23384;&#65289;&#29256;&#26412;&#23646;&#24615;&#20540;&#65292;&#20381;&#38752;&#36825;&#20010;&#20540;&#23601;&#21487;&#20197;&#25226;&#36825;&#31181;&#24773;&#20917;&#21644;
                            &#24050;&#32463;&#22312;&#20808;&#21069;&#30340;session&#20013;&#20445;&#23384;&#25110;&#35013;&#36733;&#30340;&#33073;&#31649;&#65288;detached&#65289;&#23454;&#20363;&#21306;&#20998;&#24320;&#26469;&#12290;&#65288;<tt class="literal">undefined</tt>
                            &#25351;&#26126;&#20351;&#29992;&#26631;&#35782;&#23646;&#24615;&#20540;&#36827;&#34892;&#36825;&#31181;&#21028;&#26029;&#12290;&#65289;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">source</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">vm</tt>):
                            Hibernate&#22914;&#20309;&#25165;&#33021;&#33719;&#21462;&#21040;&#26102;&#38388;&#25139;&#30340;&#20540;&#21602;&#65311;&#20174;&#25968;&#25454;&#24211;&#65292;&#36824;&#26159;&#24403;&#21069;JVM&#65311;&#20174;&#25968;&#25454;&#24211;&#33719;&#21462;&#20250;&#24102;&#26469;&#19968;&#20123;&#36127;&#25285;&#65292;&#22240;&#20026;Hibernate&#24517;&#39035;&#35775;&#38382;&#25968;&#25454;&#24211;&#26469;&#33719;&#24471;&#8220;&#19979;&#19968;&#20010;&#20540;&#8221;&#65292;&#20294;&#26159;&#22312;&#38598;&#32676;&#29615;&#22659;&#20013;&#20250;&#26356;&#23433;&#20840;&#20123;&#12290;&#36824;&#35201;&#27880;&#24847;&#65292;&#24182;&#19981;&#26159;&#25152;&#26377;&#30340;<tt class="literal">Dialect&#65288;&#26041;&#35328;&#65289;</tt>&#37117;&#25903;&#25345;&#33719;&#24471;&#25968;&#25454;&#24211;&#30340;&#24403;&#21069;&#26102;&#38388;&#25139;&#30340;&#65292;&#32780;&#25903;&#25345;&#30340;&#25968;&#25454;&#24211;&#20013;&#21448;&#26377;&#19968;&#37096;&#20998;&#22240;&#20026;&#31934;&#24230;&#19981;&#36275;,&#29992;&#20110;&#38145;&#23450;&#26159;&#19981;&#23433;&#20840;&#30340;&#65288;&#20363;&#22914;Oracle 8&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">generated</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">never</tt>):
                            &#25351;&#20986;&#26102;&#38388;&#25139;&#20540;&#26159;&#21542;&#23454;&#38469;&#19978;&#26159;&#30001;&#25968;&#25454;&#24211;&#29983;&#25104;&#30340;.&#35831;&#21442;&#38405;<a href="#mapping-generated" title="5.6.&nbsp;&#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;">&#31532;&nbsp;5.6&nbsp;&#33410; &#8220;&#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;&#8221;</a>&#30340;&#35752;&#35770;&#12290;
                        </p></td></tr></table></div></div><p>
                &#27880;&#24847;&#65292;<tt class="literal">&lt;timestamp&gt;</tt> &#21644;<tt class="literal">&lt;version type="timestamp"&gt;</tt>&#26159;&#31561;&#20215;&#30340;&#12290;&#24182;&#19988;<tt class="literal">&lt;timestamp source="db"&gt;</tt>&#21644;<tt class="literal">&lt;version type="dbtimestamp"&gt;</tt>&#26159;&#31561;&#20215;&#30340;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-property"></a>5.1.9.&nbsp;property</h3></div></div><div></div></div><p>
                <tt class="literal">&lt;property&gt;</tt>&#20803;&#32032;&#20026;&#31867;&#23450;&#20041;&#20102;&#19968;&#20010;&#25345;&#20037;&#21270;&#30340;,JavaBean&#39118;&#26684;&#30340;&#23646;&#24615;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;property
        name="propertyName"                                          <span class="co">(1)</span>
        column="column_name"                                         <span class="co">(2)</span>
        type="typename"                                              <span class="co">(3)</span>
        update="true|false"                                          <span class="co">(4)</span>
        insert="true|false"                                          <span class="co">(4)</span>
        formula="arbitrary SQL expression"                           <span class="co">(5)</span>
        access="field|property|ClassName"                            <span class="co">(6)</span>
        lazy="true|false"                                            <span class="co">(7)</span>
        unique="true|false"                                          <span class="co">(8)</span>
        not-null="true|false"                                        <span class="co">(9)</span>
        optimistic-lock="true|false"                                 <span class="co">(10)</span>
        generated="never|insert|always"                              <span class="co">(11)</span>
        node="element-name|@attribute-name|element/@attribute|."

        index="index_name"
        unique_key="unique_key_id"
        length="L"
        precision="P"
        scale="S"
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23646;&#24615;&#30340;&#21517;&#23383;,&#20197;&#23567;&#20889;&#23383;&#27597;&#24320;&#22836;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#23646;&#24615;&#21517;&#23383;): &#23545;&#24212;&#30340;&#25968;&#25454;&#24211;&#23383;&#27573;&#21517;&#12290;
                            &#20063;&#21487;&#20197;&#36890;&#36807;&#23884;&#22871;&#30340;<tt class="literal">&lt;column&gt;</tt>&#20803;&#32032;&#25351;&#23450;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#21487;&#36873;): &#19968;&#20010;Hibernate&#31867;&#22411;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">update, insert</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">true</tt>) :
                            &#34920;&#26126;&#29992;&#20110;<tt class="literal">UPDATE</tt> &#21644;/&#25110; <tt class="literal">INSERT</tt>
                            &#30340;SQL&#35821;&#21477;&#20013;&#26159;&#21542;&#21253;&#21547;&#36825;&#20010;&#34987;&#26144;&#23556;&#20102;&#30340;&#23383;&#27573;&#12290;&#36825;&#20108;&#32773;&#22914;&#26524;&#37117;&#35774;&#32622;&#20026;<tt class="literal">false</tt>
                            &#21017;&#34920;&#26126;&#36825;&#26159;&#19968;&#20010;&#8220;&#22806;&#28304;&#24615;&#65288;derived&#65289;&#8221;&#30340;&#23646;&#24615;&#65292;&#23427;&#30340;&#20540;&#26469;&#28304;&#20110;&#26144;&#23556;&#21040;&#21516;&#19968;&#20010;&#65288;&#25110;&#22810;&#20010;&#65289;
                            &#23383;&#27573;&#30340;&#26576;&#20123;&#20854;&#20182;&#23646;&#24615;&#65292;&#25110;&#32773;&#36890;&#36807;&#19968;&#20010;trigger(&#35302;&#21457;&#22120;&#65289;&#25110;&#20854;&#20182;&#31243;&#24207;&#29983;&#25104;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula</tt> (&#21487;&#36873;): &#19968;&#20010;SQL&#34920;&#36798;&#24335;&#65292;&#23450;&#20041;&#20102;&#36825;&#20010;<span class="emphasis"><em>&#35745;&#31639;
                            &#65288;computed&#65289;</em></span> &#23646;&#24615;&#30340;&#20540;&#12290;&#35745;&#31639;&#23646;&#24615;&#27809;&#26377;&#21644;&#23427;&#23545;&#24212;&#30340;&#25968;&#25454;&#24211;&#23383;&#27573;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (&#21487;&#36873; - &#40664;&#35748;&#20540;&#20026; <tt class="literal">property</tt>): 
                            Hibernate&#29992;&#26469;&#35775;&#38382;&#23646;&#24615;&#20540;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">false</tt>): &#25351;&#23450;
                            &#25351;&#23450;&#23454;&#20363;&#21464;&#37327;&#31532;&#19968;&#27425;&#34987;&#35775;&#38382;&#26102;&#65292;&#36825;&#20010;&#23646;&#24615;&#26159;&#21542;&#24310;&#36831;&#25235;&#21462;&#65288;fetched lazily&#65289;&#65288;
                            &#38656;&#35201;&#36816;&#34892;&#26102;&#23383;&#33410;&#30721;&#22686;&#24378;&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique</tt> (&#21487;&#36873;): &#20351;&#29992;DDL&#20026;&#35813;&#23383;&#27573;&#28155;&#21152;&#21807;&#19968;&#30340;&#32422;&#26463;&#12290;
                            &#21516;&#26679;&#65292;&#20801;&#35768;&#23427;&#20316;&#20026;<tt class="literal">property-ref</tt>&#24341;&#29992;&#30340;&#30446;&#26631;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-null</tt> (&#21487;&#36873;): &#20351;&#29992;DDL&#20026;&#35813;&#23383;&#27573;&#28155;&#21152;&#21487;&#21542;&#20026;&#31354;&#65288;nullability&#65289;&#30340;&#32422;&#26463;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">true</tt>): 
                            &#25351;&#23450;&#36825;&#20010;&#23646;&#24615;&#22312;&#20570;&#26356;&#26032;&#26102;&#26159;&#21542;&#38656;&#35201;&#33719;&#24471;&#20048;&#35266;&#38145;&#23450;&#65288;optimistic lock&#65289;&#12290;
                            &#25442;&#21477;&#35805;&#35828;&#65292;&#23427;&#20915;&#23450;&#36825;&#20010;&#23646;&#24615;&#21457;&#29983;&#33039;&#25968;&#25454;&#26102;&#29256;&#26412;&#65288;version&#65289;&#30340;&#20540;&#26159;&#21542;&#22686;&#38271;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">generated</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">never</tt>):
                            &#34920;&#26126;&#27492;&#23646;&#24615;&#20540;&#26159;&#21542;&#23454;&#38469;&#19978;&#26159;&#30001;&#25968;&#25454;&#24211;&#29983;&#25104;&#30340;&#12290;&#35831;&#21442;&#38405;<a href="#mapping-generated" title="5.6.&nbsp;&#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;">&#31532;&nbsp;5.6&nbsp;&#33410; &#8220;&#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;&#8221;</a>&#30340;&#35752;&#35770;&#12290;
                        </p></td></tr></table></div></div><p>
                <span class="emphasis"><em>typename</em></span>&#21487;&#20197;&#26159;&#22914;&#19979;&#20960;&#31181;&#65306;
            </p><div class="orderedlist"><ol type="1" compact><li><p>
                        Hibernate&#22522;&#26412;&#31867;&#22411;&#21517;&#65288;&#27604;&#22914;&#65306;<tt class="literal">integer, string, character,date, timestamp,
                         float, binary, serializable, object, blob</tt>&#65289;&#12290;
                    </p></li><li><p>
                        &#19968;&#20010;Java&#31867;&#30340;&#21517;&#23383;&#65292;&#36825;&#20010;&#31867;&#23646;&#20110;&#19968;&#31181;&#40664;&#35748;&#22522;&#30784;&#31867;&#22411; 
                        (&#27604;&#22914;&#65306; <tt class="literal">int, float,char, java.lang.String, java.util.Date, java.lang.Integer, 
                        java.sql.Clob</tt>)&#12290;
                    </p></li><li><p>
                        &#19968;&#20010;&#21487;&#20197;&#24207;&#21015;&#21270;&#30340;Java&#31867;&#30340;&#21517;&#23383;&#12290;
                    </p></li><li><p>
                        &#19968;&#20010;&#33258;&#23450;&#20041;&#31867;&#22411;&#30340;&#31867;&#30340;&#21517;&#23383;&#12290;&#65288;&#27604;&#22914;&#65306; <tt class="literal">com.illflow.type.MyCustomType</tt>)&#12290;
                    </p></li></ol></div><p>
                &#22914;&#26524;&#20320;&#27809;&#26377;&#25351;&#23450;&#31867;&#22411;&#65292;Hibernarte&#20250;&#20351;&#29992;&#21453;&#23556;&#26469;&#24471;&#21040;&#36825;&#20010;&#21517;&#23383;&#30340;&#23646;&#24615;&#65292;&#20197;&#27492;&#26469;&#29468;&#27979;&#27491;&#30830;&#30340;Hibernate&#31867;&#22411;&#12290;
                Hibernate&#20250;&#25353;&#29031;&#35268;&#21017;2,3,4&#30340;&#39034;&#24207;&#23545;&#23646;&#24615;&#35835;&#21462;&#22120;(getter&#26041;&#27861;&#65289;&#30340;&#36820;&#22238;&#31867;&#36827;&#34892;&#35299;&#37322;&#12290;&#28982;&#32780;&#65292;&#36825;&#36824;&#19981;&#22815;&#12290;
                &#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#20320;&#20173;&#28982;&#38656;&#35201;<tt class="literal">type</tt>&#23646;&#24615;&#12290;&#65288;&#27604;&#22914;&#65292;&#20026;&#20102;&#21306;&#21035;<tt class="literal">Hibernate.DATE</tt>
                &#21644;<tt class="literal">Hibernate.TIMESTAMP</tt>,&#25110;&#32773;&#20026;&#20102;&#25351;&#23450;&#19968;&#20010;&#33258;&#23450;&#20041;&#31867;&#22411;&#12290;&#65289;
            </p><p>
            	<tt class="literal">access</tt>&#23646;&#24615;&#29992;&#26469;&#35753;&#20320;&#25511;&#21046;Hibernate&#22914;&#20309;&#22312;&#36816;&#34892;&#26102;&#35775;&#38382;&#23646;&#24615;&#12290;&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;
            	Hibernate&#20250;&#20351;&#29992;&#23646;&#24615;&#30340;get/set&#26041;&#27861;&#23545;&#65288;pair&#65289;&#12290;&#22914;&#26524;&#20320;&#25351;&#26126;<tt class="literal">access="field"</tt>,
            	Hibernate&#20250;&#24573;&#30053;get/set&#26041;&#27861;&#23545;&#65292;&#30452;&#25509;&#20351;&#29992;&#21453;&#23556;&#26469;&#35775;&#38382;&#25104;&#21592;&#21464;&#37327;&#12290;&#20320;&#20063;&#21487;&#20197;&#25351;&#23450;&#20320;&#33258;&#24049;&#30340;&#31574;&#30053;&#65292;
            	&#36825;&#23601;&#38656;&#35201;&#20320;&#33258;&#24049;&#23454;&#29616;<tt class="literal">org.hibernate.property.PropertyAccessor</tt>&#25509;&#21475;&#65292;
            	&#20877;&#22312;access&#20013;&#35774;&#32622;&#20320;&#33258;&#23450;&#20041;&#31574;&#30053;&#31867;&#30340;&#21517;&#23383;&#12290;
            </p><p>
                &#34893;&#29983;&#23646;&#24615;&#65288;derive propertie&#65289;&#26159;&#19968;&#20010;&#29305;&#21035;&#24378;&#22823;&#30340;&#29305;&#24449;&#12290;&#36825;&#20123;&#23646;&#24615;&#24212;&#35813;&#23450;&#20041;&#20026;&#21482;&#35835;&#65292;&#23646;&#24615;&#20540;&#22312;&#35013;&#36733;&#26102;&#35745;&#31639;&#29983;&#25104;&#12290;
                &#20320;&#29992;&#19968;&#20010;SQL&#34920;&#36798;&#24335;&#29983;&#25104;&#35745;&#31639;&#30340;&#32467;&#26524;&#65292;&#23427;&#20250;&#22312;&#36825;&#20010;&#23454;&#20363;&#36716;&#36733;&#26102;&#32763;&#35793;&#25104;&#19968;&#20010;SQL&#26597;&#35810;&#30340;<tt class="literal">SELECT</tt>
                &#23376;&#26597;&#35810;&#35821;&#21477;&#12290;
            </p><pre class="programlisting">
&lt;property name="totalPrice"
    formula="( SELECT SUM (li.quantity*p.price) FROM LineItem li, Product p
                WHERE li.productId = p.productId
                AND li.customerId = customerId
                AND li.orderNumber = orderNumber )"/&gt;</pre><p>
                &#27880;&#24847;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#23454;&#20307;&#33258;&#24049;&#30340;&#34920;&#65292;&#32780;&#19981;&#29992;&#20026;&#36825;&#20010;&#29305;&#21035;&#30340;&#21015;&#23450;&#20041;&#21035;&#21517;&#65288;
                &#19978;&#38754;&#20363;&#23376;&#20013;&#30340;<tt class="literal">customerId</tt>&#65289;&#12290;&#21516;&#26102;&#27880;&#24847;&#65292;&#22914;&#26524;&#20320;&#19981;&#21916;&#27426;&#20351;&#29992;&#23646;&#24615;&#65292;
                &#20320;&#21487;&#20197;&#20351;&#29992;&#23884;&#22871;&#30340;<tt class="literal">&lt;formula&gt;</tt>&#26144;&#23556;&#20803;&#32032;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-manytoone"></a>5.1.10.&nbsp;&#22810;&#23545;&#19968;&#65288;many-to-one&#65289;</h3></div></div><div></div></div><p>
                &#36890;&#36807;<tt class="literal">many-to-one</tt>&#20803;&#32032;,&#21487;&#20197;&#23450;&#20041;&#19968;&#31181;&#24120;&#35265;&#30340;&#19982;&#21478;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#30340;&#20851;&#32852;&#12290;
                &#36825;&#31181;&#20851;&#31995;&#27169;&#22411;&#26159;&#22810;&#23545;&#19968;&#20851;&#32852;&#65288;&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;&#23545;&#35937;&#24341;&#29992;&#65293;&#35793;&#27880;&#65289;&#65306;&#36825;&#20010;&#34920;&#30340;&#19968;&#20010;&#22806;&#38190;&#24341;&#29992;&#30446;&#26631;&#34920;&#30340;
                &#20027;&#38190;&#23383;&#27573;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;many-to-one
        name="propertyName"                                          <span class="co">(1)</span>
        column="column_name"                                         <span class="co">(2)</span>
        class="ClassName"                                            <span class="co">(3)</span>
        cascade="cascade_style"                                      <span class="co">(4)</span>
        fetch="join|select"                                          <span class="co">(5)</span>
        update="true|false"                                          <span class="co">(6)</span>
        insert="true|false"                                          <span class="co">(6)</span>
        property-ref="propertyNameFromAssociatedClass"               <span class="co">(7)</span>
        access="field|property|ClassName"                            <span class="co">(8)</span>
        unique="true|false"                                          <span class="co">(9)</span>
        not-null="true|false"                                        <span class="co">(10)</span>
        optimistic-lock="true|false"                                 <span class="co">(11)</span>
        lazy="proxy|no-proxy|false"                                  <span class="co">(12)</span>
        not-found="ignore|exception"                                 <span class="co">(13)</span>
        entity-name="EntityName"                                     <span class="co">(14)</span>
        formula="arbitrary SQL expression"                           <span class="co">(15)</span>
        node="element-name|@attribute-name|element/@attribute|."

        embed-xml="true|false"
        index="index_name"
        unique_key="unique_key_id"
        foreign-key="foreign_key_name"
        
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23646;&#24615;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (&#21487;&#36873;): &#22806;&#38388;&#23383;&#27573;&#21517;&#12290;&#23427;&#20063;&#21487;&#20197;&#36890;&#36807;&#23884;&#22871;&#30340;
                            <tt class="literal">&lt;column&gt;</tt>&#20803;&#32032;&#25351;&#23450;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159;&#36890;&#36807;&#21453;&#23556;&#24471;&#21040;&#23646;&#24615;&#31867;&#22411;): &#20851;&#32852;&#30340;&#31867;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade&#65288;&#32423;&#32852;&#65289;</tt> (&#21487;&#36873;): &#25351;&#26126;&#21738;&#20123;&#25805;&#20316;&#20250;&#20174;&#29238;&#23545;&#35937;&#32423;&#32852;&#21040;&#20851;&#32852;&#30340;&#23545;&#35937;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">fetch</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">select</tt>):
			    &#22312;&#22806;&#36830;&#25509;&#25235;&#21462;&#65288;outer-join fetching&#65289;&#21644;&#24207;&#21015;&#36873;&#25321;&#25235;&#21462;&#65288;sequential select fetching&#65289;&#20004;&#32773;&#20013;&#36873;&#25321;&#20854;&#19968;&#12290; 
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">update, insert</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">true</tt>) 
                            &#25351;&#23450;&#23545;&#24212;&#30340;&#23383;&#27573;&#26159;&#21542;&#21253;&#21547;&#22312;&#29992;&#20110;<tt class="literal">UPDATE</tt> &#21644;/&#25110; <tt class="literal">INSERT</tt>
                            &#30340;SQL&#35821;&#21477;&#20013;&#12290;&#22914;&#26524;&#20108;&#32773;&#37117;&#26159;<tt class="literal">false</tt>,&#21017;&#36825;&#26159;&#19968;&#20010;&#32431;&#31929;&#30340;
                            &#8220;&#22806;&#28304;&#24615;&#65288;derived&#65289;&#8221;&#20851;&#32852;&#65292;&#23427;&#30340;&#20540;&#26159;&#36890;&#36807;&#26144;&#23556;&#21040;&#21516;&#19968;&#20010;&#65288;&#25110;&#22810;&#20010;&#65289;&#23383;&#27573;&#30340;&#26576;&#20123;&#20854;&#20182;&#23646;&#24615;&#24471;&#21040;
                            &#25110;&#32773;&#36890;&#36807;trigger(&#35302;&#21457;&#22120;&#65289;&#12289;&#25110;&#20854;&#20182;&#31243;&#24207;&#29983;&#25104;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">property-ref</tt>: (&#21487;&#36873;) &#25351;&#23450;&#20851;&#32852;&#31867;&#30340;&#19968;&#20010;&#23646;&#24615;&#65292;&#36825;&#20010;&#23646;&#24615;&#23558;&#20250;&#21644;&#26412;&#22806;&#38190;&#30456;&#23545;&#24212;&#12290;
                            &#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#65292;&#20250;&#20351;&#29992;&#23545;&#26041;&#20851;&#32852;&#31867;&#30340;&#20027;&#38190;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">property</tt>): 
                            Hibernate&#29992;&#26469;&#35775;&#38382;&#23646;&#24615;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique</tt> (&#21487;&#36873;): &#20351;&#29992;DDL&#20026;&#22806;&#38190;&#23383;&#27573;&#29983;&#25104;&#19968;&#20010;&#21807;&#19968;&#32422;&#26463;&#12290;&#27492;&#22806;&#65292;
                            &#36825;&#20063;&#21487;&#20197;&#29992;&#20316;<tt class="literal">property-ref</tt>&#30340;&#30446;&#26631;&#23646;&#24615;&#12290;&#36825;&#20351;&#20851;&#32852;&#21516;&#26102;&#20855;&#26377;
                            &#19968;&#23545;&#19968;&#30340;&#25928;&#26524;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-null</tt> (&#21487;&#36873;): &#20351;&#29992;DDL&#20026;&#22806;&#38190;&#23383;&#27573;&#29983;&#25104;&#19968;&#20010;&#38750;&#31354;&#32422;&#26463;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">true</tt>): 
                            &#25351;&#23450;&#36825;&#20010;&#23646;&#24615;&#22312;&#20570;&#26356;&#26032;&#26102;&#26159;&#21542;&#38656;&#35201;&#33719;&#24471;&#20048;&#35266;&#38145;&#23450;&#65288;optimistic lock&#65289;&#12290;
                            &#25442;&#21477;&#35805;&#35828;&#65292;&#23427;&#20915;&#23450;&#36825;&#20010;&#23646;&#24615;&#21457;&#29983;&#33039;&#25968;&#25454;&#26102;&#29256;&#26412;&#65288;version&#65289;&#30340;&#20540;&#26159;&#21542;&#22686;&#38271;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">proxy</tt>): 
                            &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#21333;&#28857;&#20851;&#32852;&#26159;&#32463;&#36807;&#20195;&#29702;&#30340;&#12290;<tt class="literal">lazy="no-proxy"</tt>&#25351;&#23450;&#27492;&#23646;&#24615;&#24212;&#35813;&#22312;&#23454;&#20363;&#21464;&#37327;&#31532;&#19968;&#27425;&#34987;&#35775;&#38382;&#26102;&#24212;&#35813;&#24310;&#36831;&#25235;&#21462;&#65288;fetche lazily&#65289;&#65288;&#38656;&#35201;&#36816;&#34892;&#26102;&#23383;&#33410;&#30721;&#30340;&#22686;&#24378;&#65289;&#12290;
                            <tt class="literal">lazy="false"</tt>&#25351;&#23450;&#27492;&#20851;&#32852;&#24635;&#26159;&#34987;&#39044;&#20808;&#25235;&#21462;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(12)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-found</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">exception</tt>): 
                            &#25351;&#23450;&#22806;&#38190;&#24341;&#29992;&#30340;&#25968;&#25454;&#19981;&#23384;&#22312;&#26102;&#22914;&#20309;&#22788;&#29702;&#65306;
                            <tt class="literal">ignore</tt>&#20250;&#23558;&#34892;&#25968;&#25454;&#19981;&#23384;&#22312;&#35270;&#20026;&#19968;&#20010;&#31354;&#65288;null&#65289;&#20851;&#32852;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(13)</td><td valign="top" align="left"><p>
                            <tt class="literal">entity-name</tt> (&#21487;&#36873;): &#34987;&#20851;&#32852;&#30340;&#31867;&#30340;&#23454;&#20307;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(14)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula</tt> (&#21487;&#36873;): 
                            SQL&#34920;&#36798;&#24335;&#65292;&#29992;&#20110;&#23450;&#20041;<span class="emphasis"><em>computed&#65288;&#35745;&#31639;&#20986;&#30340;&#65289;</em></span>&#22806;&#38190;&#20540;&#12290;
                        </p></td></tr></table></div></div><p>
                <tt class="literal">cascade</tt>&#23646;&#24615;&#35774;&#32622;&#20026;&#38500;&#20102;<tt class="literal">none</tt>&#20197;&#22806;&#20219;&#20309;&#26377;&#24847;&#20041;&#30340;&#20540;&#65292;
                &#23427;&#23558;&#25226;&#29305;&#23450;&#30340;&#25805;&#20316;&#20256;&#36882;&#21040;&#20851;&#32852;&#23545;&#35937;&#20013;&#12290;&#36825;&#20010;&#20540;&#23601;&#20195;&#34920;&#30528;Hibernate&#22522;&#26412;&#25805;&#20316;&#30340;&#21517;&#31216;&#65292;
                <tt class="literal">persist, merge, delete, save-update, evict, replicate, lock, refresh</tt>&#65292;
                &#20197;&#21450;&#29305;&#21035;&#30340;&#20540;<tt class="literal">delete-orphan</tt>&#21644;<tt class="literal">all</tt>&#65292;&#24182;&#19988;&#21487;&#20197;&#29992;&#36887;&#21495;&#20998;&#38548;&#31526;
                &#26469;&#32452;&#21512;&#36825;&#20123;&#25805;&#20316;&#65292;&#20363;&#22914;&#65292;<tt class="literal">cascade="persist,merge,evict"</tt>&#25110;
                <tt class="literal">cascade="all,delete-orphan"</tt>&#12290;&#26356;&#20840;&#38754;&#30340;&#35299;&#37322;&#35831;&#21442;&#32771;<a href="#objectstate-transitive" title="10.11.&nbsp;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)">&#31532;&nbsp;10.11&nbsp;&#33410; &#8220;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)&#8221;</a>. &#27880;&#24847;&#65292;&#21333;&#20540;&#20851;&#32852; (many-to-one &#21644; 
                one-to-one &#20851;&#32852;) &#19981;&#25903;&#25345;&#21024;&#38500;&#23396;&#20799;&#65288;orphan delete&#65292;&#21024;&#38500;&#19981;&#20877;&#34987;&#24341;&#29992;&#30340;&#20540;&#65289;.
                
                
            </p><p>
                &#19968;&#20010;&#20856;&#22411;&#30340;&#31616;&#21333;<tt class="literal">many-to-one</tt>&#23450;&#20041;&#20363;&#23376;&#65306;
            </p><pre class="programlisting">&lt;many-to-one name="product" class="Product" column="PRODUCT_ID"/&gt;</pre><p>
                <tt class="literal">property-ref</tt>&#23646;&#24615;&#21482;&#24212;&#35813;&#29992;&#26469;&#23545;&#20184;&#36951;&#30041;&#19979;&#26469;&#30340;&#25968;&#25454;&#24211;&#31995;&#32479;&#65292;
                &#21487;&#33021;&#26377;&#22806;&#38190;&#25351;&#21521;&#23545;&#26041;&#20851;&#32852;&#34920;&#30340;&#26159;&#20010;&#38750;&#20027;&#38190;&#23383;&#27573;&#65288;&#20294;&#26159;&#24212;&#35813;&#26159;&#19968;&#20010;&#24799;&#19968;&#20851;&#38190;&#23383;&#65289;&#30340;&#24773;&#20917;&#19979;&#12290;
                &#36825;&#26159;&#19968;&#31181;&#21313;&#20998;&#19985;&#38475;&#30340;&#20851;&#31995;&#27169;&#22411;&#12290;&#27604;&#22914;&#35828;&#65292;&#20551;&#35774;<tt class="literal">Product</tt>&#31867;&#26377;&#19968;&#20010;&#24799;&#19968;&#30340;&#24207;&#21015;&#21495;&#65292;
                &#23427;&#24182;&#19981;&#26159;&#20027;&#38190;&#12290;&#65288;<tt class="literal">unique</tt>&#23646;&#24615;&#25511;&#21046;Hibernate&#36890;&#36807;SchemaExport&#24037;&#20855;&#36827;&#34892;&#30340;DDL&#29983;&#25104;&#12290;&#65289;
            </p><pre class="programlisting">&lt;property name="serialNumber" unique="true" type="string" column="SERIAL_NUMBER"/&gt;</pre><p>
                &#37027;&#20040;&#20851;&#20110;<tt class="literal">OrderItem</tt> &#30340;&#26144;&#23556;&#21487;&#33021;&#26159;&#65306;
            </p><pre class="programlisting">&lt;many-to-one name="product" property-ref="serialNumber" column="PRODUCT_SERIAL_NUMBER"/&gt;</pre><p>
                &#24403;&#28982;&#65292;&#25105;&#20204;&#20915;&#19981;&#40723;&#21169;&#36825;&#31181;&#29992;&#27861;&#12290;
            </p><p>
                &#22914;&#26524;&#34987;&#24341;&#29992;&#30340;&#21807;&#19968;&#20027;&#38190;&#30001;&#20851;&#32852;&#23454;&#20307;&#30340;&#22810;&#20010;&#23646;&#24615;&#32452;&#25104;&#65292;&#20320;&#24212;&#35813;&#22312;&#21517;&#31216;&#20026;<tt class="literal">&lt;properties&gt;</tt>&#30340;&#20803;&#32032;
                &#37324;&#38754;&#26144;&#23556;&#25152;&#26377;&#20851;&#32852;&#30340;&#23646;&#24615;&#12290;
            </p><p>
            	&#20551;&#33509;&#34987;&#24341;&#29992;&#30340;&#21807;&#19968;&#20027;&#38190;&#26159;&#32452;&#20214;&#30340;&#23646;&#24615;&#65292;&#20320;&#21487;&#20197;&#25351;&#23450;&#23646;&#24615;&#36335;&#24452;&#65306;
            </p><pre class="programlisting">&lt;many-to-one name="owner" property-ref="identity.ssn" column="OWNER_SSN"/&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-onetoone"></a>5.1.11.&nbsp;&#19968;&#23545;&#19968;</h3></div></div><div></div></div><p>
		&#25345;&#20037;&#21270;&#23545;&#35937;&#20043;&#38388;&#19968;&#23545;&#19968;&#30340;&#20851;&#32852;&#20851;&#31995;&#26159;&#36890;&#36807;<tt class="literal">one-to-one</tt>&#20803;&#32032;&#23450;&#20041;&#30340;&#12290;
	     </p><div class="programlistingco"><pre class="programlisting">&lt;one-to-one
        name="propertyName"                                          <span class="co">(1)</span>
        class="ClassName"                                            <span class="co">(2)</span>
        cascade="cascade_style"                                      <span class="co">(3)</span>
        constrained="true|false"                                     <span class="co">(4)</span>
        fetch="join|select"                                          <span class="co">(5)</span>
        property-ref="propertyNameFromAssociatedClass"               <span class="co">(6)</span>
        access="field|property|ClassName"                            <span class="co">(7)</span>
        formula="any SQL expression"                                 <span class="co">(8)</span>
        lazy="proxy|no-proxy|false"                                  <span class="co">(9)</span>
        entity-name="EntityName"                                     <span class="co">(10)</span>
        node="element-name|@attribute-name|element/@attribute|."

        embed-xml="true|false"
        foreign-key="foreign_key_name"
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23646;&#24615;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt>  (&#21487;&#36873; - &#40664;&#35748;&#26159;&#36890;&#36807;&#21453;&#23556;&#24471;&#21040;&#30340;&#23646;&#24615;&#31867;&#22411;)&#65306;&#34987;&#20851;&#32852;&#30340;&#31867;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade(&#32423;&#32852;)</tt> (&#21487;&#36873;) &#34920;&#26126;&#25805;&#20316;&#26159;&#21542;&#20174;&#29238;&#23545;&#35937;&#32423;&#32852;&#21040;&#34987;&#20851;&#32852;&#30340;&#23545;&#35937;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">constrained(&#32422;&#26463;)</tt> (&#21487;&#36873;) &#34920;&#26126;&#35813;&#31867;&#23545;&#24212;&#30340;&#34920;&#23545;&#24212;&#30340;&#25968;&#25454;&#24211;&#34920;&#65292;&#21644;&#34987;&#20851;&#32852;&#30340;&#23545;&#35937;&#25152;&#23545;&#24212;&#30340;&#25968;&#25454;&#24211;&#34920;&#20043;&#38388;&#65292;&#36890;&#36807;&#19968;&#20010;&#22806;&#38190;&#24341;&#29992;&#23545;&#20027;&#38190;&#36827;&#34892;&#32422;&#26463;&#12290;
                           &#36825;&#20010;&#36873;&#39033;&#24433;&#21709;<tt class="literal">save()</tt>&#21644;<tt class="literal">delete()</tt>&#22312;&#32423;&#32852;&#25191;&#34892;&#26102;&#30340;&#20808;&#21518;&#39034;&#24207;&#20197;&#21450;
                            &#20915;&#23450;&#35813;&#20851;&#32852;&#33021;&#21542;&#34987;&#22996;&#25176;(&#20063;&#22312;schema export tool&#20013;&#34987;&#20351;&#29992;).
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">fetch</tt> (&#21487;&#36873; - &#40664;&#35748;&#35774;&#32622;&#20026;<tt class="literal">&#36873;&#25321;</tt>): 
                            &#22312;&#22806;&#36830;&#25509;&#25235;&#21462;&#25110;&#32773;&#24207;&#21015;&#36873;&#25321;&#25235;&#21462;&#36873;&#25321;&#20854;&#19968;.                            
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">property-ref</tt>: (&#21487;&#36873;) &#25351;&#23450;&#20851;&#32852;&#31867;&#30340;&#23646;&#24615;&#21517;&#65292;&#36825;&#20010;&#23646;&#24615;&#23558;&#20250;&#21644;&#26412;&#31867;&#30340;&#20027;&#38190;&#30456;&#23545;&#24212;&#12290;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#65292;&#20250;&#20351;&#29992;&#23545;&#26041;&#20851;&#32852;&#31867;&#30340;&#20027;&#38190;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt>  (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">property</tt>): Hibernate&#29992;&#26469;&#35775;&#38382;&#23646;&#24615;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula </tt> (&#21487;&#36873;):&#32477;&#22823;&#22810;&#25968;&#19968;&#23545;&#19968;&#30340;&#20851;&#32852;&#37117;&#25351;&#21521;&#20854;&#23454;&#20307;&#30340;&#20027;&#38190;&#12290;&#22312;&#19968;&#20123;&#23569;&#35265;&#30340;&#24773;&#20917;&#20013;&#65292; &#20320;&#21487;&#33021;&#20250;&#25351;&#21521;&#20854;&#20182;&#30340;&#19968;&#20010;&#25110;&#22810;&#20010;&#23383;&#27573;&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#65292;&#36825;&#20123;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#29992;&#19968;&#20010;SQL&#20844;&#24335;&#26469;&#34920;&#31034;&#12290; &#65288;&#21487;&#20197;&#22312;org.hibernate.test.onetooneformula&#25214;&#21040;&#20363;&#23376;&#65289;

                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">proxy</tt>): 
                            &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#21333;&#28857;&#20851;&#32852;&#26159;&#32463;&#36807;&#20195;&#29702;&#30340;&#12290;<tt class="literal">lazy="no-proxy"</tt>&#25351;&#23450;&#27492;&#23646;&#24615;&#24212;&#35813;&#22312;&#23454;&#20363;&#21464;&#37327;&#31532;&#19968;&#27425;&#34987;&#35775;&#38382;&#26102;&#24212;&#35813;&#24310;&#36831;&#25235;&#21462;&#65288;fetche lazily&#65289;&#65288;&#38656;&#35201;&#36816;&#34892;&#26102;&#23383;&#33410;&#30721;&#30340;&#22686;&#24378;&#65289;&#12290;
                            <tt class="literal">lazy="false"</tt>&#25351;&#23450;&#27492;&#20851;&#32852;&#24635;&#26159;&#34987;&#39044;&#20808;&#25235;&#21462;&#12290;<span class="emphasis"><em>&#27880;&#24847;&#65292;&#22914;&#26524;<tt class="literal">constrained="false"</tt>,
                            &#19981;&#21487;&#33021;&#20351;&#29992;&#20195;&#29702;&#65292;Hibernate&#20250;&#37319;&#21462;&#39044;&#20808;&#25235;&#21462;&#65281;</em></span>
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">entity-name</tt> (&#21487;&#36873;): &#34987;&#20851;&#32852;&#30340;&#31867;&#30340;&#23454;&#20307;&#21517;&#12290;
                        </p></td></tr></table></div></div><p>
                &#26377;&#20004;&#31181;&#19981;&#21516;&#30340;&#19968;&#23545;&#19968;&#20851;&#32852;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                &#20027;&#38190;&#20851;&#32852;
            </p></li><li><p>
                &#24799;&#19968;&#22806;&#38190;&#20851;&#32852;
            </p></li></ul></div><p>
                &#20027;&#38190;&#20851;&#32852;&#19981;&#38656;&#35201;&#39069;&#22806;&#30340;&#34920;&#23383;&#27573;&#65307;&#22914;&#26524;&#20004;&#34892;&#26159;&#36890;&#36807;&#36825;&#31181;&#19968;&#23545;&#19968;&#20851;&#31995;&#30456;&#20851;&#32852;&#30340;&#65292;&#37027;&#20040;&#36825;&#20004;&#34892;&#23601;&#20849;&#20139;&#21516;&#26679;&#30340;&#20027;&#20851;&#38190;&#23383;&#20540;&#12290;&#25152;&#20197;&#22914;&#26524;&#20320;&#24076;&#26395;&#20004;&#20010;&#23545;&#35937;&#36890;&#36807;&#20027;&#38190;&#19968;&#23545;&#19968;&#20851;&#32852;&#65292;&#20320;&#24517;&#39035;&#30830;&#35748;&#23427;&#20204;&#34987;&#36171;&#20104;&#21516;&#26679;&#30340;&#26631;&#35782;&#20540;&#65281;
            </p><p>
                &#27604;&#22914;&#35828;&#65292;&#23545;&#19979;&#38754;&#30340;<tt class="literal">Employee</tt>&#21644;<tt class="literal">Person</tt>&#36827;&#34892;&#20027;&#38190;&#19968;&#23545;&#19968;&#20851;&#32852;:
            </p><pre class="programlisting">&lt;one-to-one name="person" class="Person"/&gt;</pre><pre class="programlisting">&lt;one-to-one name="employee" class="Employee" constrained="true"/&gt;</pre><p>
                &#29616;&#22312;&#25105;&#20204;&#24517;&#39035;&#30830;&#20445;PERSON&#21644;EMPLOYEE&#20013;&#30456;&#20851;&#30340;&#23383;&#27573;&#26159;&#30456;&#31561;&#30340;&#12290;&#25105;&#20204;&#20351;&#29992;&#19968;&#20010;&#34987;&#25104;&#20026;<tt class="literal">foreign</tt>&#30340;&#29305;&#27530;&#30340;hibernate&#26631;&#35782;&#31526;&#29983;&#25104;&#31574;&#30053;&#65306;
            </p><pre class="programlisting">&lt;class name="person" table="PERSON"&gt;
    &lt;id name="id" column="PERSON_ID"&gt;
        &lt;generator class="foreign"&gt;
            &lt;param name="property"&gt;employee&lt;/param&gt;
        &lt;/generator&gt;
    &lt;/id&gt;
    ...
    &lt;one-to-one name="employee"
        class="Employee"
        constrained="true"/&gt;
&lt;/class&gt;</pre><p>
                &#19968;&#20010;&#21018;&#21018;&#20445;&#23384;&#30340;<tt class="literal">Person</tt>&#23454;&#20363;&#34987;&#36171;&#20104;&#21644;&#35813;<tt class="literal">Person</tt>&#30340;<tt class="literal">employee</tt>&#23646;&#24615;&#25152;&#25351;&#21521;&#30340;<tt class="literal">Employee</tt>&#23454;&#20363;&#21516;&#26679;&#30340;&#20851;&#38190;&#23383;&#20540;&#12290;
            </p><p>
                &#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#19968;&#20010;&#22806;&#38190;&#21644;&#19968;&#20010;&#24799;&#19968;&#20851;&#38190;&#23383;&#23545;&#24212;&#65292;&#19978;&#38754;&#30340;<tt class="literal">Employee</tt>&#21644;<tt class="literal">Person</tt>&#30340;&#20363;&#23376;&#65292;&#22914;&#26524;&#20351;&#29992;&#36825;&#31181;&#20851;&#32852;&#26041;&#24335;&#65292;&#21487;&#20197;&#34920;&#36798;&#25104;&#65306;
            </p><pre class="programlisting">&lt;many-to-one name="person" class="Person" column="PERSON_ID" unique="true"/&gt;</pre><p>
                &#22914;&#26524;&#22312;<tt class="literal">Person</tt>&#30340;&#26144;&#23556;&#21152;&#20837;&#19979;&#38754;&#20960;&#21477;&#65292;&#36825;&#31181;&#20851;&#32852;&#23601;&#26159;&#21452;&#21521;&#30340;&#65306;
            </p><pre class="programlisting">&lt;one-to-one name"employee" class="Employee" property-ref="person"/&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-naturalid"></a>5.1.12.&nbsp;&#33258;&#28982;ID(natural-id)</h3></div></div><div></div></div><pre class="programlisting">&lt;natural-id mutable="true|false"/&gt;
        &lt;property ... /&gt;
        &lt;many-to-one ... /&gt;
        ......
&lt;/natural-id&gt;</pre><p>
                &#25105;&#20204;&#24314;&#35758;&#20351;&#29992;&#20195;&#29992;&#38190;&#65288;&#38190;&#20540;&#19981;&#20855;&#22791;&#23454;&#38469;&#24847;&#20041;&#65289;&#20316;&#20026;&#20027;&#38190;&#65292;&#25105;&#20204;&#20173;&#28982;&#24212;&#35813;&#23581;&#35797;&#20026;&#25152;&#26377;&#30340;&#23454;&#20307;&#37319;&#29992;&#33258;&#28982;&#30340;&#38190;&#20540;&#20316;&#20026;&#65288;&#38468;&#21152;&#8212;&#8212;&#35793;&#32773;&#27880;&#65289;&#26631;&#31034;&#12290;&#33258;&#28982;&#38190;&#65288;natural key&#65289;&#26159;&#21333;&#20010;&#25110;&#32452;&#21512;&#23646;&#24615;&#65292;&#20182;&#20204;&#24517;&#39035;&#21807;&#19968;&#19988;&#38750;&#31354;&#12290;&#22914;&#26524;&#23427;&#36824;&#26159;&#19981;&#21487;&#21464;&#30340;&#37027;&#23601;&#26356;&#29702;&#24819;&#20102;&#12290;&#22312;<tt class="literal">&lt;natural-id&gt;</tt>&#20803;&#32032;&#20013;&#21015;&#20986;&#33258;&#28982;&#38190;&#30340;&#23646;&#24615;&#12290;Hibernate&#20250;&#24110;&#20320;&#29983;&#25104;&#24517;&#39035;&#30340;&#21807;&#19968;&#38190;&#20540;&#21644;&#38750;&#31354;&#32422;&#26463;&#65292;&#20320;&#30340;&#26144;&#23556;&#20250;&#26356;&#21152;&#30340;&#26126;&#26174;&#26131;&#25026;&#65288;&#21407;&#25991;&#26159;self-documenting&#65292;&#33258;&#25105;&#27880;&#35299;&#65289;&#12290;
            </p><p>
                &#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#20320;&#23454;&#29616;<tt class="literal">equals()</tt> &#21644;<tt class="literal">hashCode()</tt>&#26041;&#27861;,&#26469;&#27604;&#36739;&#23454;&#20307;&#30340;&#33258;&#28982;&#38190;&#23646;&#24615;&#12290;
            </p><p>
                &#36825;&#19968;&#26144;&#23556;&#19981;&#26159;&#20026;&#20102;&#25226;&#33258;&#28982;&#38190;&#20316;&#20026;&#20027;&#38190;&#32780;&#20934;&#22791;&#30340;&#12290;
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        <tt class="literal">mutable</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026;<tt class="literal">false</tt>): 
                        &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#33258;&#28982;&#26631;&#35782;&#23646;&#24615;&#34987;&#20551;&#23450;&#20026;&#19981;&#21487;&#21464;&#30340;&#65288;&#24120;&#37327;&#65289;&#12290;
                    </p></li></ul></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-component"></a>5.1.13.&nbsp;&#32452;&#20214;(component), &#21160;&#24577;&#32452;&#20214;(dynamic-component)</h3></div></div><div></div></div><p>
                <tt class="literal">&lt;component&gt;</tt>&#20803;&#32032;&#25226;&#23376;&#23545;&#35937;&#30340;&#19968;&#20123;&#20803;&#32032;&#19982;&#29238;&#31867;&#23545;&#24212;&#30340;&#34920;&#30340;&#19968;&#20123;&#23383;&#27573;&#26144;&#23556;&#36215;&#26469;&#12290; &#28982;&#21518;&#32452;&#20214;&#21487;&#20197;&#23450;&#20041;&#23427;&#20204;&#33258;&#24049;&#30340;&#23646;&#24615;&#12289;&#32452;&#20214;&#25110;&#32773;&#38598;&#21512;&#12290;&#21442;&#35265;&#21518;&#38754;&#30340;&#8220;Components&#8221;&#19968;&#31456;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;component 
        name="propertyName"                 <span class="co">(1)</span>
        class="className"                   <span class="co">(2)</span>
        insert="true|false"                 <span class="co">(3)</span>
        update="true|false"                 <span class="co">(4)</span>
        access="field|property|ClassName"   <span class="co">(5)</span>
        lazy="true|false"                   <span class="co">(6)</span>
        optimistic-lock="true|false"        <span class="co">(7)</span>
        unique="true|false"                 <span class="co">(8)</span>
        node="element-name|."
&gt;
        
        &lt;property ...../&gt;
        &lt;many-to-one .... /&gt;
        ........
&lt;/component&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23646;&#24615;&#21517;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#36890;&#36807;&#21453;&#23556;&#24471;&#21040;&#30340;&#23646;&#24615;&#31867;&#22411;):&#32452;&#20214;(&#23376;)&#31867;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt>: &#34987;&#26144;&#23556;&#30340;&#23383;&#27573;&#26159;&#21542;&#20986;&#29616;&#22312;SQL&#30340;<tt class="literal">INSERT</tt>&#35821;&#21477;&#20013;?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">update</tt>: &#34987;&#26144;&#23556;&#30340;&#23383;&#27573;&#26159;&#21542;&#20986;&#29616;&#22312;SQL&#30340;<tt class="literal">UPDATE</tt>&#35821;&#21477;&#20013;?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">property</tt>): Hibernate&#29992;&#26469;&#35775;&#38382;&#23646;&#24615;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">false</tt>): &#34920;&#26126;&#27492;&#32452;&#20214;&#24212;&#22312;&#23454;&#20363;&#21464;&#37327;&#31532;&#19968;&#27425;&#34987;&#35775;&#38382;&#30340;&#26102;&#20505;&#24310;&#36831;&#21152;&#36733;(&#38656;&#35201;&#32534;&#35793;&#26102;&#23383;&#33410;&#30721;&#35013;&#32622;&#22120;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                                <tt class="literal">optimistic-lock</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">true</tt>):&#34920;&#26126;&#26356;&#26032;&#27492;&#32452;&#20214;&#26159;&#21542;&#38656;&#35201;&#33719;&#21462;&#20048;&#35266;&#38145;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#24403;&#36825;&#20010;&#23646;&#24615;&#21464;&#33039;&#26102;&#65292;&#26159;&#21542;&#22686;&#21152;&#29256;&#26412;&#21495;(Version)
                            </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                                <tt class="literal">unique</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">false</tt>):&#34920;&#26126;&#32452;&#20214;&#26144;&#23556;&#30340;&#25152;&#26377;&#23383;&#27573;&#19978;&#37117;&#26377;&#21807;&#19968;&#24615;&#32422;&#26463;
                            </p></td></tr></table></div></div><p>
                &#20854;<tt class="literal">&lt;property&gt;</tt>&#23376;&#26631;&#31614;&#20026;&#23376;&#31867;&#30340;&#19968;&#20123;&#23646;&#24615;&#19982;&#34920;&#23383;&#27573;&#20043;&#38388;&#24314;&#31435;&#26144;&#23556;&#12290; 
            </p><p>
                <tt class="literal">&lt;component&gt;</tt>&#20803;&#32032;&#20801;&#35768;&#21152;&#20837;&#19968;&#20010;<tt class="literal">&lt;parent&gt;</tt>&#23376;&#20803;&#32032;&#65292;&#22312;&#32452;&#20214;&#31867;&#20869;&#37096;&#23601;&#21487;&#20197;&#26377;&#19968;&#20010;&#25351;&#21521;&#20854;&#23481;&#22120;&#30340;&#23454;&#20307;&#30340;&#21453;&#21521;&#24341;&#29992;&#12290;
            </p><p>
                <tt class="literal">&lt;dynamic-component&gt;</tt>&#20803;&#32032;&#20801;&#35768;&#25226;&#19968;&#20010;<tt class="literal">Map</tt>&#26144;&#23556;&#20026;&#32452;&#20214;&#65292;&#20854;&#23646;&#24615;&#21517;&#23545;&#24212;map&#30340;&#38190;&#20540;&#12290;
                &#21442;&#35265;<a href="#components-dynamic" title="8.5.&nbsp;&#21160;&#24577;&#32452;&#20214; &#65288;Dynamic components&#65289;">&#31532;&nbsp;8.5&nbsp;&#33410; &#8220;&#21160;&#24577;&#32452;&#20214; &#65288;Dynamic components&#65289;&#8221;</a>.
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-properties"></a>5.1.14.&nbsp;properties</h3></div></div><div></div></div><p>
                <tt class="literal">&lt;properties&gt;</tt> &#20803;&#32032;&#20801;&#35768;&#23450;&#20041;&#19968;&#20010;&#21629;&#21517;&#30340;&#36923;&#36753;&#20998;&#32452;(grouping)&#21253;&#21547;&#19968;&#20010;&#31867;&#20013;&#30340;&#22810;&#20010;&#23646;&#24615;&#12290;
                &#36825;&#20010;&#20803;&#32032;&#26368;&#37325;&#35201;&#30340;&#29992;&#22788;&#26159;&#20801;&#35768;&#22810;&#20010;&#23646;&#24615;&#30340;&#32452;&#21512;&#20316;&#20026;<tt class="literal">property-ref</tt>&#30340;&#30446;&#26631;(target)&#12290;
                &#36825;&#20063;&#26159;&#23450;&#20041;&#22810;&#23383;&#27573;&#21807;&#19968;&#32422;&#26463;&#30340;&#19968;&#31181;&#26041;&#20415;&#36884;&#24452;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;properties 
        name="logicalName"                  <span class="co">(1)</span>
        insert="true|false"                 <span class="co">(2)</span>
        update="true|false"                 <span class="co">(3)</span>
        optimistic-lock="true|false"        <span class="co">(4)</span>
        unique="true|false"                 <span class="co">(5)</span>
&gt;
        
        &lt;property ...../&gt;
        &lt;many-to-one .... /&gt;
        ........
&lt;/properties&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#20998;&#32452;&#30340;&#36923;&#36753;&#21517;&#31216; - 
                            <span class="emphasis"><em>&#19981;&#26159;</em></span> &#23454;&#38469;&#23646;&#24615;&#30340;&#21517;&#31216;.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt>: &#34987;&#26144;&#23556;&#30340;&#23383;&#27573;&#26159;&#21542;&#20986;&#29616;&#22312;SQL&#30340;
                            <tt class="literal">INSERT</tt>&#35821;&#21477;&#20013;?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">update</tt>:  &#34987;&#26144;&#23556;&#30340;&#23383;&#27573;&#26159;&#21542;&#20986;&#29616;&#22312;SQL&#30340;
                            <tt class="literal">UPDATE</tt>&#35821;&#21477;&#20013;?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                                <tt class="literal">optimistic-lock</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">true</tt>):&#34920;&#26126;&#26356;&#26032;&#27492;&#32452;&#20214;&#26159;&#21542;&#38656;&#35201;&#33719;&#21462;&#20048;&#35266;&#38145;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#24403;&#36825;&#20010;&#23646;&#24615;&#21464;&#33039;&#26102;&#65292;&#26159;&#21542;&#22686;&#21152;&#29256;&#26412;&#21495;(Version)
                            </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                                <tt class="literal">unique</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">false</tt>):&#34920;&#26126;&#32452;&#20214;&#26144;&#23556;&#30340;&#25152;&#26377;&#23383;&#27573;&#19978;&#37117;&#26377;&#21807;&#19968;&#24615;&#32422;&#26463;
                            </p></td></tr></table></div></div><p>
                &#20363;&#22914;&#65292;&#22914;&#26524;&#25105;&#20204;&#26377;&#22914;&#19979;&#30340;<tt class="literal">&lt;properties&gt;</tt>&#26144;&#23556;:
            </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="personNumber"/&gt;
    ...
    &lt;properties name="name" 
            unique="true" update="false"&gt;
        &lt;property name="firstName"/&gt;
        &lt;property name="initial"/&gt;
        &lt;property name="lastName"/&gt;
    &lt;/properties&gt;
&lt;/class&gt;</pre><p>
                &#28982;&#21518;&#65292;&#25105;&#20204;&#21487;&#33021;&#26377;&#19968;&#20123;&#36951;&#30041;&#30340;&#25968;&#25454;&#20851;&#32852;&#65292;&#24341;&#29992; <tt class="literal">Person</tt>&#34920;&#30340;&#36825;&#20010;&#21807;&#19968;&#38190;&#65292;&#32780;&#19981;&#26159;&#20027;&#38190;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="person" 
         class="Person" property-ref="name"&gt;
    &lt;column name="firstName"/&gt;
    &lt;column name="initial"/&gt;
    &lt;column name="lastName"/&gt;
&lt;/many-to-one&gt;</pre><p>
                &#25105;&#20204;&#24182;&#19981;&#25512;&#33616;&#36825;&#26679;&#20351;&#29992;&#65292;&#38500;&#38750;&#22312;&#26144;&#23556;&#36951;&#30041;&#25968;&#25454;&#30340;&#24773;&#20917;&#19979;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-subclass"></a>5.1.15.&nbsp;&#23376;&#31867;(subclass)</h3></div></div><div></div></div><p>
                &#26368;&#21518;&#65292;&#22810;&#24577;&#25345;&#20037;&#21270;&#38656;&#35201;&#20026;&#29238;&#31867;&#30340;&#27599;&#20010;&#23376;&#31867;&#37117;&#36827;&#34892;&#23450;&#20041;&#12290;&#23545;&#20110;&#8220;&#27599;&#19968;&#26869;&#31867;&#32487;&#25215;&#26641;&#23545;&#24212;&#19968;&#20010;&#34920;&#8221;&#30340;&#31574;&#30053;&#26469;&#35828;&#65292;&#23601;&#38656;&#35201;&#20351;&#29992;<tt class="literal">&lt;subclass&gt;</tt>&#23450;&#20041;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;subclass
        name="ClassName"                              <span class="co">(1)</span>
        discriminator-value="discriminator_value"     <span class="co">(2)</span>
        proxy="ProxyInterface"                        <span class="co">(3)</span>
        lazy="true|false"                             <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        entity-name="EntityName"
        node="element-name"
        extends="SuperclassName"&gt;

        &lt;property .... /&gt;
        .....
&lt;/subclass&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23376;&#31867;&#30340;&#20840;&#38480;&#23450;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">discriminator-value(&#36776;&#21035;&#26631;&#24535;)</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#31867;&#21517;):&#19968;&#20010;&#29992;&#20110;&#21306;&#20998;&#27599;&#20010;&#29420;&#31435;&#30340;&#23376;&#31867;&#30340;&#20540;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">proxy(&#20195;&#29702;)</tt> (&#21487;&#36873;): &#25351;&#23450;&#19968;&#20010;&#31867;&#25110;&#32773;&#25509;&#21475;&#65292;&#22312;&#24310;&#36831;&#35013;&#36733;&#26102;&#20316;&#20026;&#20195;&#29702;&#20351;&#29992;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873;, &#40664;&#35748;&#26159;<tt class="literal">true</tt>): &#35774;&#32622;&#20026;
                            <tt class="literal">lazy="false"</tt> &#31105;&#27490;&#20351;&#29992;&#24310;&#36831;&#25235;&#21462;
                        </p></td></tr></table></div></div><p>
                &#27599;&#20010;&#23376;&#31867;&#37117;&#24212;&#35813;&#23450;&#20041;&#23427;&#33258;&#24049;&#30340;&#25345;&#20037;&#21270;&#23646;&#24615;&#21644;&#23376;&#31867;&#12290;
                <tt class="literal">&lt;version&gt;</tt> &#21644;<tt class="literal">&lt;id&gt;</tt> &#23646;&#24615;&#21487;&#20197;&#20174;&#26681;&#29238;&#31867;&#32487;&#25215;&#19979;&#26469;&#12290;&#22312;&#19968;&#26869;&#32487;&#25215;&#26641;&#19978;&#30340;&#27599;&#20010;&#23376;&#31867;&#37117;&#24517;&#39035;&#23450;&#20041;&#19968;&#20010;&#21807;&#19968;&#30340;<tt class="literal">discriminator-value</tt>&#12290;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#65292;&#23601;&#20250;&#20351;&#29992;Java&#31867;&#30340;&#20840;&#38480;&#23450;&#21517;&#12290;
            </p><p>
                &#26356;&#22810;&#20851;&#20110;&#32487;&#25215;&#26144;&#23556;&#30340;&#20449;&#24687;, &#21442;&#32771; <a href="#inheritance" title="&#31532;&nbsp;9&nbsp;&#31456;&nbsp;&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)">&#31532;&nbsp;9&nbsp;&#31456; <i>&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</i></a>&#31456;&#33410;.
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-joinedsubclass"></a>5.1.16.&nbsp;&#36830;&#25509;&#30340;&#23376;&#31867;(joined-subclass)</h3></div></div><div></div></div><p>
                &#27492;&#22806;&#65292;&#27599;&#20010;&#23376;&#31867;&#21487;&#33021;&#34987;&#26144;&#23556;&#21040;&#20182;&#33258;&#24049;&#30340;&#34920;&#20013;(&#27599;&#20010;&#23376;&#31867;&#19968;&#20010;&#34920;&#30340;&#31574;&#30053;)&#12290;&#34987;&#32487;&#25215;&#30340;&#29366;&#24577;&#36890;&#36807;&#21644;&#36229;&#31867;&#30340;&#34920;&#20851;&#32852;&#24471;&#21040;&#12290;&#25105;&#20204;&#20351;&#29992;<tt class="literal">&lt;joined-subclass&gt;</tt>&#20803;&#32032;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;joined-subclass
        name="ClassName"                    <span class="co">(1)</span>
        table="tablename"                   <span class="co">(2)</span>
        proxy="ProxyInterface"              <span class="co">(3)</span>
        lazy="true|false"                   <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        schema="schema"
        catalog="catalog"
        extends="SuperclassName"
        persister="ClassName"
        subselect="SQL expression"
        entity-name="EntityName"
        node="element-name"&gt;

        &lt;key .... &gt;

        &lt;property .... /&gt;
        .....
&lt;/joined-subclass&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23376;&#31867;&#30340;&#20840;&#38480;&#23450;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt>: &#23376;&#31867;&#30340;&#34920;&#21517;.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">proxy</tt> (&#21487;&#36873;): &#25351;&#23450;&#19968;&#20010;&#31867;&#25110;&#32773;&#25509;&#21475;&#65292;&#22312;&#24310;&#36831;&#35013;&#36733;&#26102;&#20316;&#20026;&#20195;&#29702;&#20351;&#29992;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                             <tt class="literal">lazy</tt> (&#21487;&#36873;, &#40664;&#35748;&#26159; <tt class="literal">true</tt>): &#35774;&#32622;&#20026; 
                            <tt class="literal">lazy="false"</tt> &#31105;&#27490;&#20351;&#29992;&#24310;&#36831;&#35013;&#36733;&#12290;
                         </p></td></tr></table></div></div><p>
                &#36825;&#31181;&#26144;&#23556;&#31574;&#30053;&#19981;&#38656;&#35201;&#25351;&#23450;&#36776;&#21035;&#26631;&#24535;(discriminator)&#23383;&#27573;&#12290;&#20294;&#26159;&#65292;&#27599;&#19968;&#20010;&#23376;&#31867;&#37117;&#24517;&#39035;&#20351;&#29992;<tt class="literal">&lt;key&gt;</tt>&#20803;&#32032;&#25351;&#23450;&#19968;&#20010;&#34920;&#23383;&#27573;&#26469;&#25345;&#26377;&#23545;&#35937;&#30340;&#26631;&#35782;&#31526;&#12290;&#26412;&#31456;&#24320;&#22987;&#30340;&#26144;&#23556;&#21487;&#20197;&#34987;&#29992;&#22914;&#19979;&#26041;&#24335;&#37325;&#20889;&#65306;
            </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;

        &lt;class name="Cat" table="CATS"&gt;
                &lt;id name="id" column="uid" type="long"&gt;
                        &lt;generator class="hilo"/&gt;
                &lt;/id&gt;
                &lt;property name="birthdate" type="date"/&gt;
                &lt;property name="color" not-null="true"/&gt;
                &lt;property name="sex" not-null="true"/&gt;
                &lt;property name="weight"/&gt;
                &lt;many-to-one name="mate"/&gt;
                &lt;set name="kittens"&gt;
                        &lt;key column="MOTHER"/&gt;
                        &lt;one-to-many class="Cat"/&gt;
                &lt;/set&gt;
                &lt;joined-subclass name="DomesticCat" table="DOMESTIC_CATS"&gt;
                    &lt;key column="CAT"/&gt;
                    &lt;property name="name" type="string"/&gt;
                &lt;/joined-subclass&gt;
        &lt;/class&gt;

        &lt;class name="eg.Dog"&gt;
                &lt;!-- mapping for Dog could go here --&gt;
        &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                 &#26356;&#22810;&#20851;&#20110;&#32487;&#25215;&#26144;&#23556;&#30340;&#20449;&#24687;&#65292;&#21442;&#32771;<a href="#inheritance" title="&#31532;&nbsp;9&nbsp;&#31456;&nbsp;&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)">&#31532;&nbsp;9&nbsp;&#31456; <i>&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</i></a>&#12290;
             </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-unionsubclass"></a>5.1.17.&nbsp;&#32852;&#21512;&#23376;&#31867;(union-subclass)</h3></div></div><div></div></div><p>
		       &#31532;&#19977;&#31181;&#36873;&#25321;&#26159;&#20165;&#20165;&#26144;&#23556;&#31867;&#32487;&#25215;&#26641;&#20013;&#20855;&#20307;&#31867;&#37096;&#20998;&#21040;&#34920;&#20013;(&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;&#30340;&#31574;&#30053;)&#12290;&#20854;&#20013;&#65292;&#27599;&#24352;&#34920;&#23450;&#20041;&#20102;&#31867;&#30340;&#25152;&#26377;&#25345;&#20037;&#21270;&#29366;&#24577;&#65292;&#21253;&#25324;&#32487;&#25215;&#30340;&#29366;&#24577;&#12290;&#22312; Hibernate &#20013;&#65292;&#24182;&#19981;&#38656;&#35201;&#23436;&#20840;&#26174;&#24335;&#22320;&#26144;&#23556;&#36825;&#26679;&#30340;&#32487;&#25215;&#26641;&#12290;&#20320;&#21487;&#20197;&#31616;&#21333;&#22320;&#20351;&#29992;&#21333;&#29420;&#30340;<tt class="literal">&lt;class&gt;</tt>&#23450;&#20041;&#26144;&#23556;&#27599;&#20010;&#31867;&#12290;&#28982;&#32780;&#65292;&#22914;&#26524;&#20320;&#24819;&#20351;&#29992;&#22810;&#24577;&#20851;&#32852;(&#20363;&#22914;&#65292;&#19968;&#20010;&#23545;&#31867;&#32487;&#25215;&#26641;&#20013;&#36229;&#31867;&#30340;&#20851;&#32852;)&#65292;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="literal">&lt;union-subclass&gt;</tt>&#26144;&#23556;&#12290;
           </p><div class="programlistingco"><pre class="programlisting">&lt;union-subclass
        name="ClassName"                    <span class="co">(1)</span>
        table="tablename"                   <span class="co">(2)</span>
        proxy="ProxyInterface"              <span class="co">(3)</span>
        lazy="true|false"                   <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        schema="schema"
        catalog="catalog"
        extends="SuperclassName"
        abstract="true|false"
        persister="ClassName"
        subselect="SQL expression"
        entity-name="EntityName"
        node="element-name"&gt;

        &lt;property .... /&gt;
        .....
&lt;/union-subclass&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23376;&#31867;&#30340;&#20840;&#38480;&#23450;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt>: &#23376;&#31867;&#30340;&#34920;&#21517;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">proxy</tt> (&#21487;&#36873;): &#25351;&#23450;&#19968;&#20010;&#31867;&#25110;&#32773;&#25509;&#21475;&#65292;&#22312;&#24310;&#36831;&#35013;&#36733;&#26102;&#20316;&#20026;&#20195;&#29702;&#20351;&#29992;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                             <tt class="literal">lazy</tt> (&#21487;&#36873;, &#40664;&#35748;&#26159; <tt class="literal">true</tt>): &#35774;&#32622;&#20026; 
                            <tt class="literal">lazy="false"</tt> &#31105;&#27490;&#20351;&#29992;&#24310;&#36831;&#35013;&#36733;&#12290;
                         </p></td></tr></table></div></div><p>
                &#36825;&#31181;&#26144;&#23556;&#31574;&#30053;&#19981;&#38656;&#35201;&#25351;&#23450;&#36776;&#21035;&#26631;&#24535;(discriminator)&#23383;&#27573;&#12290;
            </p><p>
                 &#26356;&#22810;&#20851;&#20110;&#32487;&#25215;&#26144;&#23556;&#30340;&#20449;&#24687;&#65292;&#21442;&#32771;<a href="#inheritance" title="&#31532;&nbsp;9&nbsp;&#31456;&nbsp;&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)">&#31532;&nbsp;9&nbsp;&#31456; <i>&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</i></a>&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-join"></a>5.1.18.&nbsp;&#36830;&#25509;(join)</h3></div></div><div></div></div><p>
               &#20351;&#29992; <tt class="literal">&lt;join&gt;</tt> &#20803;&#32032;&#65292;&#21487;&#20197;&#23558;&#19968;&#20010;&#31867;&#30340;&#23646;&#24615;&#26144;&#23556;&#21040;&#22810;&#24352;&#34920;&#20013;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;join
        table="tablename"                        <span class="co">(1)</span>
        schema="owner"                           <span class="co">(2)</span>
        catalog="catalog"                        <span class="co">(3)</span>
        fetch="join|select"                      <span class="co">(4)</span>
        inverse="true|false"                     <span class="co">(5)</span>
        optional="true|false"&gt;                   <span class="co">(6)</span>
        
        &lt;key ... /&gt;
        
        &lt;property ... /&gt;
        ...
&lt;/join&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt>: &#34987;&#36830;&#25509;&#34920;&#30340;&#21517;&#31216;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema</tt> (&#21487;&#36873;):&#35206;&#30422;&#30001;&#26681;<tt class="literal">&lt;hibernate-mapping&gt;</tt>&#20803;&#32032;&#25351;&#23450;&#30340;&#27169;&#24335;&#21517;&#31216;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">catalog</tt> (&#21487;&#36873;): &#35206;&#30422;&#30001;&#26681; <tt class="literal">&lt;hibernate-mapping&gt;</tt>&#20803;&#32032;&#25351;&#23450;&#30340;&#30446;&#24405;&#21517;&#31216;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">fetch</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">join</tt>):
                            &#22914;&#26524;&#35774;&#32622;&#20026;&#40664;&#35748;&#20540;<tt class="literal">join</tt>&#65292; Hibernate &#23558;&#20351;&#29992;&#19968;&#20010;&#20869;&#36830;&#25509;&#26469;&#24471;&#21040;&#36825;&#20010;&#31867;&#25110;&#20854;&#36229;&#31867;&#23450;&#20041;&#30340;<tt class="literal">&lt;join&gt;</tt>&#65292;&#32780;&#20351;&#29992;&#19968;&#20010;&#22806;&#36830;&#25509;&#26469;&#24471;&#21040;&#20854;&#23376;&#31867;&#23450;&#20041;&#30340;<tt class="literal">&lt;join&gt;</tt>&#12290;&#22914;&#26524;&#35774;&#32622;&#20026;<tt class="literal">select</tt>&#65292;&#21017; Hibernate &#23558;&#20026;&#23376;&#31867;&#23450;&#20041;&#30340; <tt class="literal">&lt;join&gt;</tt>&#20351;&#29992;&#39034;&#24207;&#36873;&#25321;&#12290;&#36825;&#20165;&#22312;&#19968;&#34892;&#25968;&#25454;&#34920;&#31034;&#19968;&#20010;&#23376;&#31867;&#30340;&#23545;&#35937;&#30340;&#26102;&#20505;&#25165;&#20250;&#21457;&#29983;&#12290;&#23545;&#36825;&#20010;&#31867;&#21644;&#20854;&#36229;&#31867;&#23450;&#20041;&#30340;<tt class="literal">&lt;join&gt;</tt>&#65292;&#20381;&#28982;&#20250;&#20351;&#29992;&#20869;&#36830;&#25509;&#24471;&#21040;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">inverse</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">false</tt>):
                            &#22914;&#26524;&#25171;&#24320;&#65292;Hibernate &#19981;&#20250;&#25554;&#20837;&#25110;&#32773;&#26356;&#26032;&#27492;&#36830;&#25509;&#23450;&#20041;&#30340;&#23646;&#24615;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">optional</tt> (&#21487;&#36873; - &#40664;&#35748;&#26159; <tt class="literal">false</tt>):
                            &#22914;&#26524;&#25171;&#24320;&#65292;Hibernate &#21482;&#20250;&#22312;&#27492;&#36830;&#25509;&#23450;&#20041;&#30340;&#23646;&#24615;&#38750;&#31354;&#26102;&#25554;&#20837;&#19968;&#34892;&#25968;&#25454;&#65292;&#24182;&#19988;&#24635;&#26159;&#20351;&#29992;&#19968;&#20010;&#22806;&#36830;&#25509;&#26469;&#24471;&#21040;&#36825;&#20123;&#23646;&#24615;&#12290;
                        </p></td></tr></table></div></div><p>
                &#20363;&#22914;&#65292;&#19968;&#20010;&#20154;(person)&#30340;&#22320;&#22336;(address)&#20449;&#24687;&#21487;&#20197;&#34987;&#26144;&#23556;&#21040;&#21333;&#29420;&#30340;&#34920;&#20013;(&#24182;&#20445;&#30041;&#25152;&#26377;&#23646;&#24615;&#30340;&#20540;&#31867;&#22411;&#35821;&#20041;)&#65306;
            </p><pre class="programlisting">&lt;class name="Person"
    table="PERSON"&gt;

    &lt;id name="id" column="PERSON_ID"&gt;...&lt;/id&gt;

    &lt;join table="ADDRESS"&gt;
        &lt;key column="ADDRESS_ID"/&gt;
        &lt;property name="address"/&gt;
        &lt;property name="zip"/&gt;
        &lt;property name="country"/&gt;
    &lt;/join&gt;
    ...</pre><p>
                &#27492;&#29305;&#24615;&#24120;&#24120;&#23545;&#36951;&#30041;&#25968;&#25454;&#27169;&#22411;&#26377;&#29992;&#65292;&#25105;&#20204;&#25512;&#33616;&#34920;&#20010;&#25968;&#27604;&#31867;&#20010;&#25968;&#23569;&#65292;&#20197;&#21450;&#32454;&#31890;&#24230;&#30340;&#39046;&#22495;&#27169;&#22411;&#12290;&#28982;&#32780;&#65292;&#22312;&#21333;&#29420;&#30340;&#32487;&#25215;&#26641;&#19978;&#20999;&#25442;&#32487;&#25215;&#26144;&#23556;&#31574;&#30053;&#26159;&#26377;&#29992;&#30340;&#65292;&#21518;&#38754;&#20250;&#35299;&#37322;&#36825;&#28857;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-key"></a>5.1.19.&nbsp;&#38190;(key)</h3></div></div><div></div></div><p>
               &#25105;&#20204;&#30446;&#21069;&#24050;&#32463;&#35265;&#21040;&#36807;<tt class="literal">&lt;key&gt;</tt>&#20803;&#32032;&#22810;&#27425;&#20102;&#12290; &#36825;&#20010;&#20803;&#32032;&#22312;&#29238;&#26144;&#23556;&#20803;&#32032;&#23450;&#20041;&#20102;&#23545;&#26032;&#34920;&#30340;&#36830;&#25509;&#65292;&#24182;&#19988;&#22312;&#34987;&#36830;&#25509;&#34920;&#20013;&#23450;&#20041;&#20102;&#19968;&#20010;&#22806;&#38190;&#24341;&#29992;&#21407;&#34920;&#30340;&#20027;&#38190;&#30340;&#24773;&#20917;&#19979;&#32463;&#24120;&#20351;&#29992;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;key
        column="columnname"                      <span class="co">(1)</span>
        on-delete="noaction|cascade"             <span class="co">(2)</span>
        property-ref="propertyName"              <span class="co">(3)</span>
        not-null="true|false"                    <span class="co">(4)</span>
        update="true|false"                      <span class="co">(5)</span>
        unique="true|false"                      <span class="co">(6)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (&#21487;&#36873;): &#22806;&#38190;&#23383;&#27573;&#30340;&#21517;&#31216;&#12290;&#20063;&#21487;&#20197;&#36890;&#36807;&#23884;&#22871;&#30340; <tt class="literal">&lt;column&gt;</tt>&#25351;&#23450;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">on-delete</tt> (&#21487;&#36873;, &#40664;&#35748;&#26159; <tt class="literal">noaction</tt>): 
                            &#34920;&#26126;&#22806;&#38190;&#20851;&#32852;&#26159;&#21542;&#25171;&#24320;&#25968;&#25454;&#24211;&#32423;&#21035;&#30340;&#32423;&#32852;&#21024;&#38500;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">property-ref</tt> (&#21487;&#36873;): &#34920;&#26126;&#22806;&#38190;&#24341;&#29992;&#30340;&#23383;&#27573;&#19981;&#26159;&#21407;&#34920;&#30340;&#20027;&#38190;(&#25552;&#20379;&#32473;&#36951;&#30041;&#25968;&#25454;)&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-null</tt> (&#21487;&#36873;): &#34920;&#26126;&#22806;&#38190;&#30340;&#23383;&#27573;&#19981;&#21487;&#20026;&#31354;(&#36825;&#24847;&#21619;&#30528;&#26080;&#35770;&#20309;&#26102;&#22806;&#38190;&#37117;&#26159;&#20027;&#38190;&#30340;&#19968;&#37096;&#20998;)&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">update</tt> (&#21487;&#36873;): &#34920;&#26126;&#22806;&#38190;&#20915;&#19981;&#24212;&#35813;&#34987;&#26356;&#26032;(&#36825;&#24847;&#21619;&#30528;&#26080;&#35770;&#20309;&#26102;&#22806;&#38190;&#37117;&#26159;&#20027;&#38190;&#30340;&#19968;&#37096;&#20998;)&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique</tt> (&#21487;&#36873;): &#34920;&#26126;&#22806;&#38190;&#24212;&#26377;&#21807;&#19968;&#24615;&#32422;&#26463; (&#36825;&#24847;&#21619;&#30528;&#26080;&#35770;&#20309;&#26102;&#22806;&#38190;&#37117;&#26159;&#20027;&#38190;&#30340;&#19968;&#37096;&#20998;)&#12290;
                        </p></td></tr></table></div></div><p>
                &#23545;&#37027;&#20123;&#30475;&#37325;&#21024;&#38500;&#24615;&#33021;&#30340;&#31995;&#32479;&#65292;&#25105;&#20204;&#25512;&#33616;&#25152;&#26377;&#30340;&#38190;&#37117;&#24212;&#35813;&#23450;&#20041;&#20026;<tt class="literal">on-delete="cascade"</tt>&#65292;&#36825;&#26679; Hibernate &#23558;&#20351;&#29992;&#25968;&#25454;&#24211;&#32423;&#30340;<tt class="literal">ON CASCADE DELETE</tt>&#32422;&#26463;&#65292;&#32780;&#19981;&#26159;&#22810;&#20010;<tt class="literal">DELETE</tt>&#35821;&#21477;&#12290; &#27880;&#24847;&#65292;&#36825;&#20010;&#29305;&#24615;&#20250;&#32469;&#36807; Hibernate &#36890;&#24120;&#23545;&#29256;&#26412;&#25968;&#25454;(versioned data)&#37319;&#29992;&#30340;&#20048;&#35266;&#38145;&#31574;&#30053;&#12290;
            </p><p>
                <tt class="literal">not-null</tt> &#21644; <tt class="literal">update</tt> &#23646;&#24615;&#22312;&#26144;&#23556;&#21333;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;&#30340;&#26102;&#20505;&#26377;&#29992;&#12290;&#22914;&#26524;&#20320;&#26144;&#23556;&#19968;&#20010;&#21333;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;&#21040;&#38750;&#31354;&#30340;(non-nullable)&#22806;&#38190;&#65292;&#20320;<span class="emphasis"><em>&#24517;&#39035;</em></span> &#29992;<tt class="literal">&lt;key not-null="true"&gt;</tt>&#23450;&#20041;&#27492;&#38190;&#23383;&#27573;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-column"></a>5.1.20.&nbsp;&#23383;&#27573;&#21644;&#35268;&#21017;&#20803;&#32032;&#65288;column and formula elements&#65289;</h3></div></div><div></div></div><p>
               &#20219;&#20309;&#25509;&#21463;<tt class="literal">column</tt>&#23646;&#24615;&#30340;&#26144;&#23556;&#20803;&#32032;&#37117;&#21487;&#20197;&#36873;&#25321;&#25509;&#21463;<tt class="literal">&lt;column&gt;</tt> &#23376;&#20803;&#32032;&#12290;&#21516;&#26679;&#30340;&#65292;<tt class="literal">formula</tt>&#23376;&#20803;&#32032;&#20063;&#21487;&#20197;&#26367;&#25442;<tt class="literal">&lt;formula&gt;</tt>&#23646;&#24615;&#12290;
           </p><pre class="programlisting">&lt;column
        name="column_name"
        length="N"
        precision="N"
        scale="N"
        not-null="true|false"
        unique="true|false"
        unique-key="multicolumn_unique_key_name"
        index="index_name"
        sql-type="sql_type_name"
        check="SQL expression"
        default="SQL expression"/&gt;</pre><pre class="programlisting">&lt;formula&gt;SQL expression&lt;/formula&gt;</pre><p>
                <tt class="literal">column</tt> &#21644; <tt class="literal">formula</tt> &#23646;&#24615;&#29978;&#33267;&#21487;&#20197;&#22312;&#21516;&#19968;&#20010;&#23646;&#24615;&#25110;&#20851;&#32852;&#26144;&#23556;&#20013;&#34987;&#21512;&#24182;&#26469;&#34920;&#36798;&#65292;&#20363;&#22914;&#65292;&#19968;&#20123;&#22855;&#24322;&#30340;&#36830;&#25509;&#26465;&#20214;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="homeAddress" class="Address"
        insert="false" update="false"&gt;
    &lt;column name="person_id" not-null="true" length="10"/&gt;
    &lt;formula&gt;'MAILING'&lt;/formula&gt;
&lt;/many-to-one&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-import"></a>5.1.21.&nbsp;&#24341;&#29992;(import)</h3></div></div><div></div></div><p>
                &#20551;&#35774;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#26377;&#20004;&#20010;&#21516;&#26679;&#21517;&#23383;&#30340;&#25345;&#20037;&#21270;&#31867;&#65292;&#20294;&#26159;&#20320;&#19981;&#24819;&#22312;Hibernate&#26597;&#35810;&#20013;&#20351;&#29992;&#20182;&#20204;&#30340;&#20840;&#38480;&#23450;&#21517;&#12290;&#38500;&#20102;&#20381;&#36182;<tt class="literal">auto-import="true"</tt>&#20197;&#22806;&#65292;&#31867;&#20063;&#21487;&#20197;&#34987;&#26174;&#24335;&#22320;&#8220;import(&#24341;&#29992;)&#8221;&#12290;&#20320;&#29978;&#33267;&#21487;&#20197;&#24341;&#29992;&#27809;&#26377;&#34987;&#26126;&#30830;&#26144;&#23556;&#30340;&#31867;&#21644;&#25509;&#21475;&#12290;
            </p><pre class="programlisting">&lt;import class="java.lang.Object" rename="Universe"/&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;import
        class="ClassName"              <span class="co">(1)</span>
        rename="ShortName"             <span class="co">(2)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt>: &#20219;&#20309;Java&#31867;&#30340;&#20840;&#38480;&#23450;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">rename</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;&#31867;&#30340;&#20840;&#38480;&#23450;&#21517;):
                            &#22312;&#26597;&#35810;&#35821;&#21477;&#20013;&#21487;&#20197;&#20351;&#29992;&#30340;&#21517;&#23383;&#12290;
                        </p></td></tr></table></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-anymapping"></a>5.1.22.&nbsp;any</h3></div></div><div></div></div><p>
                &#36825;&#26159;&#23646;&#24615;&#26144;&#23556;&#30340;&#21448;&#19968;&#31181;&#31867;&#22411;&#12290;<tt class="literal">&lt;any&gt;</tt> &#26144;&#23556;&#20803;&#32032;&#23450;&#20041;&#20102;&#19968;&#31181;&#20174;&#22810;&#20010;&#34920;&#21040;&#31867;&#30340;&#22810;&#24577;&#20851;&#32852;&#12290;&#36825;&#31181;&#31867;&#22411;&#30340;&#26144;&#23556;&#24120;&#24120;&#38656;&#35201;&#22810;&#20110;&#19968;&#20010;&#23383;&#27573;&#12290;&#31532;&#19968;&#20010;&#23383;&#27573;&#25345;&#26377;&#34987;&#20851;&#32852;&#23454;&#20307;&#30340;&#31867;&#22411;&#65292;&#20854;&#20182;&#30340;&#23383;&#27573;&#25345;&#26377;&#26631;&#35782;&#31526;&#12290;&#23545;&#36825;&#31181;&#31867;&#22411;&#30340;&#20851;&#32852;&#26469;&#35828;&#65292;&#19981;&#21487;&#33021;&#25351;&#23450;&#19968;&#20010;&#22806;&#38190;&#32422;&#26463;&#65292;&#25152;&#20197;&#36825;&#24403;&#28982;&#19981;&#26159;&#26144;&#23556;(&#22810;&#24577;)&#20851;&#32852;&#30340;&#36890;&#24120;&#30340;&#26041;&#24335;&#12290;&#20320;&#21482;&#24212;&#35813;&#22312;&#38750;&#24120;&#29305;&#27530;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;&#23427;(&#27604;&#22914;&#65292;&#23457;&#35745;log&#65292;&#29992;&#25143;&#20250;&#35805;&#25968;&#25454;&#31561;&#31561;)&#12290;
            </p><p>
                 <tt class="literal">meta-type</tt> &#23646;&#24615;&#20351;&#24471;&#24212;&#29992;&#31243;&#24207;&#33021;&#25351;&#23450;&#19968;&#20010;&#23558;&#25968;&#25454;&#24211;&#23383;&#27573;&#30340;&#20540;&#26144;&#23556;&#21040;&#25345;&#20037;&#21270;&#31867;&#30340;&#33258;&#23450;&#20041;&#31867;&#22411;&#12290;&#36825;&#20010;&#25345;&#20037;&#21270;&#31867;&#21253;&#21547;&#26377;&#29992;<tt class="literal">id-type</tt>&#25351;&#23450;&#30340;&#26631;&#35782;&#31526;&#23646;&#24615;&#12290;
				 &#20320;&#24517;&#39035;&#25351;&#23450;&#20174;meta-type&#30340;&#20540;&#21040;&#31867;&#21517;&#30340;&#26144;&#23556;&#12290;
            </p><pre class="programlisting">&lt;any name="being" id-type="long" meta-type="string"&gt;
    &lt;meta-value value="TBL_ANIMAL" class="Animal"/&gt;
    &lt;meta-value value="TBL_HUMAN" class="Human"/&gt;
    &lt;meta-value value="TBL_ALIEN" class="Alien"/&gt;
    &lt;column name="table_name"/&gt;
    &lt;column name="id"/&gt;
&lt;/any&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;any
        name="propertyName"                      <span class="co">(1)</span>
        id-type="idtypename"                     <span class="co">(2)</span>
        meta-type="metatypename"                 <span class="co">(3)</span>
        cascade="cascade_style"                  <span class="co">(4)</span>
        access="field|property|ClassName"        <span class="co">(5)</span>
        optimistic-lock="true|false"             <span class="co">(6)</span>
&gt;
        &lt;meta-value ... /&gt;
        &lt;meta-value ... /&gt;
        .....
        &lt;column .... /&gt;
        &lt;column .... /&gt;
        .....
&lt;/any&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: &#23646;&#24615;&#21517;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">id-type</tt>: &#26631;&#35782;&#31526;&#31867;&#22411;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">meta-type</tt> (&#21487;&#36873; -&#40664;&#35748;&#26159; <tt class="literal">string</tt>): 
                            &#20801;&#35768;&#36776;&#21035;&#26631;&#24535;(discriminator)&#26144;&#23556;&#30340;&#20219;&#20309;&#31867;&#22411;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade</tt> (&#21487;&#36873; -&#40664;&#35748;&#26159;<tt class="literal">none</tt>): 
                            &#32423;&#32852;&#30340;&#31867;&#22411;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (&#21487;&#36873; -&#40664;&#35748;&#26159; <tt class="literal">property</tt>): Hibernate &#29992;&#26469;&#35775;&#38382;&#23646;&#24615;&#20540;&#30340;&#31574;&#30053;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (&#21487;&#36873; -&#40664;&#35748;&#26159; <tt class="literal">true</tt>): &#34920;&#26126;&#26356;&#26032;&#27492;&#32452;&#20214;&#26159;&#21542;&#38656;&#35201;&#33719;&#21462;&#20048;&#35266;&#38145;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#24403;&#36825;&#20010;&#23646;&#24615;&#21464;&#33039;&#26102;&#65292;&#26159;&#21542;&#22686;&#21152;&#29256;&#26412;&#21495;(Version)
							</p></td></tr></table></div></div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-types"></a>5.2.&nbsp;Hibernate &#30340;&#31867;&#22411;</h2></div></div><div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-entitiesvalues"></a>5.2.1.&nbsp;&#23454;&#20307;(Entities)&#21644;&#20540;(values)</h3></div></div><div></div></div><p>
                &#20026;&#20102;&#29702;&#35299;&#24456;&#22810;&#19982;&#25345;&#20037;&#21270;&#26381;&#21153;&#30456;&#20851;&#30340;Java&#35821;&#35328;&#32423;&#23545;&#35937;&#30340;&#34892;&#20026;&#65292;&#25105;&#20204;&#38656;&#35201;&#25226;&#23427;&#20204;&#20998;&#20026;&#20004;&#31867;&#65306;
            </p><p>
                <span class="emphasis"><em>&#23454;&#20307;entity</em></span> &#29420;&#31435;&#20110;&#20219;&#20309;&#25345;&#26377;&#23454;&#20307;&#24341;&#29992;&#30340;&#23545;&#35937;&#12290;&#19982;&#36890;&#24120;&#30340;Java&#27169;&#22411;&#30456;&#27604;&#65292;&#19981;&#20877;&#34987;&#24341;&#29992;&#30340;&#23545;&#35937;&#20250;&#34987;&#24403;&#20316;&#22403;&#22334;&#25910;&#38598;&#25481;&#12290;&#23454;&#20307;&#24517;&#39035;&#34987;&#26174;&#24335;&#30340;&#20445;&#23384;&#21644;&#21024;&#38500;(&#38500;&#38750;&#20445;&#23384;&#21644;&#21024;&#38500;&#26159;&#20174;&#29238;&#23454;&#20307;&#21521;&#23376;&#23454;&#20307;&#24341;&#21457;&#30340;<span class="emphasis"><em>&#32423;&#32852;</em></span>)&#12290;&#36825;&#21644;ODMG&#27169;&#22411;&#20013;&#20851;&#20110;&#23545;&#35937;&#36890;&#36807;&#21487;&#35302;&#21450;&#20445;&#25345;&#25345;&#20037;&#24615;&#26377;&#19968;&#20123;&#19981;&#21516;&#8212;&#8212;&#27604;&#36739;&#36215;&#26469;&#26356;&#21152;&#25509;&#36817;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937;&#36890;&#24120;&#22312;&#19968;&#20010;&#22823;&#31995;&#32479;&#20013;&#30340;&#20351;&#29992;&#26041;&#27861;&#12290;&#23454;&#20307;&#25903;&#25345;&#24490;&#29615;&#24341;&#29992;&#21644;&#20132;&#21449;&#24341;&#29992;&#65292;&#23427;&#20204;&#20063;&#21487;&#20197;&#21152;&#19978;&#29256;&#26412;&#20449;&#24687;&#12290;
            </p><p>
               &#19968;&#20010;&#23454;&#20307;&#30340;&#25345;&#20037;&#29366;&#24577;&#21253;&#21547;&#25351;&#21521;&#20854;&#20182;&#23454;&#20307;&#21644;<span class="emphasis"><em>&#20540;</em></span>&#31867;&#22411;&#23454;&#20363;&#30340;&#24341;&#29992;&#12290;&#20540;&#21487;&#20197;&#26159;&#21407;&#22987;&#31867;&#22411;&#65292;&#38598;&#21512;(&#19981;&#26159;&#38598;&#21512;&#20013;&#30340;&#23545;&#35937;)&#65292;&#32452;&#20214;&#25110;&#32773;&#29305;&#23450;&#30340;&#19981;&#21487;&#21464;&#23545;&#35937;&#12290;&#19982;&#23454;&#20307;&#19981;&#21516;&#65292;&#20540;(&#29305;&#21035;&#26159;&#38598;&#21512;&#21644;&#32452;&#20214;)&#26159;&#36890;&#36807;&#21487;&#35302;&#21450;&#24615;&#26469;&#36827;&#34892;&#25345;&#20037;&#21270;&#21644;&#21024;&#38500;&#30340;&#12290;&#22240;&#20026;&#20540;&#23545;&#35937;(&#21644;&#21407;&#22987;&#31867;&#22411;&#25968;&#25454;)&#26159;&#38543;&#30528;&#21253;&#21547;&#20182;&#20204;&#30340;&#23454;&#20307;&#32780;&#34987;&#25345;&#20037;&#21270;&#21644;&#21024;&#38500;&#30340;&#65292;&#20182;&#20204;&#19981;&#33021;&#34987;&#29420;&#31435;&#30340;&#21152;&#19978;&#29256;&#26412;&#20449;&#24687;&#12290;&#20540;&#27809;&#26377;&#29420;&#31435;&#30340;&#26631;&#35782;&#65292;&#25152;&#20197;&#20182;&#20204;&#19981;&#33021;&#34987;&#20004;&#20010;&#23454;&#20307;&#25110;&#32773;&#38598;&#21512;&#20849;&#20139;&#12290;
            </p><p>
			    &#30452;&#21040;&#29616;&#22312;&#65292;&#25105;&#20204;&#37117;&#19968;&#30452;&#20351;&#29992;&#26415;&#35821;&#8220;&#25345;&#20037;&#31867;&#8221;(persistent class)&#26469;&#20195;&#34920;&#23454;&#20307;&#12290;&#25105;&#20204;&#20173;&#28982;&#20250;&#36825;&#20040;&#20570;&#12290;	&#28982;&#32780;&#20005;&#26684;&#35828;&#26469;&#65292;&#19981;&#26159;&#25152;&#26377;&#30340;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#65292;&#24102;&#26377;&#25345;&#20037;&#21270;&#29366;&#24577;&#30340;&#31867;&#37117;&#26159;&#23454;&#20307;&#12290;<span class="emphasis"><em>&#32452;&#20214;</em></span>&#23601;&#26159;&#29992;&#25143;&#33258;&#23450;&#20041;&#31867;&#65292;&#21364;&#26159;&#20540;&#35821;&#20041;&#30340;&#12290;<tt class="literal">java.lang.String</tt>&#31867;&#22411;&#30340;java&#23646;&#24615;&#20063;&#26159;&#20540;&#35821;&#20041;&#30340;&#12290;&#32473;&#20102;&#36825;&#20010;&#23450;&#20041;&#20197;&#21518;&#65292;&#25105;&#20204;&#21487;&#20197;&#35828;&#25152;&#26377;JDK&#25552;&#20379;&#30340;&#31867;&#22411;(&#31867;)&#37117;&#26159;&#20540;&#31867;&#22411;&#30340;&#35821;&#20041;&#65292;&#32780;&#29992;&#20110;&#33258;&#23450;&#20041;&#31867;&#22411;&#21487;&#33021;&#34987;&#26144;&#23556;&#20026;&#23454;&#20307;&#31867;&#22411;&#25110;&#20540;&#31867;&#22411;&#35821;&#20041;&#12290;&#37319;&#29992;&#21738;&#31181;&#31867;&#22411;&#30340;&#35821;&#20041;&#21462;&#20915;&#20110;&#24320;&#21457;&#20154;&#21592;&#12290;&#22312;&#39046;&#22495;&#27169;&#22411;&#20013;&#65292;&#23547;&#25214;&#23454;&#20307;&#31867;&#30340;&#19968;&#20010;&#22909;&#32447;&#32034;&#26159;&#20849;&#20139;&#24341;&#29992;&#25351;&#21521;&#36825;&#20010;&#31867;&#30340;&#21333;&#19968;&#23454;&#20363;&#65292;&#32780;&#32452;&#21512;&#25110;&#32858;&#21512;&#36890;&#24120;&#34987;&#36716;&#21270;&#20026;&#20540;&#31867;&#22411;&#12290;
            </p><p>
                &#25105;&#20204;&#20250;&#22312;&#26412;&#25991;&#26723;&#20013;&#37325;&#22797;&#30896;&#21040;&#36825;&#20004;&#20010;&#27010;&#24565;&#12290;
            </p><p>
                &#25361;&#25112;&#22312;&#20110;&#23558;java&#31867;&#22411;&#31995;&#32479;(&#21644;&#24320;&#21457;&#32773;&#23450;&#20041;&#30340;&#23454;&#20307;&#21644;&#20540;&#31867;&#22411;)&#26144;&#23556;&#21040; SQL/&#25968;&#25454;&#24211;&#31867;&#22411;&#31995;&#32479;&#12290;Hibernate&#25552;&#20379;&#20102;&#36830;&#25509;&#20004;&#20010;&#31995;&#32479;&#20043;&#38388;&#30340;&#26725;&#26753;&#65306;&#23545;&#20110;&#23454;&#20307;&#31867;&#22411;&#65292;&#25105;&#20204;&#20351;&#29992;<tt class="literal">&lt;class&gt;</tt>, <tt class="literal">&lt;subclass&gt;</tt>  &#31561;&#31561;&#12290;&#23545;&#20110;&#20540;&#31867;&#22411;&#65292;&#25105;&#20204;&#20351;&#29992; <tt class="literal">&lt;property&gt;</tt>, <tt class="literal">&lt;component&gt;</tt> &#21450;&#20854;&#20182;&#65292;&#36890;&#24120;&#36319;&#38543;&#30528;<tt class="literal">type</tt>&#23646;&#24615;&#12290;&#36825;&#20010;&#23646;&#24615;&#30340;&#20540;&#26159;Hibernate &#30340;<span class="emphasis"><em>&#26144;&#23556;&#31867;&#22411;</em></span>&#30340;&#21517;&#23383;&#12290;Hibernate&#25552;&#20379;&#20102;&#35768;&#22810;&#29616;&#25104;&#30340;&#26144;&#23556;(&#26631;&#20934;&#30340;JDK&#20540;&#31867;&#22411;)&#12290;&#20320;&#20063;&#21487;&#20197;&#32534;&#20889;&#33258;&#24049;&#30340;&#26144;&#23556;&#31867;&#22411;&#24182;&#23454;&#29616;&#33258;&#23450;&#20041;&#30340;&#21464;&#25442;&#31574;&#30053;&#65292;&#38543;&#21518;&#25105;&#20204;&#20250;&#30475;&#21040;&#36825;&#28857;&#12290;
            </p><p>
                &#25152;&#26377;&#30340;Hibernate&#20869;&#24314;&#31867;&#22411;&#65292;&#38500;&#20102;collections&#20197;&#22806;&#65292;&#37117;&#25903;&#25345;&#31354;(null)&#35821;&#20041;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-basictypes"></a>5.2.2.&nbsp;&#22522;&#26412;&#20540;&#31867;&#22411;</h3></div></div><div></div></div><p>
                &#20869;&#24314;&#30340; <span class="emphasis"><em>&#22522;&#26412;&#26144;&#23556;&#31867;&#22411;</em></span>&#21487;&#20197;&#22823;&#33268;&#20998;&#20026;
                </p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">integer, long, short, float, double, character, byte,
                            boolean, yes_no, true_false</tt></span></dt><dd><p>
                                &#36825;&#20123;&#31867;&#22411;&#37117;&#23545;&#24212;Java&#30340;&#21407;&#22987;&#31867;&#22411;&#25110;&#32773;&#20854;&#23553;&#35013;&#31867;&#65292;&#26469;&#31526;&#21512;(&#29305;&#23450;&#21378;&#21830;&#30340;)SQL &#23383;&#27573;&#31867;&#22411;&#12290;<tt class="literal">boolean, yes_no</tt> &#21644; <tt class="literal">true_false</tt>&#37117;&#26159;Java &#20013;<tt class="literal">boolean</tt> &#25110;&#32773;<tt class="literal">java.lang.Boolean</tt>&#30340;&#21478;&#22806;&#35828;&#27861;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">string</tt></span></dt><dd><p>
                                &#20174;<tt class="literal">java.lang.String</tt> &#21040;
                                <tt class="literal">VARCHAR</tt> (&#25110;&#32773; Oracle&#30340; <tt class="literal">VARCHAR2</tt>)&#30340;&#26144;&#23556;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">date, time, timestamp</tt></span></dt><dd><p>
                                &#20174;<tt class="literal">java.util.Date</tt>&#21644;&#20854;&#23376;&#31867;&#21040;SQL&#31867;&#22411;<tt class="literal">DATE</tt>, <tt class="literal">TIME</tt> &#21644;<tt class="literal">TIMESTAMP</tt> (&#25110;&#31561;&#20215;&#31867;&#22411;)&#30340;&#26144;&#23556;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">calendar, calendar_date</tt></span></dt><dd><p>
                                &#20174;<tt class="literal">java.util.Calendar</tt> &#21040;SQL &#31867;&#22411;<tt class="literal">TIMESTAMP</tt>&#21644; <tt class="literal">DATE</tt>(&#25110;&#31561;&#20215;&#31867;&#22411;)&#30340;&#26144;&#23556;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">big_decimal, big_integer</tt></span></dt><dd><p>
                                &#20174;<tt class="literal">java.math.BigDecimal</tt>&#21644;<tt class="literal">java.math.BigInteger</tt>&#21040;<tt class="literal">NUMERIC</tt> (&#25110;&#32773; Oracle &#30340;<tt class="literal">NUMBER</tt>&#31867;&#22411;)&#30340;&#26144;&#23556;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">locale, timezone, currency</tt></span></dt><dd><p>
                                &#20174;<tt class="literal">java.util.Locale</tt>,                                <tt class="literal">java.util.TimeZone</tt> &#21644;<tt class="literal">java.util.Currency</tt> &#21040;<tt class="literal">VARCHAR</tt> (&#25110;&#32773; Oracle &#30340;<tt class="literal">VARCHAR2</tt>&#31867;&#22411;)&#30340;&#26144;&#23556;.
                                <tt class="literal">Locale</tt>&#21644; <tt class="literal">Currency</tt> &#30340;&#23454;&#20363;&#34987;&#26144;&#23556;&#20026;&#23427;&#20204;&#30340;ISO&#20195;&#30721;&#12290;<tt class="literal">TimeZone</tt>&#30340;&#23454;&#20363;&#34987;&#24433;&#23556;&#20026;&#23427;&#30340;<tt class="literal">ID</tt>&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">class</tt></span></dt><dd><p>
                                &#20174;<tt class="literal">java.lang.Class</tt> &#21040;
                                <tt class="literal">VARCHAR</tt> (&#25110;&#32773; Oracle &#30340;<tt class="literal">VARCHAR2</tt>&#31867;&#22411;)&#30340;&#26144;&#23556;&#12290;<tt class="literal">Class</tt>&#34987;&#26144;&#23556;&#20026;&#23427;&#30340;&#20840;&#38480;&#23450;&#21517;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">binary</tt></span></dt><dd><p>
                                &#25226;&#23383;&#33410;&#25968;&#32452;(byte arrays)&#26144;&#23556;&#20026;&#23545;&#24212;&#30340; SQL&#20108;&#36827;&#21046;&#31867;&#22411;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">text</tt></span></dt><dd><p>
                                &#25226;&#38271;Java&#23383;&#31526;&#20018;&#26144;&#23556;&#20026;SQL&#30340;<tt class="literal">CLOB</tt>&#25110;&#32773;<tt class="literal">TEXT</tt>&#31867;&#22411;&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">serializable</tt></span></dt><dd><p>
                                &#25226;&#21487;&#24207;&#21015;&#21270;&#30340;Java&#31867;&#22411;&#26144;&#23556;&#21040;&#23545;&#24212;&#30340;SQL&#20108;&#36827;&#21046;&#31867;&#22411;&#12290;&#20320;&#20063;&#21487;&#20197;&#20026;&#19968;&#20010;&#24182;&#38750;&#40664;&#35748;&#20026;&#22522;&#26412;&#31867;&#22411;&#30340;&#21487;&#24207;&#21015;&#21270;Java&#31867;&#25110;&#32773;&#25509;&#21475;&#25351;&#23450;Hibernate&#31867;&#22411;<tt class="literal">serializable</tt>&#12290;
                            </p></dd><dt><span class="term"><tt class="literal">clob, blob</tt></span></dt><dd><p>
                                JDBC &#31867; <tt class="literal">java.sql.Clob</tt> &#21644; <tt class="literal">java.sql.Blob</tt>&#30340;&#26144;&#23556;&#12290;&#26576;&#20123;&#31243;&#24207;&#21487;&#33021;&#19981;&#36866;&#21512;&#20351;&#29992;&#36825;&#20010;&#31867;&#22411;&#65292;&#22240;&#20026;blob&#21644;clob&#23545;&#35937;&#21487;&#33021;&#22312;&#19968;&#20010;&#20107;&#21153;&#20043;&#22806;&#26159;&#26080;&#27861;&#37325;&#29992;&#30340;&#12290;(&#32780;&#19988;, &#39537;&#21160;&#31243;&#24207;&#23545;&#36825;&#31181;&#31867;&#22411;&#30340;&#25903;&#25345;&#20805;&#28385;&#30528;&#34917;&#19969;&#21644;&#21069;&#21518;&#30683;&#30462;&#12290;)
                            </p></dd><dt><span class="term">
                            <tt class="literal">imm_date, imm_time, imm_timestamp, imm_calendar, imm_calendar_date,
                            imm_serializable, imm_binary</tt>
                        </span></dt><dd><p>
                                &#19968;&#33324;&#26469;&#35828;&#65292;&#26144;&#23556;&#31867;&#22411;&#34987;&#20551;&#23450;&#20026;&#26159;&#21487;&#21464;&#30340;Java&#31867;&#22411;&#65292;&#21482;&#26377;&#23545;&#19981;&#21487;&#21464;Java&#31867;&#22411;&#65292;Hibernate&#20250;&#37319;&#21462;&#29305;&#23450;&#30340;&#20248;&#21270;&#25514;&#26045;&#65292;&#24212;&#29992;&#31243;&#24207;&#20250;&#25226;&#36825;&#20123;&#23545;&#35937;&#20316;&#20026;&#19981;&#21487;&#21464;&#23545;&#35937;&#22788;&#29702;&#12290;&#27604;&#22914;&#65292;&#20320;&#19981;&#24212;&#35813;&#23545;&#20316;&#20026;<tt class="literal">imm_timestamp</tt>&#26144;&#23556;&#30340;Date&#25191;&#34892;<tt class="literal">Date.setTime()</tt>&#12290;&#35201;&#25913;&#21464;&#23646;&#24615;&#30340;&#20540;&#65292;&#24182;&#19988;&#20445;&#23384;&#36825;&#19968;&#25913;&#21464;&#65292;&#24212;&#29992;&#31243;&#24207;&#24517;&#39035;&#23545;&#36825;&#19968;&#23646;&#24615;&#37325;&#26032;&#35774;&#32622;&#19968;&#20010;&#26032;&#30340;&#65288;&#19981;&#19968;&#26679;&#30340;&#65289;&#23545;&#35937;&#12290;
                            </p></dd></dl></div><p>
            
            </p><p>
                &#23454;&#20307;&#21450;&#20854;&#38598;&#21512;&#30340;&#21807;&#19968;&#26631;&#35782;&#21487;&#20197;&#26159;&#38500;&#20102;<tt class="literal">binary</tt>&#12289; <tt class="literal">blob</tt> &#21644; <tt class="literal">clob</tt>&#20043;&#22806;&#30340;&#20219;&#20309;&#22522;&#30784;&#31867;&#22411;&#12290;(&#32852;&#21512;&#26631;&#35782;&#20063;&#26159;&#20801;&#35768;&#30340;&#65292;&#21518;&#38754;&#20250;&#35828;&#21040;&#12290;)
            </p><p>
                &#22312;<tt class="literal">org.hibernate.Hibernate</tt>&#20013;&#65292;&#23450;&#20041;&#20102;&#22522;&#30784;&#31867;&#22411;&#23545;&#24212;&#30340;<tt class="literal">Type</tt>&#24120;&#37327;&#12290;&#27604;&#22914;&#65292;<tt class="literal">Hibernate.STRING</tt>&#20195;&#34920;<tt class="literal">string</tt> &#31867;&#22411;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-custom"></a>5.2.3.&nbsp;&#33258;&#23450;&#20041;&#20540;&#31867;&#22411;</h3></div></div><div></div></div><p>
                &#24320;&#21457;&#32773;&#21019;&#24314;&#23646;&#20110;&#20182;&#20204;&#33258;&#24049;&#30340;&#20540;&#31867;&#22411;&#20063;&#26159;&#24456;&#23481;&#26131;&#30340;&#12290;&#27604;&#22914;&#35828;&#65292;&#20320;&#21487;&#33021;&#24076;&#26395;&#25345;&#20037;&#21270;<tt class="literal">java.lang.BigInteger</tt>&#31867;&#22411;&#30340;&#23646;&#24615;&#65292;&#25345;&#20037;&#21270;&#25104;&#20026;<tt class="literal">VARCHAR</tt>&#23383;&#27573;&#12290;Hibernate&#27809;&#26377;&#20869;&#32622;&#36825;&#26679;&#19968;&#31181;&#31867;&#22411;&#12290;&#33258;&#23450;&#20041;&#31867;&#22411;&#33021;&#22815;&#26144;&#23556;&#19968;&#20010;&#23646;&#24615;(&#25110;&#38598;&#21512;&#20803;&#32032;)&#21040;&#19981;&#27490;&#19968;&#20010;&#25968;&#25454;&#24211;&#34920;&#23383;&#27573;&#12290;&#27604;&#22914;&#35828;&#65292;&#20320;&#21487;&#33021;&#26377;&#36825;&#26679;&#30340;Java&#23646;&#24615;&#65306;<tt class="literal">getName()</tt>/<tt class="literal">setName()</tt>&#65292;&#36825;&#26159;<tt class="literal">java.lang.String</tt>&#31867;&#22411;&#30340;&#65292;&#23545;&#24212;&#30340;&#25345;&#20037;&#21270;&#21040;&#19977;&#20010;&#23383;&#27573;&#65306;<tt class="literal">FIRST_NAME</tt>, <tt class="literal">INITIAL</tt>, <tt class="literal">SURNAME</tt>&#12290;
            </p><p>
                &#35201;&#23454;&#29616;&#19968;&#20010;&#33258;&#23450;&#20041;&#31867;&#22411;&#65292;&#21487;&#20197;&#23454;&#29616;<tt class="literal">org.hibernate.UserType</tt>&#25110;<tt class="literal">org.hibernate.CompositeUserType</tt>&#20013;&#30340;&#20219;&#19968;&#20010;&#65292;&#24182;&#19988;&#20351;&#29992;&#31867;&#22411;&#30340;Java&#20840;&#38480;&#23450;&#31867;&#21517;&#26469;&#23450;&#20041;&#23646;&#24615;&#12290;&#35831;&#26597;&#30475;<tt class="literal">org.hibernate.test.DoubleStringType</tt>&#36825;&#20010;&#20363;&#23376;&#65292;&#30475;&#30475;&#23427;&#26159;&#24590;&#20040;&#20570;&#30340;&#12290;
            </p><pre class="programlisting">&lt;property name="twoStrings" type="org.hibernate.test.DoubleStringType"&gt;
    &lt;column name="first_string"/&gt;
    &lt;column name="second_string"/&gt;
&lt;/property&gt;</pre><p>
                &#27880;&#24847;&#20351;&#29992;<tt class="literal">&lt;column&gt;</tt>&#26631;&#31614;&#26469;&#25226;&#19968;&#20010;&#23646;&#24615;&#26144;&#23556;&#21040;&#22810;&#20010;&#23383;&#27573;&#30340;&#20570;&#27861;&#12290;
            </p><p>
                <tt class="literal">CompositeUserType</tt>, <tt class="literal">EnhancedUserType</tt>,
                <tt class="literal">UserCollectionType</tt>, &#21644; <tt class="literal">UserVersionType</tt> &#25509;&#21475;&#20026;&#26356;&#29305;&#27530;&#30340;&#20351;&#29992;&#26041;&#24335;&#25552;&#20379;&#25903;&#25345;&#12290;
            </p><p>
                &#20320;&#29978;&#33267;&#21487;&#20197;&#22312;&#19968;&#20010;&#26144;&#23556;&#25991;&#20214;&#20013;&#25552;&#20379;&#21442;&#25968;&#32473;&#19968;&#20010;<tt class="literal">UserType</tt>&#12290; &#20026;&#20102;&#36825;&#26679;&#20570;&#65292;&#20320;&#30340;<tt class="literal">UserType</tt>&#24517;&#39035;&#23454;&#29616;<tt class="literal">org.hibernate.usertype.ParameterizedType</tt>&#25509;&#21475;&#12290;&#20026;&#20102;&#32473;&#33258;&#23450;&#20041;&#31867;&#22411;&#25552;&#20379;&#21442;&#25968;&#65292;&#20320;&#21487;&#20197;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#20351;&#29992;<tt class="literal">&lt;type&gt;</tt>&#20803;&#32032;&#12290;
            </p><pre class="programlisting">&lt;property name="priority"&gt;
    &lt;type name="com.mycompany.usertypes.DefaultValueIntegerType"&gt;
        &lt;param name="default"&gt;0&lt;/param&gt;
    &lt;/type&gt;
&lt;/property&gt;</pre><p>
                &#29616;&#22312;&#65292;<tt class="literal">UserType</tt> &#21487;&#20197;&#20174;&#20256;&#20837;&#30340;<tt class="literal">Properties</tt>&#23545;&#35937;&#20013;&#24471;&#21040;<tt class="literal">default</tt> &#21442;&#25968;&#30340;&#20540;&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#38750;&#24120;&#39057;&#32321;&#22320;&#20351;&#29992;&#26576;&#19968;<tt class="literal">UserType</tt>&#65292;&#21487;&#20197;&#20026;&#20182;&#23450;&#20041;&#19968;&#20010;&#31616;&#31216;&#12290;&#36825;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992; <tt class="literal">&lt;typedef&gt;</tt>&#20803;&#32032;&#26469;&#23454;&#29616;&#12290;Typedefs&#20026;&#19968;&#33258;&#23450;&#20041;&#31867;&#22411;&#36171;&#20104;&#19968;&#20010;&#21517;&#31216;&#65292;&#24182;&#19988;&#22914;&#26524;&#27492;&#31867;&#22411;&#26159;&#21442;&#25968;&#21270;&#30340;&#65292;&#36824;&#21487;&#20197;&#21253;&#21547;&#19968;&#31995;&#21015;&#40664;&#35748;&#30340;&#21442;&#25968;&#20540;&#12290;
            </p><pre class="programlisting">&lt;typedef class="com.mycompany.usertypes.DefaultValueIntegerType" name="default_zero"&gt;
    &lt;param name="default"&gt;0&lt;/param&gt;
&lt;/typedef&gt;</pre><pre class="programlisting">&lt;property name="priority" type="default_zero"/&gt;</pre><p>
                &#20063;&#21487;&#20197;&#26681;&#25454;&#20855;&#20307;&#26696;&#20363;&#36890;&#36807;&#23646;&#24615;&#26144;&#23556;&#20013;&#30340;&#31867;&#22411;&#21442;&#25968;&#35206;&#30422;&#22312;typedef&#20013;&#25552;&#20379;&#30340;&#21442;&#25968;&#12290;
            </p><p>
			    &#23613;&#31649; Hibernate &#20869;&#24314;&#30340;&#20016;&#23500;&#30340;&#31867;&#22411;&#21644;&#23545;&#32452;&#20214;&#30340;&#25903;&#25345;&#24847;&#21619;&#30528;&#20320;&#21487;&#33021;&#24456;&#23569; <span class="emphasis"><em>&#38656;&#35201;</em></span>&#20351;&#29992;&#33258;&#23450;&#20041;&#31867;&#22411;&#12290;&#19981;&#36807;&#65292;&#20026;&#37027;&#20123;&#22312;&#20320;&#30340;&#24212;&#29992;&#20013;&#32463;&#24120;&#20986;&#29616;&#30340;(&#38750;&#23454;&#20307;)&#31867;&#20351;&#29992;&#33258;&#23450;&#20041;&#31867;&#22411;&#20063;&#26159;&#19968;&#20010;&#22909;&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;<tt class="literal">MonetaryAmount</tt>&#31867;&#20351;&#29992;<tt class="literal">CompositeUserType</tt>&#26469;&#26144;&#23556;&#26159;&#19981;&#38169;&#30340;&#36873;&#25321;&#65292;&#34429;&#28982;&#20182;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#34987;&#26144;&#23556;&#25104;&#32452;&#20214;&#12290;&#36825;&#26679;&#20570;&#30340;&#21160;&#26426;&#20043;&#19968;&#26159;&#25277;&#35937;&#12290;&#20351;&#29992;&#33258;&#23450;&#20041;&#31867;&#22411;&#65292;&#20197;&#21518;&#20551;&#33509;&#20320;&#25913;&#21464;&#34920;&#31034;&#37329;&#39069;&#30340;&#26041;&#27861;&#26102;&#65292;&#23427;&#21487;&#20197;&#20445;&#35777;&#26144;&#23556;&#25991;&#20214;&#19981;&#38656;&#35201;&#20462;&#25913;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-entityname"></a>5.3.&nbsp;&#22810;&#27425;&#26144;&#23556;&#21516;&#19968;&#20010;&#31867;</h2></div></div><div></div></div><p>
            &#23545;&#29305;&#23450;&#30340;&#25345;&#20037;&#21270;&#31867;&#65292;&#26144;&#23556;&#22810;&#27425;&#26159;&#20801;&#35768;&#30340;&#12290;&#36825;&#31181;&#24773;&#24418;&#19979;&#65292;&#20320;&#24517;&#39035;&#25351;&#23450;<span class="emphasis"><em>entity name</em></span>&#26469;&#21306;&#21035;&#19981;&#21516;&#26144;&#23556;&#23454;&#20307;&#30340;&#23545;&#35937;&#23454;&#20363;&#12290;&#65288;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#23454;&#20307;&#21517;&#23383;&#21644;&#31867;&#21517;&#26159;&#30456;&#21516;&#30340;&#12290;&#65289;
            Hibernate&#22312;&#25805;&#20316;&#25345;&#20037;&#21270;&#23545;&#35937;&#12289;&#32534;&#20889;&#26597;&#35810;&#26465;&#20214;&#65292;&#25110;&#32773;&#25226;&#20851;&#32852;&#26144;&#23556;&#21040;&#25351;&#23450;&#23454;&#20307;&#26102;&#65292;&#20801;&#35768;&#20320;&#25351;&#23450;&#36825;&#20010;entity name&#65288;&#23454;&#20307;&#21517;&#23383;&#65289;&#12290;
        </p><pre class="programlisting">&lt;class name="Contract" table="Contracts" 
        entity-name="CurrentContract"&gt;
    ...
    &lt;set name="history" inverse="true" 
            order-by="effectiveEndDate desc"&gt;
        &lt;key column="currentContractId"/&gt;
        &lt;one-to-many entity-name="HistoricalContract"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Contract" table="ContractHistory" 
        entity-name="HistoricalContract"&gt;
    ...
    &lt;many-to-one name="currentContract" 
            column="currentContractId" 
            entity-name="CurrentContract"/&gt;
&lt;/class&gt;</pre><p>
            &#27880;&#24847;&#36825;&#37324;&#20851;&#32852;&#26159;&#22914;&#20309;&#29992;<tt class="literal">entity-name</tt>&#26469;&#20195;&#26367;<tt class="literal">class</tt>&#30340;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-quotedidentifiers"></a>5.4.&nbsp;SQL&#20013;&#24341;&#21495;&#21253;&#22260;&#30340;&#26631;&#35782;&#31526;</h2></div></div><div></div></div><p>
                &#20320;&#21487;&#36890;&#36807;&#22312;&#26144;&#23556;&#25991;&#26723;&#20013;&#20351;&#29992;&#21453;&#21521;&#24341;&#21495;(`)&#25226;&#34920;&#21517;&#25110;&#32773;&#23383;&#27573;&#21517;&#21253;&#22260;&#36215;&#26469;&#65292;&#20197;&#24378;&#21046;Hibernate&#22312;&#29983;&#25104;&#30340;SQL&#20013;&#25226;&#26631;&#35782;&#31526;&#29992;&#24341;&#21495;&#21253;&#22260;&#36215;&#26469;&#12290;Hibernate&#20250;&#20351;&#29992;&#30456;&#24212;&#30340;SQL<tt class="literal">Dialect</tt>(&#26041;&#35328;)&#26469;&#20351;&#29992;&#27491;&#30830;&#30340;&#24341;&#21495;&#39118;&#26684;(&#36890;&#24120;&#26159;&#21452;&#24341;&#21495;&#65292;&#20294;&#26159;&#22312;SQL Server&#20013;&#26159;&#25324;&#21495;&#65292;MySQL&#20013;&#26159;&#21453;&#21521;&#24341;&#21495;)&#12290;
            </p><pre class="programlisting">&lt;class name="LineItem" table="`Line Item`"&gt;
    &lt;id name="id" column="`Item Id`"/&gt;&lt;generator class="assigned"/&gt;&lt;/id&gt;
    &lt;property name="itemNumber" column="`Item #`"/&gt;
    ...
&lt;/class&gt;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-alternatives"></a>5.5.&nbsp;&#20854;&#20182;&#20803;&#25968;&#25454;(Metadata)</h2></div></div><div></div></div><p>
   	    XML &#24182;&#19981;&#36866;&#29992;&#20110;&#25152;&#26377;&#20154;,  &#22240;&#27492;&#26377;&#20854;&#20182;&#23450;&#20041;Hibernate O/R &#26144;&#23556;&#20803;&#25968;&#25454;(metadata)&#30340;&#26041;&#27861;&#12290;
   	</p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-xdoclet"></a>5.5.1.&nbsp;&#20351;&#29992; XDoclet &#26631;&#35760;</h3></div></div><div></div></div><p>
            &#24456;&#22810;Hibernate&#20351;&#29992;&#32773;&#26356;&#21916;&#27426;&#20351;&#29992;XDoclet<tt class="literal">@hibernate.tags</tt>&#23558;&#26144;&#23556;&#20449;&#24687;&#30452;&#25509;&#23884;&#20837;&#21040;&#28304;&#20195;&#30721;&#20013;&#12290;&#25105;&#20204;&#19981;&#20250;&#22312;&#26412;&#25991;&#26723;&#20013;&#28041;&#21450;&#36825;&#20010;&#26041;&#27861;&#65292;&#22240;&#20026;&#20005;&#26684;&#35828;&#26469;&#65292;&#36825;&#23646;&#20110;XDoclet&#30340;&#19968;&#37096;&#20998;&#12290;&#28982;&#32780;&#65292;&#25105;&#20204;&#21253;&#21547;&#20102;&#22914;&#19979;&#20351;&#29992;XDoclet&#26144;&#23556;&#30340;<tt class="literal">Cat</tt>&#31867;&#30340;&#20363;&#23376;&#12290;
        </p><pre class="programlisting">package eg;
import java.util.Set;
import java.util.Date;

/**
 * @hibernate.class
 *  table="CATS"
 */
public class Cat {
    private Long id; // identifier
    private Date birthdate;
    private Cat mother;
    private Set kittens
    private Color color;
    private char sex;
    private float weight;

    /*
     * @hibernate.id
     *  generator-class="native"
     *  column="CAT_ID"
     */
    public Long getId() {
        return id;
    }
    private void setId(Long id) {
        this.id=id;
    }

    /**
     * @hibernate.many-to-one
     *  column="PARENT_ID"
     */
    public Cat getMother() {
        return mother;
    }
    void setMother(Cat mother) {
        this.mother = mother;
    }

    /**
     * @hibernate.property
     *  column="BIRTH_DATE"
     */
    public Date getBirthdate() {
        return birthdate;
    }
    void setBirthdate(Date date) {
        birthdate = date;
    }
    /**
     * @hibernate.property
     *  column="WEIGHT"
     */
    public float getWeight() {
        return weight;
    }
    void setWeight(float weight) {
        this.weight = weight;
    }

    /**
     * @hibernate.property
     *  column="COLOR"
     *  not-null="true"
     */
    public Color getColor() {
        return color;
    }
    void setColor(Color color) {
        this.color = color;
    }
    /**
     * @hibernate.set
     *  inverse="true"
     *  order-by="BIRTH_DATE"
     * @hibernate.collection-key
     *  column="PARENT_ID"
     * @hibernate.collection-one-to-many
     */
    public Set getKittens() {
        return kittens;
    }
    void setKittens(Set kittens) {
        this.kittens = kittens;
    }
    // addKitten not needed by Hibernate
    public void addKitten(Cat kitten) {
        kittens.add(kitten);
    }

    /**
     * @hibernate.property
     *  column="SEX"
     *  not-null="true"
     *  update="false"
     */
    public char getSex() {
        return sex;
    }
    void setSex(char sex) {
        this.sex=sex;
    }
}</pre><p>
            &#21442;&#32771;Hibernate&#32593;&#31449;&#26356;&#22810;&#30340;Xdoclet&#21644;Hibernate&#30340;&#20363;&#23376;
        </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-annotations"></a>5.5.2.&nbsp;&#20351;&#29992; JDK 5.0 &#30340;&#27880;&#35299;(Annotation)</h3></div></div><div></div></div><p>
            JDK 5.0 &#22312;&#35821;&#35328;&#32423;&#21035;&#24341;&#20837;&#20102; XDoclet &#39118;&#26684;&#30340;&#26631;&#27880;&#65292;&#24182;&#19988;&#26159;&#31867;&#22411;&#23433;&#20840;&#30340;&#65292;&#22312;&#32534;&#35793;&#26399;&#36827;&#34892;&#26816;&#26597;&#12290;&#36825;&#19968;&#26426;&#21046;&#27604;XDoclet&#30340;&#27880;&#35299;&#26356;&#20026;&#24378;&#22823;&#65292;&#26377;&#26356;&#22909;&#30340;&#24037;&#20855;&#21644;IDE&#25903;&#25345;&#12290;&#20363;&#22914;&#65292; IntelliJ IDEA&#65292;&#25903;&#25345;JDK 5.0&#27880;&#35299;&#30340;&#33258;&#21160;&#23436;&#25104;&#21644;&#35821;&#27861;&#39640;&#20142; &#12290;EJB&#35268;&#33539;&#30340;&#26032;&#20462;&#35746;&#29256;(JSR-220)&#20351;&#29992; JDK 5.0&#30340;&#27880;&#35299;&#20316;&#20026;entity beans&#30340;&#20027;&#35201;&#20803;&#25968;&#25454;(metadata)&#26426;&#21046;&#12290;Hibernate 3 &#23454;&#29616;&#20102;JSR-220 (the persistence API)&#30340;<tt class="literal">EntityManager</tt>&#65292;&#25903;&#25345;&#36890;&#36807;<span class="emphasis"><em>Hibernate Annotations</em></span>&#21253;&#23450;&#20041;&#26144;&#23556;&#20803;&#25968;&#25454;&#12290;&#36825;&#20010;&#21253;&#20316;&#20026;&#21333;&#29420;&#30340;&#37096;&#20998;&#19979;&#36733;&#65292;&#25903;&#25345;EJB3 (JSR-220)&#21644;Hibernate3&#30340;&#20803;&#25968;&#25454;&#12290;
        </p><p>
            &#36825;&#26159;&#19968;&#20010;&#34987;&#27880;&#35299;&#20026;EJB entity bean &#30340;POJO&#31867;&#30340;&#20363;&#23376;
        </p><pre class="programlisting">@Entity(access = AccessType.FIELD)
public class Customer implements Serializable {

    @Id;
    Long id;

    String firstName;
    String lastName;
    Date birthday;

    @Transient
    Integer age;

    @Embedded
    private Address homeAddress;

    @OneToMany(cascade=CascadeType.ALL)
    @JoinColumn(name="CUSTOMER_ID")
    Set&lt;Order&gt; orders;

    // Getter/setter and business methods
}</pre><p>
            &#27880;&#24847;&#65306;&#23545; JDK 5.0 &#27880;&#35299; (&#21644; JSR-220)&#25903;&#25345;&#30340;&#24037;&#20316;&#20173;&#28982;&#22312;&#36827;&#34892;&#20013;,&#24182;&#26410;&#23436;&#25104;&#12290;&#26356;&#22810;&#32454;&#33410;&#35831;&#21442;&#38405;Hibernate Annotations &#27169;&#22359;&#12290;
        </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-generated"></a>5.6.&nbsp;&#25968;&#25454;&#24211;&#29983;&#25104;&#23646;&#24615;&#65288;Generated Properties&#65289;</h2></div></div><div></div></div><p>
            Generated properties&#25351;&#30340;&#26159;&#20854;&#20540;&#30001;&#25968;&#25454;&#24211;&#29983;&#25104;&#30340;&#23646;&#24615;&#12290;&#19968;&#33324;&#26469;&#35828;&#65292;&#22914;&#26524;&#23545;&#35937;&#26377;&#20219;&#20309;&#23646;&#24615;&#30001;&#25968;&#25454;&#24211;&#29983;&#25104;&#20540;&#65292;Hibernate&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#36827;&#34892;<tt class="literal">&#21047;&#26032;(refresh)</tt>&#12290;&#20294;&#22914;&#26524;&#25226;&#23646;&#24615;&#26631;&#26126;&#20026;generated&#65292;&#23601;&#21487;&#20197;&#36716;&#30001;Hibernate&#26469;&#36127;&#36131;&#36825;&#20010;&#21160;&#20316;&#12290;&#23454;&#38469;&#19978;&#12290;&#23545;&#23450;&#20041;&#20102;generated properties&#30340;&#23454;&#20307;,&#27599;&#24403;Hibernate&#25191;&#34892;&#19968;&#26465;SQL INSERT&#25110;&#32773;UPDATE&#35821;&#21477;&#65292;&#20250;&#31435;&#21051;&#25191;&#34892;&#19968;&#26465;select&#26469;&#33719;&#24471;&#29983;&#25104;&#30340;&#20540;&#12290;
        </p><p>
            &#34987;&#26631;&#26126;&#20026;generated&#30340;&#23646;&#24615;&#36824;&#24517;&#39035;&#26159; non-insertable&#21644; non-updateable&#30340;&#12290;&#21482;&#26377;<a href="#mapping-declaration-version" title="5.1.7.&nbsp;&#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)">&#31532;&nbsp;5.1.7&nbsp;&#33410; &#8220;&#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)&#8221;</a>&#65292;<a href="#mapping-declaration-timestamp" title="5.1.8.&nbsp;timestamp (&#21487;&#36873;)">&#31532;&nbsp;5.1.8&nbsp;&#33410; &#8220;timestamp (&#21487;&#36873;)&#8221;</a>&#21644;<a href="#mapping-declaration-property" title="5.1.9.&nbsp;property">&#31532;&nbsp;5.1.9&nbsp;&#33410; &#8220;property&#8221;</a>&#21487;&#20197;&#34987;&#26631;&#26126;&#20026;generated&#12290;
        </p><p>
		    <tt class="literal">never</tt> (&#40664;&#35748;) &#26631;&#26126;&#27492;&#23646;&#24615;&#20540;&#19981;&#26159;&#20174;&#25968;&#25454;&#24211;&#20013;&#29983;&#25104;&#12290;
	    </p><p>
		    <tt class="literal">insert</tt> - &#26631;&#26126;&#27492;&#23646;&#24615;&#20540;&#22312;insert&#30340;&#26102;&#20505;&#29983;&#25104;&#65292;&#20294;&#26159;&#19981;&#20250;&#22312;&#38543;&#21518;&#30340;update&#26102;&#37325;&#26032;&#29983;&#25104;&#12290;&#27604;&#22914;&#35828;&#21019;&#24314;&#26085;&#26399;&#23601;&#24402;&#23646;&#20110;&#36825;&#31867;&#12290;&#27880;&#24847;&#34429;&#28982;<a href="#mapping-declaration-version" title="5.1.7.&nbsp;&#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)">&#31532;&nbsp;5.1.7&nbsp;&#33410; &#8220;&#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)&#8221;</a>&#21644;<a href="#mapping-declaration-timestamp" title="5.1.8.&nbsp;timestamp (&#21487;&#36873;)">&#31532;&nbsp;5.1.8&nbsp;&#33410; &#8220;timestamp (&#21487;&#36873;)&#8221;</a>&#23646;&#24615;&#21487;&#20197;&#34987;&#26631;&#27880;&#20026;generated&#65292;&#20294;&#26159;&#19981;&#36866;&#29992;&#36825;&#20010;&#36873;&#39033;...
	    </p><p>
		    <tt class="literal">always</tt> - &#26631;&#26126;&#27492;&#23646;&#24615;&#20540;&#22312;insert&#21644;update&#26102;&#37117;&#20250;&#34987;&#29983;&#25104;&#12290;
	    </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-database-object"></a>5.7.&nbsp;&#36741;&#21161;&#25968;&#25454;&#24211;&#23545;&#35937;(Auxiliary Database Objects)</h2></div></div><div></div></div><p>
            Allows CREATE and DROP of arbitrary database objects, in conjunction with
            Hibernate's schema evolution tools, to provide the ability to fully define
            a user schema within the Hibernate mapping files.  Although designed specifically
            for creating and dropping things like triggers or stored procedures, really any
            SQL command that can be run via a <tt class="literal">java.sql.Statement.execute()</tt>
            method is valid here (ALTERs, INSERTS, etc).  There are essentially two modes for
            defining auxiliary database objects...
            &#24110;&#21161;CREATE&#21644;DROP&#20219;&#24847;&#25968;&#25454;&#24211;&#23545;&#35937;&#65292;&#19982;Hibernate&#30340;schema&#20132;&#20114;&#24037;&#20855;&#32452;&#21512;&#36215;&#26469;&#65292;&#21487;&#20197;&#25552;&#20379;&#22312;Hibernate&#26144;&#23556;&#25991;&#20214;&#20013;&#23436;&#20840;&#23450;&#20041;&#29992;&#25143;schema&#30340;&#33021;&#21147;&#12290;&#34429;&#28982;&#36825;&#26159;&#20026;&#21019;&#24314;&#21644;&#38144;&#27585;trigger(&#35302;&#21457;&#22120;&#65289;&#25110;stored procedure(&#23384;&#20648;&#36807;&#31243;&#65289;&#31561;&#29305;&#21035;&#35774;&#35745;&#30340;&#65292;&#23454;&#38469;&#19978;&#20219;&#20309;&#21487;&#20197;&#22312;<tt class="literal">java.sql.Statement.execute()</tt>&#26041;&#27861;&#20013;&#25191;&#34892;&#30340;SQL&#21629;&#20196;&#37117;&#21487;&#20197;&#22312;&#27492;&#20351;&#29992;&#65288;&#27604;&#22914;ALTER, INSERT&#65292;&#31561;&#31561;&#65289;&#12290;&#26412;&#36136;&#19978;&#26377;&#20004;&#31181;&#27169;&#24335;&#26469;&#23450;&#20041;&#36741;&#21161;&#25968;&#25454;&#24211;&#23545;&#35937;...
        </p><p>
            &#31532;&#19968;&#31181;&#27169;&#24335;&#26159;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#26174;&#24335;&#22768;&#26126;CREATE&#21644;DROP&#21629;&#20196;&#65306;
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;create&gt;CREATE TRIGGER my_trigger ...&lt;/create&gt;
        &lt;drop&gt;DROP TRIGGER my_trigger&lt;/drop&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre><p>
            &#31532;&#20108;&#31181;&#27169;&#24335;&#26159;&#25552;&#20379;&#19968;&#20010;&#31867;&#65292;&#36825;&#20010;&#31867;&#30693;&#36947;&#22914;&#20309;&#32452;&#32455;CREATE&#21644;DROP&#21629;&#20196;&#12290;&#36825;&#20010;&#29305;&#21035;&#31867;&#24517;&#39035;&#23454;&#29616;<tt class="literal">org.hibernate.mapping.AuxiliaryDatabaseObject</tt>&#25509;&#21475;&#12290;
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;definition class="MyTriggerDefinition"/&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre><p>
            &#36824;&#26377;&#65292;&#36825;&#20123;&#25968;&#25454;&#24211;&#23545;&#35937;&#21487;&#20197;&#29305;&#21035;&#25351;&#23450;&#20026;&#20165;&#22312;&#29305;&#23450;&#30340;&#26041;&#35328;&#20013;&#25165;&#20351;&#29992;&#12290;
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;definition class="MyTriggerDefinition"/&gt;
        &lt;dialect-scope name="org.hibernate.dialect.Oracle9Dialect"/&gt;
        &lt;dialect-scope name="org.hibernate.dialect.OracleDialect"/&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="collections"></a>&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#38598;&#21512;&#31867;(Collections)&#26144;&#23556;</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-persistent"></a>6.1.&nbsp;&#25345;&#20037;&#21270;&#38598;&#21512;&#31867;(Persistent collections)</h2></div></div><div></div></div><p><a name="collections-persistent-translate-comment"></a>
            (&#35793;&#32773;&#27880;&#65306;&#22312;&#38405;&#35835;&#26412;&#31456;&#30340;&#26102;&#20505;&#65292;&#20197;&#21518;&#25972;&#20010;&#25163;&#20876;&#30340;&#38405;&#35835;&#36807;&#31243;&#20013;&#65292;&#25105;&#20204;&#37117;&#20250;&#38754;&#20020;&#19968;&#20010;&#21517;&#35789;&#26041;&#38754;&#30340;&#38382;&#39064;&#65292;&#37027;&#23601;&#26159;&#8220;&#38598;&#21512;&#8221;&#12290;"Collections"&#21644;"Set"&#22312;&#20013;&#25991;&#37324;&#23545;&#24212;&#37117;&#34987;&#32763;&#35793;&#20026;&#8220;&#38598;&#21512;&#8221;&#65292;&#20294;&#26159;&#20182;&#20204;&#30340;&#21547;&#20041;&#24456;&#19981;&#19968;&#26679;&#12290;Collections&#26159;&#19968;&#20010;&#36229;&#38598;&#65292;Set&#26159;&#20854;&#20013;&#30340;&#19968;&#31181;&#12290;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#65292;&#26412;&#35793;&#31295;&#20013;&#27867;&#25351;&#30340;&#26410;&#21152;&#33521;&#25991;&#27880;&#26126;&#30340;&#8220;&#38598;&#21512;&#8221;&#65292;&#37117;&#24212;&#24403;&#29702;&#35299;&#20026;&#8220;Collections&#8221;&#12290;&#22312;&#26377;&#20123;&#20108;&#32773;&#21516;&#26102;&#20986;&#29616;&#65292;&#21487;&#33021;&#36896;&#25104;&#28151;&#28102;&#30340;&#22320;&#26041;&#65292;&#25105;&#20204;&#29992;&#8220;&#38598;&#21512;&#31867;&#8221;&#26469;&#29305;&#25351;&#8220;Collecions&#8221;,&#8220;&#38598;&#21512;(Set)&#8221;&#26469;&#25351;"Set"&#65292;&#19968;&#33324;&#37117;&#20250;&#22312;&#21518;&#38754;&#30340;&#25324;&#21495;&#20013;&#32473;&#20986;&#33521;&#25991;&#12290;&#24076;&#26395;&#22823;&#23478;&#22312;&#38405;&#35835;&#26102;&#32852;&#31995;&#19978;&#19979;&#25991;&#29702;&#35299;&#65292;&#19981;&#35201;&#36896;&#25104;&#35823;&#35299;&#12290;
            &#19982;&#27492;&#21516;&#26102;&#65292;&#8220;&#20803;&#32032;&#8221;&#19968;&#35789;&#23545;&#24212;&#30340;&#33521;&#25991;&#8220;element&#8221;&#65292;&#20063;&#26377;&#20004;&#20010;&#19981;&#21516;&#30340;&#21547;&#20041;&#12290;&#20854;&#19968;&#20026;&#38598;&#21512;&#30340;&#20803;&#32032;&#65292;&#26159;&#20869;&#23384;&#20013;&#30340;&#19968;&#20010;&#21464;&#37327;&#65307;&#21478;&#19968;&#21547;&#20041;&#21017;&#26159;XML&#25991;&#26723;&#20013;&#30340;&#19968;&#20010;&#26631;&#31614;&#25152;&#20195;&#34920;&#30340;&#20803;&#32032;&#12290;&#20063;&#35831;&#27880;&#24847;&#21306;&#21035;&#12290;
            &#26412;&#31456;&#20013;,&#29305;&#21035;&#26159;&#21518;&#21322;&#37096;&#20998;&#26159;&#38656;&#35201;&#21453;&#22797;&#38405;&#35835;&#25165;&#33021;&#29702;&#35299;&#28165;&#26970;&#30340;&#12290;&#22914;&#26524;&#36935;&#21040;&#20219;&#20309;&#30097;&#38382;,&#35831;&#35760;&#20303;,&#33521;&#25991;&#29256;&#26412;&#30340;reference&#26159;&#24799;&#19968;&#26631;&#20934;&#30340;&#21442;&#32771;&#36164;&#26009;&#12290;)
            </p><p>
            Hibernate&#35201;&#27714;&#25345;&#20037;&#21270;&#38598;&#21512;&#20540;&#23383;&#27573;&#24517;&#39035;&#22768;&#26126;&#20026;&#25509;&#21475;&#65292;&#27604;&#22914;&#65306;
        </p><pre class="programlisting">public class Product {
    private String serialNumber;
    private Set parts = new HashSet();
    
    public Set getParts() { return parts; }
    void setParts(Set parts) { this.parts = parts; }
    public String getSerialNumber() { return serialNumber; }
    void setSerialNumber(String sn) { serialNumber = sn; }
}</pre><p>
            &#23454;&#38469;&#30340;&#25509;&#21475;&#21487;&#33021;&#26159;<tt class="literal">java.util.Set</tt>,
            <tt class="literal">java.util.Collection</tt>, <tt class="literal">java.util.List</tt>,
            <tt class="literal">java.util.Map</tt>, <tt class="literal">java.util.SortedSet</tt>,
            <tt class="literal">java.util.SortedMap</tt> &#25110;&#32773;...&#20219;&#20309;&#20320;&#21916;&#27426;&#30340;&#31867;&#22411;&#65281;("&#20219;&#20309;&#20320;&#21916;&#27426;&#30340;&#31867;&#22411;" &#20195;&#34920;&#20320;&#38656;&#35201;&#32534;&#20889;           <tt class="literal">org.hibernate.usertype.UserCollectionType</tt>&#30340;&#23454;&#29616;.)
        </p><p>
            &#27880;&#24847;&#25105;&#20204;&#26159;&#22914;&#20309;&#29992;&#19968;&#20010;<tt class="literal">HashSet</tt>&#23454;&#20363;&#26469;&#21021;&#22987;&#21270;&#23454;&#20363;&#21464;&#37327;&#30340;.&#36825;&#26159;&#29992;&#20110;&#21021;&#22987;&#21270;&#26032;&#21019;&#24314;(&#23578;&#26410;&#25345;&#20037;&#21270;)&#30340;&#31867;&#23454;&#20363;&#20013;&#38598;&#21512;&#20540;&#23646;&#24615;&#30340;&#26368;&#20339;&#26041;&#27861;&#12290;&#24403;&#20320;&#25345;&#20037;&#21270;&#36825;&#20010;&#23454;&#20363;&#26102;&#8212;&#8212;&#27604;&#22914;&#36890;&#36807;&#35843;&#29992;<tt class="literal">persist()</tt>&#8212;&#8212;Hibernate &#20250;&#33258;&#21160;&#25226;<tt class="literal">HashSet</tt>&#26367;&#25442;&#20026;Hibernate&#33258;&#24049;&#30340;<tt class="literal">Set</tt>&#23454;&#29616;&#12290;&#35266;&#23519;&#19979;&#38754;&#30340;&#38169;&#35823;&#65306;
        </p><pre class="programlisting">Cat cat = new DomesticCat();
Cat kitten = new DomesticCat();
....
Set kittens = new HashSet();
kittens.add(kitten);
cat.setKittens(kittens);
session.persist(cat);
kittens = cat.getKittens(); //Okay, kittens collection is a Set
(HashSet) cat.getKittens(); //Error!</pre><p>
                    &#26681;&#25454;&#19981;&#21516;&#30340;&#25509;&#21475;&#31867;&#22411;&#65292;&#34987;Hibernate&#27880;&#23556;&#30340;&#25345;&#20037;&#21270;&#38598;&#21512;&#31867;&#30340;&#34920;&#29616;&#31867;&#20284;<tt class="literal">HashMap</tt>, <tt class="literal">HashSet</tt>,
            <tt class="literal">TreeMap</tt>, <tt class="literal">TreeSet</tt> or
            <tt class="literal">ArrayList</tt>&#12290;
		</p><p>
        	&#38598;&#21512;&#31867;&#23454;&#20363;&#20855;&#26377;&#20540;&#31867;&#22411;&#30340;&#36890;&#24120;&#34892;&#20026;&#12290;&#24403;&#34987;&#25345;&#20037;&#21270;&#23545;&#35937;&#24341;&#29992;&#21518;&#65292;&#20182;&#20204;&#20250;&#33258;&#21160;&#34987;&#25345;&#20037;&#21270;&#65292;&#24403;&#19981;&#20877;&#34987;&#24341;&#29992;&#21518;&#65292;&#33258;&#21160;&#34987;&#21024;&#38500;&#12290;&#20551;&#33509;&#23454;&#20363;&#34987;&#20174;&#19968;&#20010;&#25345;&#20037;&#21270;&#23545;&#35937;&#20256;&#36882;&#21040;&#21478;&#19968;&#20010;&#65292;&#23427;&#30340;&#20803;&#32032;&#21487;&#33021;&#20174;&#19968;&#20010;&#34920;&#36716;&#31227;&#21040;&#21478;&#19968;&#20010;&#34920;&#12290;&#20004;&#20010;&#23454;&#20307;&#19981;&#33021;&#20849;&#20139;&#21516;&#19968;&#20010;&#38598;&#21512;&#31867;&#23454;&#20363;&#30340;&#24341;&#29992;&#12290;&#22240;&#20026;&#24213;&#23618;&#20851;&#31995;&#25968;&#25454;&#24211;&#27169;&#22411;&#30340;&#21407;&#22240;&#65292;&#38598;&#21512;&#20540;&#23646;&#24615;&#26080;&#27861;&#25903;&#25345;&#31354;&#20540;&#35821;&#20041;&#65307;Hibernate&#23545;&#31354;&#30340;&#38598;&#21512;&#24341;&#29992;&#21644;&#31354;&#38598;&#21512;&#19981;&#21152;&#21306;&#21035;&#12290;
        </p><p>
        &#20320;&#19981;&#38656;&#35201;&#36807;&#22810;&#30340;&#20026;&#27492;&#25285;&#24515;&#12290;&#23601;&#22914;&#21516;&#20320;&#24179;&#26102;&#20351;&#29992;&#26222;&#36890;&#30340;Java&#38598;&#21512;&#31867;&#19968;&#26679;&#26469;&#20351;&#29992;&#25345;&#20037;&#21270;&#38598;&#21512;&#31867;&#12290;&#21482;&#26159;&#35201;&#30830;&#35748;&#20320;&#29702;&#35299;&#20102;&#21452;&#21521;&#20851;&#32852;&#30340;&#35821;&#20041;&#65288;&#21518;&#25991;&#35752;&#35770;&#65289;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-mapping"></a>6.2.&nbsp;&#38598;&#21512;&#26144;&#23556;&#65288; Collection mappings &#65289;</h2></div></div><div></div></div><p>
        &#29992;&#20110;&#26144;&#23556;&#38598;&#21512;&#31867;&#30340;Hibernate&#26144;&#23556;&#20803;&#32032;&#21462;&#20915;&#20110;&#25509;&#21475;&#30340;&#31867;&#22411;&#12290;&#27604;&#22914;&#65292; <tt class="literal">&lt;set&gt;</tt> &#20803;&#32032;&#29992;&#26469;&#26144;&#23556;<tt class="literal">Set</tt>&#31867;&#22411;&#30340;&#23646;&#24615;&#12290;
        </p><pre class="programlisting">&lt;class name="Product"&gt;
    &lt;id name="serialNumber" column="productSerialNumber"/&gt;
    &lt;set name="parts"&gt;
        &lt;key column="productSerialNumber" not-null="true"/&gt;
        &lt;one-to-many class="Part"/&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><p>
        &#38500;&#20102;<tt class="literal">&lt;set&gt;</tt>,&#36824;&#26377;<tt class="literal">&lt;list&gt;</tt>, <tt class="literal">&lt;map&gt;</tt>,            <tt class="literal">&lt;bag&gt;</tt>, <tt class="literal">&lt;array&gt;</tt> &#21644;
            <tt class="literal">&lt;primitive-array&gt;</tt> &#26144;&#23556;&#20803;&#32032;&#12290;<tt class="literal">&lt;map&gt;</tt>&#20855;&#26377;&#20195;&#34920;&#24615;&#65306;
        </p><div class="programlistingco"><pre class="programlisting">&lt;map
    name="propertyName"                                         <span class="co">(1)</span>
    table="table_name"                                          <span class="co">(2)</span>
    schema="schema_name"                                        <span class="co">(3)</span>
    lazy="true|extra|false"                                     <span class="co">(4)</span>
    inverse="true|false"                                        <span class="co">(5)</span>
    cascade="all|none|save-update|delete|all-delete-orphan|delet<span class="co">(6)</span>e-orphan"
    sort="unsorted|natural|comparatorClass"                     <span class="co">(7)</span>
    order-by="column_name asc|desc"                             <span class="co">(8)</span>
    where="arbitrary sql where condition"                       <span class="co">(9)</span>
    fetch="join|select|subselect"                               <span class="co">(10)</span>
    batch-size="N"                                              <span class="co">(11)</span>
    access="field|property|ClassName"                           <span class="co">(12)</span>
    optimistic-lock="true|false"                                <span class="co">(13)</span>
    mutable="true|false"                                        <span class="co">(14)</span>
    node="element-name|."
    embed-xml="true|false"
&gt;

    &lt;key .... /&gt;
    &lt;map-key .... /&gt;
    &lt;element .... /&gt;
&lt;/map&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt> &#38598;&#21512;&#23646;&#24615;&#30340;&#21517;&#31216;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
							<tt class="literal">table</tt> &#65288;&#21487;&#36873;&#8212;&#8212;&#40664;&#35748;&#20026;&#23646;&#24615;&#30340;&#21517;&#31216;&#65289;&#36825;&#20010;&#38598;&#21512;&#34920;&#30340;&#21517;&#31216;(&#19981;&#33021;&#22312;&#19968;&#23545;&#22810;&#30340;&#20851;&#32852;&#20851;&#31995;&#20013;&#20351;&#29992;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema</tt> (&#21487;&#36873;) &#34920;&#30340;schema&#30340;&#21517;&#31216;, &#20182;&#23558;&#35206;&#30422;&#22312;&#26681;&#20803;&#32032;&#20013;&#23450;&#20041;&#30340;schema
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873;--&#40664;&#35748;&#20026;true) &#21487;&#20197;&#29992;&#26469;&#20851;&#38381;&#24310;&#36831;&#21152;&#36733;(false)&#65292;&#25351;&#23450;&#19968;&#30452;&#20351;&#29992;&#39044;&#20808;&#25235;&#21462;,&#25110;&#32773;&#25171;&#24320;"extra-lazy" &#25235;&#21462;&#65292;&#27492;&#26102;&#22823;&#22810;&#25968;&#25805;&#20316;&#19981;&#20250;&#21021;&#22987;&#21270;&#38598;&#21512;&#31867;(&#36866;&#29992;&#20110;&#38750;&#24120;&#22823;&#30340;&#38598;&#21512;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">inverse</tt> (&#21487;&#36873;&#8212;&#8212;&#40664;&#35748;&#20026;<tt class="literal">false</tt>)
                            &#26631;&#35760;&#36825;&#20010;&#38598;&#21512;&#20316;&#20026;&#21452;&#21521;&#20851;&#32852;&#20851;&#31995;&#20013;&#30340;&#26041;&#21521;&#19968;&#31471;&#12290;

                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade</tt> (&#21487;&#36873;&#8212;&#8212;&#40664;&#35748;&#20026;<tt class="literal">none</tt>)
                            &#35753;&#25805;&#20316;&#32423;&#32852;&#21040;&#23376;&#23454;&#20307;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">sort</tt>(&#21487;&#36873;)&#25351;&#23450;&#38598;&#21512;&#30340;&#25490;&#24207;&#39034;&#24207;, &#20854;&#21487;&#20197;&#20026;&#33258;&#28982;&#30340;(<tt class="literal">natural</tt>)&#25110;&#32773;&#32473;&#23450;&#19968;&#20010;&#29992;&#26469;&#27604;&#36739;&#30340;&#31867;&#12290;

                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">order-by</tt> (&#21487;&#36873;, &#20165;&#29992;&#20110;jdk1.4) &#25351;&#23450;&#34920;&#30340;&#23383;&#27573;(&#19968;&#20010;&#25110;&#20960;&#20010;)&#20877;&#21152;&#19978;asc&#25110;&#32773;desc(&#21487;&#36873;), &#23450;&#20041;Map,Set&#21644;Bag&#30340;&#36845;&#20195;&#39034;&#24207;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">where</tt> (&#21487;&#36873;) &#25351;&#23450;&#20219;&#24847;&#30340;SQL where&#26465;&#20214;, &#35813;&#26465;&#20214;&#23558;&#22312;&#37325;&#26032;&#36733;&#20837;&#25110;&#32773;&#21024;&#38500;&#36825;&#20010;&#38598;&#21512;&#26102;&#20351;&#29992;(&#24403;&#38598;&#21512;&#20013;&#30340;&#25968;&#25454;&#20165;&#20165;&#26159;&#25152;&#26377;&#21487;&#29992;&#25968;&#25454;&#30340;&#19968;&#20010;&#23376;&#38598;&#26102;&#36825;&#20010;&#26465;&#20214;&#38750;&#24120;&#26377;&#29992;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                        <tt class="literal">fetch</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026;<tt class="literal">select</tt>) &#29992;&#20110;&#22312;&#22806;&#36830;&#25509;&#25235;&#21462;&#12289;&#36890;&#36807;&#21518;&#32493;select&#25235;&#21462;&#21644;&#36890;&#36807;&#21518;&#32493;subselect&#25235;&#21462;&#20043;&#38388;&#36873;&#25321;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">batch-size</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026;<tt class="literal">1</tt>) &#25351;&#23450;&#36890;&#36807;&#24310;&#36831;&#21152;&#36733;&#21462;&#24471;&#38598;&#21512;&#23454;&#20363;&#30340;&#25209;&#22788;&#29702;&#22359;&#22823;&#23567;&#65288;"batch size"&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(12)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt>(&#21487;&#36873;-&#40664;&#35748;&#20026;&#23646;&#24615;property):Hibernate&#21462;&#24471;&#38598;&#21512;&#23646;&#24615;&#20540;&#26102;&#20351;&#29992;&#30340;&#31574;&#30053;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(13)</td><td valign="top" align="left"><p>
                        <tt class="literal">&#20048;&#35266;&#38145;</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">true</tt>): 
                        &#23545;&#38598;&#21512;&#30340;&#29366;&#24577;&#30340;&#25913;&#21464;&#20250;&#26159;&#21542;&#23548;&#33268;&#20854;&#25152;&#23646;&#30340;&#23454;&#20307;&#30340;&#29256;&#26412;&#22686;&#38271;&#12290; (&#23545;&#19968;&#23545;&#22810;&#20851;&#32852;&#26469;&#35828;&#65292;&#20851;&#38381;&#36825;&#20010;&#23646;&#24615;&#24120;&#24120;&#26159;&#26377;&#29702;&#30340;)
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(14)</td><td valign="top" align="left"><p>
                        <tt class="literal">mutable(&#21487;&#21464;&#65289;</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;<tt class="literal">true</tt>): 
                        &#33509;&#20540;&#20026;<tt class="literal">false</tt>,&#34920;&#26126;&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#19981;&#20250;&#25913;&#21464;&#65288;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#21487;&#20197;&#36827;&#34892;&#19968;&#20123;&#23567;&#30340;&#24615;&#33021;&#20248;&#21270;&#65289;&#12290;
                    </p></td></tr></table></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-foreignkeys"></a>6.2.1.&nbsp;&#38598;&#21512;&#22806;&#38190;(Collection foreign keys)</h3></div></div><div></div></div><p>
            &#38598;&#21512;&#23454;&#20363;&#22312;&#25968;&#25454;&#24211;&#20013;&#20381;&#38752;&#25345;&#26377;&#38598;&#21512;&#30340;&#23454;&#20307;&#30340;&#22806;&#38190;&#21152;&#20197;&#36776;&#21035;&#12290;&#27492;&#22806;&#38190;&#20316;&#20026;<span class="emphasis"><em>&#38598;&#21512;&#20851;&#38190;&#23383;&#27573;&#65288;collection key column&#65289;</em></span>&#65288;&#25110;&#22810;&#20010;&#23383;&#27573;&#65289;&#21152;&#20197;&#24341;&#29992;&#12290;&#38598;&#21512;&#20851;&#38190;&#23383;&#27573;&#36890;&#36807;<tt class="literal">&lt;key&gt;</tt> &#20803;&#32032;&#26144;&#23556;&#12290;
            </p><p>
                &#22312;&#22806;&#38190;&#23383;&#27573;&#19978;&#21487;&#33021;&#20855;&#26377;&#38750;&#31354;&#32422;&#26463;&#12290;&#23545;&#20110;&#22823;&#22810;&#25968;&#38598;&#21512;&#26469;&#35828;&#65292;&#36825;&#26159;&#38544;&#21547;&#30340;&#12290;&#23545;&#21333;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;&#26469;&#35828;&#65292;&#22806;&#38190;&#23383;&#27573;&#40664;&#35748;&#26159;&#21487;&#20197;&#20026;&#31354;&#30340;&#65292;&#22240;&#27492;&#20320;&#21487;&#33021;&#38656;&#35201;&#25351;&#26126; <tt class="literal">not-null="true"</tt>&#12290;
            </p><pre class="programlisting">&lt;key column="productSerialNumber" not-null="true"/&gt;</pre><p>
                &#22806;&#38190;&#32422;&#26463;&#21487;&#20197;&#20351;&#29992;<tt class="literal">ON DELETE CASCADE</tt>&#12290;
            </p><pre class="programlisting">&lt;key column="productSerialNumber" on-delete="cascade"/&gt;</pre><p>
                &#23545;<tt class="literal">&lt;key&gt;</tt> &#20803;&#32032;&#30340;&#23436;&#25972;&#23450;&#20041;&#65292;&#35831;&#21442;&#38405;&#21069;&#38754;&#30340;&#31456;&#33410;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-elements"></a>6.2.2.&nbsp;&#38598;&#21512;&#20803;&#32032;&#65288;Collection elements&#65289;</h3></div></div><div></div></div><p>
              &#38598;&#21512;&#20960;&#20046;&#21487;&#20197;&#21253;&#21547;&#20219;&#20309;&#20854;&#20182;&#30340;Hibernate&#31867;&#22411;&#65292;&#21253;&#25324;&#25152;&#26377;&#30340;&#22522;&#26412;&#31867;&#22411;&#12289;&#33258;&#23450;&#20041;&#31867;&#22411;&#12289;&#32452;&#20214;&#65292;&#24403;&#28982;&#36824;&#26377;&#23545;&#20854;&#20182;&#23454;&#20307;&#30340;&#24341;&#29992;&#12290;&#23384;&#22312;&#19968;&#20010;&#37325;&#35201;&#30340;&#21306;&#21035;&#65306;&#20301;&#20110;&#38598;&#21512;&#20013;&#30340;&#23545;&#35937;&#21487;&#33021;&#26159;&#26681;&#25454;&#8220;&#20540;&#8221;&#35821;&#20041;&#26469;&#25805;&#20316;&#65288;&#20854;&#22768;&#26126;&#21608;&#26399;&#23436;&#20840;&#20381;&#36182;&#20110;&#38598;&#21512;&#25345;&#26377;&#32773;&#65289;&#65292;&#25110;&#32773;&#23427;&#21487;&#33021;&#26159;&#25351;&#21521;&#21478;&#19968;&#20010;&#23454;&#20307;&#30340;&#24341;&#29992;&#65292;&#20855;&#26377;&#20854;&#33258;&#24049;&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;&#22312;&#21518;&#32773;&#30340;&#24773;&#20917;&#19979;&#65292;&#34987;&#20316;&#20026;&#38598;&#21512;&#25345;&#26377;&#30340;&#29366;&#24577;&#32771;&#34385;&#30340;&#65292;&#21482;&#26377;&#20004;&#20010;&#23545;&#35937;&#20043;&#38388;&#30340;&#8220;&#36830;&#25509;&#8221;&#12290;
            </p><p>
                &#34987;&#21253;&#23481;&#30340;&#31867;&#22411;&#34987;&#31216;&#20026;<span class="emphasis"><em>&#38598;&#21512;&#20803;&#32032;&#31867;&#22411;&#65288;collection element type&#65289;</em></span>&#12290;&#38598;&#21512;&#20803;&#32032;&#36890;&#36807;<tt class="literal">&lt;element&gt;</tt>&#25110;<tt class="literal">&lt;composite-element&gt;</tt>&#26144;&#23556;&#65292;&#25110;&#22312;&#20854;&#26159;&#23454;&#20307;&#24341;&#29992;&#30340;&#26102;&#20505;&#65292;&#36890;&#36807;<tt class="literal">&lt;one-to-many&gt;</tt> &#25110;<tt class="literal">&lt;many-to-many&gt;</tt>&#26144;&#23556;&#12290;&#21069;&#20004;&#31181;&#29992;&#20110;&#20351;&#29992;&#20540;&#35821;&#20041;&#26144;&#23556;&#20803;&#32032;&#65292;&#21518;&#20004;&#31181;&#29992;&#20110;&#26144;&#23556;&#23454;&#20307;&#20851;&#32852;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-indexed"></a>6.2.3.&nbsp;&#32034;&#24341;&#38598;&#21512;&#31867;(Indexed collections)</h3></div></div><div></div></div><p>
             &#25152;&#26377;&#30340;&#38598;&#21512;&#26144;&#23556;&#65292;&#38500;&#20102;set&#21644;bag&#35821;&#20041;&#30340;&#20197;&#22806;&#65292;&#37117;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#38598;&#21512;&#34920;&#30340;<span class="emphasis"><em>&#32034;&#24341;&#23383;&#27573;(index column)</em></span>&#8212;&#8212;&#29992;&#20110;&#23545;&#24212;&#21040;&#25968;&#32452;&#32034;&#24341;&#65292;&#25110;&#32773;<tt class="literal">List</tt>&#30340;&#32034;&#24341;&#65292;&#25110;&#32773;<tt class="literal">Map</tt>&#30340;&#20851;&#38190;&#23383;&#12290;&#36890;&#36807;<tt class="literal">&lt;map-key&gt;</tt>,<tt class="literal">Map</tt> &#30340;&#32034;&#24341;&#21487;&#20197;&#26159;&#20219;&#20309;&#22522;&#30784;&#31867;&#22411;&#65307;&#33509;&#36890;&#36807;<tt class="literal">&lt;map-key-many-to-many&gt;</tt>&#65292;&#23427;&#20063;&#21487;&#20197;&#26159;&#19968;&#20010;&#23454;&#20307;&#24341;&#29992;&#65307;&#33509;&#36890;&#36807;<tt class="literal">&lt;composite-map-key&gt;</tt>&#65292;&#23427;&#36824;&#21487;&#20197;&#26159;&#19968;&#20010;&#32452;&#21512;&#31867;&#22411;&#12290;&#25968;&#32452;&#25110;&#21015;&#34920;&#30340;&#32034;&#24341;&#24517;&#39035;&#26159;<tt class="literal">integer</tt>&#31867;&#22411;&#65292;&#24182;&#19988;&#20351;&#29992; <tt class="literal">&lt;list-index&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#26144;&#23556;&#12290;&#34987;&#26144;&#23556;&#30340;&#23383;&#27573;&#21253;&#21547;&#26377;&#39034;&#24207;&#25490;&#21015;&#30340;&#25972;&#25968;&#65288;&#40664;&#35748;&#20174;0&#24320;&#22987;&#65289;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;map-key 
        column="column_name"                <span class="co">(1)</span>
        formula="any SQL expression"        <span class="co">(2)</span>
        type="type_name"                    <span class="co">(3)</span>
        node="@attribute-name"
        length="N"/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>(&#21487;&#36873;):&#20445;&#23384;&#38598;&#21512;&#32034;&#24341;&#20540;&#30340;&#23383;&#27573;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                        <tt class="literal">formula</tt> (&#21487;&#36873;): &#29992;&#20110;&#35745;&#31639;map&#20851;&#38190;&#23383;&#30340;SQL&#20844;&#24335;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#24517;&#39035;):&#26144;&#23556;&#38190;(map key)&#30340;&#31867;&#22411;&#12290;
                        </p></td></tr></table></div></div><div class="programlistingco"><pre class="programlisting">&lt;map-key-many-to-many
        column="column_name"                <span class="co">(1)</span>
        formula="any SQL expression"        <span class="co">(2)</span><span class="co">(3)</span>
        class="ClassName"
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
							<tt class="literal">column</tt>(&#21487;&#36873;):&#38598;&#21512;&#32034;&#24341;&#20540;&#20013;&#22806;&#38190;&#23383;&#27573;&#30340;&#21517;&#31216;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                        <tt class="literal">formula</tt> (&#21487;&#36873;): &#29992;&#20110;&#35745;&#31639;map&#20851;&#38190;&#23383;&#30340;&#22806;&#38190;&#30340;SQL&#20844;&#24335;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (&#24517;&#38656;):&#26144;&#23556;&#30340;&#38190;(map key)&#20351;&#29992;&#30340;&#23454;&#20307;&#31867;&#12290;
                        </p></td></tr></table></div></div><p>
            &#20551;&#33509;&#20320;&#30340;&#34920;&#27809;&#26377;&#19968;&#20010;&#32034;&#24341;&#23383;&#27573;,&#24403;&#20320;&#20173;&#28982;&#24076;&#26395;&#20351;&#29992;<tt class="literal">List</tt>&#20316;&#20026;&#23646;&#24615;&#31867;&#22411;,&#20320;&#24212;&#35813;&#25226;&#27492;&#23646;&#24615;&#26144;&#23556;&#20026;Hibernate <span class="emphasis"><em>&lt;bag&gt;</em></span>&#12290;&#20174;&#25968;&#25454;&#24211;&#20013;&#33719;&#21462;&#30340;&#26102;&#20505;&#65292;bag&#19981;&#32500;&#25252;&#20854;&#39034;&#24207;&#65292;&#20294;&#20063;&#21487;&#36873;&#25321;&#24615;&#30340;&#36827;&#34892;&#25490;&#24207;&#12290;
            </p></div><p>
        &#20174;&#38598;&#21512;&#31867;&#21487;&#20197;&#20135;&#29983;&#24456;&#22823;&#19968;&#37096;&#20998;&#26144;&#23556;&#65292;&#35206;&#30422;&#20102;&#24456;&#22810;&#24120;&#35265;&#30340;&#20851;&#31995;&#27169;&#22411;&#12290;&#25105;&#20204;&#24314;&#35758;&#20320;&#35797;&#39564;schema&#29983;&#25104;&#24037;&#20855;&#65292;&#26469;&#20307;&#20250;&#19968;&#19979;&#19981;&#21516;&#30340;&#26144;&#23556;&#22768;&#26126;&#26159;&#22914;&#20309;&#34987;&#32763;&#35793;&#20026;&#25968;&#25454;&#24211;&#34920;&#30340;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-ofvalues"></a>6.2.4.&nbsp;&#20540;&#38598;&#21512;&#20110;&#22810;&#23545;&#22810;&#20851;&#32852;(Collections of values and many-to-many associations)</h3></div></div><div></div></div><p>
        &#20219;&#20309;&#20540;&#38598;&#21512;&#25110;&#32773;&#22810;&#23545;&#22810;&#20851;&#32852;&#38656;&#35201;&#19987;&#29992;&#30340;&#20855;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;&#22806;&#38190;&#23383;&#27573;&#30340;<span class="emphasis"><em>collection table</em></span>&#12289;&#19968;&#20010;&#25110;&#22810;&#20010;<span class="emphasis"><em>collection element column</em></span>&#65292;&#20197;&#21450;&#36824;&#21487;&#33021;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;&#32034;&#24341;&#23383;&#27573;&#12290;
        </p><p>
                &#23545;&#20110;&#19968;&#20010;&#20540;&#38598;&#21512;, &#25105;&#20204;&#20351;&#29992;<tt class="literal">&lt;element&gt;</tt>&#26631;&#31614;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;element
        column="column_name"                     <span class="co">(1)</span>
        formula="any SQL expression"             <span class="co">(2)</span>
        type="typename"                          <span class="co">(3)</span>
        length="L"
        precision="P"
        scale="S"
        not-null="true|false"
        unique="true|false"
        node="element-name"
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>(&#21487;&#36873;):&#20445;&#23384;&#38598;&#21512;&#20803;&#32032;&#20540;&#30340;&#23383;&#27573;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                        <tt class="literal">formula</tt> (&#21487;&#36873;): &#29992;&#20110;&#35745;&#31639;&#20803;&#32032;&#30340;SQL&#20844;&#24335;                    
                       </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#24517;&#38656;):&#38598;&#21512;&#20803;&#32032;&#30340;&#31867;&#22411;
                        </p></td></tr></table></div></div><p>
            <span class="emphasis"><em>&#22810;&#23545;&#22810;&#20851;&#32852;(many-to-many association)</em></span> &#20351;&#29992;
            <tt class="literal">&lt;many-to-many&gt;</tt>&#20803;&#32032;&#23450;&#20041;.
        </p><div class="programlistingco"><pre class="programlisting">&lt;many-to-many
        column="column_name"                               <span class="co">(1)</span>
        formula="any SQL expression"                       <span class="co">(2)</span>
        class="ClassName"                                  <span class="co">(3)</span>
        fetch="select|join"                                <span class="co">(4)</span>
        unique="true|false"                                <span class="co">(5)</span>
        not-found="ignore|exception"                       <span class="co">(6)</span>
        entity-name="EntityName"                           <span class="co">(7)</span>
        property-ref="propertyNameFromAssociatedClass"     <span class="co">(8)</span>
        node="element-name"
        embed-xml="true|false"
    /&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>(&#21487;&#36873;): &#36825;&#20010;&#20803;&#32032;&#30340;&#22806;&#38190;&#20851;&#38190;&#23383;&#27573;&#21517;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                        <tt class="literal">formula</tt> (&#21487;&#36873;): &#29992;&#20110;&#35745;&#31639;&#20803;&#32032;&#22806;&#38190;&#20540;&#30340;SQL&#20844;&#24335;.
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (&#24517;&#38656;): &#20851;&#32852;&#31867;&#30340;&#21517;&#31216;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
							<tt class="literal">outer-join</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;<tt class="literal">auto</tt>):
							&#22312;Hibernate&#31995;&#32479;&#21442;&#25968;&#20013;<tt class="literal">hibernate.use_outer_join</tt>&#34987;&#25171;&#24320;&#30340;&#24773;&#20917;&#19979;,&#35813;&#21442;&#25968;&#29992;&#26469;&#20801;&#35768;&#20351;&#29992;outer join&#26469;&#36733;&#20837;&#27492;&#38598;&#21512;&#30340;&#25968;&#25454;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                        &#20026;&#27492;&#20851;&#32852;&#25171;&#24320;&#22806;&#36830;&#25509;&#25235;&#21462;&#25110;&#32773;&#21518;&#32493;select&#25235;&#21462;&#12290;&#36825;&#26159;&#29305;&#27530;&#24773;&#20917;&#65307;&#23545;&#20110;&#19968;&#20010;&#23454;&#20307;&#21450;&#20854;&#25351;&#21521;&#20854;&#20182;&#23454;&#20307;&#30340;&#22810;&#23545;&#22810;&#20851;&#32852;&#36827;&#20840;&#39044;&#20808;&#25235;&#21462;&#65288;&#20351;&#29992;&#19968;&#26465;&#21333;&#29420;&#30340;<tt class="literal">SELECT</tt>)&#65292;&#20320;&#19981;&#20165;&#38656;&#35201;&#23545;&#38598;&#21512;&#33258;&#36523;&#25171;&#24320;<tt class="literal">join</tt>&#65292;&#20063;&#38656;&#35201;&#23545;<tt class="literal">&lt;many-to-many&gt;</tt>&#36825;&#20010;&#20869;&#23884;&#20803;&#32032;&#25171;&#24320;&#27492;&#23646;&#24615;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                        &#23545;&#22806;&#38190;&#23383;&#27573;&#20801;&#35768;DDL&#29983;&#25104;&#30340;&#26102;&#20505;&#29983;&#25104;&#19968;&#20010;&#24799;&#19968;&#32422;&#26463;&#12290;&#36825;&#20351;&#20851;&#32852;&#21464;&#25104;&#20102;&#19968;&#20010;&#39640;&#25928;&#30340;&#19968;&#23545;&#22810;&#20851;&#32852;&#12290;&#65288;&#27492;&#21477;&#23384;&#30097;&#65306;&#21407;&#25991;&#20026;This makes the association multiplicity effectively one to many.)
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
	                    <tt class="literal">not-found</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026; <tt class="literal">exception</tt>): &#25351;&#26126;&#24341;&#29992;&#30340;&#22806;&#38190;&#20013;&#32570;&#23569;&#26576;&#20123;&#34892;&#35813;&#22914;&#20309;&#22788;&#29702;&#65306;
	                    <tt class="literal">ignore</tt> &#20250;&#25226;&#32570;&#22833;&#30340;&#34892;&#20316;&#20026;&#19968;&#20010;&#31354;&#24341;&#29992;&#22788;&#29702;&#12290;
	                </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                        <tt class="literal">entity-name</tt> (&#21487;&#36873;): &#34987;&#20851;&#32852;&#30340;&#31867;&#30340;&#23454;&#20307;&#21517;&#65292;&#20316;&#20026;<tt class="literal">class</tt>&#30340;&#26367;&#20195;&#12290;
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                        <tt class="literal">property-ref</tt>: (&#21487;&#36873;) &#34987;&#20851;&#32852;&#21040;&#27492;&#22806;&#38190;(foreign key)&#30340;&#31867;&#20013;&#30340;&#23545;&#24212;&#23646;&#24615;&#30340;&#21517;&#23383;&#12290;&#33509;&#26410;&#25351;&#23450;&#65292;&#20351;&#29992;&#34987;&#20851;&#32852;&#31867;&#30340;&#20027;&#38190;&#12290;
                    </p></td></tr></table></div></div><p>
                &#20363;&#23376;&#65306;&#39318;&#20808;, &#19968;&#32452;&#23383;&#31526;&#20018;&#65306;
            </p><pre class="programlisting">&lt;set name="names" table="NAMES"&gt;
    &lt;key column="GROUPID"/&gt;
    &lt;element column="NAME" type="string"/&gt;
&lt;/set&gt;</pre><p>
                &#21253;&#21547;&#19968;&#32452;&#25972;&#25968;&#30340;bag(&#36824;&#35774;&#32622;&#20102;<tt class="literal">order-by</tt>&#21442;&#25968;&#25351;&#23450;&#20102;&#36845;&#20195;&#30340;&#39034;&#24207;)&#65306;
            </p><pre class="programlisting">&lt;bag name="sizes" 
        table="item_sizes" 
        order-by="size asc"&gt;
    &lt;key column="item_id"/&gt;
    &lt;element column="size" type="integer"/&gt;
&lt;/bag&gt;</pre><p>
                &#19968;&#20010;&#23454;&#20307;&#25968;&#32452;,&#22312;&#36825;&#20010;&#26696;&#20363;&#20013;&#26159;&#19968;&#20010;&#22810;&#23545;&#22810;&#30340;&#20851;&#32852;(&#27880;&#24847;&#36825;&#37324;&#30340;&#23454;&#20307;&#26159;&#33258;&#21160;&#31649;&#29702;&#29983;&#21629;&#21608;&#26399;&#30340;&#23545;&#35937;&#65288;lifecycle objects&#65289;,<tt class="literal">cascade="all"</tt>):
            </p><pre class="programlisting">&lt;array name="addresses" 
        table="PersonAddress" 
        cascade="persist"&gt;
    &lt;key column="personId"/&gt;
    &lt;list-index column="sortOrder"/&gt;
    &lt;many-to-many column="addressId" class="Address"/&gt;
&lt;/array&gt;</pre><p>
                &#19968;&#20010;map,&#36890;&#36807;&#23383;&#31526;&#20018;&#30340;&#32034;&#24341;&#26469;&#25351;&#26126;&#26085;&#26399;&#65306;
            </p><pre class="programlisting">&lt;map name="holidays" 
        table="holidays" 
        schema="dbo" 
        order-by="hol_name asc"&gt;
    &lt;key column="id"/&gt;
    &lt;map-key column="hol_name" type="string"/&gt;
    &lt;element column="hol_date" type="date"/&gt;
&lt;/map&gt;</pre><p>
                &#19968;&#20010;&#32452;&#20214;&#30340;&#21015;&#34920;&#65306;&#65288;&#19979;&#19968;&#31456;&#35752;&#35770;&#65289;
            </p><pre class="programlisting">&lt;list name="carComponents" 
        table="CarComponents"&gt;
    &lt;key column="carId"/&gt;
    &lt;list-index column="sortOrder"/&gt;
    &lt;composite-element class="CarComponent"&gt;
        &lt;property name="price"/&gt;
        &lt;property name="type"/&gt;
        &lt;property name="serialNumber" column="serialNum"/&gt;
    &lt;/composite-element&gt;
&lt;/list&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-onetomany"></a>6.2.5.&nbsp;&#19968;&#23545;&#22810;&#20851;&#32852;&#65288;One-to-many Associations&#65289;</h3></div></div><div></div></div><p>
                <span class="emphasis"><em>&#19968;&#23545;&#22810;&#20851;&#32852;</em></span><span class="emphasis"><em>&#36890;&#36807;&#22806;&#38190;</em></span>&#36830;&#25509;&#20004;&#20010;&#31867;&#23545;&#24212;&#30340;&#34920;,&#32780;&#27809;&#26377;&#20013;&#38388;&#38598;&#21512;&#34920;&#12290; &#36825;&#20010;&#20851;&#31995;&#27169;&#22411;&#22833;&#21435;&#20102;&#19968;&#20123;Java&#38598;&#21512;&#30340;&#35821;&#20041;:
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        &#19968;&#20010;&#34987;&#21253;&#21547;&#30340;&#23454;&#20307;&#30340;&#23454;&#20363;&#21482;&#33021;&#34987;&#21253;&#21547;&#22312;&#19968;&#20010;&#38598;&#21512;&#30340;&#23454;&#20363;&#20013;
                    </p></li><li><p>
                        &#19968;&#20010;&#34987;&#21253;&#21547;&#30340;&#23454;&#20307;&#30340;&#23454;&#20363;&#21482;&#33021;&#23545;&#24212;&#20110;&#38598;&#21512;&#32034;&#24341;&#30340;&#19968;&#20010;&#20540;&#20013;
                    </p></li></ul></div><p>
                &#19968;&#20010;&#20174;<tt class="literal">Product</tt>&#21040;<tt class="literal">Part</tt>&#30340;&#20851;&#32852;&#38656;&#35201;&#20851;&#38190;&#23383;&#23383;&#27573;,&#21487;&#33021;&#36824;&#26377;&#19968;&#20010;&#32034;&#24341;&#23383;&#27573;&#25351;&#21521;<tt class="literal">Part</tt>&#25152;&#23545;&#24212;&#30340;&#34920;&#12290; <tt class="literal">&lt;one-to-many&gt;</tt>&#26631;&#35760;&#25351;&#26126;&#20102;&#19968;&#20010;&#19968;&#23545;&#22810;&#30340;&#20851;&#32852;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;one-to-many 
        class="ClassName"                                  <span class="co">(1)</span>
        not-found="ignore|exception"                       <span class="co">(2)</span>
        entity-name="EntityName"                           <span class="co">(3)</span>
        node="element-name"
        embed-xml="true|false"
    /&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt>(&#24517;&#39035;):&#34987;&#20851;&#32852;&#31867;&#30340;&#21517;&#31216;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
		                <tt class="literal">not-found</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;<tt class="literal">exception</tt>): 
		               &#25351;&#26126;&#33509;&#32531;&#23384;&#30340;&#26631;&#31034;&#20540;&#20851;&#32852;&#30340;&#34892;&#32570;&#22833;,&#35813;&#22914;&#20309;&#22788;&#29702;:
		                <tt class="literal">ignore</tt> &#20250;&#25226;&#32570;&#22833;&#30340;&#34892;&#20316;&#20026;&#19968;&#20010;&#31354;&#20851;&#32852;&#22788;&#29702;&#12290;
		            </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                        <tt class="literal">entity-name</tt> (&#21487;&#36873;): &#34987;&#20851;&#32852;&#30340;&#31867;&#30340;&#23454;&#20307;&#21517;&#65292;&#20316;&#20026;<tt class="literal">class</tt>&#30340;&#26367;&#20195;&#12290;
                    </p></td></tr></table></div></div><p>
                &#20363;&#23376;
            </p><pre class="programlisting">&lt;set name="bars"&gt;
    &lt;key column="foo_id"/&gt;
    &lt;one-to-many class="org.hibernate.Bar"/&gt;
&lt;/set&gt;</pre><p>
                &#27880;&#24847;:<tt class="literal">&lt;one-to-many&gt;</tt>&#20803;&#32032;&#19981;&#38656;&#35201;&#23450;&#20041;&#20219;&#20309;&#23383;&#27573;&#12290; &#20063;&#19981;&#38656;&#35201;&#25351;&#23450;&#34920;&#21517;&#12290;
                
            </p><p>
                <span class="emphasis"><em>&#37325;&#35201;&#25552;&#31034;</em></span>:&#22914;&#26524;<tt class="literal">&#19968;&#23545;&#22810;</tt>&#20851;&#32852;&#20013;&#30340;&#22806;&#38190;&#23383;&#27573;&#23450;&#20041;&#25104;<tt class="literal">NOT NULL</tt>,&#20320;&#24517;&#39035;&#25226;<tt class="literal">&lt;key&gt;</tt>&#26144;&#23556;&#22768;&#26126;&#20026;<tt class="literal">not-null="true"</tt>,&#25110;&#32773;&#20351;&#29992;<span class="emphasis"><em>&#21452;&#21521;&#20851;&#32852;</em></span>&#65292;&#24182;&#19988;&#26631;&#26126;<tt class="literal">inverse="true"</tt>&#12290;&#21442;&#38405;&#26412;&#31456;&#21518;&#38754;&#20851;&#20110;&#21452;&#21521;&#20851;&#32852;&#30340;&#35752;&#35770;&#12290;
            </p><p>
            &#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#19968;&#20010;<tt class="literal">Part</tt>&#23454;&#20307;&#30340;map,&#25226;name&#20316;&#20026;&#20851;&#38190;&#23383;&#12290;(  <tt class="literal">partName</tt> &#26159;<tt class="literal">Part</tt>&#30340;&#25345;&#20037;&#21270;&#23646;&#24615;)&#12290;&#27880;&#24847;&#20854;&#20013;&#30340;&#22522;&#20110;&#20844;&#24335;&#30340;&#32034;&#24341;&#30340;&#29992;&#27861;&#12290;
        </p><pre class="programlisting">&lt;map name="parts"
        cascade="all"&gt;
    &lt;key column="productId" not-null="true"/&gt;
    &lt;map-key formula="partName"/&gt;
    &lt;one-to-many class="Part"/&gt;
&lt;/map&gt;</pre></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-advancedmappings"></a>6.3.&nbsp;&#39640;&#32423;&#38598;&#21512;&#26144;&#23556;&#65288;Advanced collection mappings&#65289;</h2></div></div><div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-sorted"></a>6.3.1.&nbsp;&#26377;&#24207;&#38598;&#21512;&#65288;Sorted collections&#65289;</h3></div></div><div></div></div><p>
                Hibernate&#25903;&#25345;&#23454;&#29616;<tt class="literal">java.util.SortedMap</tt>&#21644;<tt class="literal">java.util.SortedSet</tt>&#30340;&#38598;&#21512;&#12290;
&#20320;&#24517;&#39035;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#25351;&#23450;&#19968;&#20010;&#27604;&#36739;&#22120;&#65306;
            </p><pre class="programlisting">&lt;set name="aliases" 
            table="person_aliases" 
            sort="natural"&gt;
    &lt;key column="person"/&gt;
    &lt;element column="name" type="string"/&gt;
&lt;/set&gt;

&lt;map name="holidays" sort="my.custom.HolidayComparator"&gt;
    &lt;key column="year_id"/&gt;
    &lt;map-key column="hol_name" type="string"/&gt;
    &lt;element column="hol_date" type="date"/&gt;
&lt;/map&gt;</pre><p>
                <tt class="literal">sort</tt>&#23646;&#24615;&#20013;&#20801;&#35768;&#30340;&#20540;&#21253;&#25324;<tt class="literal">unsorted</tt>,<tt class="literal">natural</tt>&#21644;&#26576;&#20010;&#23454;&#29616;&#20102;<tt class="literal">java.util.Comparator</tt>&#30340;&#31867;&#30340;&#21517;&#31216;&#12290;
            </p><p>
                &#20998;&#31867;&#38598;&#21512;&#30340;&#34892;&#20026;&#20107;&#23454;&#19978;&#35937;<tt class="literal">java.util.TreeSet</tt>&#25110;&#32773;<tt class="literal">java.util.TreeMap</tt>&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#24076;&#26395;&#25968;&#25454;&#24211;&#33258;&#24049;&#23545;&#38598;&#21512;&#20803;&#32032;&#25490;&#24207;&#65292;&#21487;&#20197;&#21033;&#29992;<tt class="literal">set</tt>,<tt class="literal">bag</tt>&#25110;&#32773;<tt class="literal">map</tt>&#26144;&#23556;&#20013;&#30340;<tt class="literal">order-by</tt>&#23646;&#24615;&#12290;&#36825;&#20010;&#35299;&#20915;&#26041;&#26696;&#21482;&#33021;&#22312;jdk1.4&#25110;&#32773;&#26356;&#39640;&#30340;jdk&#29256;&#26412;&#20013;&#25165;&#21487;&#20197;&#23454;&#29616;(&#36890;&#36807;LinkedHashSet&#25110;&#32773;
LinkedHashMap&#23454;&#29616;)&#12290; &#23427;&#26159;&#22312;SQL&#26597;&#35810;&#20013;&#23436;&#25104;&#25490;&#24207;&#65292;&#32780;&#19981;&#26159;&#22312;&#20869;&#23384;&#20013;&#12290;
            </p><pre class="programlisting">&lt;set name="aliases" table="person_aliases" order-by="lower(name) asc"&gt;
    &lt;key column="person"/&gt;
    &lt;element column="name" type="string"/&gt;
&lt;/set&gt;

&lt;map name="holidays" order-by="hol_date, hol_name"&gt;
    &lt;key column="year_id"/&gt;
    &lt;map-key column="hol_name" type="string"/&gt;
    &lt;element column="hol_date" type="date"/&gt;
&lt;/map&gt;</pre><p>
                &#27880;&#24847;: &#36825;&#20010;<tt class="literal">order-by</tt>&#23646;&#24615;&#30340;&#20540;&#26159;&#19968;&#20010;SQL&#25490;&#24207;&#23376;&#21477;&#32780;&#19981;&#26159;HQL&#30340;&#65281;
            </p><p>
                &#20851;&#32852;&#36824;&#21487;&#20197;&#22312;&#36816;&#34892;&#26102;&#20351;&#29992;&#38598;&#21512;<tt class="literal">filter()</tt>&#26681;&#25454;&#20219;&#24847;&#30340;&#26465;&#20214;&#26469;&#25490;&#24207;&#12290;
            </p><pre class="programlisting">sortedUsers = s.createFilter( group.getUsers(), "order by this.name" ).list();</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-bidirectional"></a>6.3.2.&nbsp;&#21452;&#21521;&#20851;&#32852;&#65288;Bidirectional associations&#65289;</h3></div></div><div></div></div><p>
                <span class="emphasis"><em>&#21452;&#21521;&#20851;&#32852;</em></span>&#20801;&#35768;&#36890;&#36807;&#20851;&#32852;&#30340;&#20219;&#19968;&#31471;&#35775;&#38382;&#21478;&#22806;&#19968;&#31471;&#12290;&#22312;Hibernate&#20013;, &#25903;&#25345;&#20004;&#31181;&#31867;&#22411;&#30340;&#21452;&#21521;&#20851;&#32852;:

                </p><div class="variablelist"><dl><dt><span class="term">&#19968;&#23545;&#22810;&#65288;one-to-many&#65289;</span></dt><dd><p>
						    Set&#25110;&#32773;bag&#20540;&#22312;&#19968;&#31471;, &#21333;&#29420;&#20540;(&#38750;&#38598;&#21512;)&#22312;&#21478;&#22806;&#19968;&#31471;
                            </p></dd><dt><span class="term">&#22810;&#23545;&#22810;&#65288;many-to-many&#65289;</span></dt><dd><p>
				        &#20004;&#31471;&#37117;&#26159;set&#25110;bag&#20540;
                            </p></dd></dl></div><p>
            
            </p><p>
                &#35201;&#24314;&#31435;&#19968;&#20010;&#21452;&#21521;&#30340;&#22810;&#23545;&#22810;&#20851;&#32852;&#65292;&#21482;&#38656;&#35201;&#26144;&#23556;&#20004;&#20010;many-to-many&#20851;&#32852;&#21040;&#21516;&#19968;&#20010;&#25968;&#25454;&#24211;&#34920;&#20013;&#65292;&#24182;&#20877;&#23450;&#20041;&#20854;&#20013;&#30340;&#19968;&#31471;&#20026;<span class="emphasis"><em>inverse</em></span>(&#20351;&#29992;&#21738;&#19968;&#31471;&#35201;&#26681;&#25454;&#20320;&#30340;&#36873;&#25321;&#65292;&#20294;&#23427;&#19981;&#33021;&#26159;&#19968;&#20010;&#32034;&#24341;&#38598;&#21512;)&#12290;
            </p><p>
		&#36825;&#37324;&#26377;&#19968;&#20010;many-to-many&#30340;&#21452;&#21521;&#20851;&#32852;&#30340;&#20363;&#23376;;&#27599;&#19968;&#20010;category&#37117;&#21487;&#20197;&#26377;&#24456;&#22810;items,&#27599;&#19968;&#20010;items&#21487;&#20197;&#23646;&#20110;&#24456;&#22810;categories&#65306;
		</p><pre class="programlisting">&lt;class name="Category"&gt;
    &lt;id name="id" column="CATEGORY_ID"/&gt;
    ...
    &lt;bag name="items" table="CATEGORY_ITEM"&gt;
        &lt;key column="CATEGORY_ID"/&gt;
        &lt;many-to-many class="Item" column="ITEM_ID"/&gt;
    &lt;/bag&gt;
&lt;/class&gt;

&lt;class name="Item"&gt;
    &lt;id name="id" column="CATEGORY_ID"/&gt;
    ...

    &lt;!-- inverse end --&gt;
    &lt;bag name="categories" table="CATEGORY_ITEM" inverse="true"&gt;
        &lt;key column="ITEM_ID"/&gt;
        &lt;many-to-many class="Category" column="CATEGORY_ID"/&gt;
    &lt;/bag&gt;
&lt;/class&gt;</pre><p>
                &#22914;&#26524;&#21482;&#23545;&#20851;&#32852;&#30340;&#21453;&#21521;&#31471;&#36827;&#34892;&#20102;&#25913;&#21464;&#65292;&#36825;&#20010;&#25913;&#21464;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#34987;&#25345;&#20037;&#21270;&#12290;
            &#36825;&#34920;&#31034;Hibernate&#20026;&#27599;&#20010;&#21452;&#21521;&#20851;&#32852;&#22312;&#20869;&#23384;&#20013;&#23384;&#22312;&#20004;&#27425;&#34920;&#29616;,&#19968;&#20010;&#20174;A&#36830;&#25509;&#21040;B,&#21478;&#19968;&#20010;&#20174;B&#36830;&#25509;&#21040;A&#12290;&#22914;&#26524;&#20320;&#22238;&#24819;&#19968;&#19979;Java&#23545;&#35937;&#27169;&#22411;&#65292;&#25105;&#20204;&#26159;&#22914;&#20309;&#22312;Java&#20013;&#21019;&#24314;&#22810;&#23545;&#22810;&#20851;&#31995;&#30340;&#65292;&#36825;&#21487;&#20197;&#35753;&#20320;&#26356;&#23481;&#26131;&#29702;&#35299;&#65306;

            </p><pre class="programlisting">
category.getItems().add(item);          // The category now "knows" about the relationship
item.getCategories().add(category);     // The item now "knows" about the relationship

session.persist(item);                   // The relationship won''t be saved!
session.persist(category);               // The relationship will be saved</pre><p>
            &#38750;&#21453;&#21521;&#31471;&#29992;&#20110;&#25226;&#20869;&#23384;&#20013;&#30340;&#34920;&#31034;&#20445;&#23384;&#21040;&#25968;&#25454;&#24211;&#20013;&#12290;
        </p><p>
                &#35201;&#24314;&#31435;&#19968;&#20010;&#19968;&#23545;&#22810;&#30340;&#21452;&#21521;&#20851;&#32852;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#25226;&#19968;&#20010;&#19968;&#23545;&#22810;&#20851;&#32852;&#65292;&#20316;&#20026;&#19968;&#20010;&#22810;&#23545;&#19968;&#20851;&#32852;&#26144;&#23556;&#21040;&#21040;&#21516;&#19968;&#24352;&#34920;&#30340;&#23383;&#27573;&#19978;&#65292;&#24182;&#19988;&#22312;"&#22810;"&#30340;&#37027;&#19968;&#31471;&#23450;&#20041;<tt class="literal">inverse="true"</tt>&#12290;
            </p><pre class="programlisting">&lt;class name="Parent"&gt;
    &lt;id name="id" column="parent_id"/&gt;
    ....
    &lt;set name="children" inverse="true"&gt;
        &lt;key column="parent_id"/&gt;
        &lt;one-to-many class="Child"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Child"&gt;
    &lt;id name="id" column="child_id"/&gt;
    ....
    &lt;many-to-one name="parent" 
        class="Parent" 
        column="parent_id"
        not-null="true"/&gt;
&lt;/class&gt;</pre><p>
                &#22312;&#8220;&#19968;&#8221;&#36825;&#19968;&#31471;&#23450;&#20041;<tt class="literal">inverse="true"</tt>&#19981;&#20250;&#24433;&#21709;&#32423;&#32852;&#25805;&#20316;&#65292;&#20108;&#32773;&#26159;&#27491;&#20132;&#30340;&#27010;&#24565;&#65281;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-indexedbidirectional"></a>6.3.3.&nbsp;&#21452;&#21521;&#20851;&#32852;&#65292;&#28041;&#21450;&#26377;&#24207;&#38598;&#21512;&#31867;</h3></div></div><div></div></div><p>
            &#23545;&#20110;&#26377;&#19968;&#31471;&#26159;<tt class="literal">&lt;list&gt;</tt>&#25110;&#32773;<tt class="literal">&lt;map&gt;</tt>&#30340;&#21452;&#21521;&#20851;&#32852;&#65292;&#38656;&#35201;&#21152;&#20197;&#29305;&#21035;&#32771;&#34385;&#12290;&#20551;&#33509;&#23376;&#31867;&#20013;&#30340;&#19968;&#20010;&#23646;&#24615;&#26144;&#23556;&#21040;&#32034;&#24341;&#23383;&#27573;&#65292;&#27809;&#38382;&#39064;&#65292;&#25105;&#20204;&#20173;&#28982;&#21487;&#20197;&#22312;&#38598;&#21512;&#31867;&#26144;&#23556;&#19978;&#20351;&#29992;<tt class="literal">inverse="true"</tt>&#65306;
        </p><pre class="programlisting">&lt;class name="Parent"&gt;
    &lt;id name="id" column="parent_id"/&gt;
    ....
    &lt;map name="children" inverse="true"&gt;
        &lt;key column="parent_id"/&gt;
        &lt;map-key column="name" 
            type="string"/&gt;
        &lt;one-to-many class="Child"/&gt;
    &lt;/map&gt;
&lt;/class&gt;

&lt;class name="Child"&gt;
    &lt;id name="id" column="child_id"/&gt;
    ....
    &lt;property name="name" 
        not-null="true"/&gt;
    &lt;many-to-one name="parent" 
        class="Parent" 
        column="parent_id"
        not-null="true"/&gt;
&lt;/class&gt;</pre><p>
            &#20294;&#26159;&#65292;&#20551;&#33509;&#23376;&#31867;&#20013;&#27809;&#26377;&#36825;&#26679;&#30340;&#23646;&#24615;&#23384;&#22312;&#65292;&#25105;&#20204;&#19981;&#33021;&#35748;&#20026;&#36825;&#20010;&#20851;&#32852;&#26159;&#30495;&#27491;&#30340;&#21452;&#21521;&#20851;&#32852;&#65288;&#20449;&#24687;&#19981;&#23545;&#31216;&#65292;&#22312;&#20851;&#32852;&#30340;&#19968;&#31471;&#26377;&#19968;&#20123;&#21478;&#22806;&#19968;&#31471;&#27809;&#26377;&#30340;&#20449;&#24687;&#65289;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#19981;&#33021;&#20351;&#29992;<tt class="literal">inverse="true"</tt>&#12290;&#25105;&#20204;&#38656;&#35201;&#36825;&#26679;&#29992;&#65306;
        </p><pre class="programlisting">&lt;class name="Parent"&gt;
    &lt;id name="id" column="parent_id"/&gt;
    ....
    &lt;map name="children"&gt;
        &lt;key column="parent_id"
            not-null="true"/&gt;
        &lt;map-key column="name" 
            type="string"/&gt;
        &lt;one-to-many class="Child"/&gt;
    &lt;/map&gt;
&lt;/class&gt;

&lt;class name="Child"&gt;
    &lt;id name="id" column="child_id"/&gt;
    ....
    &lt;many-to-one name="parent" 
        class="Parent" 
        column="parent_id"
        insert="false"
        update="false"
        not-null="true"/&gt;
&lt;/class&gt;</pre><p>
           &#27880;&#24847;&#22312;&#36825;&#20010;&#26144;&#23556;&#20013;&#65292;&#20851;&#32852;&#20013;&#38598;&#21512;&#31867;"&#20540;"&#19968;&#31471;&#36127;&#36131;&#26469;&#26356;&#26032;&#22806;&#38190;.TODO: Does this really result in some unnecessary update statements?
       </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-ternary"></a>6.3.4.&nbsp;&#19977;&#37325;&#20851;&#32852;&#65288;Ternary associations&#65289;</h3></div></div><div></div></div><p>
            	&#26377;&#19977;&#31181;&#21487;&#33021;&#30340;&#36884;&#24452;&#26469;&#26144;&#23556;&#19968;&#20010;&#19977;&#37325;&#20851;&#32852;&#12290;&#31532;&#19968;&#31181;&#26159;&#20351;&#29992;&#19968;&#20010;<tt class="literal">Map</tt>&#65292;&#25226;&#19968;&#20010;&#20851;&#32852;&#20316;&#20026;&#20854;&#32034;&#24341;&#65306;
            </p><pre class="programlisting">&lt;map name="contracts"&gt;
    &lt;key column="employer_id" not-null="true"/&gt;
    &lt;map-key-many-to-many column="employee_id" class="Employee"/&gt;
    &lt;one-to-many class="Contract"/&gt;
&lt;/map&gt;</pre><pre class="programlisting">&lt;map name="connections"&gt;
    &lt;key column="incoming_node_id"/&gt;
    &lt;map-key-many-to-many column="outgoing_node_id" class="Node"/&gt;
    &lt;many-to-many column="connection_id" class="Connection"/&gt;
&lt;/map&gt;</pre><p>
        &#31532;&#20108;&#31181;&#26041;&#27861;&#26159;&#31616;&#21333;&#30340;&#25226;&#20851;&#32852;&#37325;&#26032;&#24314;&#27169;&#20026;&#19968;&#20010;&#23454;&#20307;&#31867;&#12290;&#36825;&#20351;&#25105;&#20204;&#26368;&#32463;&#24120;&#20351;&#29992;&#30340;&#26041;&#27861;&#12290;
        </p><p>
        &#26368;&#21518;&#19968;&#31181;&#36873;&#25321;&#26159;&#20351;&#29992;&#22797;&#21512;&#20803;&#32032;&#65292;&#25105;&#20204;&#20250;&#22312;&#21518;&#38754;&#35752;&#35770;
        </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="collections-idbag"></a>6.3.5.&nbsp;<tt class="literal">&#20351;&#29992;&lt;idbag&gt;</tt></h3></div></div><div></div></div><p>
                &#22914;&#26524;&#20320;&#23436;&#20840;&#20449;&#22857;&#25105;&#20204;&#23545;&#20110;&#8220;&#32852;&#21512;&#20027;&#38190;&#65288;composite keys&#65289;&#26159;&#20010;&#22351;&#19996;&#35199;&#8221;&#65292;&#21644;&#8220;&#23454;&#20307;&#24212;&#35813;&#20351;&#29992;&#65288;&#26080;&#26426;&#30340;&#65289;&#33258;&#24049;&#29983;&#25104;&#30340;&#20195;&#29992;&#26631;&#35782;&#31526;&#65288;surrogate keys&#65289;&#8221;&#30340;&#35266;&#28857;&#65292;&#20063;&#35768;&#20320;&#20250;&#24863;&#21040;&#26377;&#19968;&#20123;&#22855;&#24618;&#65292;&#25105;&#20204;&#30446;&#21069;&#20026;&#27490;&#23637;&#31034;&#30340;&#22810;&#23545;&#22810;&#20851;&#32852;&#21644;&#20540;&#38598;&#21512;&#37117;&#26159;&#26144;&#23556;&#25104;&#20026;&#24102;&#26377;&#32852;&#21512;&#20027;&#38190;&#30340;&#34920;&#30340;&#65281;&#29616;&#22312;&#65292;&#36825;&#19968;&#28857;&#38750;&#24120;&#20540;&#24471;&#20105;&#36777;&#65307;&#30475;&#19978;&#21435;&#19968;&#20010;&#21333;&#32431;&#30340;&#20851;&#32852;&#34920;&#24182;&#19981;&#33021;&#20174;&#20195;&#29992;&#26631;&#35782;&#31526;&#20013;&#33719;&#24471;&#20160;&#20040;&#22909;&#22788;&#65288;&#34429;&#28982;&#20351;&#29992;&#32452;&#21512;&#20540;&#30340;&#38598;&#21512;<span class="emphasis"><em>&#21487;&#33021;</em></span>&#20250;&#33719;&#24471;&#19968;&#28857;&#22909;&#22788;&#65289;&#12290;&#19981;&#36807;&#65292;Hibernate&#25552;&#20379;&#20102;&#19968;&#20010;&#65288;&#19968;&#28857;&#28857;&#35797;&#39564;&#24615;&#36136;&#30340;&#65289;&#21151;&#33021;&#65292;&#35753;&#20320;&#25226;&#22810;&#23545;&#22810;&#20851;&#32852;&#21644;&#20540;&#38598;&#21512;&#24212;&#24471;&#21040;&#19968;&#20010;&#20351;&#29992;&#20195;&#29992;&#26631;&#35782;&#31526;&#30340;&#34920;&#21435;&#12290;
            </p><p>
                <tt class="literal">&lt;idbag&gt;</tt> &#23646;&#24615;&#35753;&#20320;&#20351;&#29992;bag&#35821;&#20041;&#26469;&#26144;&#23556;&#19968;&#20010;<tt class="literal">List</tt> (&#25110;<tt class="literal">Collection</tt>)&#12290;
            </p><pre class="programlisting">&lt;idbag name="lovers" table="LOVERS"&gt;
    &lt;collection-id column="ID" type="long"&gt;
        &lt;generator class="sequence"/&gt;
    &lt;/collection-id&gt;
    &lt;key column="PERSON1"/&gt;
    &lt;many-to-many column="PERSON2" class="Person" fetch="join"/&gt;
&lt;/idbag&gt;</pre><p>
                &#20320;&#21487;&#20197;&#29702;&#35299;&#65292;<tt class="literal">&lt;idbag&gt;</tt>&#20154;&#24037;&#30340;id&#29983;&#25104;&#22120;&#65292;&#23601;&#22909;&#20687;&#26159;&#23454;&#20307;&#31867;&#19968;&#26679;&#65281;&#38598;&#21512;&#30340;&#27599;&#19968;&#34892;&#37117;&#26377;&#19968;&#20010;&#19981;&#21516;&#30340;&#20154;&#36896;&#20851;&#38190;&#23383;&#12290;&#20294;&#26159;&#65292;Hibernate&#27809;&#26377;&#25552;&#20379;&#20219;&#20309;&#26426;&#21046;&#26469;&#35753;&#20320;&#21462;&#24471;&#26576;&#20010;&#29305;&#23450;&#34892;&#30340;&#20154;&#36896;&#20851;&#38190;&#23383;&#12290;
            </p><p>
                &#27880;&#24847;<tt class="literal">&lt;idbag&gt;</tt>&#30340;&#26356;&#26032;&#24615;&#33021;&#35201;&#27604;&#26222;&#36890;&#30340;<tt class="literal">&lt;bag&gt;</tt>&#39640;&#24471;&#22810;&#65281;Hibernate&#21487;&#20197;&#26377;&#25928;&#30340;&#23450;&#20301;&#21040;&#19981;&#21516;&#30340;&#34892;&#65292;&#20998;&#21035;&#36827;&#34892;&#26356;&#26032;&#25110;&#21024;&#38500;&#24037;&#20316;&#65292;&#23601;&#22914;&#21516;&#22788;&#29702;&#19968;&#20010;list, map&#25110;&#32773;set&#19968;&#26679;&#12290;
                
            </p><p>
                &#22312;&#30446;&#21069;&#30340;&#23454;&#29616;&#20013;&#65292;&#36824;&#19981;&#25903;&#25345;&#20351;&#29992;<tt class="literal">identity</tt>&#26631;&#35782;&#31526;&#29983;&#25104;&#22120;&#31574;&#30053;&#26469;&#29983;&#25104;<tt class="literal">&lt;idbag&gt;</tt>&#38598;&#21512;&#30340;&#26631;&#35782;&#31526;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-example"></a>6.4.&nbsp;&#38598;&#21512;&#20363;&#23376;&#65288;Collection example&#65289;</h2></div></div><div></div></div><p>
                &#22312;&#21069;&#38754;&#30340;&#20960;&#20010;&#31456;&#33410;&#30340;&#30830;&#38750;&#24120;&#20196;&#20154;&#36855;&#24785;&#12290; &#22240;&#27492;&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#12290;&#36825;&#20010;&#31867;&#65306;
            </p><pre class="programlisting">package eg;
import java.util.Set;

public class Parent {
    private long id;
    private Set children;

    public long getId() { return id; }
    private void setId(long id) { this.id=id; }

    private Set getChildren() { return children; }
    private void setChildren(Set children) { this.children=children; }

    ....
    ....
}</pre><p>
                &#36825;&#20010;&#31867;&#26377;&#19968;&#20010;<tt class="literal">Child</tt>&#30340;&#23454;&#20363;&#38598;&#21512;&#12290;&#22914;&#26524;&#27599;&#19968;&#20010;&#23376;&#23454;&#20363;&#33267;&#22810;&#26377;&#19968;&#20010;&#29238;&#23454;&#20363;, &#37027;&#20040;&#26368;&#33258;&#28982;&#30340;&#26144;&#23556;&#26159;&#19968;&#20010;one-to-many&#30340;&#20851;&#32852;&#20851;&#31995;&#65306;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="Parent"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;set name="children"&gt;
            &lt;key column="parent_id"/&gt;
            &lt;one-to-many class="Child"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="Child"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#22312;&#20197;&#19979;&#30340;&#34920;&#23450;&#20041;&#20013;&#21453;&#24212;&#20102;&#36825;&#20010;&#26144;&#23556;&#20851;&#31995;&#65306;
            </p><pre class="programlisting">create table parent ( id bigint not null primary key )
create table child ( id bigint not null primary key, name varchar(255), parent_id bigint )
alter table child add constraint childfk0 (parent_id) references parent</pre><p>
                &#22914;&#26524;&#29238;&#20146;&#26159;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#30340;, &#37027;&#20040;&#23601;&#21487;&#20197;&#20351;&#29992;&#21452;&#21521;one-to-many&#30340;&#20851;&#32852;&#20102;&#65306;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="Parent"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;set name="children" inverse="true"&gt;
            &lt;key column="parent_id"/&gt;
            &lt;one-to-many class="Child"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="Child"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
        &lt;many-to-one name="parent" class="Parent" column="parent_id" not-null="true"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#35831;&#27880;&#24847;<tt class="literal">NOT NULL</tt>&#30340;&#32422;&#26463;:                
            </p><pre class="programlisting">create table parent ( id bigint not null primary key )
create table child ( id bigint not null
                     primary key,
                     name varchar(255),
                     parent_id bigint not null )
alter table child add constraint childfk0 (parent_id) references parent</pre><p>
            &#21478;&#22806;&#65292;&#22914;&#26524;&#20320;&#32477;&#23545;&#22362;&#25345;&#36825;&#20010;&#20851;&#32852;&#24212;&#35813;&#26159;&#21333;&#21521;&#30340;&#65292;&#20320;&#21487;&#20197;&#23545;<tt class="literal">&lt;key&gt;</tt>&#26144;&#23556;&#22768;&#26126;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#65306;
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="Parent"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;set name="children"&gt;
            &lt;key column="parent_id" not-null="true"/&gt;
            &lt;one-to-many class="Child"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="Child"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#21478;&#22806;&#19968;&#26041;&#38754;,&#22914;&#26524;&#19968;&#20010;&#23376;&#23454;&#20363;&#21487;&#33021;&#26377;&#22810;&#20010;&#29238;&#23454;&#20363;, &#37027;&#20040;&#23601;&#24212;&#35813;&#20351;&#29992;many-to-many&#20851;&#32852;&#65306;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="Parent"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;set name="children" table="childset"&gt;
            &lt;key column="parent_id"/&gt;
            &lt;many-to-many class="Child" column="child_id"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="Child"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#34920;&#23450;&#20041;&#65306;
            </p><pre class="programlisting">create table parent ( id bigint not null primary key )
create table child ( id bigint not null primary key, name varchar(255) )
create table childset ( parent_id bigint not null,
                        child_id bigint not null,
                        primary key ( parent_id, child_id ) )
alter table childset add constraint childsetfk0 (parent_id) references parent
alter table childset add constraint childsetfk1 (child_id) references child</pre><p>
		 &#26356;&#22810;&#30340;&#20363;&#23376;,&#20197;&#21450;&#19968;&#20010;&#23436;&#25972;&#30340;&#29238;/&#23376;&#20851;&#31995;&#26144;&#23556;&#30340;&#25490;&#32451;,&#35831;&#21442;&#38405;<a href="#example-parentchild" title="&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)">&#31532;&nbsp;21&nbsp;&#31456; <i>&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)</i></a>.
		</p><p>
            &#29978;&#33267;&#21487;&#33021;&#20986;&#29616;&#26356;&#21152;&#22797;&#26434;&#30340;&#20851;&#32852;&#26144;&#23556;,&#25105;&#20204;&#20250;&#22312;&#19979;&#19968;&#31456;&#20013;&#21015;&#20986;&#25152;&#26377;&#21487;&#33021;&#24615;&#12290;
        </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="associations"></a>&#31532;&nbsp;7&nbsp;&#31456;&nbsp;&#20851;&#32852;&#20851;&#31995;&#26144;&#23556;</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="assoc-intro"></a>7.1.&nbsp;&#20171;&#32461;</h2></div></div><div></div></div><p>
            &#20851;&#32852;&#20851;&#31995;&#26144;&#23556;&#36890;&#24120;&#24773;&#20917;&#26159;&#26368;&#38590;&#37197;&#32622;&#27491;&#30830;&#30340;&#12290;&#22312;&#36825;&#20010;&#37096;&#20998;&#20013;&#65292;&#25105;&#20204;&#20174;&#21333;&#21521;&#20851;&#31995;&#26144;&#23556;&#24320;&#22987;&#65292;&#28982;&#21518;&#32771;&#34385;&#21452;&#21521;&#20851;&#31995;&#26144;&#23556;&#65292;&#30001;&#27973;&#33267;&#28145;&#35762;&#36848;&#19968;&#36941;&#20856;&#22411;&#30340;&#26696;&#20363;&#12290;&#22312;&#25152;&#26377;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#37117;&#20351;&#29992; <tt class="literal">Person</tt>&#21644;<tt class="literal">Address</tt>&#12290;
        </p><p>
        	&#25105;&#20204;&#26681;&#25454;&#26144;&#23556;&#20851;&#31995;&#26159;&#21542;&#28041;&#21450;&#36830;&#25509;&#34920;&#20197;&#21450;&#22810;&#26679;&#24615;&#26469;&#21010;&#20998;&#20851;&#32852;&#31867;&#22411;&#12290;
        </p><p>
        	&#22312;&#20256;&#32479;&#30340;&#25968;&#25454;&#24314;&#27169;&#20013;&#65292;&#20801;&#35768;&#20026;Null&#20540;&#30340;&#22806;&#38190;&#34987;&#35748;&#20026;&#26159;&#19968;&#31181;&#19981;&#22909;&#30340;&#23454;&#36341;&#65292;&#22240;&#27492;&#25105;&#20204;&#25152;&#26377;&#30340;&#20363;&#23376;&#20013;&#37117;&#20351;&#29992;&#19981;&#20801;&#35768;&#20026;Null&#30340;&#22806;&#38190;&#12290;&#36825;&#24182;&#19981;&#26159;Hibernate&#30340;&#35201;&#27714;&#65292;&#21363;&#20351;&#20320;&#21024;&#38500;&#25481;&#19981;&#20801;&#35768;&#20026;Null&#30340;&#32422;&#26463;&#65292;Hibernate&#26144;&#23556;&#19968;&#26679;&#21487;&#20197;&#24037;&#20316;&#30340;&#24456;&#22909;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="assoc-unidirectional"></a>7.2.&nbsp;&#21333;&#21521;&#20851;&#32852;&#65288;Unidirectional associations&#65289;</h2></div></div><div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-unidirectional-m21"></a>7.2.1.&nbsp;&#22810;&#23545;&#19968;(many to one)</h3></div></div><div></div></div><p>
             <span class="emphasis"><em>&#21333;&#21521;many-to-one&#20851;&#32852;</em></span>&#26159;&#26368;&#24120;&#35265;&#30340;&#21333;&#21521;&#20851;&#32852;&#20851;&#31995;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;many-to-one name="address" 
        column="addressId"
        not-null="true"/&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key, addressId bigint not null )
create table Address ( addressId bigint not null primary key )
        </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-unidirectional-121"></a>7.2.2.&nbsp;&#19968;&#23545;&#19968;&#65288;one to one&#65289;</h3></div></div><div></div></div><p>
             <span class="emphasis"><em>&#22522;&#20110;&#22806;&#38190;&#20851;&#32852;&#30340;&#21333;&#21521;&#19968;&#23545;&#19968;&#20851;&#32852;</em></span>&#21644;<span class="emphasis"><em>&#21333;&#21521;&#22810;&#23545;&#19968;&#20851;&#32852;</em></span>&#20960;&#20046;&#26159;&#19968;&#26679;&#30340;&#12290;&#21807;&#19968;&#30340;&#19981;&#21516;&#23601;&#26159;&#21333;&#21521;&#19968;&#23545;&#19968;&#20851;&#32852;&#20013;&#30340;&#22806;&#38190;&#23383;&#27573;&#20855;&#26377;&#21807;&#19968;&#24615;&#32422;&#26463;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;many-to-one name="address" 
        column="addressId" 
        unique="true"
        not-null="true"/&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key, addressId bigint not null unique )
create table Address ( addressId bigint not null primary key )
        </pre><p>
            <span class="emphasis"><em>&#22522;&#20110;&#20027;&#38190;&#20851;&#32852;&#30340;&#21333;&#21521;&#19968;&#23545;&#19968;&#20851;&#32852;</em></span>&#36890;&#24120;&#20351;&#29992;&#19968;&#20010;&#29305;&#23450;&#30340;id&#29983;&#25104;&#22120;&#12290;&#65288;&#35831;&#27880;&#24847;&#65292;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#25105;&#20204;&#25481;&#25442;&#20102;&#20851;&#32852;&#30340;&#26041;&#21521;&#12290;&#65289;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="foreign"&gt;
            &lt;param name="property"&gt;person&lt;/param&gt;
        &lt;/generator&gt;
    &lt;/id&gt;
    &lt;one-to-one name="person" constrained="true"/&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table Address ( personId bigint not null primary key )
        </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-unidirectional-12m"></a>7.2.3.&nbsp;&#19968;&#23545;&#22810;&#65288;one to many&#65289;</h3></div></div><div></div></div><p>
            <span class="emphasis"><em>&#22522;&#20110;&#22806;&#38190;&#20851;&#32852;&#30340;&#21333;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;</em></span>&#26159;&#19968;&#31181;&#24456;&#23569;&#35265;&#30340;&#24773;&#20917;&#65292;&#24182;&#19981;&#25512;&#33616;&#20351;&#29992;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;set name="addresses"&gt;
        &lt;key column="personId" 
            not-null="true"/&gt;
        &lt;one-to-many class="Address"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table Address ( addressId bigint not null primary key, personId bigint not null )
        </pre><p>
            &#25105;&#20204;&#35748;&#20026;&#23545;&#20110;&#36825;&#31181;&#20851;&#32852;&#20851;&#31995;&#26368;&#22909;&#20351;&#29992;&#36830;&#25509;&#34920;&#12290;
        </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="assoc-unidirectional-join"></a>7.3.&nbsp;&#20351;&#29992;&#36830;&#25509;&#34920;&#30340;&#21333;&#21521;&#20851;&#32852;&#65288;Unidirectional associations with join tables&#65289;</h2></div></div><div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-unidirectional-join-12m"></a>7.3.1.&nbsp;&#19968;&#23545;&#22810;(one to many)</h3></div></div><div></div></div><p>
            <span class="emphasis"><em>&#22522;&#20110;&#36830;&#25509;&#34920;&#30340;&#21333;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;</em></span> &#24212;&#35813;&#20248;&#20808;&#34987;&#37319;&#29992;&#12290;&#35831;&#27880;&#24847;&#65292;&#36890;&#36807;&#25351;&#23450;<tt class="literal">unique="true"</tt>&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#22810;&#26679;&#24615;&#20174;&#22810;&#23545;&#22810;&#25913;&#21464;&#20026;&#19968;&#23545;&#22810;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;set name="addresses" table="PersonAddress"&gt;
        &lt;key column="personId"/&gt;
        &lt;many-to-many column="addressId"
            unique="true"
            class="Address"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table PersonAddress ( personId not null, addressId bigint not null primary key )
create table Address ( addressId bigint not null primary key )
        </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-unidirectional-join-m21"></a>7.3.2.&nbsp;&#22810;&#23545;&#19968;&#65288;many to one&#65289;</h3></div></div><div></div></div><p>
            <span class="emphasis"><em>&#22522;&#20110;&#36830;&#25509;&#34920;&#30340;&#21333;&#21521;&#22810;&#23545;&#19968;&#20851;&#32852;</em></span>&#22312;&#20851;&#32852;&#20851;&#31995;&#21487;&#36873;&#30340;&#24773;&#20917;&#19979;&#24212;&#29992;&#20063;&#24456;&#26222;&#36941;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;join table="PersonAddress" 
        optional="true"&gt;
        &lt;key column="personId" unique="true"/&gt;
        &lt;many-to-one name="address"
            column="addressId" 
            not-null="true"/&gt;
    &lt;/join&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table PersonAddress ( personId bigint not null primary key, addressId bigint not null )
create table Address ( addressId bigint not null primary key )
        </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-unidirectional-join-121"></a>7.3.3.&nbsp;&#19968;&#23545;&#19968;&#65288;one to one&#65289;</h3></div></div><div></div></div><p>
            <span class="emphasis"><em>&#22522;&#20110;&#36830;&#25509;&#34920;&#30340;&#21333;&#21521;&#19968;&#23545;&#19968;&#20851;&#32852;</em></span>&#38750;&#24120;&#23569;&#35265;&#65292;&#20294;&#20063;&#26159;&#21487;&#34892;&#30340;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;join table="PersonAddress" 
        optional="true"&gt;
        &lt;key column="personId" 
            unique="true"/&gt;
        &lt;many-to-one name="address"
            column="addressId" 
            not-null="true"
            unique="true"/&gt;
    &lt;/join&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table PersonAddress ( personId bigint not null primary key, addressId bigint not null unique )
create table Address ( addressId bigint not null primary key )
        </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-unidirectional-join-m2m"></a>7.3.4.&nbsp;&#22810;&#23545;&#22810;&#65288;many to many&#65289;</h3></div></div><div></div></div><p>
            &#26368;&#21518;&#65292;&#36824;&#26377; <span class="emphasis"><em>&#21333;&#21521;&#22810;&#23545;&#22810;&#20851;&#32852;</em></span>.
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;set name="addresses" table="PersonAddress"&gt;
        &lt;key column="personId"/&gt;
        &lt;many-to-many column="addressId"
            class="Address"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table PersonAddress ( personId bigint not null, addressId bigint not null, primary key (personId, addressId) )
create table Address ( addressId bigint not null primary key )
        </pre></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="assoc-bidirectional"></a>7.4.&nbsp;&#21452;&#21521;&#20851;&#32852;&#65288;Bidirectional associations&#65289;</h2></div></div><div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-bidirectional-m21"></a>7.4.1.&nbsp;&#19968;&#23545;&#22810;&#65288;one to many) / &#22810;&#23545;&#19968;&#65288;many to one&#65289;</h3></div></div><div></div></div><p>
            <span class="emphasis"><em>&#21452;&#21521;&#22810;&#23545;&#19968;&#20851;&#32852;</em></span> &#26159;&#26368;&#24120;&#35265;&#30340;&#20851;&#32852;&#20851;&#31995;&#12290;&#65288;&#36825;&#20063;&#26159;&#26631;&#20934;&#30340;&#29238;/&#23376;&#20851;&#32852;&#20851;&#31995;&#12290;&#65289;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;many-to-one name="address" 
        column="addressId"
        not-null="true"/&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;set name="people" inverse="true"&gt;
        &lt;key column="addressId"/&gt;
        &lt;one-to-many class="Person"/&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key, addressId bigint not null )
create table Address ( addressId bigint not null primary key )
        </pre><p>
            &#22914;&#26524;&#20320;&#20351;&#29992;<tt class="literal">List</tt>(&#25110;&#32773;&#20854;&#20182;&#26377;&#24207;&#38598;&#21512;&#31867;)&#65292;&#20320;&#38656;&#35201;&#35774;&#32622;&#22806;&#38190;&#23545;&#24212;&#30340;<tt class="literal">key</tt>&#21015;&#20026; <tt class="literal">not null</tt>,&#35753;Hibernate&#26469;&#20174;&#38598;&#21512;&#31471;&#31649;&#29702;&#20851;&#32852;&#65292;&#32500;&#25252;&#27599;&#20010;&#20803;&#32032;&#30340;&#32034;&#24341;&#65288;&#36890;&#36807;&#35774;&#32622;<tt class="literal">update="false"</tt> and <tt class="literal">insert="false"</tt>&#26469;&#23545;&#21478;&#19968;&#31471;&#21453;&#21521;&#25805;&#20316;&#65289;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
   &lt;id name="id"/&gt;
   ...
   &lt;many-to-one name="address"
      column="addressId"
      not-null="true"
      insert="false"
      update="false"/&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
   &lt;id name="id"/&gt;
   ...
   &lt;list name="people"&gt;
      &lt;key column="addressId" not-null="true"/&gt;
      &lt;list-index column="peopleIdx"/&gt;
      &lt;one-to-many class="Person"/&gt;
   &lt;/list&gt;
&lt;/class&gt;</pre><p>
                &#20551;&#33509;&#38598;&#21512;&#26144;&#23556;&#30340;<tt class="literal">&lt;key&gt;</tt>&#20803;&#32032;&#23545;&#24212;&#30340;&#24213;&#23618;&#22806;&#38190;&#23383;&#27573;&#26159;<tt class="literal">NOT NULL</tt>&#30340;&#65292;&#37027;&#20040;&#20026;&#36825;&#19968;key&#20803;&#32032;&#23450;&#20041;<tt class="literal">not-null="true"</tt>&#26159;&#24456;&#37325;&#35201;&#30340;&#12290;&#19981;&#35201;&#20165;&#20165;&#20026;&#21487;&#33021;&#30340;&#23884;&#22871;<tt class="literal">&lt;column&gt;</tt>&#20803;&#32032;&#23450;&#20041;<tt class="literal">not-null="true"</tt>&#65292;<tt class="literal">&lt;key&gt;</tt>&#20803;&#32032;&#20063;&#26159;&#38656;&#35201;&#30340;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-bidirectional-121"></a>7.4.2.&nbsp;&#19968;&#23545;&#19968;&#65288;one to one&#65289;</h3></div></div><div></div></div><p>
           <span class="emphasis"><em>&#22522;&#20110;&#22806;&#38190;&#20851;&#32852;&#30340;&#21452;&#21521;&#19968;&#23545;&#19968;&#20851;&#32852;</em></span>&#20063;&#24456;&#24120;&#35265;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;many-to-one name="address" 
        column="addressId" 
        unique="true"
        not-null="true"/&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
   &lt;one-to-one name="person" 
        property-ref="address"/&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key, addressId bigint not null unique )
create table Address ( addressId bigint not null primary key )
        </pre><p>
            <span class="emphasis"><em>&#22522;&#20110;&#20027;&#38190;&#20851;&#32852;&#30340;&#19968;&#23545;&#19968;&#20851;&#32852;</em></span>&#38656;&#35201;&#20351;&#29992;&#29305;&#23450;&#30340;id&#29983;&#25104;&#22120;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;one-to-one name="address"/&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="foreign"&gt;
            &lt;param name="property"&gt;person&lt;/param&gt;
        &lt;/generator&gt;
    &lt;/id&gt;
    &lt;one-to-one name="person" 
        constrained="true"/&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table Address ( personId bigint not null primary key )
        </pre></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="assoc-bidirectional-join"></a>7.5.&nbsp;&#20351;&#29992;&#36830;&#25509;&#34920;&#30340;&#21452;&#21521;&#20851;&#32852;&#65288;Bidirectional associations with join tables&#65289;</h2></div></div><div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-bidirectional-join-12m"></a>7.5.1.&nbsp;&#19968;&#23545;&#22810;&#65288;one to many&#65289; /&#22810;&#23545;&#19968;&#65288; many to one&#65289;</h3></div></div><div></div></div><p>
             <span class="emphasis"><em>&#22522;&#20110;&#36830;&#25509;&#34920;&#30340;&#21452;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;</em></span>&#12290;&#27880;&#24847;<tt class="literal">inverse="true"</tt>&#21487;&#20197;&#20986;&#29616;&#22312;&#20851;&#32852;&#30340;&#20219;&#24847;&#19968;&#31471;&#65292;&#21363;collection&#31471;&#25110;&#32773;join&#31471;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;set name="addresses" 
        table="PersonAddress"&gt;
        &lt;key column="personId"/&gt;
        &lt;many-to-many column="addressId"
            unique="true"
            class="Address"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;join table="PersonAddress" 
        inverse="true" 
        optional="true"&gt;
        &lt;key column="addressId"/&gt;
        &lt;many-to-one name="person"
            column="personId"
            not-null="true"/&gt;
    &lt;/join&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table PersonAddress ( personId bigint not null, addressId bigint not null primary key )
create table Address ( addressId bigint not null primary key )
        </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-bidirectional-join-121"></a>7.5.2.&nbsp;&#19968;&#23545;&#19968;&#65288;one to one&#65289;</h3></div></div><div></div></div><p>
            <span class="emphasis"><em>&#22522;&#20110;&#36830;&#25509;&#34920;&#30340;&#21452;&#21521;&#19968;&#23545;&#19968;&#20851;&#32852;</em></span>&#26497;&#20026;&#32597;&#35265;&#65292;&#20294;&#20063;&#26159;&#21487;&#34892;&#30340;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;join table="PersonAddress" 
        optional="true"&gt;
        &lt;key column="personId" 
            unique="true"/&gt;
        &lt;many-to-one name="address"
            column="addressId" 
            not-null="true"
            unique="true"/&gt;
    &lt;/join&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;join table="PersonAddress" 
        optional="true"
        inverse="true"&gt;
        &lt;key column="addressId" 
            unique="true"/&gt;
        &lt;many-to-one name="person"
            column="personId" 
            not-null="true"
            unique="true"/&gt;
    &lt;/join&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table PersonAddress ( personId bigint not null primary key, addressId bigint not null unique )
create table Address ( addressId bigint not null primary key )
        </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="assoc-bidirectional-join-m2m"></a>7.5.3.&nbsp;&#22810;&#23545;&#22810;&#65288;many to many&#65289;</h3></div></div><div></div></div><p>
            &#26368;&#21518;&#65292;&#36824;&#26377; <span class="emphasis"><em>&#21452;&#21521;&#22810;&#23545;&#22810;&#20851;&#32852;</em></span>.
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id" column="personId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;set name="addresses"  table="PersonAddress"&gt;
        &lt;key column="personId"/&gt;
        &lt;many-to-many column="addressId"
            class="Address"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Address"&gt;
    &lt;id name="id" column="addressId"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;set name="people" inverse="true"  table="PersonAddress"&gt;
        &lt;key column="addressId"/&gt;
        &lt;many-to-many column="personId"
            class="Person"/&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><pre class="programlisting">
create table Person ( personId bigint not null primary key )
create table PersonAddress ( personId bigint not null, addressId bigint not null, primary key (personId, addressId) )
create table Address ( addressId bigint not null primary key )
        </pre></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="assoc-complex"></a>7.6.&nbsp;&#26356;&#22797;&#26434;&#30340;&#20851;&#32852;&#26144;&#23556;</h2></div></div><div></div></div><p>
            &#26356;&#22797;&#26434;&#30340;&#20851;&#32852;&#36830;&#25509;<span class="emphasis"><em>&#26497;&#20026;</em></span>&#32597;&#35265;&#12290; 
            &#36890;&#36807;&#22312;&#26144;&#23556;&#25991;&#26723;&#20013;&#23884;&#20837;SQL&#29255;&#26029;&#65292;Hibernate&#20063;&#21487;&#20197;&#22788;&#29702;&#26356;&#20026;&#22797;&#26434;&#30340;&#24773;&#20917;&#12290;&#27604;&#22914;&#65292;&#20551;&#33509;&#21253;&#21547;&#21382;&#21490;&#24080;&#25143;&#25968;&#25454;&#30340;&#34920;&#23450;&#20041;&#20102;<tt class="literal">accountNumber</tt>, <tt class="literal">effectiveEndDate</tt> &#21644;<tt class="literal">effectiveStartDate</tt>&#23383;&#27573;&#65292;&#25353;&#29031;&#19979;&#38754;&#26144;&#23556;&#65306;
        </p><pre class="programlisting">&lt;properties name="currentAccountKey"&gt;
    &lt;property name="accountNumber" type="string" not-null="true"/&gt;
    &lt;property name="currentAccount" type="boolean"&gt;
        &lt;formula&gt;case when effectiveEndDate is null then 1 else 0 end&lt;/formula&gt;
    &lt;/property&gt;
&lt;/properties&gt;
&lt;property name="effectiveEndDate" type="date"/&gt;
&lt;property name="effectiveStateDate" type="date" not-null="true"/&gt;</pre><p>
        &#37027;&#20040;&#25105;&#20204;&#21487;&#20197;&#23545;<span class="emphasis"><em>&#30446;&#21069;(current)</em></span>&#23454;&#20363;(&#20854;<tt class="literal">effectiveEndDate</tt>&#20026;null)&#20351;&#29992;&#36825;&#26679;&#30340;&#20851;&#32852;&#26144;&#23556;:
        </p><pre class="programlisting">&lt;many-to-one name="currentAccountInfo" 
        property-ref="currentAccountKey"
        class="AccountInfo"&gt;
    &lt;column name="accountNumber"/&gt;
    &lt;formula&gt;'1'&lt;/formula&gt;
&lt;/many-to-one&gt;</pre><p>
            &#26356;&#22797;&#26434;&#30340;&#20363;&#23376;,&#20551;&#24819;<tt class="literal">Employee</tt>&#21644;<tt class="literal">Organization</tt>&#20043;&#38388;&#30340;&#20851;&#32852;&#26159;&#36890;&#36807;&#19968;&#20010;<tt class="literal">Employment</tt>&#20013;&#38388;&#34920;&#32500;&#25252;&#30340;,&#32780;&#20013;&#38388;&#34920;&#20013;&#22635;&#20805;&#20102;&#24456;&#22810;&#21382;&#21490;&#38599;&#21592;&#25968;&#25454;&#12290;&#37027;&#8220;&#38599;&#21592;&#30340;<span class="emphasis"><em>&#26368;&#26032;</em></span>&#38599;&#20027;&#8221;&#36825;&#20010;&#20851;&#32852;&#65288;&#26368;&#26032;&#38599;&#20027;&#23601;&#26159;<tt class="literal">startDate</tt>&#26368;&#21518;&#30340;&#37027;&#20010;&#65289;&#21487;&#20197;&#36825;&#26679;&#26144;&#23556;&#65306;
        </p><pre class="programlisting">&lt;join&gt;
    &lt;key column="employeeId"/&gt;
    &lt;subselect&gt;
        select employeeId, orgId 
        from Employments 
        group by orgId 
        having startDate = max(startDate)
    &lt;/subselect&gt;
    &lt;many-to-one name="mostRecentEmployer" 
            class="Organization" 
            column="orgId"/&gt;
&lt;/join&gt;</pre><p>
        &#20351;&#29992;&#36825;&#19968;&#21151;&#33021;&#26102;&#21487;&#20197;&#20805;&#28385;&#21019;&#24847;&#65292;&#20294;&#36890;&#24120;&#26356;&#21152;&#23454;&#29992;&#30340;&#26159;&#29992;HQL&#25110;&#26465;&#20214;&#26597;&#35810;&#26469;&#22788;&#29702;&#36825;&#20123;&#24773;&#24418;&#12290;
        </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="components"></a>&#31532;&nbsp;8&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;</h2></div></div><div></div></div><p>
      <span class="emphasis"><em>&#32452;&#20214;</em></span>(Component)&#36825;&#20010;&#27010;&#24565;&#22312;Hibernate&#20013;&#20960;&#22788;&#19981;&#21516;&#30340;&#22320;&#26041;&#20026;&#20102;&#19981;&#21516;&#30340;&#30446;&#30340;&#34987;&#37325;&#22797;&#20351;&#29992;.
  </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="components-dependentobjects"></a>8.1.&nbsp;&#20381;&#36182;&#23545;&#35937;&#65288;Dependent objects&#65289;</h2></div></div><div></div></div><p>
        &#32452;&#20214;(Component)&#26159;&#19968;&#20010;&#34987;&#21253;&#21547;&#30340;&#23545;&#35937;&#65292;&#22312;&#25345;&#20037;&#21270;&#30340;&#36807;&#31243;&#20013;&#65292;&#23427;&#34987;&#24403;&#20316;&#20540;&#31867;&#22411;&#65292;&#32780;&#24182;&#38750;&#19968;&#20010;&#23454;&#20307;&#30340;&#24341;&#29992;&#12290;&#22312;&#36825;&#31687;&#25991;&#26723;&#20013;&#65292;&#32452;&#20214;&#36825;&#19968;&#26415;&#35821;&#25351;&#30340;&#26159;&#38754;&#21521;&#23545;&#35937;&#30340;&#21512;&#25104;&#27010;&#24565;&#65288;&#32780;&#24182;&#19981;&#26159;&#31995;&#32479;&#26500;&#26550;&#23618;&#27425;&#19978;&#30340;&#32452;&#20214;&#30340;&#27010;&#24565;&#65289;&#12290;&#20030;&#20010;&#20363;&#23376;, &#20320;&#23545;&#20154;(Person)&#36825;&#20010;&#27010;&#24565;&#21487;&#20197;&#20687;&#19979;&#38754;&#36825;&#26679;&#26469;&#24314;&#27169;&#65306;
    </p><pre class="programlisting">public class Person {
    private java.util.Date birthday;
    private Name name;
    private String key;
    public String getKey() {
        return key;
    }
    private void setKey(String key) {
        this.key=key;
    }
    public java.util.Date getBirthday() {
        return birthday;
    }
    public void setBirthday(java.util.Date birthday) {
        this.birthday = birthday;
    }
    public Name getName() {
        return name;
    }
    public void setName(Name name) {
        this.name = name;
    }
    ......
    ......
}</pre><pre class="programlisting">public class Name {
    char initial;
    String first;
    String last;
    public String getFirst() {
        return first;
    }
    void setFirst(String first) {
        this.first = first;
    }
    public String getLast() {
        return last;
    }
    void setLast(String last) {
        this.last = last;
    }
    public char getInitial() {
        return initial;
    }
    void setInitial(char initial) {
        this.initial = initial;
    }
}</pre><p>
            &#22312;&#25345;&#20037;&#21270;&#30340;&#36807;&#31243;&#20013;,<tt class="literal">&#22995;&#21517;(Name)</tt>&#21487;&#20197;&#20316;&#20026;<tt class="literal">&#20154;(Person)</tt>&#30340;&#19968;&#20010;&#32452;&#20214;&#12290;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;:&#20320;&#24212;&#35813;&#20026;<tt class="literal">&#22995;&#21517;</tt>&#30340;&#25345;&#20037;&#21270;&#23646;&#24615;&#23450;&#20041;getter&#21644;setter&#26041;&#27861;,&#20294;&#26159;&#20320;&#19981;&#38656;&#35201;&#23454;&#29616;&#20219;&#20309;&#30340;&#25509;&#21475;&#25110;&#30003;&#26126;&#26631;&#35782;&#31526;&#23383;&#27573;&#12290;
        </p><p>
            &#20197;&#19979;&#26159;&#36825;&#20010;&#20363;&#23376;&#30340;Hibernate&#26144;&#23556;&#25991;&#20214;:
        </p><pre class="programlisting">&lt;class name="eg.Person" table="person"&gt;
    &lt;id name="Key" column="pid" type="string"&gt;
        &lt;generator class="uuid"/&gt;
    &lt;/id&gt;
    &lt;property name="birthday" type="date"/&gt;
    &lt;component name="Name" class="eg.Name"&gt; &lt;!-- class attribute optional --&gt;
        &lt;property name="initial"/&gt;
        &lt;property name="first"/&gt;
        &lt;property name="last"/&gt;
    &lt;/component&gt;
&lt;/class&gt;</pre><p>
        &#20154;&#21592;(Person)&#34920;&#20013;&#23558;&#21253;&#25324;<tt class="literal">pid</tt>,
        <tt class="literal">birthday</tt>,
        <tt class="literal">initial</tt>,
        <tt class="literal">first</tt>&#21644;
        <tt class="literal">last</tt>&#31561;&#23383;&#27573;&#12290;</p><p>
        &#23601;&#20687;&#25152;&#26377;&#30340;&#20540;&#31867;&#22411;&#19968;&#26679;, &#32452;&#20214;&#19981;&#25903;&#25345;&#20849;&#20139;&#24341;&#29992;&#12290;
        &#25442;&#21477;&#35805;&#35828;&#65292;&#20004;&#20010;&#20154;&#21487;&#33021;&#37325;&#21517;&#65292;&#20294;&#26159;&#20004;&#20010;Person&#23545;&#35937;&#24212;&#35813;&#21253;&#21547;&#20004;&#20010;&#29420;&#31435;&#30340;Name&#23545;&#35937;&#65292;&#21482;&#19981;&#36807;&#36825;&#20004;&#20010;Name&#23545;&#35937;&#20855;&#26377;&#8220;&#21516;&#26679;&#8221;&#30340;&#20540;&#12290;
        &#32452;&#20214;&#30340;&#20540;&#21487;&#20197;&#20026;&#31354;&#65292;&#20854;&#23450;&#20041;&#22914;&#19979;&#12290;
        &#27599;&#24403;Hibernate&#37325;&#26032;&#21152;&#36733;&#19968;&#20010;&#21253;&#21547;&#32452;&#20214;&#30340;&#23545;&#35937;,&#22914;&#26524;&#35813;&#32452;&#20214;&#30340;&#25152;&#26377;&#23383;&#27573;&#20026;&#31354;&#65292;Hibernate&#23558;&#20551;&#23450;&#25972;&#20010;&#32452;&#20214;&#20026;&#31354;&#12290;
        &#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;,&#36825;&#26679;&#20551;&#23450;&#24212;&#35813;&#26159;&#27809;&#26377;&#38382;&#39064;&#30340;&#12290;
    </p><p>
        &#32452;&#20214;&#30340;&#23646;&#24615;&#21487;&#20197;&#26159;&#20219;&#24847;&#19968;&#31181;Hibernate&#31867;&#22411;&#65288;&#21253;&#25324;&#38598;&#21512;, &#22810;&#23545;&#22810;&#20851;&#32852;&#65292;
        &#20197;&#21450;&#20854;&#23427;&#32452;&#20214;&#31561;&#31561;&#65289;&#12290;&#23884;&#22871;&#32452;&#20214;&#19981;&#24212;&#35813;&#34987;&#24403;&#20316;&#19968;&#31181;&#29305;&#27530;&#30340;&#24212;&#29992;(Nested components should not be considered an
        exotic usage)&#12290; Hibernate&#20542;&#21521;&#20110;&#25903;&#25345;&#32454;&#33268;&#30340;(fine-grained)&#23545;&#35937;&#27169;&#22411;&#12290;
    </p><p>
        <tt class="literal">&lt;component&gt;</tt> &#20803;&#32032;&#36824;&#20801;&#35768;&#26377; <tt class="literal">&lt;parent&gt;</tt>&#23376;&#20803;&#32032;&#65292;&#29992;&#26469;&#34920;&#26126;component&#31867;&#20013;&#30340;&#19968;&#20010;&#23646;&#24615;&#26159;&#25351;&#21521;&#21253;&#21547;&#23427;&#30340;&#23454;&#20307;&#30340;&#24341;&#29992;&#12290;
    </p><pre class="programlisting">&lt;class name="eg.Person" table="person"&gt;
    &lt;id name="Key" column="pid" type="string"&gt;
        &lt;generator class="uuid"/&gt;
    &lt;/id&gt;
    &lt;property name="birthday" type="date"&gt;
    &lt;component name="Name" class="eg.Name" unique="true"&gt;
        &lt;parent name="namedPerson"/&gt; &lt;!-- reference back to the Person --&gt;
        &lt;property name="initial"/&gt;
        &lt;property name="first"/&gt;
        &lt;property name="last"/&gt;
    &lt;/component&amp;gt;
&lt;/class&gt;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="components-incollections"></a>8.2.&nbsp;&#22312;&#38598;&#21512;&#20013;&#20986;&#29616;&#30340;&#20381;&#36182;&#23545;&#35937; (Collections of dependent objects)</h2></div></div><div></div></div><p>
        Hibernate&#25903;&#25345;&#32452;&#20214;&#30340;&#38598;&#21512;(&#20363;&#22914;: &#19968;&#20010;&#20803;&#32032;&#26159;&#22995;&#21517;(Name)&#36825;&#31181;&#31867;&#22411;&#30340;&#25968;&#32452;)&#12290;
        &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">&lt;composite-element&gt;</tt>&#26631;&#31614;&#26367;&#20195;<tt class="literal">&lt;element&gt;</tt>&#26631;&#31614;&#26469;&#23450;&#20041;&#20320;&#30340;&#32452;&#20214;&#38598;&#21512;&#12290;
    </p><pre class="programlisting">&lt;set name="someNames" table="some_names" lazy="true"&gt;
    &lt;key column="id"/&amp;gt;
    &lt;composite-element class="eg.Name"&gt; &lt;!-- class attribute required --&gt;
        &lt;property name="initial"/&gt;
        &lt;property name="first"/&gt;
        &lt;property name="last"/&gt;;
    &lt;/composite-element&gt;
&lt;/set&gt;</pre><p>
        &#27880;&#24847;&#65292;&#22914;&#26524;&#20320;&#23450;&#20041;&#30340;Set&#21253;&#21547;&#32452;&#21512;&#20803;&#32032;(composite-element)&#65292;&#27491;&#30830;&#22320;&#23454;&#29616;<tt class="literal">equals()</tt>&#21644;<tt class="literal">hashCode()</tt>&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;
    </p><p>
        &#32452;&#21512;&#20803;&#32032;&#21487;&#20197;&#21253;&#21547;&#32452;&#20214;&#65292;&#20294;&#26159;&#19981;&#33021;&#21253;&#21547;&#38598;&#21512;&#12290;&#22914;&#26524;&#20320;&#30340;&#32452;&#21512;&#20803;&#32032;&#33258;&#36523;&#21253;&#21547;&#32452;&#20214;, &#20320;&#24517;&#39035;&#20351;&#29992;<tt class="literal">&lt;nested-composite-element&gt;</tt>&#26631;&#31614;&#12290;&#36825;&#26159;&#19968;&#20010;&#30456;&#24403;&#29305;&#27530;&#30340;&#26696;&#20363; - &#22312;&#19968;&#20010;&#32452;&#20214;&#30340;&#38598;&#21512;&#37324;&#65292;&#37027;&#20123;&#32452;&#20214;&#26412;&#36523;&#21448;&#21487;&#20197;&#21253;&#21547;&#20854;&#20182;&#30340;&#32452;&#20214;&#12290;&#36825;&#20010;&#26102;&#20505;&#20320;&#23601;&#24212;&#35813;&#32771;&#34385;&#19968;&#19979;&#20351;&#29992;one-to-many&#20851;&#32852;&#26159;&#21542;&#20250;&#26356;&#24688;&#24403;&#12290;
		&#23581;&#35797;&#23545;&#36825;&#20010;&#32452;&#21512;&#20803;&#32032;&#37325;&#26032;&#24314;&#27169;&#20026;&#19968;&#20010;&#23454;&#20307;&#65293;&#20294;&#26159;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#34429;&#28982;Java&#27169;&#22411;&#21644;&#37325;&#26032;&#24314;&#27169;&#21069;&#26159;&#19968;&#26679;&#30340;&#65292;&#20851;&#31995;&#27169;&#22411;&#21644;&#25345;&#20037;&#24615;&#35821;&#20041;&#20250;&#26377;&#32454;&#24494;&#30340;&#21464;&#21270;&#12290;
    </p><p>
        &#35831;&#27880;&#24847;&#22914;&#26524;&#20320;&#20351;&#29992;<tt class="literal">&lt;set&gt;</tt>&#26631;&#31614;,&#19968;&#20010;&#32452;&#21512;&#20803;&#32032;&#30340;&#26144;&#23556;&#19981;&#25903;&#25345;&#21487;&#33021;&#20026;&#31354;&#30340;&#23646;&#24615;. &#24403;&#21024;&#38500;&#23545;&#35937;&#26102;&#65292; Hibernate&#24517;&#39035;&#20351;&#29992;&#27599;&#19968;&#20010;&#23383;&#27573;&#30340;&#20540;&#26469;&#30830;&#23450;&#19968;&#26465;&#35760;&#24405;(&#22312;&#32452;&#21512;&#20803;&#32032;&#34920;&#20013;&#65292;&#27809;&#26377;&#21333;&#29420;&#30340;&#20851;&#38190;&#23383;&#27573;)&#65292;
		&#22914;&#26524;&#26377;&#20026;null&#30340;&#23383;&#27573;&#65292;&#36825;&#26679;&#20570;&#23601;&#19981;&#21487;&#33021;&#20102;&#12290;&#20320;&#24517;&#39035;&#20316;&#20986;&#19968;&#20010;&#36873;&#25321;&#65292;&#35201;&#20040;&#22312;&#32452;&#21512;&#20803;&#32032;&#20013;&#20351;&#29992;&#19981;&#33021;&#20026;&#31354;&#30340;&#23646;&#24615;&#65292;&#35201;&#20040;&#36873;&#25321;&#20351;&#29992;<tt class="literal">&lt;list&gt;</tt>,<tt class="literal">&lt;map&gt;</tt>,<tt class="literal">&lt;bag&gt;</tt> &#25110;&#32773; <tt class="literal">&lt;idbag&gt;</tt>&#32780;&#19981;&#26159; <tt class="literal">&lt;set&gt;</tt>&#12290;
    </p><p>
        &#32452;&#21512;&#20803;&#32032;&#26377;&#20010;&#29305;&#21035;&#30340;&#29992;&#27861;&#26159;&#23427;&#21487;&#20197;&#21253;&#21547;&#19968;&#20010;<tt class="literal">&lt;many-to-one&gt;</tt>&#20803;&#32032;&#12290;&#31867;&#20284;&#36825;&#26679;&#30340;&#26144;&#23556;&#20801;&#35768;&#20320;&#23558;&#19968;&#20010;many-to-many&#20851;&#32852;&#34920;&#26144;&#23556;&#20026;&#32452;&#21512;&#20803;&#32032;&#30340;&#38598;&#21512;&#12290;(A mapping like this allows you to map extra columns of a many-to-many association table to the composite element class.) &#25509;&#19979;&#26469;&#30340;&#30340;&#20363;&#23376;&#26159;&#20174;<tt class="literal">Order</tt>&#21040;<tt class="literal">Item</tt>&#30340;&#19968;&#20010;&#22810;&#23545;&#22810;&#30340;&#20851;&#32852;&#20851;&#31995;, &#20851;&#32852;&#23646;&#24615;&#26159; <tt class="literal">purchaseDate</tt>, <tt class="literal">price</tt> &#21644; <tt class="literal">quantity</tt> &#12290;
    </p><pre class="programlisting">&lt;class name="eg.Order" .... &gt;
    ....
    &lt;set name="purchasedItems" table="purchase_items" lazy="true"&gt;
        &lt;key column="order_id"&gt;
        &lt;composite-element class="eg.Purchase"&gt;
            &lt;property name="purchaseDate"/&gt;
            &lt;property name="price"/&gt;
            &lt;property name="quantity"/&gt;
            &lt;many-to-one name="item" class="eg.Item"/&gt; &lt;!-- class attribute is optional --&gt;
        &lt;/composite-element&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><p>
        &#24403;&#28982;&#65292;&#24403;&#20320;&#23450;&#20041;Item&#26102;&#65292;&#20320;&#26080;&#27861;&#24341;&#29992;&#36825;&#20123;purchase&#65292;&#22240;&#27492;&#20320;&#26080;&#27861;&#23454;&#29616;&#21452;&#21521;&#20851;&#32852;&#26597;&#35810;&#12290;&#35760;&#20303;&#32452;&#20214;&#26159;&#20540;&#31867;&#22411;&#65292;&#24182;&#19988;&#19981;&#20801;&#35768;&#20849;&#20139;&#24341;&#29992;&#12290;&#26576;&#19968;&#20010;&#29305;&#23450;&#30340;<tt class="literal">Purchase</tt> &#21487;&#20197;&#25918;&#22312;<tt class="literal">Order</tt>&#30340;&#38598;&#21512;&#20013;&#65292;&#20294;&#23427;&#19981;&#33021;&#21516;&#26102;&#34987;<tt class="literal">Item</tt>&#25152;&#24341;&#29992;&#12290;
    </p><p>&#20854;&#23454;&#32452;&#21512;&#20803;&#32032;&#30340;&#36825;&#20010;&#29992;&#27861;&#21487;&#20197;&#25193;&#23637;&#21040;&#19977;&#37325;&#25110;&#22810;&#37325;&#20851;&#32852;:</p><pre class="programlisting">&lt;class name="eg.Order" .... &gt;
    ....
    &lt;set name="purchasedItems" table="purchase_items" lazy="true"&gt;
        &lt;key column="order_id"&gt;
        &lt;composite-element class="eg.OrderLine"&gt;
            &lt;many-to-one name="purchaseDetails" class="eg.Purchase"/&gt;
            &lt;many-to-one name="item" class="eg.Item"/&gt;
        &lt;/composite-element&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><p>
        &#22312;&#26597;&#35810;&#20013;&#65292;&#34920;&#36798;&#32452;&#21512;&#20803;&#32032;&#30340;&#35821;&#27861;&#21644;&#20851;&#32852;&#21040;&#20854;&#20182;&#23454;&#20307;&#30340;&#35821;&#27861;&#26159;&#19968;&#26679;&#30340;&#12290;
     </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="components-asmapindex"></a>8.3.&nbsp;&#32452;&#20214;&#20316;&#20026;Map&#30340;&#32034;&#24341;&#65288;Components as Map indices &#65289;</h2></div></div><div></div></div><p>
        <tt class="literal">&lt;composite-map-key&gt;</tt>&#20803;&#32032;&#20801;&#35768;&#20320;&#26144;&#23556;&#19968;&#20010;&#32452;&#20214;&#31867;&#20316;&#20026;&#19968;&#20010;<tt class="literal">Map</tt>&#30340;key&#65292;&#21069;&#25552;&#26159;&#20320;&#24517;&#39035;&#27491;&#30830;&#30340;&#22312;&#36825;&#20010;&#31867;&#20013;&#37325;&#20889;&#20102;<tt class="literal">hashCode()</tt> &#21644; <tt class="literal">equals()</tt>&#26041;&#27861;&#12290;
    </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="components-compositeid"></a>8.4.&nbsp;&#32452;&#20214;&#20316;&#20026;&#32852;&#21512;&#26631;&#35782;&#31526;(Components as composite identifiers)</h2></div></div><div></div></div><p>
       &#20320;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#32452;&#20214;&#20316;&#20026;&#19968;&#20010;&#23454;&#20307;&#31867;&#30340;&#26631;&#35782;&#31526;&#12290; &#20320;&#30340;&#32452;&#20214;&#31867;&#24517;&#39035;&#28385;&#36275;&#20197;&#19979;&#35201;&#27714;&#65306;
    </p><div class="itemizedlist"><ul type="disc" compact><li><p>
            &#23427;&#24517;&#39035;&#23454;&#29616;<tt class="literal">java.io.Serializable</tt>&#25509;&#21475;
        </p></li><li><p>
            &#23427;&#24517;&#39035;&#37325;&#26032;&#23454;&#29616;<tt class="literal">equals()</tt>&#21644;<tt class="literal">hashCode()</tt>&#26041;&#27861;, &#22987;&#32456;&#21644;&#32452;&#21512;&#20851;&#38190;&#23383;&#22312;&#25968;&#25454;&#24211;&#20013;&#30340;&#27010;&#24565;&#20445;&#25345;&#19968;&#33268;
        </p></li></ul></div><p>
        <span class="emphasis"><em>&#27880;&#24847;&#65306;&#22312;Hibernate3&#20013;&#65292;&#31532;&#20108;&#20010;&#35201;&#27714;&#24182;&#38750;&#26159;Hibernate&#24378;&#21046;&#24517;&#39035;&#30340;&#12290;&#20294;&#26368;&#22909;&#36825;&#26679;&#20570;&#12290;</em></span>
    </p><p>
        &#20320;&#19981;&#33021;&#20351;&#29992;&#19968;&#20010;<tt class="literal">IdentifierGenerator</tt>&#20135;&#29983;&#32452;&#21512;&#20851;&#38190;&#23383;&#12290;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#24517;&#39035;&#20998;&#37197;&#23427;&#33258;&#24049;&#30340;&#26631;&#35782;&#31526;&#12290;
    </p><p>
        &#20351;&#29992;<tt class="literal">&lt;composite-id&gt;</tt> &#26631;&#31614;(&#24182;&#19988;&#20869;&#23884;<tt class="literal">&lt;key-property&gt;</tt>&#20803;&#32032;)&#20195;&#26367;&#36890;&#24120;&#30340;<tt class="literal">&lt;id&gt;</tt>&#26631;&#31614;&#12290;&#27604;&#22914;,<tt class="literal">OrderLine</tt>&#31867;&#20855;&#26377;&#19968;&#20010;&#20027;&#38190;&#65292;&#36825;&#20010;&#20027;&#38190;&#20381;&#36182;&#20110;<tt class="literal">Order</tt>&#30340;(&#32852;&#21512;)&#20027;&#38190;&#12290;
    </p><pre class="programlisting">&lt;class name="OrderLine"&gt;
    
    &lt;composite-id name="id" class="OrderLineId"&gt;
        &lt;key-property name="lineId"/&gt;
        &lt;key-property name="orderId"/&gt;
        &lt;key-property name="customerId"/&gt;
    &lt;/composite-id&gt;
    
    &lt;property name="name"/&gt;
    
    &lt;many-to-one name="order" class="Order"
            insert="false" update="false"&gt;
        &lt;column name="orderId"/&gt;
        &lt;column name="customerId"/&gt;
    &lt;/many-to-one&gt;
    ....
    
&lt;/class&gt;</pre><p>
        &#29616;&#22312;&#65292;&#20219;&#20309;&#25351;&#21521;<tt class="literal">OrderLine</tt>&#30340;&#22806;&#38190;&#37117;&#26159;&#22797;&#21512;&#30340;&#12290;&#22312;&#20320;&#30340;&#26144;&#23556;&#25991;&#20214;&#20013;&#65292;&#24517;&#39035;&#20026;&#20854;&#20182;&#31867;&#20063;&#36825;&#26679;&#22768;&#26126;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#25351;&#21521;<tt class="literal">OrderLine</tt>&#30340;&#20851;&#32852;&#21487;&#33021;&#34987;&#36825;&#26679;&#26144;&#23556;&#65306;
    </p><pre class="programlisting">&lt;many-to-one name="orderLine" class="OrderLine"&gt;
&lt;!-- the "class" attribute is optional, as usual --&gt;
    &lt;column name="lineId"/&gt;
    &lt;column name="orderId"/&gt;
    &lt;column name="customerId"/&gt;
&lt;/many-to-one&gt;</pre><p>
        &#65288;&#27880;&#24847;&#22312;&#21508;&#20010;&#22320;&#26041;<tt class="literal">&lt;column&gt;</tt>&#26631;&#31614;&#37117;&#26159;<tt class="literal">column</tt>&#23646;&#24615;&#30340;&#26367;&#20195;&#20889;&#27861;&#12290;&#65289;
    </p><p>
        &#25351;&#21521;<tt class="literal">OrderLine</tt>&#30340;<tt class="literal">&#22810;&#23545;&#22810;</tt>&#20851;&#32852;&#20063;&#20351;&#29992;&#32852;&#21512;&#22806;&#38190;:
    </p><pre class="programlisting">&lt;set name="undeliveredOrderLines"&gt;
    &lt;key column name="warehouseId"/&gt;
    &lt;many-to-many class="OrderLine"&gt;
        &lt;column name="lineId"/&gt;
        &lt;column name="orderId"/&gt;
        &lt;column name="customerId"/&gt;
    &lt;/many-to-many&gt;
&lt;/set&gt;</pre><p>
        &#22312;<tt class="literal">Order</tt>&#20013;,<tt class="literal">OrderLine</tt>&#30340;&#38598;&#21512;&#21017;&#26159;&#36825;&#26679;:
    </p><pre class="programlisting">&lt;set name="orderLines" inverse="true"&gt;
    &lt;key&gt;
        &lt;column name="orderId"/&gt;
        &lt;column name="customerId"/&gt;
    &lt;/key&gt;
    &lt;one-to-many class="OrderLine"/&gt;
&lt;/set&gt;</pre><p>
        (&#19982;&#36890;&#24120;&#19968;&#26679;,<tt class="literal">&lt;one-to-many&gt;</tt>&#20803;&#32032;&#19981;&#22768;&#26126;&#20219;&#20309;&#21015;.)
    </p><p>
        &#20551;&#33509;<tt class="literal">OrderLine</tt>&#26412;&#36523;&#25317;&#26377;&#19968;&#20010;&#38598;&#21512;,&#23427;&#20063;&#20855;&#26377;&#32452;&#21512;&#22806;&#38190;&#12290;
    </p><pre class="programlisting">&lt;class name="OrderLine"&gt;
    ....
    ....
    &lt;list name="deliveryAttempts"&gt;
        &lt;key&gt;   &lt;!-- a collection inherits the composite key type --&gt;
            &lt;column name="lineId"/&gt;
            &lt;column name="orderId"/&gt;
            &lt;column name="customerId"/&gt;
        &lt;/key&gt;
        &lt;list-index column="attemptId" base="1"/&gt;
        &lt;composite-element class="DeliveryAttempt"&gt;
            ...
        &lt;/composite-element&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="components-dynamic"></a>8.5.&nbsp;&#21160;&#24577;&#32452;&#20214; &#65288;Dynamic components&#65289;</h2></div></div><div></div></div><p>
        &#20320;&#29978;&#33267;&#21487;&#20197;&#26144;&#23556;<tt class="literal">Map</tt>&#31867;&#22411;&#30340;&#23646;&#24615;&#65306;
    </p><pre class="programlisting">&lt;dynamic-component name="userAttributes"&gt;
    &lt;property name="foo" column="FOO" type="string"/&gt;
    &lt;property name="bar" column="BAR" type="integer"/&gt;
    &lt;many-to-one name="baz" class="Baz" column="BAZ_ID"/&gt;
&lt;/dynamic-component&gt;</pre><p>
        &#20174;<tt class="literal">&lt;dynamic-component&gt;</tt>&#26144;&#23556;&#30340;&#35821;&#20041;&#19978;&#26469;&#35762;&#65292;&#23427;&#21644;<tt class="literal">&lt;component&gt;</tt>&#26159;&#30456;&#21516;&#30340;&#12290;
        &#36825;&#31181;&#26144;&#23556;&#31867;&#22411;&#30340;&#20248;&#28857;&#22312;&#20110;&#36890;&#36807;&#20462;&#25913;&#26144;&#23556;&#25991;&#20214;&#65292;&#23601;&#21487;&#20197;&#20855;&#26377;&#22312;&#37096;&#32626;&#26102;&#26816;&#27979;&#30495;&#23454;&#23646;&#24615;&#30340;&#33021;&#21147;&#12290;&#21033;&#29992;&#19968;&#20010;DOM&#35299;&#26512;&#22120;&#65292;&#20063;&#21487;&#20197;&#22312;&#31243;&#24207;&#36816;&#34892;&#26102;&#25805;&#20316;&#26144;&#23556;&#25991;&#20214;&#12290;
        &#26356;&#22909;&#30340;&#26159;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;<tt class="literal">Configuration</tt>&#23545;&#35937;&#26469;&#35775;&#38382;&#65288;&#25110;&#32773;&#20462;&#25913;&#65289;Hibernate&#30340;&#36816;&#34892;&#26102;&#20803;&#27169;&#22411;&#12290;
     </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="inheritance"></a>&#31532;&nbsp;9&nbsp;&#31456;&nbsp;&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="inheritance-strategies"></a>9.1.&nbsp; &#19977;&#31181;&#31574;&#30053;</h2></div></div><div></div></div><p>
               	Hibernate&#25903;&#25345;&#19977;&#31181;&#22522;&#26412;&#30340;&#32487;&#25215;&#26144;&#23556;&#31574;&#30053;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                &#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;(table per class hierarchy)
            </p></li><li><p>
                &#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(table per subclass)
            </p></li><li><p>
                &#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(table per concrete class)
            </p></li></ul></div><p>
	            &#27492;&#22806;&#65292;Hibernate&#36824;&#25903;&#25345;&#31532;&#22235;&#31181;&#31245;&#26377;&#19981;&#21516;&#30340;&#22810;&#24577;&#26144;&#23556;&#31574;&#30053;&#65306;
	        </p><div class="itemizedlist"><ul type="disc"><li><p>
                &#38544;&#24335;&#22810;&#24577;(implicit polymorphism)
            </p></li></ul></div><p>
									&#23545;&#20110;&#21516;&#19968;&#20010;&#32487;&#25215;&#23618;&#27425;&#20869;&#30340;&#19981;&#21516;&#20998;&#25903;&#65292;&#21487;&#20197;&#37319;&#29992;&#19981;&#21516;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;&#28982;&#21518;&#29992;&#38544;&#24335;&#22810;
									&#24577;&#26469;&#23436;&#25104;&#36328;&#36234;&#25972;&#20010;&#23618;&#27425;&#30340;&#22810;&#24577;&#12290;&#20294;&#26159;&#22312;&#21516;&#19968;&#20010;<tt class="literal">&lt;class&gt;</tt>&#26681;&#20803;&#32032;
									&#19979;&#65292;Hibernate&#19981;&#25903;&#25345;&#28151;&#21512;&#20102;&#20803;&#32032;<tt class="literal">&lt;subclass&gt;</tt>&#12289;
									<tt class="literal">&lt;joined-subclass&gt;</tt>&#21644;<tt class="literal">&lt;union-subclass&gt;</tt>
									&#30340;&#26144;&#23556;&#12290;&#22312;&#21516;&#19968;&#20010;<tt class="literal">&lt;class&gt;</tt>&#20803;&#32032;&#19979;&#65292;&#21487;&#20197;&#28151;&#21512;&#20351;&#29992;
									&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;&#65288;table per hierarchy&#65289; &#21644;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#65288;table per subclass&#65289;
									&#36825;&#20004;&#31181;&#26144;&#23556;&#31574;&#30053;&#65292;&#36825;&#26159;&#36890;&#36807;&#32467;&#21512;&#20803;&#32032;<tt class="literal">&lt;subclass&gt;</tt>&#21644;
									<tt class="literal">&lt;join&gt;</tt>&#26469;&#23454;&#29616;&#30340;&#65288;&#35265;&#21518;&#65289;&#12290;
									
            </p><p>
			&#22312;&#22810;&#20010;&#26144;&#23556;&#25991;&#20214;&#20013;&#65292;&#21487;&#20197;&#30452;&#25509;&#22312;<tt class="literal">hibernate-mapping</tt>&#26681;&#19979;&#23450;&#20041;<tt class="literal">subclass</tt>&#65292;<tt class="literal">union-subclass</tt>&#21644;<tt class="literal">joined-subclass</tt>&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#20320;&#21487;&#20197;&#20165;&#21152;&#20837;&#19968;&#20010;&#26032;&#30340;&#26144;&#23556;&#25991;&#20214;&#26469;&#25193;&#23637;&#31867;&#23618;&#27425;&#12290;&#20320;&#24517;&#39035;&#22312;subclass&#30340;&#26144;&#23556;&#20013;&#25351;&#26126;<tt class="literal">extends</tt>&#23646;&#24615;&#65292;&#32473;&#20986;&#19968;&#20010;&#20043;&#21069;&#23450;&#20041;&#30340;&#36229;&#31867;&#30340;&#21517;&#23383;&#12290;&#27880;&#24847;&#65292;&#22312;&#20197;&#21069;&#65292;&#36825;&#19968;&#21151;&#33021;&#23545;&#26144;&#23556;&#25991;&#20214;&#30340;&#39034;&#24207;&#26377;&#20005;&#26684;&#30340;&#35201;&#27714;&#65292;&#20174;Hibernate 3&#24320;&#22987;&#65292;&#20351;&#29992;extends&#20851;&#38190;&#23383;&#30340;&#26102;&#20399;&#65292;&#23545;&#26144;&#23556;&#25991;&#20214;&#30340;&#39034;&#24207;&#19981;&#20877;&#26377;&#35201;&#27714;&#65307;&#20294;&#22312;&#27599;&#20010;&#26144;&#23556;&#25991;&#20214;&#37324;&#65292;&#36229;&#31867;&#24517;&#39035;&#22312;&#23376;&#31867;&#20043;&#21069;&#23450;&#20041;&#12290;
		</p><pre class="programlisting">
 &lt;hibernate-mapping&gt;
     &lt;subclass name="DomesticCat" extends="Cat" discriminator-value="D"&gt;
          &lt;property name="name" type="string"/&gt;
     &lt;/subclass&gt;
 &lt;/hibernate-mapping&gt;</pre><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tableperclass"></a>9.1.1.&nbsp;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;(Table per class hierarchy)</h3></div></div><div></div></div><p>
                &#20551;&#35774;&#25105;&#20204;&#26377;&#25509;&#21475;<tt class="literal">Payment</tt>&#21644;&#23427;&#30340;&#20960;&#20010;&#23454;&#29616;&#31867;&#65306;
                <tt class="literal">CreditCardPayment</tt>, <tt class="literal">CashPayment</tt>, 
                &#21644;<tt class="literal">ChequePayment</tt>&#12290;&#21017;&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;(Table per 
                class hierarchy)&#30340;&#26144;&#23556;&#20195;&#30721;&#22914;&#19979;&#25152;&#31034;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        ...
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
                &#37319;&#29992;&#36825;&#31181;&#31574;&#30053;&#21482;&#38656;&#35201;&#19968;&#24352;&#34920;&#21363;&#21487;&#12290;&#23427;&#26377;&#19968;&#20010;&#24456;&#22823;&#30340;&#38480;&#21046;&#65306;&#35201;&#27714;&#37027;&#20123;&#30001;&#23376;&#31867;&#23450;&#20041;&#30340;&#23383;&#27573;&#65292;
                &#22914;<tt class="literal">CCTYPE</tt>&#65292;&#19981;&#33021;&#26377;<tt class="literal">&#38750;&#31354;(NOT NULL)</tt>&#32422;&#26463;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tablepersubclass"></a>9.1.2.&nbsp;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(Table per subclass)</h3></div></div><div></div></div><p>
                &#23545;&#20110;&#19978;&#20363;&#20013;&#30340;&#20960;&#20010;&#31867;&#32780;&#35328;&#65292;&#37319;&#29992;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;&#20195;&#30721;&#22914;&#19979;&#25152;&#31034;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;joined-subclass name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        ...
    &lt;/joined-subclass&gt;
&lt;/class&gt;</pre><p>
                &#38656;&#35201;&#22235;&#24352;&#34920;&#12290;&#19977;&#20010;&#23376;&#31867;&#34920;&#36890;&#36807;&#20027;&#38190;&#20851;&#32852;&#21040;&#36229;&#31867;&#34920;(&#22240;&#32780;&#20851;&#31995;&#27169;&#22411;&#23454;&#38469;&#19978;&#26159;&#19968;&#23545;&#19968;&#20851;&#32852;)&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tablepersubclass-discriminator"></a>9.1.3.&nbsp;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(Table per subclass)&#65292;&#20351;&#29992;&#36776;&#21035;&#26631;&#24535;(Discriminator)</h3></div></div><div></div></div><p>
                &#27880;&#24847;&#65292;&#23545;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;Hibernate&#30340;&#23454;&#29616;&#19981;&#38656;&#35201;&#36776;&#21035;&#23383;&#27573;&#65292;&#32780;&#20854;&#20182;
                &#30340;&#23545;&#35937;/&#20851;&#31995;&#26144;&#23556;&#24037;&#20855;&#20351;&#29992;&#20102;&#19968;&#31181;&#19981;&#21516;&#20110;Hibernate&#30340;&#23454;&#29616;&#26041;&#27861;&#65292;&#35813;&#26041;&#27861;&#35201;&#27714;&#22312;&#36229;&#31867;
                &#34920;&#20013;&#26377;&#19968;&#20010;&#31867;&#22411;&#36776;&#21035;&#23383;&#27573;(type discriminator column)&#12290;Hibernate&#37319;&#29992;&#30340;&#26041;&#27861;&#26356;
                &#38590;&#23454;&#29616;&#65292;&#20294;&#20174;&#20851;&#31995;&#65288;&#25968;&#25454;&#24211;&#65289;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#25353;&#29702;&#35828;&#23427;&#26356;&#27491;&#30830;&#12290;&#33509;&#20320;&#24895;&#24847;&#20351;&#29992;&#24102;&#26377;&#36776;&#21035;&#23383;
                &#27573;&#30340;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#31574;&#30053;&#65292;&#20320;&#21487;&#20197;&#32467;&#21512;&#20351;&#29992;<tt class="literal">&lt;subclass&gt;</tt>
                &#19982;<tt class="literal">&lt;join&gt;</tt>&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;join table="CREDIT_PAYMENT"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            &lt;property name="creditCardType" column="CCTYPE"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        &lt;join table="CASH_PAYMENT"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        &lt;join table="CHEQUE_PAYMENT" fetch="select"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
                &#21487;&#36873;&#30340;&#22768;&#26126;<tt class="literal">fetch="select"</tt>&#65292;&#26159;&#29992;&#26469;&#21578;&#35785;Hibernate&#65292;&#22312;&#26597;&#35810;&#36229;&#31867;&#26102;&#65292;
                &#19981;&#35201;&#20351;&#29992;&#22806;&#37096;&#36830;&#25509;(outer join)&#26469;&#25235;&#21462;&#23376;&#31867;<tt class="literal">ChequePayment</tt>&#30340;&#25968;&#25454;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-mixing-tableperclass-tablepersubclass"></a>9.1.4.&nbsp;&#28151;&#21512;&#20351;&#29992;&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;&#21644;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;</h3></div></div><div></div></div><p>
                &#20320;&#29978;&#33267;&#21487;&#20197;&#37319;&#21462;&#22914;&#19979;&#26041;&#27861;&#28151;&#21644;&#20351;&#29992;&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;&#21644;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#36825;&#20004;&#31181;&#31574;&#30053;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;join table="CREDIT_PAYMENT"&gt;
            &lt;property name="creditCardType" column="CCTYPE"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        ...
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
                &#23545;&#19978;&#36848;&#20219;&#20309;&#19968;&#31181;&#26144;&#23556;&#31574;&#30053;&#32780;&#35328;&#65292;&#25351;&#21521;&#26681;&#31867;<tt class="literal">Payment</tt>&#30340;
                &#20851;&#32852;&#26159;&#20351;&#29992;<tt class="literal">&lt;many-to-one&gt;</tt>&#36827;&#34892;&#26144;&#23556;&#30340;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="payment" column="PAYMENT_ID" class="Payment"/&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tableperconcrete"></a>9.1.5.&nbsp;&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(Table per concrete class)</h3></div></div><div></div></div><p>
                &#23545;&#20110;&#8220;&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;&#21487;&#20197;&#37319;&#29992;&#20004;&#31181;&#26041;&#27861;&#12290;&#31532;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992;
                <tt class="literal">&lt;union-subclass&gt;</tt>&#12290;
            </p><pre class="programlisting">&lt;class name="Payment"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="sequence"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;union-subclass name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/union-subclass&gt;
    &lt;union-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        ...
    &lt;/union-subclass&gt;
    &lt;union-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        ...
    &lt;/union-subclass&gt;
&lt;/class&gt;</pre><p>
                &#36825;&#37324;&#28041;&#21450;&#19977;&#24352;&#19982;&#23376;&#31867;&#30456;&#20851;&#30340;&#34920;&#12290;&#27599;&#24352;&#34920;&#20026;&#23545;&#24212;&#31867;&#30340;&#25152;&#26377;&#23646;&#24615;&#65288;&#21253;&#25324;&#20174;&#36229;&#31867;&#32487;&#25215;&#30340;&#23646;&#24615;&#65289;&#23450;&#20041;&#30456;&#24212;&#23383;&#27573;&#12290;
            </p><p>
                &#36825;&#31181;&#26041;&#24335;&#30340;&#23616;&#38480;&#22312;&#20110;&#65292;&#22914;&#26524;&#19968;&#20010;&#23646;&#24615;&#22312;&#36229;&#31867;&#20013;&#20570;&#20102;&#26144;&#23556;&#65292;&#20854;&#23383;&#27573;&#21517;&#24517;&#39035;&#19982;&#25152;&#26377;&#23376;&#31867;
                &#34920;&#20013;&#23450;&#20041;&#30340;&#30456;&#21516;&#12290;(&#25105;&#20204;&#21487;&#33021;&#20250;&#22312;Hibernate&#30340;&#21518;&#32493;&#21457;&#24067;&#29256;&#26412;&#20013;&#25918;&#23485;&#27492;&#38480;&#21046;&#12290;) 
                &#19981;&#20801;&#35768;&#22312;&#32852;&#21512;&#23376;&#31867;(union subclass)&#30340;&#32487;&#25215;&#23618;&#27425;&#20013;&#20351;&#29992;&#26631;&#35782;&#29983;&#25104;&#22120;&#31574;&#30053;(identity generator strategy), 
                &#23454;&#38469;&#19978;, &#20027;&#38190;&#30340;&#31181;&#23376;(primary key seed)&#19981;&#24471;&#19981;&#20026;&#21516;&#19968;&#32487;&#25215;&#23618;&#27425;&#20013;&#30340;&#20840;&#37096;&#34987;&#32852;&#21512;&#23376;&#31867;&#25152;&#20849;&#29992;.
            </p><p>
            &#20551;&#33509;&#36229;&#31867;&#26159;&#25277;&#35937;&#31867;&#65292;&#35831;&#20351;&#29992;<tt class="literal">abstract="true"</tt>&#12290;&#24403;&#28982;&#65292;&#20551;&#33509;&#23427;&#19981;&#26159;&#25277;&#35937;&#30340;&#65292;&#38656;&#35201;&#19968;&#20010;&#39069;&#22806;&#30340;&#34920;&#65288;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#40664;&#35748;&#26159;<tt class="literal">PAYMENT</tt>&#65289;&#65292;&#26469;&#20445;&#23384;&#36229;&#31867;&#30340;&#23454;&#20363;&#12290;
        </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tableperconcreate-polymorphism"></a>9.1.6.&nbsp;Table per concrete class, using implicit polymorphism</h3></div><div><h3 class="title"><a name="inheritance-tableperconcreate-polymorphism"></a>9.1.6.&nbsp;Table per concrete class, using implicit polymorphism</h3></div></div><div></div></div><p>
                &#21478;&#19968;&#31181;&#21487;&#20379;&#36873;&#25321;&#30340;&#26041;&#27861;&#26159;&#37319;&#29992;&#38544;&#24335;&#22810;&#24577;&#65306;
            </p><pre class="programlisting">&lt;class name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CREDIT_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CREDIT_AMOUNT"/&gt;
    ...
&lt;/class&gt;

&lt;class name="CashPayment" table="CASH_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CASH_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CASH_AMOUNT"/&gt;
    ...
&lt;/class&gt;

&lt;class name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CHEQUE_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CHEQUE_AMOUNT"/&gt;
    ...
&lt;/class&gt;</pre><p>
                &#27880;&#24847;&#65292;&#25105;&#20204;&#27809;&#26377;&#22312;&#20219;&#20309;&#22320;&#26041;&#26126;&#30830;&#30340;&#25552;&#21450;&#25509;&#21475;<tt class="literal">Payment</tt>&#12290;&#21516;&#26102;&#27880;&#24847;
                <tt class="literal">Payment</tt>&#30340;&#23646;&#24615;&#22312;&#27599;&#20010;&#23376;&#31867;&#20013;&#37117;&#36827;&#34892;&#20102;&#26144;&#23556;&#12290;&#22914;&#26524;&#20320;&#24819;&#36991;&#20813;&#37325;&#22797;&#65292;
                &#21487;&#20197;&#32771;&#34385;&#20351;&#29992;XML&#23454;&#20307;(&#20363;&#22914;&#65306;&#20301;&#20110;<tt class="literal">DOCTYPE</tt>&#22768;&#26126;&#20869;&#30340;
                <tt class="literal">[ &lt;!ENTITY allproperties SYSTEM "allproperties.xml"&gt; ]</tt>
                &#21644;&#26144;&#23556;&#20013;&#30340;<tt class="literal">&amp;allproperties;</tt>)&#12290;
            </p><p>
                &#36825;&#31181;&#26041;&#27861;&#30340;&#32570;&#38519;&#22312;&#20110;&#65292;&#22312;Hibernate&#25191;&#34892;&#22810;&#24577;&#26597;&#35810;&#26102;(polymorphic queries)&#26080;&#27861;&#29983;&#25104;&#24102;
                <tt class="literal">UNION</tt>&#30340;SQL&#35821;&#21477;&#12290;
            </p><p>
                &#23545;&#20110;&#36825;&#31181;&#26144;&#23556;&#31574;&#30053;&#32780;&#35328;&#65292;&#36890;&#24120;&#29992;<tt class="literal">&lt;any&gt;</tt>&#26469;&#23454;&#29616;&#21040;
                <tt class="literal">Payment</tt>&#30340;&#22810;&#24577;&#20851;&#32852;&#26144;&#23556;&#12290;
            </p><pre class="programlisting">&lt;any name="payment" meta-type="string" id-type="long"&gt;
    &lt;meta-value value="CREDIT" class="CreditCardPayment"/&gt;
    &lt;meta-value value="CASH" class="CashPayment"/&gt;
    &lt;meta-value value="CHEQUE" class="ChequePayment"/&gt;
    &lt;column name="PAYMENT_CLASS"/&gt;
    &lt;column name="PAYMENT_ID"/&gt;
&lt;/any&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritace-mixingpolymorphism"></a>9.1.7.&nbsp;&#38544;&#24335;&#22810;&#24577;&#21644;&#20854;&#20182;&#32487;&#25215;&#26144;&#23556;&#28151;&#21512;&#20351;&#29992;</h3></div></div><div></div></div><p>
                &#23545;&#36825;&#19968;&#26144;&#23556;&#36824;&#26377;&#19968;&#28857;&#38656;&#35201;&#27880;&#24847;&#12290;&#22240;&#20026;&#27599;&#20010;&#23376;&#31867;&#37117;&#22312;&#21508;&#33258;&#29420;&#31435;&#30340;&#20803;&#32032;<tt class="literal">&lt;class&gt;</tt>
                &#20013;&#26144;&#23556;(&#24182;&#19988;<tt class="literal">Payment</tt>&#21482;&#26159;&#19968;&#20010;&#25509;&#21475;)&#65292;&#27599;&#20010;&#23376;&#31867;&#21487;&#20197;&#24456;&#23481;&#26131;&#30340;&#25104;&#20026;&#21478;&#19968;
                &#20010;&#32487;&#25215;&#20307;&#31995;&#20013;&#30340;&#19968;&#37096;&#20998;&#65281;(&#20320;&#20173;&#28982;&#21487;&#20197;&#23545;&#25509;&#21475;<tt class="literal">Payment</tt>&#20351;&#29992;&#22810;&#24577;&#26597;&#35810;&#12290;)
            </p><pre class="programlisting">&lt;class name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CREDIT_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="CREDIT_CARD" type="string"/&gt;
    &lt;property name="amount" column="CREDIT_AMOUNT"/&gt;
    ...
    &lt;subclass name="MasterCardPayment" discriminator-value="MDC"/&gt;
    &lt;subclass name="VisaPayment" discriminator-value="VISA"/&gt;
&lt;/class&gt;

&lt;class name="NonelectronicTransaction" table="NONELECTRONIC_TXN"&gt;
    &lt;id name="id" type="long" column="TXN_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    ...
    &lt;joined-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="amount" column="CASH_AMOUNT"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="amount" column="CHEQUE_AMOUNT"/&gt;
        ...
    &lt;/joined-subclass&gt;
&lt;/class&gt;</pre><p>
                &#25105;&#20204;&#36824;&#26159;&#27809;&#26377;&#26126;&#30830;&#30340;&#25552;&#21040;<tt class="literal">Payment</tt>&#12290;
                &#22914;&#26524;&#25105;&#20204;&#38024;&#23545;&#25509;&#21475;<tt class="literal">Payment</tt>&#25191;&#34892;&#26597;&#35810; 
                &#8212;&#8212;&#22914;<tt class="literal">from Payment</tt>&#8212;&#8212; Hibernate
                &#33258;&#21160;&#36820;&#22238;<tt class="literal">CreditCardPayment</tt>(&#21644;&#23427;&#30340;&#23376;&#31867;&#65292;&#22240;&#20026;
                &#23427;&#20204;&#20063;&#23454;&#29616;&#20102;&#25509;&#21475;<tt class="literal">Payment</tt>)&#12289;
                <tt class="literal">CashPayment</tt>&#21644;<tt class="literal">Chequepayment</tt>&#30340;&#23454;&#20363;&#65292;
                &#20294;&#19981;&#36820;&#22238;<tt class="literal">NonelectronicTransaction</tt>&#30340;&#23454;&#20363;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="inheritance-limitations"></a>9.2.&nbsp;&#38480;&#21046;</h2></div></div><div></div></div><p>
                &#23545;&#8220;&#27599;&#20010;&#20855;&#20307;&#31867;&#26144;&#23556;&#19968;&#24352;&#34920;&#8221;&#65288;table per concrete-class&#65289;&#30340;&#26144;&#23556;&#31574;&#30053;&#32780;&#35328;&#65292;&#38544;&#24335;&#22810;&#24577;&#30340;
                &#26041;&#24335;&#26377;&#19968;&#23450;&#30340;&#38480;&#21046;&#12290;&#32780;<tt class="literal">&lt;union-subclass&gt;</tt>&#26144;&#23556;&#30340;&#38480;&#21046;&#21017;&#27809;&#26377;&#37027;
                &#20040;&#20005;&#26684;&#12290;
            </p><p>
                &#19979;&#38754;&#34920;&#26684;&#20013;&#21015;&#20986;&#20102;&#22312;Hibernte&#20013;&#8220;&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#31574;&#30053;&#21644;&#38544;&#24335;&#22810;&#24577;&#30340;&#38480;&#21046;&#12290;            
            </p><div class="table"><a name="d0e9064"></a><p class="title"><b>&#34920;&nbsp;9.1.&nbsp;&#32487;&#25215;&#26144;&#23556;&#29305;&#24615;(Features of inheritance mappings)			</b></p><table summary="&#32487;&#25215;&#26144;&#23556;&#29305;&#24615;(Features of inheritance mappings)			" border="1"><colgroup><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">&#32487;&#25215;&#31574;&#30053;(Inheritance strategy)</th><th align="left">&#22810;&#24577;&#22810;&#23545;&#19968;</th><th align="left">&#22810;&#24577;&#19968;&#23545;&#19968;</th><th align="left">&#22810;&#24577;&#19968;&#23545;&#22810;</th><th align="left">&#22810;&#24577;&#22810;&#23545;&#22810;</th><th align="left">&#22810;&#24577; <tt class="literal">load()/get()</tt></th><th align="left">&#22810;&#24577;&#26597;&#35810;</th><th align="left">&#22810;&#24577;&#36830;&#25509;(join)</th><th align="left">&#22806;&#36830;&#25509;(Outer join)&#35835;&#21462;</th></tr></thead><tbody><tr><td align="left">&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;</td><td align="left"><tt class="literal">&lt;many-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-many&gt;</tt></td><td align="left"><tt class="literal">&lt;many-to-many&gt;</tt></td><td align="left"><tt class="literal">s.get(Payment.class, id)</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><tt class="literal">from Order o join o.payment p</tt></td><td align="left"><span class="emphasis"><em>&#25903;&#25345;</em></span></td></tr><tr><td align="left">&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;</td><td align="left"><tt class="literal">&lt;many-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-many&gt;</tt></td><td align="left"><tt class="literal">&lt;many-to-many&gt;</tt></td><td align="left"><tt class="literal">s.get(Payment.class, id)</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><tt class="literal">from Order o join o.payment p</tt></td><td align="left"><span class="emphasis"><em>&#25903;&#25345;</em></span></td></tr><tr><td align="left">&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(union-subclass)</td><td align="left"><tt class="literal">&lt;many-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-many&gt;</tt> (&#20165;&#23545;&#20110;<tt class="literal">inverse="true"</tt>&#30340;&#24773;&#20917;)</td><td align="left"><tt class="literal">&lt;many-to-many&gt;</tt></td><td align="left"><tt class="literal">s.get(Payment.class, id)</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><tt class="literal">from Order o join o.payment p</tt></td><td align="left"><span class="emphasis"><em>&#25903;&#25345;</em></span></td></tr><tr><td align="left">&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(&#38544;&#24335;&#22810;&#24577;)</td><td align="left"><tt class="literal">&lt;any&gt;</tt></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td><td align="left"><tt class="literal">&lt;many-to-any&gt;</tt></td><td align="left"><tt class="literal">s.createCriteria(Payment.class).add( Restrictions.idEq(id) ).uniqueResult()</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td></tr></tbody></table></div></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="objectstate"></a>&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#19982;&#23545;&#35937;&#20849;&#20107;</h2></div></div><div></div></div><p>
	    Hibernate&#26159;&#23436;&#25972;&#30340;&#23545;&#35937;/&#20851;&#31995;&#26144;&#23556;&#35299;&#20915;&#26041;&#26696;&#65292;&#23427;&#25552;&#20379;&#20102;&#23545;&#35937;<span class="emphasis"><em>&#29366;&#24577;&#31649;&#29702;(state management)</em></span>&#30340;&#21151;&#33021;&#65292;&#20351;&#24320;&#21457;&#32773;&#19981;&#20877;&#38656;&#35201;&#29702;&#20250;&#24213;&#23618;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#32454;&#33410;&#12290;
		&#20063;&#23601;&#26159;&#35828;&#65292;&#30456;&#23545;&#20110;&#24120;&#35265;&#30340;JDBC/SQL&#25345;&#20037;&#23618;&#26041;&#26696;&#20013;&#38656;&#35201;<tt class="literal">&#31649;&#29702;SQL&#35821;&#21477;</tt>&#65292;Hibernate&#37319;&#29992;&#20102;&#26356;&#33258;&#28982;&#30340;&#38754;&#21521;&#23545;&#35937;&#30340;&#35270;&#35282;&#26469;&#25345;&#20037;&#21270;Java&#24212;&#29992;&#20013;&#30340;&#25968;&#25454;&#12290;
    </p><p>
		&#25442;&#21477;&#35805;&#35828;&#65292;&#20351;&#29992;Hibernate&#30340;&#24320;&#21457;&#32773;&#24212;&#35813;&#24635;&#26159;&#20851;&#27880;&#23545;&#35937;&#30340;<span class="emphasis"><em>&#29366;&#24577;(state)</em></span>&#65292;&#19981;&#24517;&#32771;&#34385;SQL&#35821;&#21477;&#30340;&#25191;&#34892;&#12290;
		&#36825;&#37096;&#20998;&#32454;&#33410;&#24050;&#32463;&#30001;Hibernate&#25484;&#31649;&#22949;&#24403;&#65292;&#21482;&#26377;&#24320;&#21457;&#32773;&#22312;&#36827;&#34892;&#31995;&#32479;&#24615;&#33021;&#35843;&#20248;&#30340;&#26102;&#20505;&#25165;&#38656;&#35201;&#36827;&#34892;&#20102;&#35299;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-overview"></a>10.1.&nbsp;Hibernate&#23545;&#35937;&#29366;&#24577;(object states)</h2></div></div><div></div></div><p>
            Hibernate&#23450;&#20041;&#24182;&#25903;&#25345;&#19979;&#21015;&#23545;&#35937;&#29366;&#24577;(state):
        </p><div class="itemizedlist"><ul type="disc"><li><p>
                    <span class="emphasis"><em>&#30636;&#26102;(Transient)</em></span> - &#30001;<tt class="literal">new</tt>&#25805;&#20316;&#31526;&#21019;&#24314;&#65292;&#19988;&#23578;&#26410;&#19982;Hibernate <tt class="literal">Session</tt>
					&#20851;&#32852;&#30340;&#23545;&#35937;&#34987;&#35748;&#23450;&#20026;&#30636;&#26102;(Transient)&#30340;&#12290;&#30636;&#26102;(Transient)&#23545;&#35937;&#19981;&#20250;&#34987;&#25345;&#20037;&#21270;&#21040;&#25968;&#25454;&#24211;&#20013;&#65292;&#20063;&#19981;&#20250;&#34987;&#36171;&#20104;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#12290;
					&#22914;&#26524;&#30636;&#26102;(Transient)&#23545;&#35937;&#22312;&#31243;&#24207;&#20013;&#27809;&#26377;&#34987;&#24341;&#29992;&#65292;&#23427;&#20250;&#34987;&#22403;&#22334;&#22238;&#25910;&#22120;(garbage collector)&#38144;&#27585;&#12290;
					&#20351;&#29992;Hibernate <tt class="literal">Session</tt>&#21487;&#20197;&#23558;&#20854;&#21464;&#20026;&#25345;&#20037;(Persistent)&#29366;&#24577;&#12290;(Hibernate&#20250;&#33258;&#21160;&#25191;&#34892;&#24517;&#35201;&#30340;SQL&#35821;&#21477;)
                </p></li><li><p>
                    <span class="emphasis"><em>&#25345;&#20037;(Persistent)</em></span> - &#25345;&#20037;(Persistent)&#30340;&#23454;&#20363;&#22312;&#25968;&#25454;&#24211;&#20013;&#26377;&#23545;&#24212;&#30340;&#35760;&#24405;&#65292;&#24182;&#25317;&#26377;&#19968;&#20010;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#12290;
					&#25345;&#20037;(Persistent)&#30340;&#23454;&#20363;&#21487;&#33021;&#26159;&#21018;&#34987;&#20445;&#23384;&#30340;&#65292;&#25110;&#21018;&#34987;&#21152;&#36733;&#30340;&#65292;&#26080;&#35770;&#21738;&#19968;&#31181;&#65292;&#25353;&#23450;&#20041;&#65292;&#23427;&#23384;&#22312;&#20110;&#30456;&#20851;&#32852;&#30340;<tt class="literal">Session</tt>&#20316;&#29992;&#33539;&#22260;&#20869;&#12290;
					Hibernate&#20250;&#26816;&#27979;&#21040;&#22788;&#20110;&#25345;&#20037;(Persistent)&#29366;&#24577;&#30340;&#23545;&#35937;&#30340;&#20219;&#20309;&#25913;&#21160;&#65292;&#22312;&#24403;&#21069;&#25805;&#20316;&#21333;&#20803;(unit of work)&#25191;&#34892;&#23436;&#27605;&#26102;&#23558;&#23545;&#35937;&#25968;&#25454;(state)&#19982;&#25968;&#25454;&#24211;&#21516;&#27493;(synchronize)&#12290;
					&#24320;&#21457;&#32773;&#19981;&#38656;&#35201;&#25163;&#21160;&#25191;&#34892;<tt class="literal">UPDATE</tt>&#12290;&#23558;&#23545;&#35937;&#20174;&#25345;&#20037;(Persistent)&#29366;&#24577;&#21464;&#25104;&#30636;&#26102;(Transient)&#29366;&#24577;&#21516;&#26679;&#20063;&#19981;&#38656;&#35201;&#25163;&#21160;&#25191;&#34892;<tt class="literal">DELETE</tt>&#35821;&#21477;&#12290;
                </p></li><li><p>
                    <span class="emphasis"><em>&#33073;&#31649;(Detached)</em></span> - &#19982;&#25345;&#20037;(Persistent)&#23545;&#35937;&#20851;&#32852;&#30340;<tt class="literal">Session</tt>&#34987;&#20851;&#38381;&#21518;&#65292;&#23545;&#35937;&#23601;&#21464;&#20026;&#33073;&#31649;(Detached)&#30340;&#12290;
					&#23545;&#33073;&#31649;(Detached)&#23545;&#35937;&#30340;&#24341;&#29992;&#20381;&#28982;&#26377;&#25928;&#65292;&#23545;&#35937;&#21487;&#32487;&#32493;&#34987;&#20462;&#25913;&#12290;&#33073;&#31649;(Detached)&#23545;&#35937;&#22914;&#26524;&#37325;&#26032;&#20851;&#32852;&#21040;&#26576;&#20010;&#26032;&#30340;<tt class="literal">Session</tt>&#19978;&#65292;
					&#20250;&#20877;&#27425;&#36716;&#21464;&#20026;&#25345;&#20037;(Persistent)&#30340;(&#22312;Detached&#20854;&#38388;&#30340;&#25913;&#21160;&#23558;&#34987;&#25345;&#20037;&#21270;&#21040;&#25968;&#25454;&#24211;)&#12290;
                	&#36825;&#20010;&#21151;&#33021;&#20351;&#24471;&#19968;&#31181;&#32534;&#31243;&#27169;&#22411;&#65292;&#21363;&#20013;&#38388;&#20250;&#32473;&#29992;&#25143;&#24605;&#32771;&#26102;&#38388;(user think-time)&#30340;&#38271;&#26102;&#38388;&#36816;&#34892;&#30340;&#25805;&#20316;&#21333;&#20803;(unit of work)&#30340;&#32534;&#31243;&#27169;&#22411;&#25104;&#20026;&#21487;&#33021;&#12290;
                	&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emphasis"><em>&#24212;&#29992;&#31243;&#24207;&#20107;&#21153;</em></span>&#65292;&#21363;&#20174;&#29992;&#25143;&#35266;&#28857;&#30475;&#26159;&#19968;&#20010;&#25805;&#20316;&#21333;&#20803;(unit of work)&#12290;
                </p></li></ul></div><p>
			&#25509;&#19979;&#26469;&#25105;&#20204;&#26469;&#32454;&#33268;&#30340;&#35752;&#35770;&#19979;&#29366;&#24577;(states)&#21450;&#29366;&#24577;&#38388;&#30340;&#36716;&#25442;(state transitions)&#65288;&#20197;&#21450;&#35302;&#21457;&#29366;&#24577;&#36716;&#25442;&#30340;Hibernate&#26041;&#27861;&#65289;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-makingpersistent"></a>10.2.&nbsp;&#20351;&#23545;&#35937;&#25345;&#20037;&#21270;</h2></div></div><div></div></div><p>
			Hibernate&#35748;&#20026;&#25345;&#20037;&#21270;&#31867;(persistent class)&#26032;&#23454;&#20363;&#21270;&#30340;&#23545;&#35937;&#26159;<span class="emphasis"><em>&#30636;&#26102;(Transient)</em></span>&#30340;&#12290;
			&#25105;&#20204;&#21487;&#36890;&#36807;&#23558;&#30636;&#26102;(Transient)&#23545;&#35937;&#19982;session&#20851;&#32852;&#32780;&#25226;&#23427;&#21464;&#20026;<span class="emphasis"><em>&#25345;&#20037;(Persistent)</em></span>&#30340;&#12290;
        </p><pre class="programlisting">DomesticCat fritz = new DomesticCat();
fritz.setColor(Color.GINGER);
fritz.setSex('M');
fritz.setName("Fritz");
Long generatedId = (Long) sess.save(fritz);</pre><p>
			&#22914;&#26524;<tt class="literal">Cat</tt>&#30340;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#26159;<tt class="literal">generated</tt>&#31867;&#22411;&#30340;&#65292;
			&#37027;&#20040;&#35813;&#26631;&#35782;(identifier)&#20250;&#33258;&#21160;&#22312;<tt class="literal">save()</tt>&#34987;&#35843;&#29992;&#26102;&#20135;&#29983;&#24182;&#20998;&#37197;&#32473;<tt class="literal">cat</tt>&#12290;
			&#22914;&#26524;<tt class="literal">Cat</tt>&#30340;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#26159;<tt class="literal">assigned</tt>&#31867;&#22411;&#30340;&#65292;&#25110;&#26159;&#19968;&#20010;&#22797;&#21512;&#20027;&#38190;(composite key)&#65292;
			&#37027;&#20040;&#35813;&#26631;&#35782;(identifier)&#24212;&#24403;&#22312;&#35843;&#29992;<tt class="literal">save()</tt>&#20043;&#21069;&#25163;&#21160;&#36171;&#20104;&#32473;<tt class="literal">cat</tt>&#12290;
			&#20320;&#20063;&#21487;&#20197;&#25353;&#29031;EJB3 early draft&#20013;&#23450;&#20041;&#30340;&#35821;&#20041;&#65292;&#20351;&#29992;<tt class="literal">persist()</tt>&#26367;&#20195;<tt class="literal">save()</tt>&#12290;
        </p><p>
            &#27492;&#22806;&#65292;&#20320;&#21487;&#20197;&#29992;&#19968;&#20010;&#37325;&#36733;&#29256;&#26412;&#30340;<tt class="literal">save()</tt>&#26041;&#27861;&#12290;
        </p><pre class="programlisting">DomesticCat pk = new DomesticCat();
pk.setColor(Color.TABBY);
pk.setSex('F');
pk.setName("PK");
pk.setKittens( new HashSet() );
pk.addKitten(fritz);
sess.save( pk, new Long(1234) );</pre><p>
			&#22914;&#26524;&#20320;&#25345;&#20037;&#21270;&#30340;&#23545;&#35937;&#26377;&#20851;&#32852;&#30340;&#23545;&#35937;(associated objects)&#65288;&#20363;&#22914;&#19978;&#20363;&#20013;&#30340;<tt class="literal">kittens</tt>&#38598;&#21512;&#65289;
  			&#37027;&#20040;&#23545;&#36825;&#20123;&#23545;&#35937;&#65288;&#35793;&#27880;&#65306;pk&#21644;kittens&#65289;&#36827;&#34892;&#25345;&#20037;&#21270;&#30340;&#39034;&#24207;&#26159;&#20219;&#24847;&#30340;&#65288;&#20063;&#23601;&#26159;&#35828;&#21487;&#20197;&#20808;&#23545;kittens&#36827;&#34892;&#25345;&#20037;&#21270;&#20063;&#21487;&#20197;&#20808;&#23545;pk&#36827;&#34892;&#25345;&#20037;&#21270;&#65289;&#65292;
  			&#38500;&#38750;&#20320;&#22312;&#22806;&#38190;&#21015;&#19978;&#26377;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#12290;
            Hibernate&#19981;&#20250;&#36829;&#21453;&#22806;&#38190;&#32422;&#26463;&#65292;&#20294;&#26159;&#22914;&#26524;&#20320;&#29992;&#38169;&#35823;&#30340;&#39034;&#24207;&#25345;&#20037;&#21270;&#23545;&#35937;&#65288;&#35793;&#27880;&#65306;&#22312;pk&#25345;&#20037;&#21270;&#20043;&#21069;&#25345;&#20037;&#21270;kitten&#65289;&#65292;&#37027;&#20040;&#21487;&#33021;&#20250;&#36829;&#21453;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#12290;
        </p><p>
			&#36890;&#24120;&#20320;&#19981;&#20250;&#20026;&#36825;&#20123;&#32454;&#33410;&#28902;&#24515;&#65292;&#22240;&#20026;&#20320;&#24456;&#21487;&#33021;&#20250;&#20351;&#29992;Hibernate&#30340;
			<span class="emphasis"><em>&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)</em></span>&#21151;&#33021;&#33258;&#21160;&#20445;&#23384;&#30456;&#20851;&#32852;&#37027;&#20123;&#23545;&#35937;&#12290;
			&#36825;&#26679;&#36830;&#36829;&#21453;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#30340;&#24773;&#20917;&#37117;&#19981;&#20250;&#20986;&#29616;&#20102; - Hibernate&#20250;&#31649;&#22909;&#25152;&#26377;&#30340;&#20107;&#24773;&#12290;
			&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)&#23558;&#22312;&#26412;&#31456;&#31245;&#21518;&#35752;&#35770;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-loading"></a>10.3.&nbsp;&#35013;&#36733;&#23545;&#35937;</h2></div></div><div></div></div><p>
        	&#22914;&#26524;&#20320;&#30693;&#36947;&#26576;&#20010;&#23454;&#20363;&#30340;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#65292;&#20320;&#23601;&#21487;&#20197;&#20351;&#29992;<tt class="literal">Session</tt>&#30340;<tt class="literal">load()</tt>&#26041;&#27861;
        	&#26469;&#33719;&#21462;&#23427;&#12290; <tt class="literal">load()</tt>&#30340;&#21478;&#19968;&#20010;&#21442;&#25968;&#26159;&#25351;&#23450;&#31867;&#30340;.class&#23545;&#35937;&#12290;
        	&#26412;&#26041;&#27861;&#20250;&#21019;&#24314;&#25351;&#23450;&#31867;&#30340;&#25345;&#20037;&#21270;&#23454;&#20363;&#65292;&#24182;&#20174;&#25968;&#25454;&#24211;&#21152;&#36733;&#20854;&#25968;&#25454;(state)&#12290;
        </p><pre class="programlisting">Cat fritz = (Cat) sess.load(Cat.class, generatedId);</pre><pre class="programlisting">// you need to wrap primitive identifiers
long id = 1234;
DomesticCat pk = (DomesticCat) sess.load( DomesticCat.class, new Long(id) );</pre><p>
            &#27492;&#22806;, &#20320;&#21487;&#20197;&#25226;&#25968;&#25454;(state)&#21152;&#36733;&#21040;&#25351;&#23450;&#30340;&#23545;&#35937;&#23454;&#20363;&#19978;&#65288;&#35206;&#30422;&#25481;&#35813;&#23454;&#20363;&#21407;&#26469;&#30340;&#25968;&#25454;&#65289;&#12290;
        </p><pre class="programlisting">Cat cat = new DomesticCat();
// load pk's state into cat
sess.load( cat, new Long(pkId) );
Set kittens = cat.getKittens();</pre><p>
			&#35831;&#27880;&#24847;&#22914;&#26524;&#27809;&#26377;&#21305;&#37197;&#30340;&#25968;&#25454;&#24211;&#35760;&#24405;&#65292;<tt class="literal">load()</tt>&#26041;&#27861;&#21487;&#33021;&#25243;&#20986;&#26080;&#27861;&#24674;&#22797;&#30340;&#24322;&#24120;(unrecoverable exception)&#12290;
			&#22914;&#26524;&#31867;&#30340;&#26144;&#23556;&#20351;&#29992;&#20102;&#20195;&#29702;(proxy)&#65292;<tt class="literal">load()</tt>&#26041;&#27861;&#20250;&#36820;&#22238;&#19968;&#20010;&#26410;&#21021;&#22987;&#21270;&#30340;&#20195;&#29702;&#65292;&#30452;&#21040;&#20320;&#35843;&#29992;&#35813;&#20195;&#29702;&#30340;&#26576;&#26041;&#27861;&#26102;&#25165;&#20250;&#21435;&#35775;&#38382;&#25968;&#25454;&#24211;&#12290;
			&#33509;&#20320;&#24076;&#26395;&#22312;&#26576;&#23545;&#35937;&#20013;&#21019;&#24314;&#19968;&#20010;&#25351;&#21521;&#21478;&#19968;&#20010;&#23545;&#35937;&#30340;&#20851;&#32852;&#65292;&#21448;&#19981;&#24819;&#22312;&#20174;&#25968;&#25454;&#24211;&#20013;&#35013;&#36733;&#35813;&#23545;&#35937;&#26102;&#21516;&#26102;&#35013;&#36733;&#30456;&#20851;&#32852;&#30340;&#37027;&#20010;&#23545;&#35937;&#65292;&#37027;&#20040;&#36825;&#31181;&#25805;&#20316;&#26041;&#24335;&#23601;&#29992;&#24471;&#19978;&#30340;&#20102;&#12290;
			&#22914;&#26524;&#20026;&#30456;&#24212;&#31867;&#26144;&#23556;&#20851;&#31995;&#35774;&#32622;&#20102;<tt class="literal">batch-size</tt>&#65292;
			&#37027;&#20040;&#20351;&#29992;&#36825;&#31181;&#25805;&#20316;&#26041;&#24335;&#20801;&#35768;&#22810;&#20010;&#23545;&#35937;&#34987;&#19968;&#25209;&#35013;&#36733;&#65288;&#22240;&#20026;&#36820;&#22238;&#30340;&#26159;&#20195;&#29702;&#65292;&#26080;&#38656;&#20174;&#25968;&#25454;&#24211;&#20013;&#25235;&#21462;&#25152;&#26377;&#23545;&#35937;&#30340;&#25968;&#25454;&#65289;&#12290;
        </p><p>
       		&#22914;&#26524;&#20320;&#19981;&#30830;&#23450;&#26159;&#21542;&#26377;&#21305;&#37197;&#30340;&#34892;&#23384;&#22312;&#65292;&#24212;&#35813;&#20351;&#29992;<tt class="literal">get()</tt>&#26041;&#27861;&#65292;&#23427;&#20250;&#31435;&#21051;&#35775;&#38382;&#25968;&#25454;&#24211;&#65292;&#22914;&#26524;&#27809;&#26377;&#23545;&#24212;&#30340;&#35760;&#24405;&#65292;&#20250;&#36820;&#22238;null&#12290;
        </p><pre class="programlisting">Cat cat = (Cat) sess.get(Cat.class, id);
if (cat==null) {
    cat = new Cat();
    sess.save(cat, id);
}
return cat;</pre><p>
			&#20320;&#29978;&#33267;&#21487;&#20197;&#36873;&#29992;&#26576;&#20010;<tt class="literal">LockMode</tt>&#65292;&#29992;SQL&#30340;<tt class="literal">SELECT ... FOR UPDATE</tt>&#35013;&#36733;&#23545;&#35937;&#12290;
			&#35831;&#26597;&#38405;API&#25991;&#26723;&#20197;&#33719;&#21462;&#26356;&#22810;&#20449;&#24687;&#12290;
        </p><pre class="programlisting">Cat cat = (Cat) sess.get(Cat.class, id, LockMode.UPGRADE);</pre><p>
              &#27880;&#24847;&#65292;&#20219;&#20309;&#20851;&#32852;&#30340;&#23545;&#35937;&#25110;&#32773;&#21253;&#21547;&#30340;&#38598;&#21512;&#37117;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#34987;&#20197;<tt class="literal">FOR UPDATE</tt>&#26041;&#24335;&#36820;&#22238;&#65292;
 			&#38500;&#38750;&#20320;&#25351;&#23450;&#20102;<tt class="literal">lock</tt>&#25110;&#32773;<tt class="literal">all</tt>&#20316;&#20026;&#20851;&#32852;(association)&#30340;&#32423;&#32852;&#39118;&#26684;(cascade style)&#12290;
        </p><p>
			&#20219;&#20309;&#26102;&#20505;&#37117;&#21487;&#20197;&#20351;&#29992;<tt class="literal">refresh()</tt>&#26041;&#27861;&#24378;&#36843;&#35013;&#36733;&#23545;&#35937;&#21644;&#23427;&#30340;&#38598;&#21512;&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;&#25968;&#25454;&#24211;&#35302;&#21457;&#22120;&#21151;&#33021;&#26469;&#22788;&#29702;&#23545;&#35937;&#30340;&#26576;&#20123;&#23646;&#24615;&#65292;&#36825;&#20010;&#26041;&#27861;&#23601;&#24456;&#26377;&#29992;&#20102;&#12290;
        </p><pre class="programlisting">sess.save(cat);
sess.flush(); //force the SQL INSERT
sess.refresh(cat); //re-read the state (after the trigger executes)</pre><p>
			&#27492;&#22788;&#36890;&#24120;&#20250;&#20986;&#29616;&#19968;&#20010;&#37325;&#35201;&#38382;&#39064;: Hibernate&#20250;&#20174;&#25968;&#25454;&#24211;&#20013;&#35013;&#36733;&#22810;&#23569;&#19996;&#35199;&#65311;&#20250;&#25191;&#34892;&#22810;&#23569;&#26465;&#30456;&#24212;&#30340;SQL<tt class="literal">SELECT</tt>&#35821;&#21477;&#65311;
           	&#36825;&#21462;&#20915;&#20110;<span class="emphasis"><em>&#25235;&#21462;&#31574;&#30053;(fetching strategy)</em></span>&#65292;&#20250;&#22312;<a href="#performance-fetching" title="19.1.&nbsp;&#xA;			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)&#xA;		">&#31532;&nbsp;19.1&nbsp;&#33410; &#8220;
			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)
		&#8221;</a>&#20013;&#35299;&#37322;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-querying"></a>10.4.&nbsp;&#26597;&#35810;</h2></div></div><div></div></div><p>
			&#22914;&#26524;&#19981;&#30693;&#36947;&#25152;&#35201;&#23547;&#25214;&#30340;&#23545;&#35937;&#30340;&#25345;&#20037;&#21270;&#26631;&#35782;&#65292;&#37027;&#20040;&#20320;&#38656;&#35201;&#20351;&#29992;&#26597;&#35810;&#12290;Hibernate&#25903;&#25345;&#24378;&#22823;&#19988;&#26131;&#20110;&#20351;&#29992;&#30340;&#38754;&#21521;&#23545;&#35937;&#26597;&#35810;&#35821;&#35328;(HQL)&#12290;
			&#22914;&#26524;&#24076;&#26395;&#36890;&#36807;&#32534;&#31243;&#30340;&#26041;&#24335;&#21019;&#24314;&#26597;&#35810;&#65292;Hibernate&#25552;&#20379;&#20102;&#23436;&#21892;&#30340;&#25353;&#26465;&#20214;(Query By Criteria, QBC)&#20197;&#21450;&#25353;&#26679;&#20363;(Query By Example, QBE)&#36827;&#34892;&#26597;&#35810;&#30340;&#21151;&#33021;&#12290;
			&#20320;&#20063;&#21487;&#20197;&#29992;&#21407;&#29983;SQL(native SQL)&#25551;&#36848;&#26597;&#35810;&#65292;Hibernate&#39069;&#22806;&#25552;&#20379;&#20102;&#23558;&#32467;&#26524;&#38598;(result set)&#36716;&#21270;&#20026;&#23545;&#35937;&#30340;&#25903;&#25345;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="objectstate-querying-executing"></a>10.4.1.&nbsp;&#25191;&#34892;&#26597;&#35810;</h3></div></div><div></div></div><p>
                HQL&#21644;&#21407;&#29983;SQL(native SQL)&#26597;&#35810;&#35201;&#36890;&#36807;&#20026;<tt class="literal">org.hibernate.Query</tt>&#30340;&#23454;&#20363;&#26469;&#34920;&#36798;&#12290;
				&#36825;&#20010;&#25509;&#21475;&#25552;&#20379;&#20102;&#21442;&#25968;&#32465;&#23450;&#12289;&#32467;&#26524;&#38598;&#22788;&#29702;&#20197;&#21450;&#36816;&#34892;&#23454;&#38469;&#26597;&#35810;&#30340;&#26041;&#27861;&#12290;
				&#20320;&#24635;&#26159;&#21487;&#20197;&#36890;&#36807;&#24403;&#21069;<tt class="literal">Session</tt>&#33719;&#21462;&#19968;&#20010;<tt class="literal">Query</tt>&#23545;&#35937;&#65306;
            </p><pre class="programlisting">List cats = session.createQuery(
    "from Cat as cat where cat.birthdate &lt; ?")
    .setDate(0, date)
    .list();

List mothers = session.createQuery(
    "select mother from Cat as cat join cat.mother as mother where cat.name = ?")
    .setString(0, name)
    .list();

List kittens = session.createQuery(
    "from Cat as cat where cat.mother = ?")
    .setEntity(0, pk)
    .list();

Cat mother = (Cat) session.createQuery(
    "select cat.mother from Cat as cat where cat = ?")
    .setEntity(0, izi)
    .uniqueResult();]]

Query mothersWithKittens = (Cat) session.createQuery(
    "select mother from Cat as mother left join fetch mother.kittens");
Set uniqueMothers = new HashSet(mothersWithKittens.list());</pre><p>
            	&#19968;&#20010;&#26597;&#35810;&#36890;&#24120;&#22312;&#35843;&#29992;<tt class="literal">list()</tt>&#26102;&#34987;&#25191;&#34892;&#65292;&#25191;&#34892;&#32467;&#26524;&#20250;&#23436;&#20840;&#35013;&#36733;&#36827;&#20869;&#23384;&#20013;&#30340;&#19968;&#20010;&#38598;&#21512;(collection)&#12290;
            	&#26597;&#35810;&#36820;&#22238;&#30340;&#23545;&#35937;&#22788;&#20110;&#25345;&#20037;(persistent)&#29366;&#24577;&#12290;&#22914;&#26524;&#20320;&#30693;&#36947;&#30340;&#26597;&#35810;&#21482;&#20250;&#36820;&#22238;&#19968;&#20010;&#23545;&#35937;&#65292;&#21487;&#20351;&#29992;<tt class="literal">list()</tt>&#30340;&#24555;&#25463;&#26041;&#24335;<tt class="literal">uniqueResult()</tt>&#12290;
            	&#27880;&#24847;&#65292;&#20351;&#29992;&#38598;&#21512;&#39044;&#20808;&#25235;&#21462;&#30340;&#26597;&#35810;&#24448;&#24448;&#20250;&#36820;&#22238;&#22810;&#27425;&#26681;&#23545;&#35937;&#65288;&#20182;&#20204;&#30340;&#38598;&#21512;&#31867;&#37117;&#34987;&#21021;&#22987;&#21270;&#20102;&#65289;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#38598;&#21512;&#26469;&#36807;&#28388;&#36825;&#20123;&#37325;&#22797;&#23545;&#35937;&#12290;    	
            </p><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="objectstate-querying-executing-iterate"></a>10.4.1.1.&nbsp;&#36845;&#20195;&#24335;&#33719;&#21462;&#32467;&#26524;(Iterating results)</h4></div></div><div></div></div><p>
					&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">iterate()</tt>&#26041;&#27861;&#24471;&#21040;&#26356;&#22909;&#30340;&#24615;&#33021;&#12290;
					&#36825;&#36890;&#24120;&#26159;&#20320;&#39044;&#26399;&#36820;&#22238;&#30340;&#32467;&#26524;&#22312;session&#65292;&#25110;&#20108;&#32423;&#32531;&#23384;(second-level cache)&#20013;&#24050;&#32463;&#23384;&#22312;&#26102;&#30340;&#24773;&#20917;&#12290;
					&#22914;&#33509;&#19981;&#28982;&#65292;<tt class="literal">iterate()</tt>&#20250;&#27604;<tt class="literal">list()</tt>&#24930;&#65292;&#32780;&#19988;&#21487;&#33021;&#31616;&#21333;&#26597;&#35810;&#20063;&#38656;&#35201;&#36827;&#34892;&#22810;&#27425;&#25968;&#25454;&#24211;&#35775;&#38382;&#65306;
					<tt class="literal">iterate()</tt>&#20250;&#39318;&#20808;&#20351;&#29992;<span class="emphasis"><em>1</em></span>&#26465;&#35821;&#21477;&#24471;&#21040;&#25152;&#26377;&#23545;&#35937;&#30340;&#25345;&#20037;&#21270;&#26631;&#35782;(identifiers)&#65292;&#20877;&#26681;&#25454;&#25345;&#20037;&#21270;&#26631;&#35782;&#25191;&#34892;<span class="emphasis"><em>n</em></span>&#26465;&#38468;&#21152;&#30340;select&#35821;&#21477;&#23454;&#20363;&#21270;&#23454;&#38469;&#30340;&#23545;&#35937;&#12290;
                </p><pre class="programlisting">// fetch ids
Iterator iter = sess.createQuery("from eg.Qux q order by q.likeliness").iterate();
while ( iter.hasNext() ) {
    Qux qux = (Qux) iter.next();  // fetch the object
    // something we couldnt express in the query
    if ( qux.calculateComplicatedAlgorithm() ) {
        // delete the current instance
        iter.remove();
        // dont need to process the rest
        break;
    }
}</pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="objectstate-querying-executing-tuples"></a>10.4.1.2.&nbsp;&#36820;&#22238;&#20803;&#32452;(tuples)&#30340;&#26597;&#35810;</h4></div></div><div></div></div><p>
                &#65288;&#35793;&#27880;&#65306;&#20803;&#32452;(tuples)&#25351;&#19968;&#26465;&#32467;&#26524;&#34892;&#21253;&#21547;&#22810;&#20010;&#23545;&#35937;&#65289;
                    Hibernate&#26597;&#35810;&#26377;&#26102;&#36820;&#22238;&#20803;&#32452;(tuples)&#65292;&#27599;&#20010;&#20803;&#32452;(tuples)&#20197;&#25968;&#32452;&#30340;&#24418;&#24335;&#36820;&#22238;:
                </p><pre class="programlisting">Iterator kittensAndMothers = sess.createQuery(
            "select kitten, mother from Cat kitten join kitten.mother mother")
            .list()
            .iterator();

while ( kittensAndMothers.hasNext() ) {
    Object[] tuple = (Object[]) kittensAndMothers.next();
    Cat kitten  = tuple[0];
    Cat mother  = tuple[1];
    ....
}</pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="objectstate-querying-executing-scalar"></a>10.4.1.3.&nbsp;&#26631;&#37327;(Scalar)&#32467;&#26524;</h4></div></div><div></div></div><p>
					&#26597;&#35810;&#21487;&#22312;<tt class="literal">select</tt>&#20174;&#21477;&#20013;&#25351;&#23450;&#31867;&#30340;&#23646;&#24615;&#65292;&#29978;&#33267;&#21487;&#20197;&#35843;&#29992;SQL&#32479;&#35745;(aggregate)&#20989;&#25968;&#12290;
					&#23646;&#24615;&#25110;&#32479;&#35745;&#32467;&#26524;&#34987;&#35748;&#23450;&#20026;"&#26631;&#37327;(Scalar)"&#30340;&#32467;&#26524;&#65288;&#32780;&#19981;&#26159;&#25345;&#20037;(persistent state)&#30340;&#23454;&#20307;&#65289;&#12290;
                </p><pre class="programlisting">Iterator results = sess.createQuery(
        "select cat.color, min(cat.birthdate), count(cat) from Cat cat " +
        "group by cat.color")
        .list()
        .iterator();
        
while ( results.hasNext() ) {
    Object[] row = (Object[]) results.next();
    Color type = (Color) row[0];
    Date oldest = (Date) row[1];
    Integer count = (Integer) row[2];
    .....
}</pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="objectstate-querying-executing-parameters"></a>10.4.1.4.&nbsp;&#32465;&#23450;&#21442;&#25968;</h4></div></div><div></div></div><p>
                    &#25509;&#21475;<tt class="literal">Query</tt>&#25552;&#20379;&#20102;&#23545;&#21629;&#21517;&#21442;&#25968;(named parameters)&#12289;JDBC&#39118;&#26684;&#30340;<tt class="literal">&#38382;&#21495;(?)</tt>&#21442;&#25968;&#36827;&#34892;&#32465;&#23450;&#30340;&#26041;&#27861;&#12290;
					<span class="emphasis"><em>&#19981;&#21516;&#20110;JDBC&#65292;Hibernate&#23545;&#21442;&#25968;&#20174;0&#24320;&#22987;&#35745;&#25968;&#12290;</em></span>
                    &#21629;&#21517;&#21442;&#25968;(named parameters)&#22312;&#26597;&#35810;&#23383;&#31526;&#20018;&#20013;&#26159;&#24418;&#22914;<tt class="literal">:name</tt>&#30340;&#26631;&#35782;&#31526;&#12290;
                    &#21629;&#21517;&#21442;&#25968;(named parameters)&#30340;&#20248;&#28857;&#26159;:
                </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                            &#21629;&#21517;&#21442;&#25968;(named parameters)&#19982;&#20854;&#22312;&#26597;&#35810;&#20018;&#20013;&#20986;&#29616;&#30340;&#39034;&#24207;&#26080;&#20851;
                        </p></li><li><p>
                                &#23427;&#20204;&#21487;&#22312;&#21516;&#19968;&#26597;&#35810;&#20018;&#20013;&#22810;&#27425;&#20986;&#29616;
                        </p></li><li><p>
                                &#23427;&#20204;&#26412;&#36523;&#26159;&#33258;&#25105;&#35828;&#26126;&#30340;
                        </p></li></ul></div><pre class="programlisting">//named parameter (preferred)
Query q = sess.createQuery("from DomesticCat cat where cat.name = :name");
q.setString("name", "Fritz");
Iterator cats = q.iterate();</pre><pre class="programlisting">//positional parameter
Query q = sess.createQuery("from DomesticCat cat where cat.name = ?");
q.setString(0, "Izi");
Iterator cats = q.iterate();</pre><pre class="programlisting">//named parameter list
List names = new ArrayList();
names.add("Izi");
names.add("Fritz");
Query q = sess.createQuery("from DomesticCat cat where cat.name in (:namesList)");
q.setParameterList("namesList", names);
List cats = q.list();</pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="objectstate-querying-executing-pagination"></a>10.4.1.5.&nbsp;&#20998;&#39029;</h4></div></div><div></div></div><p>
                    &#22914;&#26524;&#20320;&#38656;&#35201;&#25351;&#23450;&#32467;&#26524;&#38598;&#30340;&#33539;&#22260;&#65288;&#24076;&#26395;&#36820;&#22238;&#30340;&#26368;&#22823;&#34892;&#25968;/&#25110;&#24320;&#22987;&#30340;&#34892;&#25968;&#65289;&#65292;&#24212;&#35813;&#20351;&#29992;<tt class="literal">Query</tt>&#25509;&#21475;&#25552;&#20379;&#30340;&#26041;&#27861;:
                </p><pre class="programlisting">Query q = sess.createQuery("from DomesticCat cat");
q.setFirstResult(20);
q.setMaxResults(10);
List cats = q.list();</pre><p>
                    Hibernate &#30693;&#36947;&#22914;&#20309;&#23558;&#36825;&#20010;&#26377;&#38480;&#23450;&#26465;&#20214;&#30340;&#26597;&#35810;&#36716;&#25442;&#25104;&#20320;&#30340;&#25968;&#25454;&#24211;&#30340;&#21407;&#29983;SQL(native SQL)&#12290;
                </p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="objectstate-querying-executing-scrolling"></a>10.4.1.6.&nbsp;&#21487;&#28378;&#21160;&#36941;&#21382;(Scrollable iteration)</h4></div></div><div></div></div><p>
					&#22914;&#26524;&#20320;&#30340;JDBC&#39537;&#21160;&#25903;&#25345;&#21487;&#28378;&#21160;&#30340;<tt class="literal">ResuleSet</tt>&#65292;<tt class="literal">Query</tt>&#25509;&#21475;&#21487;&#20197;&#20351;&#29992;<tt class="literal">ScrollableResults</tt>&#65292;&#20801;&#35768;&#20320;&#22312;&#26597;&#35810;&#32467;&#26524;&#20013;&#28789;&#27963;&#28216;&#36208;&#12290;
				</p><pre class="programlisting">Query q = sess.createQuery("select cat.name, cat from DomesticCat cat " +
                            "order by cat.name");
ScrollableResults cats = q.scroll();
if ( cats.first() ) {

    // find the first name on each page of an alphabetical list of cats by name
    firstNamesOfPages = new ArrayList();
    do {
        String name = cats.getString(0);
        firstNamesOfPages.add(name);
    }
    while ( cats.scroll(PAGE_SIZE) );

    // Now get the first page of cats
    pageOfCats = new ArrayList();
    cats.beforeFirst();
    int i=0;
    while( ( PAGE_SIZE &gt; i++ ) &amp;&amp; cats.next() ) pageOfCats.add( cats.get(1) );

}
cats.close()</pre><p>
					&#35831;&#27880;&#24847;&#65292;&#20351;&#29992;&#27492;&#21151;&#33021;&#38656;&#35201;&#20445;&#25345;&#25968;&#25454;&#24211;&#36830;&#25509;&#65288;&#20197;&#21450;&#28216;&#26631;(cursor)&#65289;&#22788;&#20110;&#19968;&#30452;&#25171;&#24320;&#29366;&#24577;&#12290;
					&#22914;&#26524;&#20320;&#38656;&#35201;&#26029;&#24320;&#36830;&#25509;&#20351;&#29992;&#20998;&#39029;&#21151;&#33021;&#65292;&#35831;&#20351;&#29992;<tt class="literal">setMaxResult()</tt>/<tt class="literal">setFirstResult()</tt>
                </p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="objectstate-querying-executing-named"></a>10.4.1.7.&nbsp;&#22806;&#32622;&#21629;&#21517;&#26597;&#35810;(Externalizing named queries)</h4></div></div><div></div></div><p>
					&#20320;&#21487;&#20197;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#23450;&#20041;&#21629;&#21517;&#26597;&#35810;(named queries)&#12290;
					&#65288;&#22914;&#26524;&#20320;&#30340;&#26597;&#35810;&#20018;&#20013;&#21253;&#21547;&#21487;&#33021;&#34987;&#35299;&#37322;&#20026;XML&#26631;&#35760;(markup)&#30340;&#23383;&#31526;&#65292;&#21035;&#24536;&#20102;&#29992;<tt class="literal">CDATA</tt>&#21253;&#35065;&#36215;&#26469;&#12290;&#65289;
                </p><pre class="programlisting">&lt;query name="eg.DomesticCat.by.name.and.minimum.weight"&gt;&lt;![CDATA[
    from eg.DomesticCat as cat
        where cat.name = ?
        and cat.weight &gt; ?
] ]&gt;&lt;/query&gt;</pre><p>
					&#21442;&#25968;&#32465;&#23450;&#21450;&#25191;&#34892;&#20197;&#32534;&#31243;&#26041;&#24335;(programatically)&#23436;&#25104;&#65306;
                </p><pre class="programlisting">Query q = sess.getNamedQuery("eg.DomesticCat.by.name.and.minimum.weight");
q.setString(0, name);
q.setInt(1, minWeight);
List cats = q.list();</pre><p>
                	&#35831;&#27880;&#24847;&#23454;&#38469;&#30340;&#31243;&#24207;&#20195;&#30721;&#19982;&#25152;&#29992;&#30340;&#26597;&#35810;&#35821;&#35328;&#26080;&#20851;&#65292;&#20320;&#20063;&#21487;&#22312;&#20803;&#25968;&#25454;&#20013;&#23450;&#20041;&#21407;&#29983;SQL(native SQL)&#26597;&#35810;&#65292;
                	&#25110;&#23558;&#21407;&#26377;&#30340;&#20854;&#20182;&#30340;&#26597;&#35810;&#35821;&#21477;&#25918;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#35753;Hibernate&#32479;&#19968;&#31649;&#29702;&#65292;&#36798;&#21040;&#36801;&#31227;&#30340;&#30446;&#30340;&#12290;
                </p></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="objectstate-filtering"></a>10.4.2.&nbsp;&#36807;&#28388;&#38598;&#21512;</h3></div></div><div></div></div><p>
     		    &#38598;&#21512;<span class="emphasis"><em>&#36807;&#28388;&#22120;(filter)</em></span>&#26159;&#19968;&#31181;&#29992;&#20110;&#19968;&#20010;&#25345;&#20037;&#21270;&#38598;&#21512;&#25110;&#32773;&#25968;&#32452;&#30340;&#29305;&#27530;&#30340;&#26597;&#35810;&#12290;&#26597;&#35810;&#23383;&#31526;&#20018;&#20013;&#21487;&#20197;&#20351;&#29992;<tt class="literal">"this"</tt>&#26469;&#24341;&#29992;&#38598;&#21512;&#20013;&#30340;&#24403;&#21069;&#20803;&#32032;&#12290;
	        </p><pre class="programlisting">Collection blackKittens = session.createFilter(
    pk.getKittens(), 
    "where this.color = ?")
    .setParameter( Color.BLACK, Hibernate.custom(ColorUserType.class) )
    .list()
);</pre><p>
                 &#36820;&#22238;&#30340;&#38598;&#21512;&#21487;&#20197;&#34987;&#35748;&#20026;&#26159;&#19968;&#20010;&#21253;(bag, &#26080;&#39034;&#24207;&#21487;&#37325;&#22797;&#30340;&#38598;&#21512;(collection))&#65292;&#23427;&#26159;&#25152;&#32473;&#38598;&#21512;&#30340;&#21103;&#26412;&#12290;
                &#21407;&#26469;&#30340;&#38598;&#21512;&#19981;&#20250;&#34987;&#25913;&#21160;&#65288;&#36825;&#19982;&#8220;&#36807;&#28388;&#22120;(filter)&#8221;&#30340;&#38544;&#21547;&#30340;&#21547;&#20041;&#19981;&#31526;&#65292;&#19981;&#36807;&#19982;&#25105;&#20204;&#26399;&#24453;&#30340;&#34892;&#20026;&#19968;&#33268;&#65289;&#12290;
            </p><p>
	         	&#35831;&#27880;&#24847;&#36807;&#28388;&#22120;(filter)&#24182;&#19981;&#38656;&#35201;<tt class="literal">from</tt>&#23376;&#21477;&#65288;&#24403;&#28982;&#38656;&#35201;&#30340;&#35805;&#23427;&#20204;&#20063;&#21487;&#20197;&#21152;&#19978;&#65289;&#12290;&#36807;&#28388;&#22120;(filter)&#19981;&#38480;&#23450;&#20110;&#21482;&#33021;&#36820;&#22238;&#38598;&#21512;&#20803;&#32032;&#26412;&#36523;&#12290;
	        </p><pre class="programlisting">Collection blackKittenMates = session.createFilter(
    pk.getKittens(), 
    "select this.mate where this.color = eg.Color.BLACK.intValue")
    .list();</pre><p>
				&#21363;&#20351;&#26080;&#26465;&#20214;&#30340;&#36807;&#28388;&#22120;(filter)&#20063;&#26159;&#26377;&#24847;&#20041;&#30340;&#12290;&#20363;&#22914;&#65292;&#29992;&#20110;&#21152;&#36733;&#19968;&#20010;&#22823;&#38598;&#21512;&#30340;&#23376;&#38598;&#65306;
            </p><pre class="programlisting">Collection tenKittens = session.createFilter(
    mother.getKittens(), "")
    .setFirstResult(0).setMaxResults(10)
    .list();</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="objecstate-querying-criteria"></a>10.4.3.&nbsp;&#26465;&#20214;&#26597;&#35810;(Criteria queries)</h3></div></div><div></div></div><p>
	            HQL&#26497;&#20026;&#24378;&#22823;&#65292;&#20294;&#26159;&#26377;&#20123;&#20154;&#24076;&#26395;&#33021;&#22815;&#21160;&#24577;&#30340;&#20351;&#29992;&#19968;&#31181;&#38754;&#21521;&#23545;&#35937;API&#21019;&#24314;&#26597;&#35810;&#65292;&#32780;&#38750;&#22312;&#20182;&#20204;&#30340;Java&#20195;&#30721;&#20013;&#23884;&#20837;&#23383;&#31526;&#20018;&#12290;&#23545;&#20110;&#37027;&#37096;&#20998;&#20154;&#26469;&#35828;&#65292;Hibernate&#25552;&#20379;&#20102;&#30452;&#35266;&#30340;<tt class="literal">Criteria</tt>&#26597;&#35810;API&#12290;
	        </p><pre class="programlisting">Criteria crit = session.createCriteria(Cat.class);
crit.add( Expression.eq( "color", eg.Color.BLACK ) );
crit.setMaxResults(10);
List cats = crit.list();</pre><p>
                <tt class="literal">Criteria</tt>&#20197;&#21450;&#30456;&#20851;&#30340;<tt class="literal">&#26679;&#20363;(Example)</tt>API&#23558;&#20250;&#20877;<a href="#querycriteria" title="&#31532;&nbsp;15&nbsp;&#31456;&nbsp;&#xA;    &#26465;&#20214;&#26597;&#35810;(Criteria Queries)&#xA;    ">&#31532;&nbsp;15&nbsp;&#31456; <i>
    &#26465;&#20214;&#26597;&#35810;(Criteria Queries)
    </i></a>&#20013;&#35814;&#32454;&#35752;&#35770;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="objectstate-querying-nativesql"></a>10.4.4.&nbsp;&#20351;&#29992;&#21407;&#29983;SQL&#30340;&#26597;&#35810;</h3></div></div><div></div></div><p>
				&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">createSQLQuery()</tt>&#26041;&#27861;&#65292;&#29992;SQL&#26469;&#25551;&#36848;&#26597;&#35810;&#65292;&#24182;&#30001;Hibernate&#23558;&#32467;&#26524;&#38598;&#36716;&#25442;&#25104;&#23545;&#35937;&#12290;
				&#35831;&#27880;&#24847;&#65292;&#20320;&#21487;&#20197;&#22312;&#20219;&#20309;&#26102;&#20505;&#35843;&#29992;<tt class="literal">session.connection()</tt>&#26469;&#33719;&#24471;&#24182;&#20351;&#29992;JDBC <tt class="literal">Connection</tt>&#23545;&#35937;&#12290;
				&#22914;&#26524;&#20320;&#36873;&#25321;&#20351;&#29992;Hibernate&#30340;API, &#20320;&#24517;&#39035;&#25226;SQL&#21035;&#21517;&#29992;&#22823;&#25324;&#21495;&#21253;&#22260;&#36215;&#26469;:
            </p><pre class="programlisting">List cats = session.createSQLQuery(
    "SELECT {cat.*} FROM CAT {cat} WHERE ROWNUM&lt;10",
    "cat",
    Cat.class
).list();</pre><pre class="programlisting">List cats = session.createSQLQuery(
    "SELECT {cat}.ID AS {cat.id}, {cat}.SEX AS {cat.sex}, " +
           "{cat}.MATE AS {cat.mate}, {cat}.SUBCLASS AS {cat.class}, ... " +
    "FROM CAT {cat} WHERE ROWNUM&lt;10",
    "cat",
    Cat.class
).list()</pre><p>
                &#21644;Hibernate&#26597;&#35810;&#19968;&#26679;&#65292;SQL&#26597;&#35810;&#20063;&#21487;&#20197;&#21253;&#21547;&#21629;&#21517;&#21442;&#25968;&#21644;&#21344;&#20301;&#21442;&#25968;&#12290;
			  &#21487;&#20197;&#22312;<a href="#querysql" title="&#31532;&nbsp;16&nbsp;&#31456;&nbsp;Native SQL&#26597;&#35810;">&#31532;&nbsp;16&nbsp;&#31456; <i>Native SQL&#26597;&#35810;</i></a>&#25214;&#21040;&#26356;&#22810;&#20851;&#20110;Hibernate&#20013;&#21407;&#29983;SQL(native SQL)&#30340;&#20449;&#24687;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-modifying"></a>10.5.&nbsp;&#20462;&#25913;&#25345;&#20037;&#23545;&#35937;</h2></div></div><div></div></div><p>
            <span class="emphasis"><em>&#20107;&#21153;&#20013;&#30340;&#25345;&#20037;&#23454;&#20363;</em></span>&#65288;&#23601;&#26159;&#36890;&#36807;<tt class="literal">session</tt>&#35013;&#36733;&#12289;&#20445;&#23384;&#12289;&#21019;&#24314;&#25110;&#32773;&#26597;&#35810;&#20986;&#30340;&#23545;&#35937;&#65289;
            &#34987;&#24212;&#29992;&#31243;&#24207;&#25805;&#20316;&#25152;&#36896;&#25104;&#30340;&#20219;&#20309;&#20462;&#25913;&#37117;&#20250;&#22312;<tt class="literal">Session</tt>&#34987;<span class="emphasis"><em>&#21047;&#20986;&#65288;flushed&#65289;</em></span>&#30340;&#26102;&#20505;&#34987;&#25345;&#20037;&#21270;&#65288;&#26412;&#31456;&#21518;&#38754;&#20250;&#35814;&#32454;&#35752;&#35770;&#65289;&#12290;
			&#36825;&#37324;&#19981;&#38656;&#35201;&#35843;&#29992;&#26576;&#20010;&#29305;&#23450;&#30340;&#26041;&#27861;&#65288;&#27604;&#22914;<tt class="literal">update()</tt>&#65292;&#35774;&#35745;&#23427;&#30340;&#30446;&#30340;&#26159;&#19981;&#21516;&#30340;&#65289;&#23558;&#20320;&#30340;&#20462;&#25913;&#25345;&#20037;&#21270;&#12290;
            &#25152;&#20197;&#26368;&#30452;&#25509;&#30340;&#26356;&#26032;&#19968;&#20010;&#23545;&#35937;&#30340;&#26041;&#27861;&#23601;&#26159;&#22312;<tt class="literal">Session</tt>&#22788;&#20110;&#25171;&#24320;&#29366;&#24577;&#26102;<tt class="literal">load()</tt>&#23427;&#65292;&#28982;&#21518;&#30452;&#25509;&#20462;&#25913;&#21363;&#21487;&#65306;
        </p><pre class="programlisting">DomesticCat cat = (DomesticCat) sess.load( Cat.class, new Long(69) );
cat.setName("PK");
sess.flush();  // changes to cat are automatically detected and persisted</pre><p>
        	&#26377;&#26102;&#36825;&#31181;&#31243;&#24207;&#27169;&#22411;&#25928;&#29575;&#20302;&#19979;&#65292;&#22240;&#20026;&#23427;&#22312;&#21516;&#19968;Session&#37324;&#38656;&#35201;&#19968;&#26465;SQL <tt class="literal">SELECT</tt>&#35821;&#21477;&#65288;&#29992;&#20110;&#21152;&#36733;&#23545;&#35937;&#65289;
        	&#20197;&#21450;&#19968;&#26465;SQL <tt class="literal">UPDATE</tt>&#35821;&#21477;(&#25345;&#20037;&#21270;&#26356;&#26032;&#30340;&#29366;&#24577;)&#12290;
        	&#20026;&#27492;Hibernate&#25552;&#20379;&#20102;&#21478;&#19968;&#31181;&#36884;&#24452;&#65292;&#20351;&#29992;&#33073;&#31649;(detached)&#23454;&#20363;&#12290;
        </p><p>
            <span class="emphasis"><em>&#35831;&#27880;&#24847;Hibernate&#26412;&#36523;&#19981;&#25552;&#20379;&#30452;&#25509;&#25191;&#34892;<tt class="literal">UPDATE</tt>&#25110;<tt class="literal">DELETE</tt>&#35821;&#21477;&#30340;API&#12290;
            Hibernate&#25552;&#20379;&#30340;&#26159;<span class="emphasis"><em>&#29366;&#24577;&#31649;&#29702;(state management)</em></span>&#26381;&#21153;&#65292;&#20320;&#19981;&#24517;&#32771;&#34385;&#35201;&#20351;&#29992;&#30340;<span class="emphasis"><em>&#35821;&#21477;(statements)</em></span>&#12290;
			JDBC&#26159;&#20986;&#33394;&#30340;&#25191;&#34892;SQL&#35821;&#21477;&#30340;API&#65292;&#20219;&#20309;&#26102;&#20505;&#35843;&#29992;<tt class="literal">session.connection()</tt>&#20320;&#37117;&#21487;&#20197;&#24471;&#21040;&#19968;&#20010;JDBC <tt class="literal">Connection</tt>&#23545;&#35937;&#12290;
			&#27492;&#22806;&#65292;&#22312;&#32852;&#26426;&#20107;&#21153;&#22788;&#29702;(OLTP)&#31243;&#24207;&#20013;&#65292;&#22823;&#37327;&#25805;&#20316;(mass operations)&#19982;&#23545;&#35937;/&#20851;&#31995;&#26144;&#23556;&#30340;&#35266;&#28857;&#26159;&#30456;&#20914;&#31361;&#30340;&#12290;
            Hibernate&#30340;&#23558;&#26469;&#29256;&#26412;&#21487;&#33021;&#20250;&#25552;&#20379;&#19987;&#38376;&#30340;&#36827;&#34892;&#22823;&#37327;&#25805;&#20316;(mass operation)&#30340;&#21151;&#33021;&#12290;            
            &#21442;&#32771;<a href="#batch" title="&#31532;&nbsp;13&nbsp;&#31456;&nbsp;&#25209;&#37327;&#22788;&#29702;&#65288;Batch processing&#65289;">&#31532;&nbsp;13&nbsp;&#31456; <i>&#25209;&#37327;&#22788;&#29702;&#65288;Batch processing&#65289;</i></a>&#65292;&#23547;&#25214;&#19968;&#20123;&#21487;&#29992;&#30340;&#25209;&#37327;(batch)&#25805;&#20316;&#25216;&#24039;&#12290;</em></span>
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-detached"></a>10.6.&nbsp;&#20462;&#25913;&#33073;&#31649;(Detached)&#23545;&#35937;</h2></div></div><div></div></div><p>
            &#24456;&#22810;&#31243;&#24207;&#38656;&#35201;&#22312;&#26576;&#20010;&#20107;&#21153;&#20013;&#33719;&#21462;&#23545;&#35937;&#65292;&#28982;&#21518;&#23558;&#23545;&#35937;&#21457;&#36865;&#21040;&#30028;&#38754;&#23618;&#21435;&#25805;&#20316;&#65292;&#26368;&#21518;&#22312;&#19968;&#20010;&#26032;&#30340;&#20107;&#21153;&#20445;&#23384;&#25152;&#20570;&#30340;&#20462;&#25913;&#12290;
            &#22312;&#39640;&#24182;&#21457;&#35775;&#38382;&#30340;&#29615;&#22659;&#20013;&#20351;&#29992;&#36825;&#31181;&#26041;&#24335;&#65292;&#36890;&#24120;&#20351;&#29992;&#38468;&#24102;&#29256;&#26412;&#20449;&#24687;&#30340;&#25968;&#25454;&#26469;&#20445;&#35777;&#36825;&#20123;&#8220;&#38271;&#8220;&#24037;&#20316;&#21333;&#20803;&#20043;&#38388;&#30340;&#38548;&#31163;&#12290;
        </p><p>
        	Hibernate&#36890;&#36807;&#25552;&#20379;<tt class="literal">Session.update()</tt>&#25110;<tt class="literal">Session.merge()</tt>
        	&#37325;&#26032;&#20851;&#32852;&#33073;&#31649;&#23454;&#20363;&#30340;&#21150;&#27861;&#26469;&#25903;&#25345;&#36825;&#31181;&#27169;&#22411;&#12290;
        </p><pre class="programlisting">// in the first session
Cat cat = (Cat) firstSession.load(Cat.class, catId);
Cat potentialMate = new Cat();
firstSession.save(potentialMate);

// in a higher layer of the application
cat.setMate(potentialMate);

// later, in a new session
secondSession.update(cat);  // update cat
secondSession.update(mate); // update mate</pre><p>
            &#22914;&#26524;&#20855;&#26377;<tt class="literal">catId</tt>&#25345;&#20037;&#21270;&#26631;&#35782;&#30340;<tt class="literal">Cat</tt>&#20043;&#21069;&#24050;&#32463;&#34987;<tt class="literal">&#21478;&#19968;Session(secondSession)</tt>&#35013;&#36733;&#20102;&#65292;
            &#24212;&#29992;&#31243;&#24207;&#36827;&#34892;&#37325;&#20851;&#32852;&#25805;&#20316;(reattach)&#30340;&#26102;&#20505;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;
        </p><p>
        	&#22914;&#26524;&#20320;&#30830;&#23450;&#24403;&#21069;session&#27809;&#26377;&#21253;&#21547;&#19982;&#20043;&#20855;&#26377;&#30456;&#21516;&#25345;&#20037;&#21270;&#26631;&#35782;&#30340;&#25345;&#20037;&#23454;&#20363;&#65292;&#20351;&#29992;<tt class="literal">update()</tt>&#12290;
        	&#22914;&#26524;&#24819;&#38543;&#26102;&#21512;&#24182;&#20320;&#30340;&#30340;&#25913;&#21160;&#32780;&#19981;&#32771;&#34385;session&#30340;&#29366;&#24577;&#65292;&#20351;&#29992;<tt class="literal">merge()</tt>&#12290;
	         &#25442;&#21477;&#35805;&#35828;&#65292;&#22312;&#19968;&#20010;&#26032;session&#20013;&#36890;&#24120;&#31532;&#19968;&#20010;&#35843;&#29992;&#30340;&#26159;<tt class="literal">update()</tt>&#26041;&#27861;&#65292;&#20197;&#20415;&#20445;&#35777;&#37325;&#26032;&#20851;&#32852;&#33073;&#31649;(detached)&#23545;&#35937;&#30340;&#25805;&#20316;&#39318;&#20808;&#34987;&#25191;&#34892;&#12290;
        </p><p>
		    &#22914;&#26524;&#24076;&#26395;&#30456;&#20851;&#32852;&#30340;&#33073;&#31649;&#23545;&#35937;&#65288;&#36890;&#36807;&#24341;&#29992;&#8220;&#21487;&#21040;&#36798;&#8221;&#30340;&#33073;&#31649;&#23545;&#35937;&#65289;&#30340;&#25968;&#25454;&#20063;&#35201;&#26356;&#26032;&#21040;&#25968;&#25454;&#24211;&#26102;&#65288;&#24182;&#19988;&#20063;<span class="emphasis"><em>&#20165;&#20165;</em></span>&#22312;&#36825;&#31181;&#24773;&#20917;&#65289;&#65292;
		    &#21487;&#20197;&#23545;&#35813;&#30456;&#20851;&#32852;&#30340;&#33073;&#31649;&#23545;&#35937;&#21333;&#29420;&#35843;&#29992;<tt class="literal">update()</tt>
			&#24403;&#28982;&#36825;&#20123;&#21487;&#20197;&#33258;&#21160;&#23436;&#25104;&#65292;&#21363;&#36890;&#36807;&#20351;&#29992;<span class="emphasis"><em>&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)</em></span>&#65292;&#35831;&#30475;<a href="#objectstate-transitive" title="10.11.&nbsp;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)">&#31532;&nbsp;10.11&nbsp;&#33410; &#8220;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)&#8221;</a>&#12290;
        </p><p>
            <tt class="literal">lock()</tt>&#26041;&#27861;&#20063;&#20801;&#35768;&#31243;&#24207;&#37325;&#26032;&#20851;&#32852;&#26576;&#20010;&#23545;&#35937;&#21040;&#19968;&#20010;&#26032;session&#19978;&#12290;&#19981;&#36807;&#65292;&#35813;&#33073;&#31649;(detached)&#30340;&#23545;&#35937;&#24517;&#39035;&#26159;&#27809;&#26377;&#20462;&#25913;&#36807;&#30340;&#65281;
        </p><pre class="programlisting">//just reassociate:
sess.lock(fritz, LockMode.NONE);
//do a version check, then reassociate:
sess.lock(izi, LockMode.READ);
//do a version check, using SELECT ... FOR UPDATE, then reassociate:
sess.lock(pk, LockMode.UPGRADE);</pre><p>
            &#35831;&#27880;&#24847;&#65292;<tt class="literal">lock()</tt>&#21487;&#20197;&#25645;&#37197;&#22810;&#31181;<tt class="literal">LockMode</tt>&#65292;
            &#26356;&#22810;&#20449;&#24687;&#35831;&#38405;&#35835;API&#25991;&#26723;&#20197;&#21450;&#20851;&#20110;&#20107;&#21153;&#22788;&#29702;(transaction handling)&#30340;&#31456;&#33410;&#12290;&#37325;&#26032;&#20851;&#32852;&#19981;&#26159;<tt class="literal">lock()</tt>&#30340;&#21807;&#19968;&#29992;&#36884;&#12290;
        </p><p>
            &#20854;&#20182;&#29992;&#20110;&#38271;&#26102;&#38388;&#24037;&#20316;&#21333;&#20803;&#30340;&#27169;&#22411;&#20250;&#22312;<a href="#transactions-optimistic" title="11.3.&nbsp;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046;(Optimistic concurrency control)">&#31532;&nbsp;11.3&nbsp;&#33410; &#8220;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046;(Optimistic concurrency control)&#8221;</a>&#20013;&#35752;&#35770;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-saveorupdate"></a>10.7.&nbsp;&#33258;&#21160;&#29366;&#24577;&#26816;&#27979;</h2></div></div><div></div></div><p>
            Hibernate&#30340;&#29992;&#25143;&#26366;&#35201;&#27714;&#19968;&#20010;&#26082;&#21487;&#33258;&#21160;&#20998;&#37197;&#26032;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#20445;&#23384;&#30636;&#26102;(transient)&#23545;&#35937;&#65292;&#21448;&#21487;&#26356;&#26032;/&#37325;&#26032;&#20851;&#32852;&#33073;&#31649;(detached)&#23454;&#20363;&#30340;&#36890;&#29992;&#26041;&#27861;&#12290;
            <tt class="literal">saveOrUpdate()</tt>&#26041;&#27861;&#23454;&#29616;&#20102;&#36825;&#20010;&#21151;&#33021;&#12290;
        </p><pre class="programlisting">// in the first session
Cat cat = (Cat) firstSession.load(Cat.class, catID);

// in a higher tier of the application
Cat mate = new Cat();
cat.setMate(mate);

// later, in a new session
secondSession.saveOrUpdate(cat);   // update existing state (cat has a non-null id)
secondSession.saveOrUpdate(mate);  // save the new instance (mate has a null id)</pre><p>
            <tt class="literal">saveOrUpdate()</tt>&#29992;&#36884;&#21644;&#35821;&#20041;&#21487;&#33021;&#20250;&#20351;&#26032;&#29992;&#25143;&#24863;&#21040;&#36855;&#24785;&#12290;
			&#39318;&#20808;&#65292;&#21482;&#35201;&#20320;&#27809;&#26377;&#23581;&#35797;&#22312;&#26576;&#20010;session&#20013;&#20351;&#29992;&#26469;&#33258;&#21478;&#19968;session&#30340;&#23454;&#20363;&#65292;&#20320;&#23601;&#24212;&#35813;&#19981;&#38656;&#35201;&#20351;&#29992;<tt class="literal">update()</tt>&#65292;
            <tt class="literal">saveOrUpdate()</tt>&#65292;&#25110;<tt class="literal">merge()</tt>&#12290;&#26377;&#20123;&#31243;&#24207;&#20174;&#26469;&#19981;&#29992;&#36825;&#20123;&#26041;&#27861;&#12290;
        </p><p>
            &#36890;&#24120;&#19979;&#38754;&#30340;&#22330;&#26223;&#20250;&#20351;&#29992;<tt class="literal">update()</tt>&#25110;<tt class="literal">saveOrUpdate()</tt>&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#31243;&#24207;&#22312;&#31532;&#19968;&#20010;session&#20013;&#21152;&#36733;&#23545;&#35937;
                </p></li><li><p>
                    &#35813;&#23545;&#35937;&#34987;&#20256;&#36882;&#21040;&#34920;&#29616;&#23618;
                </p></li><li><p>
					&#23545;&#35937;&#21457;&#29983;&#20102;&#19968;&#20123;&#25913;&#21160;
                </p></li><li><p>
					&#35813;&#23545;&#35937;&#34987;&#36820;&#22238;&#21040;&#19994;&#21153;&#36923;&#36753;&#23618;
                </p></li><li><p>
                    &#31243;&#24207;&#35843;&#29992;&#31532;&#20108;&#20010;session&#30340;<tt class="literal">update()</tt>&#26041;&#27861;&#25345;&#20037;&#36825;&#20123;&#25913;&#21160;
                </p></li></ul></div><p>
            <tt class="literal">saveOrUpdate()</tt>&#20570;&#19979;&#38754;&#30340;&#20107;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#22914;&#26524;&#23545;&#35937;&#24050;&#32463;&#22312;&#26412;session&#20013;&#25345;&#20037;&#21270;&#20102;&#65292;&#19981;&#20570;&#20219;&#20309;&#20107;
                </p></li><li><p>
                	&#22914;&#26524;&#21478;&#19968;&#20010;&#19982;&#26412;session&#20851;&#32852;&#30340;&#23545;&#35937;&#25317;&#26377;&#30456;&#21516;&#30340;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#65292;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;
                </p></li><li><p>
					&#22914;&#26524;&#23545;&#35937;&#27809;&#26377;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#23646;&#24615;&#65292;&#23545;&#20854;&#35843;&#29992;<tt class="literal">save()</tt>
                </p></li><li><p>
                	&#22914;&#26524;&#23545;&#35937;&#30340;&#25345;&#20037;&#26631;&#35782;(identifier)&#34920;&#26126;&#20854;&#26159;&#19968;&#20010;&#26032;&#23454;&#20363;&#21270;&#30340;&#23545;&#35937;&#65292;&#23545;&#20854;&#35843;&#29992;<tt class="literal">save()</tt>
                </p></li><li><p>
              		&#22914;&#26524;&#23545;&#35937;&#26159;&#38468;&#24102;&#29256;&#26412;&#20449;&#24687;&#30340;&#65288;&#36890;&#36807;<tt class="literal">&lt;version&gt;</tt>&#25110;<tt class="literal">&lt;timestamp&gt;</tt>&#65289;
					&#24182;&#19988;&#29256;&#26412;&#23646;&#24615;&#30340;&#20540;&#34920;&#26126;&#20854;&#26159;&#19968;&#20010;&#26032;&#23454;&#20363;&#21270;&#30340;&#23545;&#35937;&#65292;<tt class="literal">save()</tt>&#23427;&#12290;
                </p></li><li><p>
                    &#21542;&#21017;<tt class="literal">update()</tt> &#36825;&#20010;&#23545;&#35937;
                </p></li></ul></div><p>
            <tt class="literal">merge()</tt>&#21487;&#38750;&#24120;&#19981;&#21516;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                	&#22914;&#26524;session&#20013;&#23384;&#22312;&#30456;&#21516;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#30340;&#23454;&#20363;&#65292;&#29992;&#29992;&#25143;&#32473;&#20986;&#30340;&#23545;&#35937;&#30340;&#29366;&#24577;&#35206;&#30422;&#26087;&#26377;&#30340;&#25345;&#20037;&#23454;&#20363;
                </p></li><li><p>
                	&#22914;&#26524;session&#27809;&#26377;&#30456;&#24212;&#30340;&#25345;&#20037;&#23454;&#20363;&#65292;&#21017;&#23581;&#35797;&#20174;&#25968;&#25454;&#24211;&#20013;&#21152;&#36733;&#65292;&#25110;&#21019;&#24314;&#26032;&#30340;&#25345;&#20037;&#21270;&#23454;&#20363;
                </p></li><li><p>
					&#26368;&#21518;&#36820;&#22238;&#35813;&#25345;&#20037;&#23454;&#20363;
                </p></li><li><p>
                	&#29992;&#25143;&#32473;&#20986;&#30340;&#36825;&#20010;&#23545;&#35937;&#27809;&#26377;&#34987;&#20851;&#32852;&#21040;session&#19978;&#65292;&#23427;&#20381;&#26087;&#26159;&#33073;&#31649;&#30340;
                </p></li></ul></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-deleting"></a>10.8.&nbsp;&#21024;&#38500;&#25345;&#20037;&#23545;&#35937;</h2></div></div><div></div></div><p>
            &#20351;&#29992;<tt class="literal">Session.delete()</tt>&#20250;&#25226;&#23545;&#35937;&#30340;&#29366;&#24577;&#20174;&#25968;&#25454;&#24211;&#20013;&#31227;&#38500;&#12290;
            &#24403;&#28982;&#65292;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#21487;&#33021;&#20173;&#28982;&#25345;&#26377;&#19968;&#20010;&#25351;&#21521;&#24050;&#21024;&#38500;&#23545;&#35937;&#30340;&#24341;&#29992;&#12290;&#25152;&#20197;&#65292;&#26368;&#22909;&#36825;&#26679;&#29702;&#35299;&#65306;<tt class="literal">delete()</tt>&#30340;&#29992;&#36884;&#26159;&#25226;&#19968;&#20010;&#25345;&#20037;&#23454;&#20363;&#21464;&#25104;&#30636;&#26102;(transient)&#23454;&#20363;&#12290;
        </p><pre class="programlisting">sess.delete(cat);</pre><p>
            &#20320;&#21487;&#20197;&#29992;&#20320;&#21916;&#27426;&#30340;&#20219;&#20309;&#39034;&#24207;&#21024;&#38500;&#23545;&#35937;&#65292;&#19981;&#29992;&#25285;&#24515;&#22806;&#38190;&#32422;&#26463;&#20914;&#31361;&#12290;&#24403;&#28982;&#65292;&#22914;&#26524;&#20320;&#25630;&#38169;&#20102;&#39034;&#24207;&#65292;&#36824;&#26159;&#26377;&#21487;&#33021;&#24341;&#21457;&#22312;&#22806;&#38190;&#23383;&#27573;&#23450;&#20041;&#30340;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#20914;&#31361;&#12290;
            &#20363;&#22914;&#20320;&#21024;&#38500;&#20102;&#29238;&#23545;&#35937;&#65292;&#20294;&#26159;&#24536;&#35760;&#21024;&#38500;&#23401;&#23376;&#20204;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-replicating"></a>10.9.&nbsp;&#22312;&#20004;&#20010;&#19981;&#21516;&#25968;&#25454;&#24211;&#38388;&#22797;&#21046;&#23545;&#35937;</h2></div></div><div></div></div><p>
    		&#20598;&#23572;&#20250;&#29992;&#21040;&#19981;&#37325;&#26032;&#29983;&#25104;&#25345;&#20037;&#21270;&#26631;&#35782;(identifier)&#65292;&#23558;&#25345;&#20037;&#23454;&#20363;&#20197;&#21450;&#20854;&#20851;&#32852;&#30340;&#23454;&#20363;&#25345;&#20037;&#21040;&#19981;&#21516;&#30340;&#25968;&#25454;&#24211;&#20013;&#30340;&#25805;&#20316;&#12290;
    	</p><pre class="programlisting">//retrieve a cat from one database
Session session1 = factory1.openSession();
Transaction tx1 = session1.beginTransaction();
Cat cat = session1.get(Cat.class, catId);
tx1.commit();
session1.close();

//reconcile with a second database
Session session2 = factory2.openSession();
Transaction tx2 = session2.beginTransaction();
session2.replicate(cat, ReplicationMode.LATEST_VERSION);
tx2.commit();
session2.close();</pre><p>
            <tt class="literal">ReplicationMode</tt>&#20915;&#23450;&#22312;&#21644;&#25968;&#25454;&#24211;&#20013;&#24050;&#23384;&#22312;&#35760;&#24405;&#30001;&#20914;&#31361;&#26102;&#65292;<tt class="literal">replicate()</tt>&#22914;&#20309;&#22788;&#29702;&#12290;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    <tt class="literal">ReplicationMode.IGNORE</tt> - &#24573;&#30053;&#23427;
                </p></li><li><p>
                    <tt class="literal">ReplicationMode.OVERWRITE</tt> - &#35206;&#30422;&#30456;&#21516;&#30340;&#34892;
                </p></li><li><p>
                    <tt class="literal">ReplicationMode.EXCEPTION</tt> - &#25243;&#20986;&#24322;&#24120;
                </p></li><li><p>
                    <tt class="literal">ReplicationMode.LATEST_VERSION</tt> - &#22914;&#26524;&#24403;&#21069;&#30340;&#29256;&#26412;&#36739;&#26032;&#65292;&#21017;&#35206;&#30422;&#65292;&#21542;&#21017;&#24573;&#30053;
                </p></li></ul></div><p>
        	&#36825;&#20010;&#21151;&#33021;&#30340;&#29992;&#36884;&#21253;&#25324;&#20351;&#24405;&#20837;&#30340;&#25968;&#25454;&#22312;&#19981;&#21516;&#25968;&#25454;&#24211;&#20013;&#19968;&#33268;&#65292;&#20135;&#21697;&#21319;&#32423;&#26102;&#21319;&#32423;&#31995;&#32479;&#37197;&#32622;&#20449;&#24687;&#65292;&#22238;&#28378;non-ACID&#20107;&#21153;&#20013;&#30340;&#20462;&#25913;&#31561;&#31561;&#12290;
        	&#65288;&#35793;&#27880;&#65292;non-ACID&#65292;&#38750;ACID;ACID&#65292;Atomic&#65292;Consistent&#65292;Isolated and Durable&#30340;&#32553;&#20889;&#65289;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-flushing"></a>10.10.&nbsp;Session&#21047;&#20986;(flush)</h2></div></div><div></div></div><p>
            &#27599;&#38388;&#38548;&#19968;&#27573;&#26102;&#38388;&#65292;<tt class="literal">Session</tt>&#20250;&#25191;&#34892;&#19968;&#20123;&#24517;&#38656;&#30340;SQL&#35821;&#21477;&#26469;&#25226;&#20869;&#23384;&#20013;&#30340;&#23545;&#35937;&#30340;&#29366;&#24577;&#21516;&#27493;&#21040;JDBC&#36830;&#25509;&#20013;&#12290;&#36825;&#20010;&#36807;&#31243;&#34987;&#31216;&#20026;<span class="emphasis"><em>&#21047;&#20986;(flush)</em></span>&#65292;&#40664;&#35748;&#20250;&#22312;&#19979;&#38754;&#30340;&#26102;&#38388;&#28857;&#25191;&#34892;&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#22312;&#26576;&#20123;&#26597;&#35810;&#25191;&#34892;&#20043;&#21069;
                </p></li><li><p>
                    &#22312;&#35843;&#29992;<tt class="literal">org.hibernate.Transaction.commit()</tt>&#30340;&#26102;&#20505;
                </p></li><li><p>
                    &#22312;&#35843;&#29992;<tt class="literal">Session.flush()</tt>&#30340;&#26102;&#20505;
                </p></li></ul></div><p>
            &#28041;&#21450;&#30340;SQL&#35821;&#21477;&#20250;&#25353;&#29031;&#19979;&#38754;&#30340;&#39034;&#24207;&#21457;&#20986;&#25191;&#34892;&#65306;
        </p><div class="orderedlist"><ol type="1" compact><li><p>
                    &#25152;&#26377;&#23545;&#23454;&#20307;&#36827;&#34892;&#25554;&#20837;&#30340;&#35821;&#21477;&#65292;&#20854;&#39034;&#24207;&#25353;&#29031;&#23545;&#35937;&#25191;&#34892;<tt class="literal">Session.save()</tt>&#30340;&#26102;&#38388;&#39034;&#24207;
                </p></li><li><p>
                    &#25152;&#26377;&#23545;&#23454;&#20307;&#36827;&#34892;&#26356;&#26032;&#30340;&#35821;&#21477;
                </p></li><li><p>
                    &#25152;&#26377;&#36827;&#34892;&#38598;&#21512;&#21024;&#38500;&#30340;&#35821;&#21477;
                </p></li><li><p>
                    &#25152;&#26377;&#23545;&#38598;&#21512;&#20803;&#32032;&#36827;&#34892;&#21024;&#38500;&#65292;&#26356;&#26032;&#25110;&#32773;&#25554;&#20837;&#30340;&#35821;&#21477;
                </p></li><li><p>
                    &#25152;&#26377;&#36827;&#34892;&#38598;&#21512;&#25554;&#20837;&#30340;&#35821;&#21477;
                </p></li><li><p>
                    &#25152;&#26377;&#23545;&#23454;&#20307;&#36827;&#34892;&#21024;&#38500;&#30340;&#35821;&#21477;&#65292;&#20854;&#39034;&#24207;&#25353;&#29031;&#23545;&#35937;&#25191;&#34892;<tt class="literal">Session.delete()</tt>&#30340;&#26102;&#38388;&#39034;&#24207;
                </p></li></ol></div><p>
            &#65288;&#26377;&#19968;&#20010;&#20363;&#22806;&#26159;&#65292;&#22914;&#26524;&#23545;&#35937;&#20351;&#29992;<tt class="literal">native</tt>&#26041;&#24335;&#26469;&#29983;&#25104;ID&#65288;&#25345;&#20037;&#21270;&#26631;&#35782;&#65289;&#30340;&#35805;&#65292;&#23427;&#20204;&#19968;&#25191;&#34892;save&#23601;&#20250;&#34987;&#25554;&#20837;&#12290;&#65289;
        </p><p>
            &#38500;&#38750;&#20320;&#26126;&#30830;&#22320;&#21457;&#20986;&#20102;<tt class="literal">flush()</tt>&#25351;&#20196;&#65292;&#20851;&#20110;Session<span class="emphasis"><em>&#20309;&#26102;</em></span>&#20250;&#25191;&#34892;&#36825;&#20123;JDBC&#35843;&#29992;&#26159;&#23436;&#20840;&#26080;&#27861;&#20445;&#35777;&#30340;&#65292;&#21482;&#33021;&#20445;&#35777;&#23427;&#20204;&#25191;&#34892;&#30340;&#21069;&#21518;&#39034;&#24207;&#12290;
            &#24403;&#28982;&#65292;Hibernate&#20445;&#35777;&#65292;<tt class="literal">Query.list(..)</tt>&#32477;&#23545;&#19981;&#20250;&#36820;&#22238;&#24050;&#32463;&#22833;&#25928;&#30340;&#25968;&#25454;&#65292;&#20063;&#19981;&#20250;&#36820;&#22238;&#38169;&#35823;&#25968;&#25454;&#12290;
        </p><p>
            &#20063;&#21487;&#20197;&#25913;&#21464;&#40664;&#35748;&#30340;&#35774;&#32622;&#65292;&#26469;&#35753;&#21047;&#20986;(flush)&#25805;&#20316;&#21457;&#29983;&#30340;&#19981;&#37027;&#20040;&#39057;&#32321;&#12290;
            <tt class="literal">FlushMode</tt>&#31867;&#23450;&#20041;&#20102;&#19977;&#31181;&#19981;&#21516;&#30340;&#26041;&#24335;&#12290;
              &#20165;&#22312;&#25552;&#20132;&#26102;&#21047;&#20986;(&#20165;&#24403;Hibernate&#30340;<tt class="literal">Transaction</tt> API&#34987;&#20351;&#29992;&#26102;&#26377;&#25928;)&#65292;
              &#25353;&#29031;&#21018;&#25165;&#35828;&#30340;&#26041;&#24335;&#21047;&#20986;&#65292;
              &#20197;&#21450;&#38500;&#38750;&#26126;&#30830;&#20351;&#29992;<tt class="literal">flush()</tt>&#21542;&#21017;&#20174;&#19981;&#21047;&#20986;&#12290;
              &#26368;&#21518;&#19968;&#31181;&#27169;&#24335;&#23545;&#20110;&#37027;&#20123;&#38656;&#35201;&#38271;&#26102;&#38388;&#20445;&#25345;<tt class="literal">Session</tt>&#20026;&#25171;&#24320;&#25110;&#32773;&#26029;&#32447;&#29366;&#24577;&#30340;&#38271;&#26102;&#38388;&#36816;&#34892;&#30340;&#24037;&#20316;&#21333;&#20803;&#24456;&#26377;&#29992;&#12290;
            (&#21442;&#35265; <a href="#transactions-optimistic-longsession" title="11.3.2.&nbsp;&#25193;&#23637;&#21608;&#26399;&#30340;session&#21644;&#33258;&#21160;&#29256;&#26412;&#21270;">&#31532;&nbsp;11.3.2&nbsp;&#33410; &#8220;&#25193;&#23637;&#21608;&#26399;&#30340;session&#21644;&#33258;&#21160;&#29256;&#26412;&#21270;&#8221;</a>).
        </p><pre class="programlisting">sess = sf.openSession();
Transaction tx = sess.beginTransaction();
sess.setFlushMode(FlushMode.COMMIT); // allow queries to return stale state

Cat izi = (Cat) sess.load(Cat.class, id);
izi.setName(iznizi);

// might return stale data
sess.find("from Cat as cat left outer join cat.kittens kitten");

// change to izi is not flushed!
...
tx.commit(); // flush occurs
sess.close();</pre><p>
        	&#21047;&#20986;(flush)&#26399;&#38388;&#65292;&#21487;&#33021;&#20250;&#25243;&#20986;&#24322;&#24120;&#12290;&#65288;&#20363;&#22914;&#19968;&#20010;DML&#25805;&#20316;&#36829;&#21453;&#20102;&#32422;&#26463;&#65289;
			&#24322;&#24120;&#22788;&#29702;&#28041;&#21450;&#21040;&#23545;Hibernate&#20107;&#21153;&#24615;&#34892;&#20026;&#30340;&#29702;&#35299;&#65292;&#22240;&#27492;&#25105;&#20204;&#23558;&#22312;<a href="#transactions" title="&#31532;&nbsp;11&nbsp;&#31456;&nbsp;&#20107;&#21153;&#21644;&#24182;&#21457;">&#31532;&nbsp;11&nbsp;&#31456; <i>&#20107;&#21153;&#21644;&#24182;&#21457;</i></a>&#20013;&#35752;&#35770;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-transitive"></a>10.11.&nbsp;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)</h2></div></div><div></div></div><p>
           	&#23545;&#27599;&#19968;&#20010;&#23545;&#35937;&#37117;&#35201;&#25191;&#34892;&#20445;&#23384;&#65292;&#21024;&#38500;&#25110;&#37325;&#20851;&#32852;&#25805;&#20316;&#35753;&#20154;&#24863;&#35273;&#26377;&#28857;&#40635;&#28902;&#65292;&#23588;&#20854;&#26159;&#22312;&#22788;&#29702;&#35768;&#22810;&#24444;&#27492;&#20851;&#32852;&#30340;&#23545;&#35937;&#30340;&#26102;&#20505;&#12290;
             &#19968;&#20010;&#24120;&#35265;&#30340;&#20363;&#23376;&#26159;&#29238;&#23376;&#20851;&#31995;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#20363;&#23376;:
        </p><p>
        	&#22914;&#26524;&#19968;&#20010;&#29238;&#23376;&#20851;&#31995;&#20013;&#30340;&#23376;&#23545;&#35937;&#26159;&#20540;&#31867;&#22411;(value typed)&#65288;&#20363;&#22914;&#65292;&#22320;&#22336;&#25110;&#23383;&#31526;&#20018;&#30340;&#38598;&#21512;&#65289;&#30340;&#65292;&#20182;&#20204;&#30340;&#29983;&#21629;&#21608;&#26399;&#20250;&#20381;&#36182;&#20110;&#29238;&#23545;&#35937;&#65292;&#21487;&#20197;&#20139;&#21463;&#26041;&#20415;&#30340;&#32423;&#32852;&#25805;&#20316;(Cascading)&#65292;&#19981;&#38656;&#35201;&#39069;&#22806;&#30340;&#21160;&#20316;&#12290;
			&#29238;&#23545;&#35937;&#34987;&#20445;&#23384;&#26102;&#65292;&#36825;&#20123;&#20540;&#31867;&#22411;(value typed)&#23376;&#23545;&#35937;&#20063;&#23558;&#34987;&#20445;&#23384;&#65307;&#29238;&#23545;&#35937;&#34987;&#21024;&#38500;&#26102;&#65292;&#23376;&#23545;&#35937;&#20063;&#23558;&#34987;&#21024;&#38500;&#12290;
			&#36825;&#23545;&#23558;&#19968;&#20010;&#23376;&#23545;&#35937;&#20174;&#38598;&#21512;&#20013;&#31227;&#38500;&#26159;&#21516;&#26679;&#26377;&#25928;&#65306;Hibernate&#20250;&#26816;&#27979;&#21040;&#65292;&#24182;&#19988;&#22240;&#20026;&#20540;&#31867;&#22411;(value typed)&#30340;&#23545;&#35937;&#19981;&#21487;&#33021;&#34987;&#20854;&#20182;&#23545;&#35937;&#24341;&#29992;&#65292;&#25152;&#20197;Hibernate&#20250;&#22312;&#25968;&#25454;&#24211;&#20013;&#21024;&#38500;&#36825;&#20010;&#23376;&#23545;&#35937;&#12290;
        </p><p>
        	&#29616;&#22312;&#32771;&#34385;&#21516;&#26679;&#30340;&#22330;&#26223;&#65292;&#19981;&#36807;&#29238;&#23376;&#23545;&#35937;&#37117;&#26159;&#23454;&#20307;(entities)&#31867;&#22411;&#65292;&#32780;&#38750;&#20540;&#31867;&#22411;(value typed)&#65288;&#20363;&#22914;&#65292;&#31867;&#21035;&#19982;&#20010;&#20307;&#65292;&#25110;&#27597;&#29483;&#21644;&#23567;&#29483;&#65289;&#12290;
			&#23454;&#20307;&#26377;&#33258;&#24049;&#30340;&#29983;&#21629;&#26399;&#65292;&#20801;&#35768;&#20849;&#20139;&#23545;&#20854;&#30340;&#24341;&#29992;&#65288;&#22240;&#27492;&#20174;&#38598;&#21512;&#20013;&#31227;&#38500;&#19968;&#20010;&#23454;&#20307;&#65292;&#19981;&#24847;&#21619;&#30528;&#23427;&#21487;&#20197;&#34987;&#21024;&#38500;&#65289;&#65292;
			&#24182;&#19988;&#23454;&#20307;&#21040;&#20854;&#20182;&#20851;&#32852;&#23454;&#20307;&#20043;&#38388;&#40664;&#35748;&#27809;&#26377;&#32423;&#32852;&#25805;&#20316;&#30340;&#35774;&#32622;&#12290;
            Hibernate&#40664;&#35748;&#19981;&#23454;&#29616;&#25152;&#35859;&#30340;<span class="emphasis"><em>&#21487;&#21040;&#36798;&#21363;&#25345;&#20037;&#21270;&#65288;persistence by reachability&#65289;</em></span>&#30340;&#31574;&#30053;&#12290;
        </p><p>
        	&#27599;&#20010;Hibernate session&#30340;&#22522;&#26412;&#25805;&#20316; - &#21253;&#25324; <tt class="literal">persist(), merge(),
            saveOrUpdate(), delete(), lock(), refresh(), evict(), replicate()</tt> - &#37117;&#26377;&#23545;&#24212;&#30340;&#32423;&#32852;&#39118;&#26684;(cascade style)&#12290;
    		&#36825;&#20123;&#32423;&#32852;&#39118;&#26684;(cascade style)&#39118;&#26684;&#20998;&#21035;&#21629;&#21517;&#20026; <tt class="literal">create, 
            merge, save-update, delete, lock, refresh, evict, replicate</tt>&#12290;
            &#22914;&#26524;&#20320;&#24076;&#26395;&#19968;&#20010;&#25805;&#20316;&#34987;&#39034;&#30528;&#20851;&#32852;&#20851;&#31995;&#32423;&#32852;&#20256;&#25773;&#65292;&#20320;&#24517;&#39035;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#25351;&#20986;&#36825;&#19968;&#28857;&#12290;&#20363;&#22914;&#65306;
        </p><pre class="programlisting">&lt;one-to-one name="person" cascade="persist"/&gt;</pre><p>
            &#32423;&#32852;&#39118;&#26684;(cascade style)&#26159;&#21487;&#32452;&#21512;&#30340;:
        </p><pre class="programlisting">&lt;one-to-one name="person" cascade="persist,delete,lock"/&gt;</pre><p>
            &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">cascade="all"</tt>&#26469;&#25351;&#23450;<span class="emphasis"><em>&#20840;&#37096;</em></span>&#25805;&#20316;&#37117;&#39034;&#30528;&#20851;&#32852;&#20851;&#31995;&#32423;&#32852;(cascaded)&#12290;
			&#40664;&#35748;&#20540;&#26159;<tt class="literal">cascade="none"</tt>&#65292;&#21363;&#20219;&#20309;&#25805;&#20316;&#37117;&#19981;&#20250;&#34987;&#32423;&#32852;(cascaded)&#12290;
        </p><p>
        	&#27880;&#24847;&#26377;&#19968;&#20010;&#29305;&#27530;&#30340;&#32423;&#32852;&#39118;&#26684;(cascade style) <tt class="literal">delete-orphan</tt>&#65292;&#21482;&#24212;&#29992;&#20110;one-to-many&#20851;&#32852;&#65292;&#34920;&#26126;<tt class="literal">delete()</tt>&#25805;&#20316;
        	&#24212;&#35813;&#34987;&#24212;&#29992;&#20110;&#25152;&#26377;&#20174;&#20851;&#32852;&#20013;&#21024;&#38500;&#30340;&#23545;&#35937;&#12290;
        </p><p>
            &#24314;&#35758;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                	&#36890;&#24120;&#22312;<tt class="literal">&lt;many-to-one&gt;</tt>&#25110;<tt class="literal">&lt;many-to-many&gt;</tt>&#20851;&#31995;&#20013;&#24212;&#29992;&#32423;&#32852;(cascade)&#27809;&#20160;&#20040;&#24847;&#20041;&#12290;
					&#32423;&#32852;(cascade)&#36890;&#24120;&#22312; <tt class="literal">&lt;one-to-one&gt;</tt>&#21644;<tt class="literal">&lt;one-to-many&gt;</tt>&#20851;&#31995;&#20013;&#27604;&#36739;&#26377;&#29992;&#12290;
                </p></li><li><p>
                	&#22914;&#26524;&#23376;&#23545;&#35937;&#30340;&#23551;&#21629;&#38480;&#23450;&#22312;&#29238;&#20146;&#23545;&#35937;&#30340;&#23551;&#21629;&#20043;&#20869;&#65292;&#21487;&#36890;&#36807;&#25351;&#23450;<tt class="literal">cascade="all,delete-orphan"</tt>&#23558;&#20854;&#21464;&#20026;<span class="emphasis"><em>&#33258;&#21160;&#29983;&#21629;&#21608;&#26399;&#31649;&#29702;&#30340;&#23545;&#35937;(lifecycle object)</em></span>&#12290;
                </p></li><li><p>
                	&#20854;&#20182;&#24773;&#20917;&#65292;&#20320;&#21487;&#26681;&#26412;&#19981;&#38656;&#35201;&#32423;&#32852;(cascade)&#12290;&#20294;&#26159;&#22914;&#26524;&#20320;&#35748;&#20026;&#20320;&#20250;&#32463;&#24120;&#22312;&#26576;&#20010;&#20107;&#21153;&#20013;&#21516;&#26102;&#29992;&#21040;&#29238;&#23545;&#35937;&#19982;&#23376;&#23545;&#35937;&#65292;&#24182;&#19988;&#20320;&#24076;&#26395;&#23569;&#25171;&#28857;&#20799;&#23383;&#65292;&#21487;&#20197;&#32771;&#34385;&#20351;&#29992;<tt class="literal">cascade="persist,merge,save-update"</tt>&#12290;
                </p></li></ul></div><p>
        	&#21487;&#20197;&#20351;&#29992;<tt class="literal">cascade="all"</tt>&#23558;&#19968;&#20010;&#20851;&#32852;&#20851;&#31995;&#65288;&#26080;&#35770;&#26159;&#23545;&#20540;&#23545;&#35937;&#30340;&#20851;&#32852;&#65292;&#25110;&#32773;&#23545;&#19968;&#20010;&#38598;&#21512;&#30340;&#20851;&#32852;&#65289;&#26631;&#35760;&#20026;<span class="emphasis"><em>&#29238;/&#23376;</em></span>&#20851;&#31995;&#30340;&#20851;&#32852;&#12290;
        	&#36825;&#26679;&#23545;&#29238;&#23545;&#35937;&#36827;&#34892;save/update/delete&#25805;&#20316;&#23601;&#20250;&#23548;&#33268;&#23376;&#23545;&#35937;&#20063;&#36827;&#34892;save/update/delete&#25805;&#20316;&#12290;
        </p><p>
        	&#27492;&#22806;&#65292;&#19968;&#20010;&#25345;&#20037;&#30340;&#29238;&#23545;&#35937;&#23545;&#23376;&#23545;&#35937;&#30340;&#27973;&#24341;&#29992;(mere reference)&#20250;&#23548;&#33268;&#23376;&#23545;&#35937;&#34987;&#21516;&#27493;save/update&#12290;
        	&#19981;&#36807;&#65292;&#36825;&#20010;&#38544;&#21947;(metaphor)&#30340;&#35828;&#27861;&#24182;&#19981;&#23436;&#25972;&#12290;&#38500;&#38750;&#20851;&#32852;&#26159;<tt class="literal">&lt;one-to-many&gt;</tt>&#20851;&#32852;&#24182;&#19988;&#34987;&#26631;&#35760;&#20026;<tt class="literal">cascade="delete-orphan"</tt>&#65292;
        	&#21542;&#21017;&#29238;&#23545;&#35937;&#22833;&#21435;&#23545;&#26576;&#20010;&#23376;&#23545;&#35937;&#30340;&#24341;&#29992;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#23548;&#33268;&#35813;&#23376;&#23545;&#35937;&#34987;&#33258;&#21160;&#21024;&#38500;&#12290;
        	&#29238;&#23376;&#20851;&#31995;&#30340;&#32423;&#32852;(cascading)&#25805;&#20316;&#20934;&#30830;&#35821;&#20041;&#22914;&#19979;&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#22914;&#26524;&#29238;&#23545;&#35937;&#34987;<tt class="literal">persist()</tt>&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#20063;&#20250;&#34987;<tt class="literal">persist()</tt>
                </p></li><li><p>
                     &#22914;&#26524;&#29238;&#23545;&#35937;&#34987;<tt class="literal">merge()</tt>&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#20063;&#20250;&#34987;<tt class="literal">merge()</tt>
                </p></li><li><p>
                     &#22914;&#26524;&#29238;&#23545;&#35937;&#34987;<tt class="literal">save()</tt>&#65292;<tt class="literal">update()</tt>&#25110;
                    <tt class="literal">saveOrUpdate()</tt>&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#21017;&#20250;&#34987;<tt class="literal">saveOrUpdate()</tt>
                </p></li><li><p>
                	&#22914;&#26524;&#26576;&#20010;&#25345;&#20037;&#30340;&#29238;&#23545;&#35937;&#24341;&#29992;&#20102;&#30636;&#26102;(transient)&#25110;&#32773;&#33073;&#31649;(detached)&#30340;&#23376;&#23545;&#35937;&#65292;&#37027;&#20040;&#23376;&#23545;&#35937;&#23558;&#20250;&#34987;<tt class="literal">saveOrUpdate()</tt>
                </p></li><li><p>
                    &#22914;&#26524;&#29238;&#23545;&#35937;&#34987;&#21024;&#38500;&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#20063;&#20250;&#34987;<tt class="literal">delete()</tt>
                </p></li><li><p>
                	&#38500;&#38750;&#34987;&#26631;&#35760;&#20026;<tt class="literal">cascade="delete-orphan"</tt>&#65288;&#21024;&#38500;&#8220;&#23396;&#20799;&#8221;&#27169;&#24335;&#65292;&#27492;&#26102;&#19981;&#34987;&#20219;&#20309;&#19968;&#20010;&#29238;&#23545;&#35937;&#24341;&#29992;&#30340;&#23376;&#23545;&#35937;&#20250;&#34987;&#21024;&#38500;&#65289;&#65292;
                	&#21542;&#21017;&#23376;&#23545;&#35937;&#22833;&#25481;&#29238;&#23545;&#35937;&#23545;&#20854;&#30340;&#24341;&#29992;&#26102;&#65292;<span class="emphasis"><em>&#20160;&#20040;&#20107;&#20063;&#19981;&#20250;&#21457;&#29983;</em></span>&#12290;
                	&#22914;&#26524;&#26377;&#29305;&#27530;&#38656;&#35201;&#65292;&#24212;&#29992;&#31243;&#24207;&#21487;&#36890;&#36807;&#26174;&#24335;&#35843;&#29992;delete()&#21024;&#38500;&#23376;&#23545;&#35937;&#12290;
                </p></li></ul></div><p>
            &#26368;&#21518;&#65292;&#27880;&#24847;&#25805;&#20316;&#30340;&#32423;&#32852;&#21487;&#33021;&#26159;&#22312;<span class="emphasis"><em>&#35843;&#29992;&#26399;(call time)</em></span>&#25110;&#32773;<span class="emphasis"><em>&#20889;&#20837;&#26399;(flush time)</em></span>&#20316;&#29992;&#21040;&#23545;&#35937;&#22270;&#19978;&#30340;&#12290;&#25152;&#26377;&#30340;&#25805;&#20316;&#65292;&#22914;&#26524;&#20801;&#35768;&#65292;&#37117;&#22312;&#25805;&#20316;&#34987;&#25191;&#34892;&#30340;&#26102;&#20505;&#32423;&#32852;&#21040;&#21487;&#35302;&#21450;&#30340;&#20851;&#32852;&#23454;&#20307;&#19978;&#12290;&#28982;&#32780;&#65292;<tt class="literal">save-upate</tt>&#21644;<tt class="literal">delete-orphan</tt>&#26159;&#22312;<tt class="literal">Session</tt> flush&#30340;&#26102;&#20505;&#25165;&#20316;&#29992;&#21040;&#25152;&#26377;&#21487;&#35302;&#21450;&#30340;&#34987;&#20851;&#32852;&#23545;&#35937;&#19978;&#30340;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-metadata"></a>10.12.&nbsp;&#20351;&#29992;&#20803;&#25968;&#25454;</h2></div></div><div></div></div><p>
            Hibernate&#20013;&#26377;&#19968;&#20010;&#38750;&#24120;&#20016;&#23500;&#30340;&#20803;&#32423;&#21035;(meta-level)&#30340;&#27169;&#22411;&#65292;&#21547;&#26377;&#25152;&#26377;&#30340;&#23454;&#20307;&#21644;&#20540;&#31867;&#22411;&#25968;&#25454;&#30340;&#20803;&#25968;&#25454;&#12290;
              &#26377;&#26102;&#36825;&#20010;&#27169;&#22411;&#23545;&#24212;&#29992;&#31243;&#24207;&#26412;&#36523;&#20063;&#20250;&#38750;&#24120;&#26377;&#29992;&#12290;
              &#27604;&#22914;&#35828;&#65292;&#24212;&#29992;&#31243;&#24207;&#21487;&#33021;&#22312;&#23454;&#29616;&#19968;&#31181;&#8220;&#26234;&#33021;&#8221;&#30340;&#28145;&#24230;&#25335;&#36125;&#31639;&#27861;&#26102;&#65292;
              &#36890;&#36807;&#20351;&#29992;Hibernate&#30340;&#20803;&#25968;&#25454;&#26469;&#20102;&#35299;&#21738;&#20123;&#23545;&#35937;&#24212;&#35813;&#34987;&#25335;&#36125;&#65288;&#27604;&#22914;&#65292;&#21487;&#21464;&#30340;&#20540;&#31867;&#22411;&#25968;&#25454;&#65289;&#65292;
              &#37027;&#20123;&#19981;&#24212;&#35813;&#65288;&#19981;&#21487;&#21464;&#30340;&#20540;&#31867;&#22411;&#25968;&#25454;&#65292;&#20063;&#35768;&#36824;&#26377;&#26576;&#20123;&#34987;&#20851;&#32852;&#30340;&#23454;&#20307;&#65289;&#12290;
        </p><p>
            Hibernate&#25552;&#20379;&#20102;<tt class="literal">ClassMetadata</tt>&#25509;&#21475;&#65292;<tt class="literal">CollectionMetadata</tt>&#25509;&#21475;&#21644;<tt class="literal">Type</tt>&#23618;&#27425;&#20307;&#31995;&#26469;&#35775;&#38382;&#20803;&#25968;&#25454;&#12290;
              &#21487;&#20197;&#36890;&#36807;<tt class="literal">SessionFactory</tt>&#33719;&#21462;&#20803;&#25968;&#25454;&#25509;&#21475;&#30340;&#23454;&#20363;&#12290;
        </p><pre class="programlisting">Cat fritz = ......;
ClassMetadata catMeta = sessionfactory.getClassMetadata(Cat.class);

Object[] propertyValues = catMeta.getPropertyValues(fritz);
String[] propertyNames = catMeta.getPropertyNames();
Type[] propertyTypes = catMeta.getPropertyTypes();

// get a Map of all properties which are not collections or associations
Map namedValues = new HashMap();
for ( int i=0; i&lt;propertyNames.length; i++ ) {
    if ( !propertyTypes[i].isEntityType() &amp;&amp; !propertyTypes[i].isCollectionType() ) {
        namedValues.put( propertyNames[i], propertyValues[i] );
    }
}</pre></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="transactions"></a>&#31532;&nbsp;11&nbsp;&#31456;&nbsp;&#20107;&#21153;&#21644;&#24182;&#21457;</h2></div></div><div></div></div><p>
			Hibernate&#30340;&#20107;&#21153;&#21644;&#24182;&#21457;&#25511;&#21046;&#24456;&#23481;&#26131;&#25484;&#25569;&#12290;Hibernate&#30452;&#25509;&#20351;&#29992;JDBC&#36830;&#25509;&#21644;JTA&#36164;&#28304;&#65292;&#19981;&#28155;&#21152;&#20219;&#20309;&#38468;&#21152;&#38145;&#23450;
			&#34892;&#20026;&#12290;&#25105;&#20204;&#24378;&#28872;&#25512;&#33616;&#20320;&#33457;&#28857;&#26102;&#38388;&#20102;&#35299;JDBC&#32534;&#31243;&#65292;ANSI SQL&#26597;&#35810;&#35821;&#35328;&#21644;&#20320;&#20351;&#29992;
			&#30340;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#20107;&#21153;&#38548;&#31163;&#35268;&#33539;&#12290;
	</p><p>
        Hibernate&#19981;&#38145;&#23450;&#20869;&#23384;&#20013;&#30340;&#23545;&#35937;&#12290;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20250;&#25353;&#29031;&#20320;&#30340;&#25968;&#25454;&#24211;&#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#35268;&#23450;&#30340;&#37027;&#26679;&#36816;&#20316;&#12290;&#24184;&#20111;&#26377;&#20102;<tt class="literal">Session</tt>&#65292;&#20351;&#24471;Hibernate&#36890;&#36807;&#26631;&#35782;&#31526;&#26597;&#25214;&#65292;&#21644;&#23454;&#20307;&#26597;&#35810;&#65288;&#19981;&#26159;&#36820;&#22238;&#26631;&#37327;&#20540;&#30340;&#25253;&#34920;&#26597;&#35810;&#65289;&#25552;&#20379;&#20102;&#21487;&#37325;&#22797;&#30340;&#35835;&#21462;&#65288;Repeatable reads&#65289;&#21151;&#33021;&#65292;<tt class="literal">Session</tt>&#21516;&#26102;&#20063;&#26159;&#20107;&#21153;&#33539;&#22260;&#20869;&#30340;&#32531;&#23384;&#65288;cache&#65289;&#12290;
    </p><p>
				&#38500;&#20102;&#23545;&#33258;&#21160;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046;&#25552;&#20379;&#29256;&#26412;&#31649;&#29702;&#65292;&#38024;&#23545;&#34892;&#32423;&#24754;&#35266;&#38145;&#23450;&#65292;Hibernate&#20063;&#25552;&#20379;&#20102;&#36741;&#21161;&#30340;&#65288;&#36739;&#23567;&#30340;)API&#65292;&#23427;&#20351;&#29992;&#20102;
				<tt class="literal">SELECT FOR UPDATE</tt>&#30340;SQL&#35821;&#27861;&#12290;&#26412;&#31456;&#21518;&#38754;&#20250;&#35752;&#35770;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046;&#21644;&#36825;&#20010;API&#12290;
		</p><p>
					&#25105;&#20204;&#20174;<tt class="literal">Configuration</tt>&#23618;&#12289;<tt class="literal">SessionFactory</tt>&#23618;, &#21644;
      		<tt class="literal">Session</tt>&#23618;&#24320;&#22987;&#35752;&#35770;Hibernate&#30340;&#24182;&#34892;&#25511;&#21046;&#12289;&#25968;&#25454;&#24211;&#20107;&#21153;&#21644;&#24212;&#29992;
        	&#31243;&#24207;&#30340;&#38271;&#20107;&#21153;&#12290;
	</p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="transactions-basics"></a>11.1.&nbsp;Session&#21644;&#20107;&#21153;&#33539;&#22260;(transaction scope)</h2></div></div><div></div></div><p>
						<tt class="literal">SessionFactory</tt>&#23545;&#35937;&#30340;&#21019;&#24314;&#20195;&#20215;&#24456;&#26114;&#36149;&#65292;&#23427;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#23545;&#35937;&#65292;&#23427;&#20026;&#25152;&#26377;&#30340;&#24212;&#29992;&#31243;&#24207;&#32447;&#31243;&#25152;&#20849;&#20139;&#12290;&#23427;&#21482;&#21019;&#24314;&#19968;&#27425;&#65292;&#36890;&#24120;&#26159;&#22312;&#24212;&#29992;&#31243;&#24207;&#21551;&#21160;&#30340;&#26102;&#20505;&#65292;&#30001;&#19968;&#20010;<tt class="literal">Configuraion</tt>&#30340;&#23454;&#20363;&#26469;&#21019;&#24314;&#12290;				
				</p><p>
						<tt class="literal">Session</tt>&#23545;&#35937;&#30340;&#21019;&#24314;&#20195;&#20215;&#27604;&#36739;&#23567;&#65292;&#26159;&#38750;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#23545;&#20110;&#21333;&#20010;&#35831;&#27714;&#65292;&#21333;&#20010;&#20250;&#35805;&#12289;&#21333;&#20010;&#30340;
						&#24037;&#20316;&#21333;&#20803;&#32780;&#35328;&#65292;&#23427;&#21482;&#34987;&#20351;&#29992;&#19968;&#27425;&#65292;&#28982;&#21518;&#23601;&#20002;&#24323;&#12290;&#21482;&#26377;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#65292;&#19968;&#20010;<tt class="literal">Session</tt>&#23545;&#35937;
						&#25165;&#20250;&#33719;&#21462;&#19968;&#20010;JDBC&#30340;<tt class="literal">Connection</tt>&#65288;&#25110;&#19968;&#20010;<tt class="literal">Datasource</tt>&#65289;
						&#23545;&#35937;&#65292;&#22240;&#27492;&#20551;&#33509;&#19981;&#20351;&#29992;&#30340;&#26102;&#20505;&#23427;&#19981;&#28040;&#36153;&#20219;&#20309;&#36164;&#28304;&#12290;
				</p><p>
					&#27492;&#22806;&#25105;&#20204;&#36824;&#35201;&#32771;&#34385;&#25968;&#25454;&#24211;&#20107;&#21153;&#12290;&#25968;&#25454;&#24211;&#20107;&#21153;&#24212;&#35813;&#23613;&#21487;&#33021;&#30340;&#30701;&#65292;&#38477;&#20302;&#25968;&#25454;&#24211;&#20013;&#30340;&#38145;&#20105;&#29992;&#12290;
					&#25968;&#25454;&#24211;&#38271;&#20107;&#21153;&#20250;&#38459;&#27490;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#25193;&#23637;&#21040;&#39640;&#30340;&#24182;&#21457;&#36127;&#36733;&#12290;&#22240;&#27492;&#65292;&#20551;&#33509;&#22312;&#29992;&#25143;&#24605;&#32771;&#26399;&#38388;&#35753;&#25968;&#25454;&#24211;&#20107;&#21153;&#24320;&#30528;&#65292;&#30452;&#21040;&#25972;&#20010;&#24037;&#20316;&#21333;&#20803;&#23436;&#25104;&#25165;&#20851;&#38381;&#36825;&#20010;&#20107;&#21153;&#65292;&#36825;&#32477;&#19981;&#26159;&#19968;&#20010;&#22909;&#30340;&#35774;&#35745;&#12290;
				</p><p>
				&#19968;&#20010;&#25805;&#20316;&#21333;&#20803;(Unit of work)&#30340;&#33539;&#22260;&#26159;&#22810;&#22823;&#65311;&#21333;&#20010;&#30340;Hibernate <tt class="literal">Session</tt>&#33021;&#36328;&#36234;&#22810;&#20010;
				&#25968;&#25454;&#24211;&#20107;&#21153;&#21527;&#65311;&#36824;&#26159;&#19968;&#20010;<tt class="literal">Session</tt>&#30340;&#20316;&#29992;&#33539;&#22260;&#23545;&#24212;&#19968;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#30340;&#33539;&#22260;&#65311;&#24212;&#35813;&#20309;&#26102;&#25171;&#24320;
				<tt class="literal">Session</tt>&#65292;&#20309;&#26102;&#20851;&#38381;<tt class="literal">Session</tt>&#65311;&#65292;&#20320;&#21448;&#22914;&#20309;&#21010;&#20998;&#25968;&#25454;&#24211;&#20107;&#21153;&#30340;&#36793;&#30028;&#21602;&#65311;
		</p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-basics-uow"></a>11.1.1.&nbsp;&#25805;&#20316;&#21333;&#20803;(Unit of work)</h3></div></div><div></div></div><p>
				&#39318;&#20808;&#65292;&#21035;&#29992;<span class="emphasis"><em>session-per-operation</em></span>&#36825;&#31181;&#21453;&#27169;&#24335;&#20102;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#22312;&#21333;&#20010;&#32447;&#31243;&#20013;&#65292;
				&#19981;&#35201;&#22240;&#20026;&#19968;&#27425;&#31616;&#21333;&#30340;&#25968;&#25454;&#24211;&#35843;&#29992;&#65292;&#23601;&#25171;&#24320;&#21644;&#20851;&#38381;&#19968;&#27425;<tt class="literal">Session</tt>&#65281;&#25968;&#25454;&#24211;&#20107;&#21153;&#20063;&#26159;&#22914;&#27492;&#12290;
				&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#25968;&#25454;&#24211;&#35843;&#29992;&#26159;&#25353;&#29031;&#35745;&#21010;&#22909;&#30340;&#27425;&#24207;&#65292;&#20998;&#32452;&#20026;&#21407;&#23376;&#30340;&#25805;&#20316;&#21333;&#20803;&#12290;&#65288;&#27880;&#24847;&#65292;&#36825;&#20063;&#24847;&#21619;&#30528;&#65292;&#24212;&#29992;&#31243;
				&#24207;&#20013;&#65292;&#22312;&#21333;&#20010;&#30340;SQL&#35821;&#21477;&#21457;&#36865;&#20043;&#21518;&#65292;&#33258;&#21160;&#20107;&#21153;&#25552;&#20132;(auto-commit)&#27169;&#24335;&#22833;&#25928;&#20102;&#12290;&#36825;&#31181;&#27169;&#24335;&#19987;&#38376;&#20026;SQL&#25511;&#21046;&#21488;&#25805;&#20316;&#35774;&#35745;&#30340;&#12290;
				Hibernate&#31105;&#27490;&#31435;&#21363;&#33258;&#21160;&#20107;&#21153;&#25552;&#20132;&#27169;&#24335;&#65292;&#25110;&#32773;&#26399;&#26395;&#24212;&#29992;&#26381;&#21153;&#22120;&#31105;&#27490;&#31435;&#21363;&#33258;&#21160;&#20107;&#21153;&#25552;&#20132;&#27169;&#24335;&#12290;&#65289;&#25968;&#25454;&#24211;&#20107;&#21153;&#32477;&#19981;&#26159;&#21487;&#26377;&#21487;&#26080;&#30340;&#65292;&#20219;&#20309;&#19982;&#25968;&#25454;&#24211;&#20043;&#38388;&#30340;&#36890;&#35759;&#37117;&#24517;&#39035;&#22312;&#26576;&#20010;&#20107;&#21153;&#20013;&#36827;&#34892;&#65292;&#19981;&#31649;&#20320;&#26159;&#22312;&#35835;&#36824;&#26159;&#22312;&#20889;&#25968;&#25454;&#12290;&#23545;&#35835;&#25968;&#25454;&#32780;&#35328;&#65292;&#24212;&#35813;&#36991;&#20813;auto-commit&#34892;&#20026;&#65292;&#22240;&#20026;&#24456;&#22810;&#23567;&#30340;&#20107;&#21153;&#27604;&#19968;&#20010;&#28165;&#26224;&#23450;&#20041;&#30340;&#24037;&#20316;&#21333;&#20803;&#24615;&#33021;&#24046;&#12290;&#21518;&#32773;&#20063;&#26356;&#23481;&#26131;&#32500;&#25252;&#21644;&#25193;&#23637;&#12290;
		</p><p>
				&#22312;&#22810;&#29992;&#25143;&#30340;client/server&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#26368;&#24120;&#29992;&#30340;&#27169;&#24335;&#26159; <span class="emphasis"><em>&#27599;&#20010;&#35831;&#27714;&#19968;&#20010;&#20250;&#35805;(session-per-request)</em></span>&#12290;
				&#22312;&#36825;&#31181;&#27169;&#24335;&#19979;&#65292;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#35831;&#27714;&#34987;&#21457;&#36865;&#21040;&#26381;&#21153;&#22120;&#31471;&#65288;&#21363;Hibernate&#25345;&#20037;&#21270;&#23618;&#36816;&#34892;&#30340;&#22320;&#26041;&#65289;&#65292;&#19968;
				&#20010;&#26032;&#30340;Hibernate <tt class="literal">Session</tt>&#34987;&#25171;&#24320;&#65292;&#24182;&#19988;&#25191;&#34892;&#36825;&#20010;&#25805;&#20316;&#21333;&#20803;&#20013;&#25152;&#26377;&#30340;&#25968;&#25454;&#24211;&#25805;&#20316;&#12290;
				&#19968;&#26086;&#25805;&#20316;&#23436;&#25104;&#65288;&#21516;&#26102;&#23545;&#23458;&#25143;&#31471;&#30340;&#21709;&#24212;&#20063;&#20934;&#22791;&#23601;&#32490;&#65289;&#65292;session&#34987;&#21516;&#27493;&#65292;&#28982;&#21518;&#20851;&#38381;&#12290;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#21333;
				&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#26469;&#22788;&#29702;&#23458;&#25143;&#31471;&#35831;&#27714;&#65292;&#22312;&#20320;&#25171;&#24320;<tt class="literal">Session</tt>&#20043;&#21518;&#21551;&#21160;&#20107;&#21153;&#65292;&#22312;&#20320;&#20851;&#38381;
				<tt class="literal">Session</tt>&#20043;&#21069;&#25552;&#20132;&#20107;&#21153;&#12290;&#20250;&#35805;&#21644;&#35831;&#27714;&#20043;&#38388;&#30340;&#20851;&#31995;&#26159;&#19968;&#23545;&#19968;&#30340;&#20851;&#31995;&#65292;&#36825;&#31181;&#27169;&#24335;&#23545;
				&#20110;&#22823;&#22810;&#25968;&#24212;&#29992;&#31243;&#24207;&#26469;&#35828;&#26159;&#24456;&#26834;&#30340;&#12290;
		</p><p>
                &#23454;&#29616;&#25165;&#26159;&#30495;&#27491;&#30340;&#25361;&#25112;&#12290;Hibernate&#20869;&#32622;&#20102;&#23545;"&#24403;&#21069;session(current session)" &#30340;&#31649;&#29702;&#65292;&#29992;&#20110;&#31616;&#21270;&#27492;&#27169;&#24335;&#12290;&#20320;&#35201;&#20570;&#30340;&#19968;&#20999;&#23601;&#26159;&#22312;&#26381;&#21153;&#22120;&#31471;&#35201;&#22788;&#29702;&#35831;&#27714;&#30340;&#26102;&#20505;&#65292;&#24320;&#21551;&#20107;&#21153;&#65292;&#22312;&#21709;&#24212;&#21457;&#36865;&#32473;&#23458;&#25143;&#20043;&#21069;&#32467;&#26463;&#20107;&#21153;&#12290;&#20320;&#21487;&#20197;&#29992;&#20219;&#20309;&#26041;&#24335;&#26469;&#23436;&#25104;&#36825;&#19968;&#25805;&#20316;&#65292;&#36890;&#24120;&#30340;&#26041;&#26696;&#26377;<tt class="literal">ServletFilter</tt>&#65292;&#22312;service&#26041;&#27861;&#20013;&#36827;&#34892;pointcut&#30340;AOP&#25318;&#25130;&#22120;&#65292;&#25110;&#32773;proxy/interception&#23481;&#22120;&#12290;EJB&#23481;&#22120;&#26159;&#23454;&#29616;&#27178;&#20999;&#35832;&#22914;EJB session bean&#19978;&#30340;&#20107;&#21153;&#20998;&#30028;&#65292;&#29992;CMT&#23545;&#20107;&#21153;&#36827;&#34892;&#22768;&#26126;&#31561;&#26041;&#38754;&#30340;&#26631;&#20934;&#25163;&#27573;&#12290;&#20551;&#33509;&#20320;&#20915;&#23450;&#20351;&#29992;&#32534;&#31243;&#24335;&#30340;&#20107;&#21153;&#20998;&#30028;&#65292;&#35831;&#21442;&#32771;&#26412;&#31456;&#21518;&#38754;&#35762;&#21040;&#30340;Hibernate <tt class="literal">Transaction</tt> API&#65292;&#36825;&#23545;&#26131;&#29992;&#24615;&#21644;&#20195;&#30721;&#21487;&#31227;&#26893;&#24615;&#37117;&#26377;&#22909;&#22788;&#12290;
            </p><p>
                &#22312;&#20219;&#20309;&#26102;&#38388;&#65292;&#20219;&#20309;&#22320;&#26041;&#65292;&#20320;&#30340;&#24212;&#29992;&#20195;&#30721;&#21487;&#20197;&#36890;&#36807;&#31616;&#21333;&#30340;&#35843;&#29992;<tt class="literal">sessionFactory.getCurrentSession()</tt>&#26469;&#35775;&#38382;"&#24403;&#21069;session"&#65292;&#29992;&#20110;&#22788;&#29702;&#35831;&#27714;&#12290;&#20320;&#24635;&#26159;&#20250;&#24471;&#21040;&#24403;&#21069;&#25968;&#25454;&#24211;&#20107;&#21153;&#33539;&#22260;&#20869;&#30340;<tt class="literal">Session</tt>&#12290;&#22312;&#20351;&#29992;&#26412;&#22320;&#36164;&#28304;&#25110;JTA&#29615;&#22659;&#26102;&#65292;&#24517;&#39035;&#37197;&#32622;&#23427;&#65292;&#35831;&#21442;&#35265;<a href="#architecture-current-session" title="2.5.&nbsp;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session">&#31532;&nbsp;2.5&nbsp;&#33410; &#8220;&#19978;&#19979;&#25991;&#30456;&#20851;&#30340;&#65288;Contextual&#65289;Session&#8221;</a>&#12290;
            </p><p>
                &#26377;&#26102;&#65292;&#23558;<tt class="literal">Session</tt>&#21644;&#25968;&#25454;&#24211;&#20107;&#21153;&#30340;&#36793;&#30028;&#24310;&#20280;&#21040;"&#23637;&#31034;&#23618;&#34987;&#28210;&#26579;&#21518;"&#20250;&#24102;&#26469;&#20415;&#21033;&#12290;&#26377;&#20123;serlvet&#24212;&#29992;&#31243;&#24207;&#22312;&#23545;&#35831;&#27714;&#36827;&#34892;&#22788;&#29702;&#21518;&#65292;&#26377;&#20010;&#21333;&#29420;&#30340;&#28210;&#26579;&#26399;&#65292;&#36825;&#31181;&#24310;&#20280;&#23545;&#36825;&#31181;&#31243;&#24207;&#29305;&#21035;&#26377;&#29992;&#12290;&#20551;&#33509;&#20320;&#23454;&#29616;&#20320;&#33258;&#24049;&#30340;&#25318;&#25130;&#22120;&#65292;&#25226;&#20107;&#21153;&#36793;&#30028;&#24310;&#20280;&#21040;&#23637;&#31034;&#23618;&#28210;&#26579;&#32467;&#26463;&#21518;&#38750;&#24120;&#23481;&#26131;&#12290;&#28982;&#32780;&#65292;&#20551;&#33509;&#20320;&#20381;&#36182;&#26377;&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;&#30340;EJB&#65292;&#36825;&#23601;&#19981;&#22826;&#23481;&#26131;&#20102;&#65292;&#22240;&#20026;&#20107;&#21153;&#20250;&#22312;EJB&#26041;&#27861;&#36820;&#22238;&#21518;&#32467;&#26463;&#65292;&#32780;&#37027;&#26159;&#22312;&#20219;&#20309;&#23637;&#31034;&#23618;&#28210;&#26579;&#24320;&#22987;&#20043;&#21069;&#12290;&#35831;&#35775;&#38382;Hibernate&#32593;&#31449;&#21644;&#35770;&#22363;&#65292;&#20320;&#21487;&#20197;&#25214;&#21040;<span class="emphasis"><em>Open Session in View</em></span>&#36825;&#19968;&#27169;&#24335;&#30340;&#25552;&#31034;&#21644;&#31034;&#20363;&#12290;
             </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-basics-apptx"></a>11.1.2.&nbsp;&#38271;&#23545;&#35805;</h3></div></div><div></div></div><p>
							session-per-request&#27169;&#24335;&#19981;&#20165;&#20165;&#26159;&#19968;&#20010;&#21487;&#20197;&#29992;&#26469;&#35774;&#35745;&#25805;&#20316;&#21333;&#20803;&#30340;&#26377;&#29992;&#27010;&#24565;&#12290;&#24456;&#22810;&#19994;&#21153;&#22788;&#29702;&#37117;&#38656;
							&#35201;&#19968;&#31995;&#21015;&#23436;&#25972;&#30340;&#19982;&#29992;&#25143;&#20043;&#38388;&#30340;&#20132;&#20114;&#65292;&#32780;&#36825;&#20123;&#29992;&#25143;&#26159;&#25351;&#23545;&#25968;&#25454;&#24211;&#26377;&#20132;&#21449;&#35775;&#38382;&#30340;&#29992;&#25143;&#12290;&#22312;&#22522;&#20110;web&#30340;&#24212;&#29992;&#21644;&#20225;&#19994;
							&#24212;&#29992;&#20013;&#65292;&#36328;&#29992;&#25143;&#20132;&#20114;&#30340;&#25968;&#25454;&#24211;&#20107;&#21153;&#26159;&#26080;&#27861;&#25509;&#21463;&#30340;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;
						</p><div class="itemizedlist"><ul type="disc"><li><p>
												&#22312;&#30028;&#38754;&#30340;&#31532;&#19968;&#23631;&#65292;&#25171;&#24320;&#23545;&#35805;&#26694;&#65292;&#29992;&#25143;&#25152;&#30475;&#21040;&#30340;&#25968;&#25454;&#26159;&#34987;&#19968;&#20010;&#29305;&#23450;&#30340; <tt class="literal">Session</tt> &#21644;&#25968;&#25454;
												&#24211;&#20107;&#21153;&#36733;&#20837;(load)&#30340;&#12290;&#29992;&#25143;&#21487;&#20197;&#38543;&#24847;&#20462;&#25913;&#23545;&#35805;&#26694;&#20013;&#30340;&#25968;&#25454;&#23545;&#35937;&#12290;
										</p></li><li><p>
						5&#20998;&#38047;&#21518;&#65292;&#29992;&#25143;&#28857;&#20987;&#8220;&#20445;&#23384;&#8221;&#65292;&#26399;&#26395;&#25152;&#20570;&#20986;&#30340;&#20462;&#25913;&#34987;&#25345;&#20037;&#21270;&#65307;&#21516;&#26102;&#20182;&#20063;&#26399;&#26395;&#33258;&#24049;&#26159;&#21807;&#19968;&#20462;&#25913;&#36825;&#20010;&#20449;&#24687;&#30340;&#20154;&#65292;&#19981;&#20250;&#20986;&#29616;
						&#20462;&#25913;&#20914;&#31361;&#12290;
				</p></li></ul></div><p>
				&#20174;&#29992;&#25143;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#25105;&#20204;&#25226;&#36825;&#20010;&#25805;&#20316;&#21333;&#20803;&#31216;&#20026;&#38271;&#26102;&#38388;&#36816;&#34892;&#30340;<span class="emphasis"><em>&#23545;&#35805;</em></span>&#65288;conversation&#65289;,&#25110;&#32773;(or <span class="emphasis"><em>&#24212;&#29992;&#20107;&#21153;</em></span>,application transaction)&#12290;
				&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#21487;&#20197;&#26377;&#24456;&#22810;&#31181;&#26041;&#27861;&#26469;&#23454;&#29616;&#23427;&#12290;
		</p><p>
				&#22836;&#19968;&#20010;&#24188;&#31258;&#30340;&#20570;&#27861;&#26159;&#65292;&#22312;&#29992;&#25143;&#24605;&#32771;&#30340;&#36807;&#31243;&#20013;&#65292;&#20445;&#25345;<tt class="literal">Session</tt>&#21644;&#25968;&#25454;&#24211;&#20107;&#21153;&#26159;&#25171;&#24320;&#30340;&#65292;
				&#20445;&#25345;&#25968;&#25454;&#24211;&#38145;&#23450;&#65292;&#20197;&#38459;&#27490;&#24182;&#21457;&#20462;&#25913;&#65292;&#20174;&#32780;&#20445;&#35777;&#25968;&#25454;&#24211;&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;&#21644;&#21407;&#23376;&#25805;&#20316;&#12290;&#36825;&#31181;&#26041;&#24335;&#24403;&#28982;&#26159;&#19968;&#20010;&#21453;&#27169;&#24335;&#65292;
				&#22240;&#20026;&#38145;&#20105;&#29992;&#20250;&#23548;&#33268;&#24212;&#29992;&#31243;&#24207;&#26080;&#27861;&#25193;&#23637;&#24182;&#21457;&#29992;&#25143;&#30340;&#25968;&#30446;&#12290;
		 </p><p>
				&#24456;&#26126;&#26174;&#65292;&#25105;&#20204;&#24517;&#39035;&#20351;&#29992;&#22810;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#26469;&#23454;&#29616;&#36825;&#20010;&#23545;&#35805;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#32500;&#25252;&#19994;&#21153;&#22788;&#29702;&#30340;
				&#20107;&#21153;&#38548;&#31163;&#21464;&#25104;&#20102;&#24212;&#29992;&#31243;&#24207;&#23618;&#30340;&#37096;&#20998;&#36131;&#20219;&#12290;&#19968;&#20010;&#23545;&#35805;&#36890;&#24120;&#36328;&#36234;&#22810;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#12290;&#22914;&#26524;&#20165;&#20165;&#21482;&#26377;&#19968;
				&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#65288;&#26368;&#21518;&#30340;&#37027;&#20010;&#20107;&#21153;&#65289;&#20445;&#23384;&#26356;&#26032;&#36807;&#30340;&#25968;&#25454;&#65292;&#32780;&#25152;&#26377;&#20854;&#20182;&#20107;&#21153;&#21482;&#26159;&#21333;&#32431;&#30340;&#35835;&#21462;&#25968;&#25454;&#65288;&#20363;&#22914;&#22312;&#19968;
				&#20010;&#36328;&#36234;&#22810;&#20010;&#35831;&#27714;/&#21709;&#24212;&#21608;&#26399;&#30340;&#21521;&#23548;&#39118;&#26684;&#30340;&#23545;&#35805;&#26694;&#20013;&#65289;&#65292;&#37027;&#20040;&#24212;&#29992;&#31243;&#24207;&#20107;&#21153;&#23558;&#20445;&#35777;&#20854;&#21407;&#23376;&#24615;&#12290;&#36825;&#31181;&#26041;&#24335;&#27604;&#21548;
				&#36215;&#26469;&#36824;&#35201;&#23481;&#26131;&#23454;&#29616;&#65292;&#29305;&#21035;&#26159;&#24403;&#20320;&#20351;&#29992;&#20102;Hibernate&#30340;&#19979;&#36848;&#29305;&#24615;&#30340;&#26102;&#20505;&#65306;
		</p><div class="itemizedlist"><ul type="disc"><li><p>
										<span class="emphasis"><em>&#33258;&#21160;&#29256;&#26412;&#21270;</em></span> - Hibernate&#33021;&#22815;&#33258;&#21160;&#36827;&#34892;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046; &#65292;&#22914;&#26524;&#22312;&#29992;&#25143;&#24605;&#32771;
										&#30340;&#36807;&#31243;&#20013;&#21457;&#29983;&#24182;&#21457;&#20462;&#25913;&#65292;Hibernate&#33021;&#22815;&#33258;&#21160;&#26816;&#27979;&#21040;&#12290;&#19968;&#33324;&#25105;&#20204;&#21482;&#22312;&#23545;&#35805;&#32467;&#26463;&#26102;&#25165;&#26816;&#26597;&#12290;
				</p></li><li><p>
						<span class="emphasis"><em>&#33073;&#31649;&#23545;&#35937;</em></span>&#65288;Detached Objects&#65289;- &#22914;&#26524;&#20320;&#20915;&#23450;&#37319;&#29992;&#21069;&#38754;&#24050;&#32463;&#35752;&#35770;&#36807;&#30340; 
						<span class="emphasis"><em>session-per-request</em></span>&#27169;&#24335;&#65292;&#25152;&#26377;&#36733;&#20837;&#30340;&#23454;&#20363;&#22312;&#29992;&#25143;&#24605;&#32771;&#30340;&#36807;&#31243;
						&#20013;&#37117;&#22788;&#20110;&#19982;Session&#33073;&#31163;&#30340;&#29366;&#24577;&#12290;Hibernate&#20801;&#35768;&#20320;&#25226;&#19982;Session&#33073;&#31163;&#30340;&#23545;&#35937;&#37325;&#26032;&#20851;&#32852;&#21040;Session
						&#19978;&#65292;&#24182;&#19988;&#23545;&#20462;&#25913;&#36827;&#34892;&#25345;&#20037;&#21270;&#65292;&#36825;&#31181;&#27169;&#24335;&#34987;&#31216;&#20026;
						<span class="emphasis"><em>session-per-request-with-detached-objects</em></span>&#12290;&#33258;&#21160;&#29256;&#26412;&#21270;&#34987;&#29992;&#26469;&#38548;&#31163;&#24182;&#21457;&#20462;&#25913;&#12290;
				</p></li><li><p>
						<span class="emphasis"><em>Extended (or Long) Session</em></span> - Hibernate &#30340;<tt class="literal">Session</tt>
						&#21487;&#20197;&#22312;&#25968;&#25454;&#24211;&#20107;&#21153;&#25552;&#20132;&#20043;&#21518;&#21644;&#24213;&#23618;&#30340;JDBC&#36830;&#25509;&#26029;&#24320;&#65292;&#24403;&#19968;&#20010;&#26032;&#30340;&#23458;&#25143;&#31471;&#35831;&#27714;&#21040;&#26469;&#30340;&#26102;&#20505;&#65292;&#23427;&#21448;&#37325;&#26032;&#36830;&#25509;&#19978;&#24213;&#23618;&#30340;
						JDBC&#36830;&#25509;&#12290;&#36825;&#31181;&#27169;&#24335;&#34987;&#31216;&#20043;&#20026;<span class="emphasis"><em>session-per-conversation</em></span>&#65292;&#36825;&#31181;&#24773;&#20917;&#21487;
						&#33021;&#20250;&#36896;&#25104;&#19981;&#24517;&#35201;&#30340;Session&#21644;JDBC&#36830;&#25509;&#30340;&#37325;&#26032;&#20851;&#32852;&#12290;&#33258;&#21160;&#29256;&#26412;&#21270;&#34987;&#29992;&#26469;&#38548;&#31163;&#24182;&#21457;&#20462;&#25913;, <tt class="literal">Session</tt>&#36890;&#24120;&#19981;&#20801;&#35768;&#33258;&#21160;flush,&#32780;&#26159;&#26126;&#30830;flush&#12290;
				</p></li></ul></div><p>
			 <span class="emphasis"><em>session-per-request-with-detached-objects</em></span> &#21644;
			 <span class="emphasis"><em>session-per-conversation</em></span> &#21508;&#26377;&#20248;&#32570;&#28857;&#65292;&#25105;&#20204;&#22312;&#26412;&#31456;&#21518;&#38754;&#20048;&#35266;&#24182;&#21457;
			 &#25511;&#21046;&#37027;&#37096;&#20998;&#20877;&#36827;&#34892;&#35752;&#35770;&#12290;
		</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-basics-identity"></a>11.1.3.&nbsp;&#20851;&#27880;&#23545;&#35937;&#26631;&#35782;(Considering object identity)</h3></div></div><div></div></div><p>
							&#24212;&#29992;&#31243;&#24207;&#21487;&#33021;&#22312;&#20004;&#20010;&#19981;&#21516;&#30340;<tt class="literal">Session</tt>&#20013;&#24182;&#21457;&#35775;&#38382;&#21516;&#19968;&#25345;&#20037;&#21270;&#29366;&#24577;&#65292;&#20294;&#26159;&#65292;
							&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#30340;&#23454;&#20363;&#26080;&#27861;&#22312;&#20004;&#20010; <tt class="literal">Session</tt>&#20013;&#20849;&#20139;&#12290;&#22240;&#27492;&#26377;&#20004;&#31181;&#19981;&#21516;&#30340;&#26631;&#35782;&#35821;&#20041;&#65306;
						</p><p>
            </p><div class="variablelist"><dl><dt><span class="term">&#25968;&#25454;&#24211;&#26631;&#35782;</span></dt><dd><p>
                            <tt class="literal">foo.getId().equals( bar.getId() )</tt>
                        </p></dd><dt><span class="term">JVM &#26631;&#35782;</span></dt><dd><p>
                            <tt class="literal">foo==bar</tt>
                        </p></dd></dl></div><p>

						</p><p>
							&#23545;&#20110;&#37027;&#20123;&#20851;&#32852;&#21040; <span class="emphasis"><em>&#29305;&#23450;</em></span><tt class="literal">Session</tt>
							&#65288;&#20063;&#23601;&#26159;&#22312;&#21333;&#20010;<tt class="literal">Session</tt>&#30340;&#33539;&#22260;&#20869;&#65289;&#19978;&#30340;&#23545;&#35937;&#26469;&#35828;&#65292;&#36825;
							&#20004;&#31181;&#26631;&#35782;&#30340;&#35821;&#20041;&#26159;&#31561;&#20215;&#30340;&#65292;&#19982;&#25968;&#25454;&#24211;&#26631;&#35782;&#23545;&#24212;&#30340;JVM&#26631;&#35782;&#26159;&#30001;Hibernate&#26469;&#20445;
							&#35777;&#30340;&#12290;&#19981;&#36807;&#65292;&#24403;&#24212;&#29992;&#31243;&#24207;&#22312;&#20004;&#20010;&#19981;&#21516;&#30340;session&#20013;&#24182;&#21457;&#35775;&#38382;&#20855;&#26377;&#21516;&#19968;&#25345;&#20037;&#21270;&#26631;
							&#35782;&#30340;&#19994;&#21153;&#23545;&#35937;&#23454;&#20363;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#19994;&#21153;&#23545;&#35937;&#30340;&#20004;&#20010;&#23454;&#20363;&#20107;&#23454;&#19978;&#26159;&#19981;&#30456;&#21516;&#30340;&#65288;&#20174;
							JVM&#35782;&#21035;&#26469;&#30475;&#65289;&#12290;&#36825;&#31181;&#20914;&#31361;&#21487;&#20197;&#36890;&#36807;&#22312;&#21516;&#27493;&#21644;&#25552;&#20132;&#30340;&#26102;&#20505;&#20351;&#29992;&#33258;&#21160;&#29256;&#26412;&#21270;&#21644;&#20048;
							&#35266;&#38145;&#23450;&#26041;&#27861;&#26469;&#35299;&#20915;&#12290;
						</p><p>
						</p><p>
								&#36825;&#31181;&#26041;&#24335;&#25226;&#20851;&#20110;&#24182;&#21457;&#30340;&#22836;&#30140;&#38382;&#39064;&#30041;&#32473;&#20102;Hibernate&#21644;&#25968;&#25454;&#24211;&#65307;&#30001;&#20110;&#22312;&#21333;&#20010;&#32447;&#31243;&#20869;&#65292;&#25805;&#20316;&#21333;&#20803;&#20013;&#30340;&#23545;&#35937;&#35782;&#21035;&#19981;
								&#38656;&#35201;&#20195;&#20215;&#26114;&#36149;&#30340;&#38145;&#23450;&#25110;&#20854;&#20182;&#24847;&#20041;&#19978;&#30340;&#21516;&#27493;&#65292;&#22240;&#27492;&#23427;&#21516;&#26102;&#21487;&#20197;&#25552;&#20379;&#26368;&#22909;&#30340;&#21487;&#20280;&#32553;&#24615;&#12290;&#21482;&#35201;&#22312;&#21333;&#20010;&#32447;&#31243;&#21482;&#25345;&#26377;&#19968;&#20010;
								<tt class="literal">Session</tt>&#65292;&#24212;&#29992;&#31243;&#24207;&#23601;&#19981;&#38656;&#35201;&#21516;&#27493;&#20219;&#20309;&#19994;&#21153;&#23545;&#35937;&#12290;&#22312;<tt class="literal">Session</tt>
								&#30340;&#33539;&#22260;&#20869;&#65292;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#25918;&#24515;&#30340;&#20351;&#29992;<tt class="literal">==</tt>&#36827;&#34892;&#23545;&#35937;&#27604;&#36739;&#12290;
						</p><p>
						</p><p>
								&#19981;&#36807;&#65292;&#24212;&#29992;&#31243;&#24207;&#22312;<tt class="literal">Session</tt>&#30340;&#22806;&#38754;&#20351;&#29992;<tt class="literal">==</tt>&#36827;&#34892;&#23545;&#35937;&#27604;&#36739;&#21487;&#33021;&#20250;
								&#23548;&#33268;&#26080;&#27861;&#39044;&#26399;&#30340;&#32467;&#26524;&#12290;&#22312;&#19968;&#20123;&#26080;&#27861;&#39044;&#26009;&#30340;&#22330;&#21512;&#65292;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#25226;&#20004;&#20010;&#33073;&#31649;&#23545;&#35937;&#23454;&#20363;&#25918;&#36827;&#21516;&#19968;&#20010;
								<tt class="literal">Set</tt>&#30340;&#26102;&#20505;&#65292;&#23601;&#21487;&#33021;&#21457;&#29983;&#12290;&#36825;&#20004;&#20010;&#23545;&#35937;&#23454;&#20363;&#21487;&#33021;&#26377;&#21516;&#19968;&#20010;&#25968;&#25454;&#24211;&#26631;&#35782;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;
								&#20182;&#20204;&#20195;&#34920;&#20102;&#34920;&#30340;&#21516;&#19968;&#34892;&#25968;&#25454;&#65289;&#65292;&#20174;JVM&#26631;&#35782;&#30340;&#23450;&#20041;&#19978;&#26469;&#35828;&#65292;&#23545;&#33073;&#31649;&#30340;&#23545;&#35937;&#32780;&#35328;&#65292;Hibernate&#26080;&#27861;&#20445;&#35777;&#20182;&#20204;
								&#30340;&#30340;JVM&#26631;&#35782;&#19968;&#33268;&#12290;&#24320;&#21457;&#20154;&#21592;&#24517;&#39035;&#35206;&#30422;&#25345;&#20037;&#21270;&#31867;&#30340;<tt class="literal">equals()</tt>&#26041;&#27861;&#21644; 
								<tt class="literal">hashCode()</tt> &#26041;&#27861;&#65292;&#20174;&#32780;&#23454;&#29616;&#33258;&#23450;&#20041;&#30340;&#23545;&#35937;&#30456;&#31561;&#35821;&#20041;&#12290;&#35686;&#21578;&#65306;&#19981;&#35201;&#20351;&#29992;&#25968;&#25454;&#24211;&#26631;&#35782;
								&#26469;&#23454;&#29616;&#23545;&#35937;&#30456;&#31561;&#65292;&#24212;&#35813;&#20351;&#29992;&#19994;&#21153;&#38190;&#20540;&#65292;&#30001;&#21807;&#19968;&#30340;&#65292;&#36890;&#24120;&#19981;&#21464;&#30340;&#23646;&#24615;&#32452;&#25104;&#12290;&#24403;&#19968;&#20010;&#30636;&#26102;&#23545;&#35937;&#34987;&#25345;&#20037;&#21270;&#30340;&#26102;
								&#20505;&#65292;&#23427;&#30340;&#25968;&#25454;&#24211;&#26631;&#35782;&#20250;&#21457;&#29983;&#25913;&#21464;&#12290;&#22914;&#26524;&#19968;&#20010;&#30636;&#26102;&#23545;&#35937;&#65288;&#36890;&#24120;&#20063;&#21253;&#25324;&#33073;&#31649;&#23545;&#35937;&#23454;&#20363;&#65289;&#34987;&#25918;&#20837;&#19968;
								&#20010;<tt class="literal">Set</tt>&#65292;&#25913;&#21464;&#23427;&#30340;hashcode&#20250;&#23548;&#33268;&#19982;&#36825;&#20010;<tt class="literal">Set</tt>&#30340;&#20851;&#31995;&#20013;&#26029;&#12290;&#34429;
								&#28982;&#19994;&#21153;&#38190;&#20540;&#30340;&#23646;&#24615;&#19981;&#35937;&#25968;&#25454;&#24211;&#20027;&#38190;&#37027;&#26679;&#31283;&#23450;&#19981;&#21464;&#65292;&#20294;&#26159;&#20320;&#21482;&#38656;&#35201;&#20445;&#35777;&#22312;&#21516;&#19968;&#20010;<tt class="literal">Set</tt>
								&#20013;&#30340;&#23545;&#35937;&#23646;&#24615;&#30340;&#31283;&#23450;&#24615;&#23601;&#36275;&#22815;&#20102;&#12290;&#35831;&#21040;Hibernate&#32593;&#31449;&#21435;&#23547;&#27714;&#36825;&#20010;&#38382;&#39064;&#26356;&#22810;&#30340;&#35814;&#32454;&#30340;&#35752;&#35770;&#12290;&#35831;&#27880;&#24847;&#65292;&#36825;&#19981;&#26159;&#19968;
								&#20010;&#26377;&#20851;Hibernate&#30340;&#38382;&#39064;&#65292;&#32780;&#20165;&#20165;&#26159;&#19968;&#20010;&#20851;&#20110;Java&#23545;&#35937;&#26631;&#35782;&#21644;&#21028;&#31561;&#34892;&#20026;&#22914;&#20309;&#23454;&#29616;&#30340;&#38382;&#39064;&#12290;
		 				</p><p>
		 </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-basics-issues"></a>11.1.4.&nbsp;&#24120;&#35265;&#38382;&#39064;</h3></div></div><div></div></div><p>
								&#20915;&#19981;&#35201;&#20351;&#29992;&#21453;&#27169;&#24335;<span class="emphasis"><em>session-per-user-session</em></span>&#25110;&#32773;<span class="emphasis"><em>
								session-per-application</em></span>&#65288;&#24403;&#28982;&#65292;&#36825;&#20010;&#35268;&#23450;&#20960;&#20046;&#27809;&#26377;&#20363;&#22806;&#65289;&#12290;&#35831;&#27880;&#24847;&#65292;
								&#19979;&#36848;&#19968;&#20123;&#38382;&#39064;&#21487;&#33021;&#20063;&#20250;&#20986;&#29616;&#22312;&#25105;&#20204;&#25512;&#33616;&#30340;&#27169;&#24335;&#20013;&#65292;&#22312;&#20320;&#20316;&#20986;&#26576;&#20010;&#35774;&#35745;&#20915;&#23450;&#20043;&#21069;&#65292;&#35831;&#21153;&#24517;&#29702;&#35299;&#35813;&#27169;&#24335;&#30340;&#24212;&#29992;&#21069;&#25552;&#12290;
						</p><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">Session</tt> &#23545;&#35937;&#26159;&#38750;&#32447;&#31243;&#23433;&#20840;&#30340;&#12290;&#22914;&#26524;&#19968;&#20010;<tt class="literal">Session</tt>
                        &#23454;&#20363;&#20801;&#35768;&#20849;&#20139;&#30340;&#35805;&#65292;&#37027;&#20123;&#25903;&#25345;&#24182;&#21457;&#36816;&#34892;&#30340;&#19996;&#19996;&#65292;&#20363;&#22914;HTTP request&#65292;session beans,&#25110;&#32773;&#26159;
                        Swing workers&#65292;&#23558;&#20250;&#23548;&#33268;&#20986;&#29616;&#36164;&#28304;&#20105;&#29992;&#65288;race condition&#65289;&#12290;&#22914;&#26524;&#22312;<tt class="literal">HttpSession</tt>&#20013;&#26377;
                        Hibernate &#30340;<tt class="literal">Session</tt>&#30340;&#35805;&#65288;&#31245;&#21518;&#35752;&#35770;&#65289;&#65292;&#20320;&#24212;&#35813;&#32771;&#34385;&#21516;&#27493;&#35775;&#38382;&#20320;&#30340;Http session&#12290;
                        &#21542;&#21017;&#65292;&#21482;&#35201;&#29992;&#25143;&#36275;&#22815;&#24555;&#30340;&#28857;&#20987;&#27983;&#35272;&#22120;&#30340;&#8220;&#21047;&#26032;&#8221;&#65292;&#23601;&#20250;&#23548;&#33268;&#20004;&#20010;&#24182;&#21457;&#36816;&#34892;&#32447;&#31243;&#20351;&#29992;&#21516;&#19968;&#20010;
                         <tt class="literal">Session</tt>&#12290;
                    </p></li><li><p>
					 								&#19968;&#20010;&#30001;Hibernate&#25243;&#20986;&#30340;&#24322;&#24120;&#24847;&#21619;&#30528;&#20320;&#24517;&#39035;&#31435;&#21363;&#22238;&#28378;&#25968;&#25454;&#24211;&#20107;&#21153;&#65292;&#24182;&#31435;&#21363;&#20851;&#38381;<tt class="literal">Session</tt>
					 								&#65288;&#31245;&#21518;&#20250;&#23637;&#24320;&#35752;&#35770;&#65289;&#12290;&#22914;&#26524;&#20320;&#30340;<tt class="literal">Session</tt>&#32465;&#23450;&#21040;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#19978;&#65292;&#20320;&#24517;
					 								&#39035;&#20572;&#27490;&#35813;&#24212;&#29992;&#31243;&#24207;&#12290;&#22238;&#28378;&#25968;&#25454;&#24211;&#20107;&#21153;&#24182;&#19981;&#20250;&#25226;&#20320;&#30340;&#19994;&#21153;&#23545;&#35937;&#36864;&#22238;&#21040;&#20107;&#21153;&#21551;&#21160;&#26102;&#20505;&#30340;&#29366;&#24577;&#12290;&#36825;
					 								&#24847;&#21619;&#30528;&#25968;&#25454;&#24211;&#29366;&#24577;&#21644;&#19994;&#21153;&#23545;&#35937;&#29366;&#24577;&#19981;&#21516;&#27493;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#36825;&#19981;&#26159;&#20160;&#20040;&#38382;&#39064;&#65292;&#22240;&#20026;&#24322;&#24120;&#26159;&#19981;&#21487;
					 								&#24674;&#22797;&#30340;,&#20320;&#24517;&#39035;&#22312;&#22238;&#28378;&#20043;&#21518;&#37325;&#26032;&#24320;&#22987;&#25191;&#34892;&#12290;
                    </p></li><li><p>
                        <tt class="literal">Session</tt> &#32531;&#23384;&#20102;&#22788;&#20110;&#25345;&#20037;&#21270;&#29366;&#24577;&#30340;&#27599;&#20010;&#23545;&#35937;&#65288;Hibernate&#20250;&#30417;&#35270;&#21644;&#26816;&#26597;&#33039;&#25968;&#25454;&#65289;&#12290;
                        &#36825;&#24847;&#21619;&#30528;&#65292;&#22914;&#26524;&#20320;&#35753;<tt class="literal">Session</tt>&#25171;&#24320;&#24456;&#38271;&#19968;&#27573;&#26102;&#38388;&#65292;&#25110;&#26159;&#20165;&#20165;&#36733;&#20837;&#20102;&#36807;&#22810;&#30340;&#25968;&#25454;&#65292;
                        <tt class="literal">Session</tt>&#21344;&#29992;&#30340;&#20869;&#23384;&#20250;&#19968;&#30452;&#22686;&#38271;&#65292;&#30452;&#21040;&#25243;&#20986;OutOfMemoryException&#24322;&#24120;&#12290;&#36825;&#20010;
                        &#38382;&#39064;&#30340;&#19968;&#20010;&#35299;&#20915;&#26041;&#27861;&#26159;&#35843;&#29992;<tt class="literal">clear()</tt> &#21644;<tt class="literal">evict()</tt>&#26469;&#31649;&#29702;
                        <tt class="literal">Session</tt>&#30340;&#32531;&#23384;&#65292;&#20294;&#26159;&#22914;&#26524;&#20320;&#38656;&#35201;&#22823;&#25209;&#37327;&#25968;&#25454;&#25805;&#20316;&#30340;&#35805;&#65292;&#26368;&#22909;&#32771;&#34385;
                        &#20351;&#29992;&#23384;&#20648;&#36807;&#31243;&#12290;&#22312;<a href="#batch" title="&#31532;&nbsp;13&nbsp;&#31456;&nbsp;&#25209;&#37327;&#22788;&#29702;&#65288;Batch processing&#65289;">&#31532;&nbsp;13&nbsp;&#31456; <i>&#25209;&#37327;&#22788;&#29702;&#65288;Batch processing&#65289;</i></a>&#20013;&#26377;&#19968;&#20123;&#35299;&#20915;&#26041;&#26696;&#12290;&#22312;&#29992;&#25143;&#20250;&#35805;&#26399;&#38388;&#19968;&#30452;&#20445;&#25345;
                        <tt class="literal">Session</tt>&#25171;&#24320;&#20063;&#24847;&#21619;&#30528;&#20986;&#29616;&#33039;&#25968;&#25454;&#30340;&#21487;&#33021;&#24615;&#24456;&#39640;&#12290;
                    </p></li></ul></div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="transactions-demarcation"></a>11.2.&nbsp;&#25968;&#25454;&#24211;&#20107;&#21153;&#22768;&#26126;</h2></div></div><div></div></div><p>
						&#25968;&#25454;&#24211;&#65288;&#25110;&#32773;&#31995;&#32479;&#65289;&#20107;&#21153;&#30340;&#22768;&#26126;&#24635;&#26159;&#24517;&#39035;&#30340;&#12290;&#22312;&#25968;&#25454;&#24211;&#20107;&#21153;&#20043;&#22806;&#65292;&#23601;&#26080;&#27861;&#21644;&#25968;&#25454;&#24211;&#36890;&#35759;&#65288;&#36825;&#21487;&#33021;&#20250;&#35753;&#37027;&#20123;&#20064;&#24815;&#20110;
						&#33258;&#21160;&#25552;&#20132;&#20107;&#21153;&#27169;&#24335;&#30340;&#24320;&#21457;&#20154;&#21592;&#24863;&#21040;&#36855;&#24785;&#65289;&#12290;&#27704;&#36828;&#20351;&#29992;&#28165;&#26224;&#30340;&#20107;&#21153;&#22768;&#26126;&#65292;&#21363;&#20351;&#21482;&#35835;&#25805;&#20316;&#20063;&#26159;&#22914;&#27492;&#12290;&#36827;&#34892;
						&#26174;&#24335;&#30340;&#20107;&#21153;&#22768;&#26126;&#24182;&#19981;&#24635;&#26159;&#38656;&#35201;&#30340;&#65292;&#36825;&#21462;&#20915;&#20110;&#20320;&#30340;&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;&#21644;&#25968;&#25454;&#24211;&#30340;&#33021;&#21147;&#65292;&#20294;&#19981;&#31649;&#24590;&#20040;&#35828;&#65292;&#22768;&#26126;&#20107;&#21153;&#24635;&#24402;&#26377;&#30410;&#26080;&#23475;&#12290;&#24403;&#28982;&#65292;&#19968;&#20010;&#21333;&#29420;&#30340;&#25968;&#25454;&#24211;&#20107;&#21153;&#24635;&#26159;&#27604;&#24456;&#22810;&#29712;&#30862;&#30340;&#20107;&#21153;&#24615;&#33021;&#26356;&#22909;&#65292;&#21363;&#26102;&#23545;&#35835;&#25968;&#25454;&#32780;&#35328;&#20063;&#26159;&#19968;&#26679;&#12290;
        </p><p>
						&#19968;&#20010;Hibernate&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#36816;&#34892;&#22312;&#38750;&#25176;&#31649;&#29615;&#22659;&#20013;&#65288;&#20063;&#23601;&#26159;&#29420;&#31435;&#36816;&#34892;&#30340;&#24212;&#29992;&#31243;&#24207;&#65292;&#31616;&#21333;Web&#24212;&#29992;&#31243;&#24207;&#65292;
						&#25110;&#32773;Swing&#22270;&#24418;&#26700;&#38754;&#24212;&#29992;&#31243;&#24207;&#65289;&#65292;&#20063;&#21487;&#20197;&#36816;&#34892;&#22312;&#25176;&#31649;&#30340;J2EE&#29615;&#22659;&#20013;&#12290;&#22312;&#19968;&#20010;&#38750;&#25176;&#31649;&#29615;&#22659;&#20013;&#65292;Hibernate
						&#36890;&#24120;&#33258;&#24049;&#36127;&#36131;&#31649;&#29702;&#25968;&#25454;&#24211;&#36830;&#25509;&#27744;&#12290;&#24212;&#29992;&#31243;&#24207;&#24320;&#21457;&#20154;&#21592;&#24517;&#39035;&#25163;&#24037;&#35774;&#32622;&#20107;&#21153;&#22768;&#26126;&#65292;&#25442;&#21477;&#35805;&#35828;&#65292;&#23601;&#26159;&#25163;&#24037;&#21551;
						&#21160;&#65292;&#25552;&#20132;&#65292;&#25110;&#32773;&#22238;&#28378;&#25968;&#25454;&#24211;&#20107;&#21153;&#12290;&#19968;&#20010;&#25176;&#31649;&#30340;&#29615;&#22659;&#36890;&#24120;&#25552;&#20379;&#20102;&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;(CMT)&#65292;&#20363;&#22914;&#20107;&#21153;&#35013;&#37197;&#36890;&#36807;&#21487;&#22768;
						&#26126;&#30340;&#26041;&#24335;&#23450;&#20041;&#22312;EJB session beans&#30340;&#37096;&#32626;&#25551;&#36848;&#31526;&#20013;&#12290;&#21487;&#32534;&#31243;&#24335;&#20107;&#21153;&#22768;&#26126;&#19981;&#20877;&#38656;&#35201;&#65292;&#21363;&#20351;&#26159;
						<tt class="literal">Session</tt> &#30340;&#21516;&#27493;&#20063;&#21487;&#20197;&#33258;&#21160;&#23436;&#25104;&#12290;
        </p><p>
						&#35753;&#25345;&#20037;&#23618;&#20855;&#22791;&#21487;&#31227;&#26893;&#24615;&#26159;&#20154;&#20204;&#30340;&#29702;&#24819;,&#36825;&#31181;&#31227;&#26893;&#21457;&#29983;&#22312;&#38750;&#25176;&#31649;&#30340;&#26412;&#22320;&#36164;&#28304;&#29615;&#22659;&#65292;&#19982;&#20381;&#36182;JTA&#20294;&#26159;&#20351;&#29992;BMT&#32780;&#38750;CMT&#30340;&#31995;&#32479;&#20043;&#38388;&#12290;&#22312;&#20004;&#31181;&#24773;&#20917;&#19979;&#20320;&#37117;&#21487;&#20197;&#20351;&#29992;&#32534;&#31243;&#24335;&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;Hibernate&#25552;&#20379;&#20102;&#19968;&#22871;&#31216;&#20026;<tt class="literal">Transaction</tt>&#30340;&#23553;&#35013;API&#65292;
						&#29992;&#26469;&#25226;&#20320;&#30340;&#37096;&#32626;&#29615;&#22659;&#20013;&#30340;&#26412;&#22320;&#20107;&#21153;&#31649;&#29702;&#31995;&#32479;&#36716;&#25442;&#21040;Hibernate&#20107;&#21153;&#19978;&#12290;&#36825;&#20010;API&#26159;&#21487;&#36873;&#30340;&#65292;&#20294;&#26159;&#25105;&#20204;&#24378;&#28872;
						&#25512;&#33616;&#20320;&#20351;&#29992;&#65292;&#38500;&#38750;&#20320;&#29992;CMT session bean&#12290;
        </p><p>
            &#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#32467;&#26463; <tt class="literal">Session</tt> &#21253;&#21547;&#20102;&#22235;&#20010;&#19981;&#21516;&#30340;&#38454;&#27573;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#21516;&#27493;session(flush,&#21047;&#20986;&#21040;&#30913;&#30424;&#65289;
                </p></li><li><p>
                    &#25552;&#20132;&#20107;&#21153;
                </p></li><li><p>
                   &#20851;&#38381;session
                </p></li><li><p>
                    &#22788;&#29702;&#24322;&#24120;
                </p></li></ul></div><p>
						session&#30340;&#21516;&#27493;(flush,&#21047;&#20986;&#65289;&#21069;&#38754;&#24050;&#32463;&#35752;&#35770;&#36807;&#20102;&#65292;&#25105;&#20204;&#29616;&#22312;&#36827;&#19968;&#27493;&#32771;&#23519;&#22312;&#25176;&#31649;&#21644;&#38750;&#25176;&#31649;&#29615;&#22659;&#19979;&#30340;&#20107;&#21153;&#22768;&#26126;&#21644;&#24322;&#24120;&#22788;&#29702;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-demarcation-nonmanaged"></a>11.2.1.&nbsp;&#38750;&#25176;&#31649;&#29615;&#22659;</h3></div></div><div></div></div><p>
                &#22914;&#26524;Hibernat&#25345;&#20037;&#23618;&#36816;&#34892;&#22312;&#19968;&#20010;&#38750;&#25176;&#31649;&#29615;&#22659;&#20013;&#65292;&#25968;&#25454;&#24211;&#36830;&#25509;&#36890;&#24120;&#30001;Hibernate&#30340;&#31616;&#21333;&#65288;&#21363;&#38750;DataSource)&#36830;&#25509;&#27744;&#26426;&#21046;
                &#26469;&#22788;&#29702;&#12290;session/transaction&#22788;&#29702;&#26041;&#24335;&#22914;&#19979;&#25152;&#31034;&#65306;
            </p><pre class="programlisting">//Non-managed environment idiom
Session sess = factory.openSession();
Transaction tx = null;
try {
    tx = sess.beginTransaction();

    // do some work
    ...

    tx.commit();
}
catch (RuntimeException e) {
    if (tx != null) tx.rollback();
    throw e; // or display error message
}
finally {
    sess.close();
}</pre><p>
                &#20320;&#19981;&#38656;&#35201;&#26174;&#24335;<tt class="literal">flush()</tt>  <tt class="literal">Session</tt>  -  
                &#23545;<tt class="literal">commit()</tt>&#30340;&#35843;&#29992;&#20250;&#33258;&#21160;&#35302;&#21457;session&#30340;&#21516;&#27493;(&#21462;&#20915;&#20110;session&#30340;<a href="#objectstate-flushing" title="10.10.&nbsp;Session&#21047;&#20986;(flush)">&#31532;&nbsp;10.10&nbsp;&#33410; &#8220;Session&#21047;&#20986;(flush)&#8221;</a>)&#12290;&#35843;&#29992; <tt class="literal">close()</tt> &#26631;&#24535;session&#30340;&#32467;&#26463;&#12290;<tt class="literal">close()</tt>&#26041;&#27861;&#37325;&#35201;&#30340;&#26263;&#31034;&#26159;&#65292;<tt class="literal">session</tt>&#37322;&#25918;&#20102;JDBC&#36830;&#25509;&#12290;&#36825;&#27573;Java&#20195;&#30721;&#22312;&#38750;&#25176;&#31649;&#29615;&#22659;&#19979;&#21644;JTA&#29615;&#22659;&#19979;&#37117;&#21487;&#20197;&#36816;&#34892;&#12290;
            </p><p>
                &#26356;&#21152;&#28789;&#27963;&#30340;&#26041;&#26696;&#26159;Hibernate&#20869;&#32622;&#30340;"current session"&#19978;&#19979;&#25991;&#31649;&#29702;&#65292;&#21069;&#25991;&#24050;&#32463;&#35762;&#36807;&#65306;
            </p><pre class="programlisting">// Non-managed environment idiom with getCurrentSession()
try {
    factory.getCurrentSession().beginTransaction();

    // do some work
    ...

    factory.getCurrentSession().getTransaction().commit();
}
catch (RuntimeException e) {
    factory.getCurrentSession().getTransaction().rollback();
    throw e; // or display error message
}</pre><p>
                &#20320;&#24456;&#21487;&#33021;&#20174;&#26410;&#22312;&#19968;&#20010;&#36890;&#24120;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;&#19994;&#21153;&#20195;&#30721;&#20013;&#35265;&#36807;&#36825;&#26679;&#30340;&#20195;&#30721;&#29255;&#26029;&#65306;&#33268;&#21629;&#30340;&#65288;&#31995;&#32479;&#65289;&#24322;&#24120;&#24212;&#35813;&#24635;&#26159;
                &#22312;&#24212;&#29992;&#31243;&#24207;&#8220;&#39030;&#23618;&#8221;&#34987;&#25429;&#33719;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#25191;&#34892;Hibernate&#35843;&#29992;&#30340;&#20195;&#30721;&#65288;&#22312;&#25345;&#20037;&#23618;&#65289;&#21644;&#22788;&#29702;
                <tt class="literal">RuntimeException</tt>&#24322;&#24120;&#30340;&#20195;&#30721;&#65288;&#36890;&#24120;&#21482;&#33021;&#28165;&#29702;&#21644;&#36864;&#20986;&#24212;&#29992;&#31243;&#24207;&#65289;&#24212;&#35813;&#22312;&#19981;&#21516;
                &#30340;&#24212;&#29992;&#31243;&#24207;&#36923;&#36753;&#23618;&#12290;Hibernate&#30340;&#24403;&#21069;&#19978;&#19979;&#25991;&#31649;&#29702;&#21487;&#20197;&#26497;&#22823;&#22320;&#31616;&#21270;&#36825;&#19968;&#35774;&#35745;&#65292;&#20320;&#25152;&#26377;&#30340;&#19968;&#20999;&#23601;&#26159;<tt class="literal">SessionFactory</tt>&#12290;              &#24322;&#24120;&#22788;&#29702;&#23558;&#22312;&#26412;&#31456;&#31245;&#21518;&#36827;&#34892;&#35752;&#35770;&#12290;
            </p><p>
                &#35831;&#27880;&#24847;&#65292;&#20320;&#24212;&#35813;&#36873;&#25321; <tt class="literal">org.hibernate.transaction.JDBCTransactionFactory</tt>
                (&#36825;&#26159;&#40664;&#35748;&#36873;&#39033;)&#65292;&#23545;&#31532;&#20108;&#20010;&#20363;&#23376;&#26469;&#35828;&#65292;<tt class="literal">hibernate.current_session_context_class</tt>&#24212;&#35813;&#26159;<tt class="literal">"thread"</tt>
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-demarcation-jta"></a>11.2.2.&nbsp;&#20351;&#29992;JTA</h3></div></div><div></div></div><p>
               	&#22914;&#26524;&#20320;&#30340;&#25345;&#20037;&#23618;&#36816;&#34892;&#22312;&#19968;&#20010;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#65288;&#20363;&#22914;&#65292;&#22312;EJB session beans&#30340;&#21518;&#38754;&#65289;&#65292;Hibernate&#33719;&#21462;
               	&#30340;&#27599;&#20010;&#25968;&#25454;&#28304;&#36830;&#25509;&#23558;&#33258;&#21160;&#25104;&#20026;&#20840;&#23616;JTA&#20107;&#21153;&#30340;&#19968;&#37096;&#20998;&#12290;
                &#20320;&#21487;&#20197;&#23433;&#35013;&#19968;&#20010;&#29420;&#31435;&#30340;JTA&#23454;&#29616;&#65292;&#20351;&#29992;&#23427;&#32780;&#19981;&#20351;&#29992;EJB&#12290;Hibernate&#25552;&#20379;&#20102;&#20004;&#31181;&#31574;&#30053;&#36827;&#34892;JTA&#38598;&#25104;&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#20351;&#29992;bean&#31649;&#29702;&#20107;&#21153;&#65288;BMT&#65289;&#65292;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;Hibernate&#30340; <tt class="literal">Transaction</tt> API&#26469;&#21578;&#35785;
                &#24212;&#29992;&#26381;&#21153;&#22120;&#21551;&#21160;&#21644;&#32467;&#26463;BMT&#20107;&#21153;&#12290;&#22240;&#27492;&#65292;&#20107;&#21153;&#31649;&#29702;&#20195;&#30721;&#21644;&#22312;&#38750;&#25176;&#31649;&#29615;&#22659;&#19979;&#26159;&#19968;&#26679;&#30340;&#12290;
            </p><pre class="programlisting">// BMT idiom
Session sess = factory.openSession();
Transaction tx = null;
try {
    tx = sess.beginTransaction();

    // do some work
    ...

    tx.commit();
}
catch (RuntimeException e) {
    if (tx != null) tx.rollback();
    throw e; // or display error message
}
finally {
    sess.close();
}</pre><p>
               &#22914;&#26524;&#20320;&#24076;&#26395;&#20351;&#29992;&#19982;&#20107;&#21153;&#32465;&#23450;&#30340;<tt class="literal">Session</tt>&#65292;&#20063;&#23601;&#26159;&#20351;&#29992;<tt class="literal">getCurrentSession()</tt>&#26469;&#31616;&#21270;&#19978;&#19979;&#25991;&#31649;&#29702;&#65292;&#20320;&#23558;&#19981;&#24471;&#19981;&#30452;&#25509;&#20351;&#29992;JTA <tt class="literal">UserTransaction</tt>API&#12290;
            </p><pre class="programlisting">// BMT idiom with getCurrentSession()
try {
    UserTransaction tx = (UserTransaction)new InitialContext()
                            .lookup("java:comp/UserTransaction");

    tx.begin();

    // Do some work on Session bound to transaction
    factory.getCurrentSession().load(...);
    factory.getCurrentSession().persist(...);

    tx.commit();
}
catch (RuntimeException e) {
    tx.rollback();
    throw e; // or display error message
}</pre><p>
               &#22312;CMT&#26041;&#24335;&#19979;&#65292;&#20107;&#21153;&#22768;&#26126;&#26159;&#22312;session bean&#30340;&#37096;&#32626;&#25551;&#36848;&#31526;&#20013;&#65292;&#32780;&#19981;&#38656;&#35201;&#32534;&#31243;&#12290;
               &#22240;&#27492;&#65292;&#20195;&#30721;&#34987;&#31616;&#21270;&#20026;:
			</p><pre class="programlisting">// CMT idiom
Session sess = factory.getCurrentSession();

// do some work
...

</pre><p>
                &#22312;CMT/EJB&#20013;&#29978;&#33267;&#20250;&#33258;&#21160;rollback&#65292;&#22240;&#20026;&#20551;&#33509;&#26377;&#26410;&#25429;&#33719;&#30340;<tt class="literal">RuntimeException</tt>&#20174;session bean&#26041;&#27861;&#20013;&#25243;&#20986;&#65292;&#36825;&#23601;&#20250;&#36890;&#30693;&#23481;&#22120;&#25226;&#20840;&#23616;&#20107;&#21153;&#22238;&#28378;&#12290;<span class="emphasis"><em>&#36825;&#23601;&#24847;&#21619;&#30528;&#65292;&#22312;BMT&#25110;&#32773;CMT&#20013;&#65292;&#20320;&#26681;&#26412;&#23601;&#19981;&#38656;&#35201;&#20351;&#29992;Hibernate <tt class="literal">Transaction</tt> API &#65292;&#20320;&#33258;&#21160;&#24471;&#21040;&#20102;&#32465;&#23450;&#21040;&#20107;&#21153;&#30340;&#8220;&#24403;&#21069;&#8221;Session&#12290;
                </em></span>
            </p><p>
                &#27880;&#24847;&#65292;&#24403;&#20320;&#37197;&#32622;Hibernate&#30340;transaction factory&#30340;&#26102;&#20505;&#65292;&#22312;&#30452;&#25509;&#20351;&#29992;JTA&#30340;&#26102;&#20505;&#65288;BMT&#65289;&#65292;&#20320;&#24212;&#35813;&#36873;&#25321;<tt class="literal">org.hibernate.transaction.JTATransactionFactory</tt>,&#22312;CMT session bean&#20013;&#36873;&#25321;<tt class="literal">org.hibernate.transaction.CMTTransactionFactory</tt>&#12290;&#35760;&#24471;&#20063;&#35201;&#35774;&#32622;<tt class="literal">hibernate.transaction.manager_lookup_class</tt>&#12290;&#36824;&#26377;&#65292;&#30830;&#35748;&#20320;&#30340;<tt class="literal">hibernate.current_session_context_class</tt>&#26410;&#35774;&#32622;&#65288;&#20026;&#20102;&#21521;&#19979;&#20860;&#23481;&#65289;&#65292;&#25110;&#32773;&#35774;&#32622;&#20026;<tt class="literal">"jta"</tt>&#12290;
            </p><p>
                <tt class="literal">getCurrentSession()</tt>&#22312;JTA&#29615;&#22659;&#20013;&#26377;&#19968;&#20010;&#24330;&#31471;&#12290;&#23545;<tt class="literal">after_statement</tt>&#36830;&#25509;&#37322;&#25918;&#26041;&#24335;&#26377;&#19968;&#20010;&#35686;&#21578;&#65292;&#36825;&#26159;&#34987;&#40664;&#35748;&#20351;&#29992;&#30340;&#12290;&#22240;&#20026;JTA&#35268;&#33539;&#30340;&#19968;&#20010;&#24456;&#24858;&#34850;&#30340;&#38480;&#21046;&#65292;Hibernate&#19981;&#21487;&#33021;&#33258;&#21160;&#28165;&#29702;&#20219;&#20309;&#26410;&#20851;&#38381;&#30340;<tt class="literal">ScrollableResults</tt> &#25110;&#32773;<tt class="literal">Iterator</tt>&#65292;&#23427;&#20204;&#26159;&#30001;<tt class="literal">scroll()</tt>&#25110;<tt class="literal">iterate()</tt>&#20135;&#29983;&#30340;&#12290;&#20320;<span class="emphasis"><em>must</em></span>&#36890;&#36807;&#22312;<tt class="literal">finally</tt>&#22359;&#20013;&#65292;&#26174;&#24335;&#35843;&#29992;<tt class="literal">ScrollableResults.close()</tt>&#25110;&#32773;<tt class="literal">Hibernate.close(Iterator)</tt>&#26041;&#27861;&#26469;&#37322;&#25918;&#24213;&#23618;&#25968;&#25454;&#24211;&#28216;&#26631;&#12290;(&#24403;&#28982;&#65292;&#22823;&#37096;&#20998;&#31243;&#24207;&#23436;&#20840;&#21487;&#20197;&#24456;&#23481;&#26131;&#30340;&#36991;&#20813;&#22312;JTA&#25110;CMT&#20195;&#30721;&#20013;&#20986;&#29616;<tt class="literal">scroll()</tt>&#25110;<tt class="literal">iterate()</tt>&#12290;)
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-demarcation-exceptions"></a>11.2.3.&nbsp;&#24322;&#24120;&#22788;&#29702;</h3></div></div><div></div></div><p>
                &#22914;&#26524; <tt class="literal">Session</tt> &#25243;&#20986;&#24322;&#24120; (&#21253;&#25324;&#20219;&#20309;<tt class="literal">SQLException</tt>), 
                &#20320;&#24212;&#35813;&#31435;&#21363;&#22238;&#28378;&#25968;&#25454;&#24211;&#20107;&#21153;&#65292;&#35843;&#29992; <tt class="literal">Session.close()</tt> &#65292;&#20002;&#24323;&#35813;
                <tt class="literal">Session</tt>&#23454;&#20363;&#12290;<tt class="literal">Session</tt>&#30340;&#26576;&#20123;&#26041;&#27861;&#21487;&#33021;&#20250;&#23548;&#33268;session
                &#22788;&#20110;&#19981;&#19968;&#33268;&#30340;&#29366;&#24577;&#12290;&#25152;&#26377;&#30001;Hibernate&#25243;&#20986;&#30340;&#24322;&#24120;&#37117;&#35270;&#20026;&#19981;&#21487;&#20197;&#24674;&#22797;&#30340;&#12290;&#30830;&#20445;&#22312;
                <tt class="literal">finally</tt> &#20195;&#30721;&#22359;&#20013;&#35843;&#29992;<tt class="literal">close()</tt>&#26041;&#27861;&#65292;&#20197;&#20851;&#38381;&#25481;
                <tt class="literal">Session</tt>&#12290;
            </p><p>
								<tt class="literal">HibernateException</tt>&#26159;&#19968;&#20010;&#38750;&#26816;&#26597;&#26399;&#24322;&#24120;&#65288;&#36825;&#19981;&#21516;&#20110;Hibernate&#32769;&#30340;&#29256;&#26412;&#65289;&#65292;
								&#23427;&#23553;&#35013;&#20102;Hibernate&#25345;&#20037;&#23618;&#21487;&#33021;&#20986;&#29616;&#30340;&#22823;&#22810;&#25968;&#38169;&#35823;&#12290;&#25105;&#20204;&#30340;&#35266;&#28857;&#26159;&#65292;&#19981;&#24212;&#35813;&#24378;&#36843;&#24212;&#29992;&#31243;&#24207;&#24320;&#21457;&#20154;&#21592;
								&#22312;&#24213;&#23618;&#25429;&#33719;&#26080;&#27861;&#24674;&#22797;&#30340;&#24322;&#24120;&#12290;&#22312;&#22823;&#22810;&#25968;&#36719;&#20214;&#31995;&#32479;&#20013;&#65292;&#38750;&#26816;&#26597;&#26399;&#24322;&#24120;&#21644;&#33268;&#21629;&#24322;&#24120;&#37117;&#26159;&#22312;&#30456;&#24212;&#26041;&#27861;&#35843;&#29992;
								&#30340;&#22534;&#26632;&#30340;&#39030;&#23618;&#34987;&#22788;&#29702;&#30340;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#22312;&#36719;&#20214;&#19978;&#38754;&#30340;&#36923;&#36753;&#23618;&#65289;&#65292;&#24182;&#19988;&#25552;&#20379;&#19968;&#20010;&#38169;&#35823;&#20449;&#24687;&#32473;&#24212;&#29992;&#36719;&#20214;&#30340;&#29992;&#25143;
								&#65288;&#25110;&#32773;&#37319;&#21462;&#20854;&#20182;&#26576;&#20123;&#30456;&#24212;&#30340;&#25805;&#20316;&#65289;&#12290;&#35831;&#27880;&#24847;&#65292;Hibernate&#20063;&#26377;&#21487;&#33021;&#25243;&#20986;&#20854;&#20182;&#24182;&#19981;&#23646;&#20110;
								<tt class="literal">HibernateException</tt>&#30340;&#38750;&#26816;&#26597;&#26399;&#24322;&#24120;&#12290;&#36825;&#20123;&#24322;&#24120;&#21516;&#26679;&#20063;&#26159;&#26080;&#27861;&#24674;&#22797;&#30340;&#65292;&#24212;&#35813;
								&#37319;&#21462;&#26576;&#20123;&#30456;&#24212;&#30340;&#25805;&#20316;&#21435;&#22788;&#29702;&#12290;
            </p><p>
								&#22312;&#21644;&#25968;&#25454;&#24211;&#36827;&#34892;&#20132;&#20114;&#26102;&#65292;Hibernate&#25226;&#25429;&#33719;&#30340;<tt class="literal">SQLException</tt>&#23553;&#35013;&#20026;Hibernate&#30340;
								<tt class="literal">JDBCException</tt>&#12290;&#20107;&#23454;&#19978;&#65292;Hibernate&#23581;&#35797;&#25226;&#24322;&#24120;&#36716;&#25442;&#20026;&#26356;&#26377;&#23454;&#38469;&#21547;&#20041;
								&#30340;<tt class="literal">JDBCException</tt>&#24322;&#24120;&#30340;&#23376;&#31867;&#12290;&#24213;&#23618;&#30340;<tt class="literal">SQLException</tt>&#21487;&#20197;
								&#36890;&#36807;<tt class="literal">JDBCException.getCause()</tt>&#26469;&#24471;&#21040;&#12290;Hibernate&#36890;&#36807;&#20351;&#29992;&#20851;&#32852;&#21040;
								<tt class="literal">SessionFactory</tt>&#19978;&#30340;<tt class="literal">SQLExceptionConverter</tt>&#26469;
								&#25226;<tt class="literal">SQLException</tt>&#36716;&#25442;&#20026;&#19968;&#20010;&#23545;&#24212;&#30340;<tt class="literal">JDBCException</tt>
								&#24322;&#24120;&#30340;&#23376;&#31867;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;<tt class="literal">SQLExceptionConverter</tt>&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;dialect
								&#36873;&#39033;&#25351;&#23450;&#65307;&#27492;&#22806;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#23454;&#29616;&#31867;&#65288;&#21442;&#32771;javadocs
								 <tt class="literal">SQLExceptionConverterFactory</tt>&#31867;&#26469;&#20102;&#35299;&#35814;&#24773;&#65289;&#12290;&#26631;&#20934;&#30340;
								 <tt class="literal">JDBCException</tt>&#23376;&#31867;&#22411;&#26159;&#65306;
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        <tt class="literal">JDBCConnectionException</tt> - &#25351;&#26126;&#24213;&#23618;&#30340;JDBC&#36890;&#35759;&#20986;&#29616;&#38169;&#35823;
                    </p></li><li><p>
                        <tt class="literal">SQLGrammarException</tt> - &#25351;&#26126;&#21457;&#36865;&#30340;SQL&#35821;&#21477;&#30340;&#35821;&#27861;&#25110;&#32773;&#26684;&#24335;&#38169;&#35823;
                    </p></li><li><p>
                        <tt class="literal">ConstraintViolationException</tt> - &#25351;&#26126;&#26576;&#31181;&#31867;&#22411;&#30340;&#32422;&#26463;&#36829;&#20363;&#38169;&#35823;
                    </p></li><li><p>
                        <tt class="literal">LockAcquisitionException</tt> - &#25351;&#26126;&#20102;&#22312;&#25191;&#34892;&#35831;&#27714;&#25805;&#20316;&#26102;&#65292;&#33719;&#21462;
                        &#25152;&#38656;&#30340;&#38145;&#32423;&#21035;&#26102;&#20986;&#29616;&#30340;&#38169;&#35823;&#12290;
                        
                    </p></li><li><p>
                        <tt class="literal">GenericJDBCException</tt> - &#19981;&#23646;&#20110;&#20219;&#20309;&#20854;&#20182;&#31181;&#31867;&#30340;&#21407;&#29983;&#24322;&#24120;
                    </p></li></ul></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-demarcation-timeout"></a>11.2.4.&nbsp;&#20107;&#21153;&#36229;&#26102;</h3></div></div><div></div></div><p>
                EJB&#36825;&#26679;&#30340;&#25176;&#31649;&#29615;&#22659;&#26377;&#19968;&#39033;&#26497;&#20026;&#37325;&#35201;&#30340;&#29305;&#24615;&#65292;&#32780;&#23427;&#20174;&#26410;&#22312;&#38750;&#25176;&#31649;&#29615;&#22659;&#20013;&#25552;&#20379;&#36807;&#65292;&#37027;&#23601;&#26159;&#20107;&#21153;&#36229;&#26102;&#12290;&#22312;&#20986;&#29616;&#38169;&#35823;&#30340;&#20107;&#21153;&#34892;&#20026;&#30340;&#26102;&#20505;&#65292;&#36229;&#26102;&#21487;&#20197;&#30830;&#20445;&#19981;&#20250;&#26080;&#38480;&#25346;&#36215;&#36164;&#28304;&#12289;&#23545;&#29992;&#25143;&#27809;&#26377;&#20132;&#20195;&#12290;&#22312;&#25176;&#31649;(JTA)&#29615;&#22659;&#20043;&#22806;&#65292;Hibernate&#26080;&#27861;&#23436;&#20840;&#25552;&#20379;&#36825;&#19968;&#21151;&#33021;&#12290;&#20294;&#26159;&#65292;Hiberante&#33267;&#23569;&#21487;&#20197;&#25511;&#21046;&#25968;&#25454;&#35775;&#38382;&#65292;&#30830;&#20445;&#25968;&#25454;&#24211;&#32423;&#21035;&#30340;&#27515;&#38145;&#65292;&#21644;&#36820;&#22238;&#24040;&#22823;&#32467;&#26524;&#38598;&#30340;&#26597;&#35810;&#34987;&#38480;&#23450;&#22312;&#19968;&#20010;&#35268;&#23450;&#30340;&#26102;&#38388;&#20869;&#12290;&#22312;&#25176;&#31649;&#29615;&#22659;&#20013;&#65292;Hibernate&#20250;&#25226;&#20107;&#21153;&#36229;&#26102;&#36716;&#20132;&#32473;JTA&#12290;&#36825;&#19968;&#21151;&#33021;&#36890;&#36807;Hibernate <tt class="literal">Transaction</tt>&#23545;&#35937;&#36827;&#34892;&#25277;&#35937;&#12290;
            </p><pre class="programlisting">
Session sess = factory.openSession();
try {
    //set transaction timeout to 3 seconds
    sess.getTransaction().setTimeout(3);
    sess.getTransaction().begin();

    // do some work
    ...

    sess.getTransaction().commit()
}
catch (RuntimeException e) {
    sess.getTransaction().rollback();
    throw e; // or display error message
}
finally {
    sess.close();
}</pre><p>
                &#27880;&#24847;<tt class="literal">setTimeout()</tt>&#19981;&#24212;&#35813;&#22312;CMT bean&#20013;&#35843;&#29992;&#65292;&#27492;&#26102;&#20107;&#21153;&#36229;&#26102;&#20540;&#24212;&#35813;&#26159;&#34987;&#22768;&#26126;&#24335;&#23450;&#20041;&#30340;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="transactions-optimistic"></a>11.3.&nbsp;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046;(Optimistic concurrency control)</h2></div></div><div></div></div><p>
            &#21807;&#19968;&#33021;&#22815;&#21516;&#26102;&#20445;&#25345;&#39640;&#24182;&#21457;&#21644;&#39640;&#21487;&#20280;&#32553;&#24615;&#30340;&#26041;&#27861;&#23601;&#26159;&#20351;&#29992;&#24102;&#29256;&#26412;&#21270;&#30340;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046;&#12290;&#29256;&#26412;&#26816;&#26597;&#20351;&#29992;&#29256;&#26412;&#21495;&#12289;
            &#25110;&#32773;&#26102;&#38388;&#25139;&#26469;&#26816;&#27979;&#26356;&#26032;&#20914;&#31361;&#65288;&#24182;&#19988;&#38450;&#27490;&#26356;&#26032;&#20002;&#22833;&#65289;&#12290;Hibernate&#20026;&#20351;&#29992;&#20048;&#35266;&#24182;&#21457;&#25511;&#21046;&#30340;&#20195;&#30721;&#25552;&#20379;&#20102;&#19977;&#31181;&#21487;
            &#33021;&#30340;&#26041;&#27861;&#65292;&#24212;&#29992;&#31243;&#24207;&#22312;&#32534;&#20889;&#36825;&#20123;&#20195;&#30721;&#26102;&#65292;&#21487;&#20197;&#37319;&#29992;&#23427;&#20204;&#12290;&#25105;&#20204;&#24050;&#32463;&#22312;&#21069;&#38754;&#24212;&#29992;&#31243;&#24207;&#23545;&#35805;&#37027;&#37096;&#20998;&#23637;&#31034;&#20102;
            &#20048;&#35266;&#24182;&#21457;&#25511;&#21046;&#30340;&#24212;&#29992;&#22330;&#26223;&#65292;&#27492;&#22806;&#65292;&#22312;&#21333;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#33539;&#22260;&#20869;&#65292;&#29256;&#26412;&#26816;&#26597;&#20063;&#25552;&#20379;&#20102;&#38450;&#27490;&#26356;&#26032;&#20002;&#22833;&#30340;&#22909;&#22788;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-optimistic-manual"></a>11.3.1.&nbsp;&#24212;&#29992;&#31243;&#24207;&#32423;&#21035;&#30340;&#29256;&#26412;&#26816;&#26597;(Application version checking)</h3></div></div><div></div></div><p>                
								 &#26410;&#33021;&#20805;&#20998;&#21033;&#29992;Hibernate&#21151;&#33021;&#30340;&#23454;&#29616;&#20195;&#30721;&#20013;&#65292;&#27599;&#27425;&#21644;&#25968;&#25454;&#24211;&#20132;&#20114;&#37117;&#38656;&#35201;&#19968;&#20010;&#26032;&#30340;
								 <tt class="literal">Session</tt>&#65292;&#32780;&#19988;&#24320;&#21457;&#20154;&#21592;&#24517;&#39035;&#22312;&#26174;&#31034;&#25968;&#25454;&#20043;&#21069;&#20174;&#25968;&#25454;&#24211;&#20013;&#37325;
								 &#26032;&#36733;&#20837;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#23545;&#35937;&#23454;&#20363;&#12290;&#36825;&#31181;&#26041;&#24335;&#36843;&#20351;&#24212;&#29992;&#31243;&#24207;&#33258;&#24049;&#23454;&#29616;&#29256;&#26412;&#26816;&#26597;&#26469;&#30830;&#20445;
								 &#23545;&#35805;&#20107;&#21153;&#30340;&#38548;&#31163;&#65292;&#20174;&#25968;&#25454;&#35775;&#38382;&#30340;&#35282;&#24230;&#26469;&#35828;&#26159;&#26368;&#20302;&#25928;&#30340;&#12290;&#36825;&#31181;&#20351;&#29992;&#26041;&#24335;&#21644;
								 entity EJB&#26368;&#30456;&#20284;&#12290;
            </p><pre class="programlisting">// foo is an instance loaded by a previous Session
session = factory.openSession();
Transaction t = session.beginTransaction();

int oldVersion = foo.getVersion();
session.load( foo, foo.getKey() ); // load the current state
if ( oldVersion!=foo.getVersion ) throw new StaleObjectStateException();
foo.setProperty("bar");

t.commit();
session.close();</pre><p>
                <tt class="literal">version</tt> &#23646;&#24615;&#20351;&#29992; <tt class="literal">&lt;version&gt;</tt>&#26469;&#26144;&#23556;&#65292;&#22914;&#26524;&#23545;&#35937;
                &#26159;&#33039;&#25968;&#25454;&#65292;&#22312;&#21516;&#27493;&#30340;&#26102;&#20505;&#65292;Hibernate&#20250;&#33258;&#21160;&#22686;&#21152;&#29256;&#26412;&#21495;&#12290;
            </p><p>
								&#24403;&#28982;&#65292;&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#26159;&#22312;&#19968;&#20010;&#20302;&#25968;&#25454;&#24182;&#21457;&#29615;&#22659;&#19979;&#65292;&#24182;&#19981;&#38656;&#35201;&#29256;&#26412;&#26816;&#26597;&#30340;&#35805;&#65292;&#20320;&#29031;&#26679;&#21487;&#20197;&#20351;&#29992;
								&#36825;&#31181;&#26041;&#24335;&#65292;&#21482;&#19981;&#36807;&#36339;&#36807;&#29256;&#26412;&#26816;&#26597;&#23601;&#26159;&#20102;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<span class="emphasis"><em>&#26368;&#26202;&#25552;&#20132;&#29983;&#25928;</em></span>
								&#65288;<span class="emphasis"><em>last commit wins</em></span>&#65289;&#23601;&#26159;&#20320;&#30340;&#38271;&#23545;&#35805;&#30340;&#40664;&#35748;&#22788;&#29702;&#31574;&#30053;&#12290;
								&#35831;&#35760;&#20303;&#36825;&#31181;&#31574;&#30053;&#21487;&#33021;&#20250;&#35753;&#24212;&#29992;&#36719;&#20214;&#30340;&#29992;&#25143;&#24863;&#21040;&#22256;&#24785;&#65292;&#22240;&#20026;&#20182;&#20204;&#26377;&#21487;&#33021;&#20250;&#30896;&#19978;&#26356;&#26032;&#20002;&#22833;&#25481;&#21364;&#27809;
								&#26377;&#20986;&#38169;&#20449;&#24687;&#65292;&#25110;&#32773;&#38656;&#35201;&#21512;&#24182;&#26356;&#25913;&#20914;&#31361;&#30340;&#24773;&#20917;&#12290;
            </p><p>
                &#24456;&#26126;&#26174;&#65292;&#25163;&#24037;&#36827;&#34892;&#29256;&#26412;&#26816;&#26597;&#21482;&#36866;&#21512;&#20110;&#26576;&#20123;&#36719;&#20214;&#35268;&#27169;&#38750;&#24120;&#23567;&#30340;&#24212;&#29992;&#22330;&#26223;&#65292;&#23545;&#20110;&#22823;&#22810;&#25968;&#36719;&#20214;&#24212;&#29992;&#22330;&#26223;
                &#26469;&#35828;&#24182;&#19981;&#29616;&#23454;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#19981;&#20165;&#26159;&#21333;&#20010;&#23545;&#35937;&#23454;&#20363;&#38656;&#35201;&#36827;&#34892;&#29256;&#26412;&#26816;&#26597;&#65292;&#25972;&#20010;&#34987;&#20462;&#25913;&#36807;&#30340;&#20851;
                &#32852;&#23545;&#35937;&#22270;&#20063;&#37117;&#38656;&#35201;&#36827;&#34892;&#29256;&#26412;&#26816;&#26597;&#12290;&#20316;&#20026;&#26631;&#20934;&#35774;&#35745;&#33539;&#20363;&#65292;Hibernate&#20351;&#29992;&#25193;&#23637;&#21608;&#26399;&#30340;
                <tt class="literal">Session</tt>&#30340;&#26041;&#24335;&#65292;&#25110;&#32773;&#33073;&#31649;&#23545;&#35937;&#23454;&#20363;&#30340;&#26041;&#24335;&#26469;&#25552;&#20379;&#33258;&#21160;&#29256;&#26412;&#26816;&#26597;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-optimistic-longsession"></a>11.3.2.&nbsp;&#25193;&#23637;&#21608;&#26399;&#30340;session&#21644;&#33258;&#21160;&#29256;&#26412;&#21270;</h3></div></div><div></div></div><p>
               &#21333;&#20010; <tt class="literal">Session</tt>&#23454;&#20363;&#21644;&#23427;&#25152;&#20851;&#32852;&#30340;&#25152;&#26377;&#25345;&#20037;&#21270;&#23545;&#35937;&#23454;&#20363;&#37117;&#34987;&#29992;&#20110;&#25972;&#20010;
               &#23545;&#35805;&#65292;&#36825;&#34987;&#31216;&#20026;<span class="emphasis"><em>session-per-conversation</em></span>&#12290;Hibernate&#22312;&#21516;&#27493;&#30340;&#26102;&#20505;&#36827;&#34892;&#23545;&#35937;&#23454;&#20363;&#30340;&#29256;&#26412;&#26816;&#26597;&#65292;&#22914;&#26524;&#26816;&#27979;&#21040;&#24182;&#21457;&#20462;
               &#25913;&#21017;&#25243;&#20986;&#24322;&#24120;&#12290;&#30001;&#24320;&#21457;&#20154;&#21592;&#26469;&#20915;&#23450;&#26159;&#21542;&#38656;&#35201;&#25429;&#33719;&#21644;&#22788;&#29702;&#36825;&#20010;&#24322;&#24120;&#65288;&#36890;&#24120;&#30340;&#25225;&#25321;&#26159;&#32473;&#29992;&#25143;
               &#25552;&#20379;&#19968;&#20010;&#21512;&#24182;&#26356;&#25913;&#65292;&#25110;&#32773;&#22312;&#26080;&#33039;&#25968;&#25454;&#24773;&#20917;&#19979;&#37325;&#26032;&#36827;&#34892;&#19994;&#21153;&#23545;&#35805;&#30340;&#26426;&#20250;&#65289;&#12290;
            </p><p>
               &#22312;&#31561;&#24453;&#29992;&#25143;&#20132;&#20114;&#30340;&#26102;&#20505;&#65292; <tt class="literal">Session</tt> &#26029;&#24320;&#24213;&#23618;&#30340;JDBC&#36830;&#25509;&#12290;&#36825;&#31181;&#26041;&#24335;
               &#20197;&#25968;&#25454;&#24211;&#35775;&#38382;&#30340;&#35282;&#24230;&#26469;&#35828;&#26159;&#26368;&#39640;&#25928;&#30340;&#26041;&#24335;&#12290;&#24212;&#29992;&#31243;&#24207;&#19981;&#38656;&#35201;&#20851;&#24515;&#29256;&#26412;&#26816;&#26597;&#25110;&#33073;&#31649;&#23545;&#35937;&#23454;&#20363;
               &#30340;&#37325;&#26032;&#20851;&#32852;&#65292;&#22312;&#27599;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#20013;&#65292;&#24212;&#29992;&#31243;&#24207;&#20063;&#19981;&#38656;&#35201;&#36733;&#20837;&#35835;&#21462;&#23545;&#35937;&#23454;&#20363;&#12290;
            </p><pre class="programlisting">// foo is an instance loaded earlier by the old session
Transaction t = session.beginTransaction(); // Obtain a new JDBC connection, start transaction

foo.setProperty("bar");

session.flush();    // Only for last transaction in conversation
t.commit();         // Also return JDBC connection
session.close();    // Only for last transaction in conversation</pre><p>
                <tt class="literal">foo</tt>&#23545;&#35937;&#30693;&#36947;&#23427;&#26159;&#22312;&#21738;&#20010;<tt class="literal">Session</tt>&#20013;&#34987;&#35013;&#20837;&#30340;&#12290;&#22312;&#19968;&#20010;&#26087;session&#20013;&#24320;&#21551;&#19968;&#20010;&#26032;&#30340;&#25968;&#25454;&#24211;&#20107;&#21153;&#65292;&#20250;&#23548;&#33268;session&#33719;&#21462;&#19968;&#20010;&#26032;&#30340;&#36830;&#25509;&#65292;&#24182;&#24674;&#22797;session&#30340;&#21151;&#33021;&#12290;&#23558;&#25968;&#25454;&#24211;&#20107;&#21153;&#25552;&#20132;&#65292;&#20351;&#24471;session&#20174;JDBC&#36830;&#25509;&#26029;&#24320;&#65292;&#24182;&#23558;&#27492;&#36830;&#25509;&#20132;&#36824;&#32473;&#36830;&#25509;&#27744;&#12290;&#22312;&#37325;&#26032;&#36830;&#25509;&#20043;&#21518;&#65292;&#35201;&#24378;&#21046;&#23545;&#20320;&#27809;&#26377;&#26356;&#26032;&#30340;&#25968;&#25454;&#36827;&#34892;&#19968;&#27425;&#29256;&#26412;&#26816;&#26597;&#65292;&#20320;&#21487;&#20197;&#23545;&#25152;&#26377;&#21487;&#33021;&#34987;&#20854;&#20182;&#20107;&#21153;&#20462;&#25913;&#36807;&#30340;&#23545;&#35937;&#65292;&#20351;&#29992;&#21442;&#25968;<tt class="literal">LockMode.READ</tt>&#26469;&#35843;&#29992;<tt class="literal">Session.lock()</tt>&#12290;&#20320;&#19981;&#29992;lock&#20219;&#20309;&#20320;<span class="emphasis"><em>&#27491;&#22312;</em></span>&#26356;&#26032;&#30340;&#25968;&#25454;&#12290;&#19968;&#33324;&#20320;&#20250;&#22312;&#25193;&#23637;&#30340;<tt class="literal">Session</tt>&#19978;&#35774;&#32622;<tt class="literal">FlushMode.NEVER</tt>&#65292;&#22240;&#27492;&#21482;&#26377;&#26368;&#21518;&#19968;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#24490;&#29615;&#25165;&#20250;&#30495;&#27491;&#30340;&#21543;&#25972;&#20010;&#23545;&#35805;&#20013;&#21457;&#29983;&#30340;&#20462;&#25913;&#21457;&#36865;&#21040;&#25968;&#25454;&#24211;&#12290;&#22240;&#27492;&#65292;&#21482;&#26377;&#36825;&#26368;&#21518;&#19968;&#27425;&#25968;&#25454;&#24211;&#20107;&#21153;&#25165;&#20250;&#21253;&#21547;<tt class="literal">flush()</tt>&#25805;&#20316;&#65292;&#28982;&#21518;&#22312;&#25972;&#20010;&#23545;&#35805;&#32467;&#26463;&#21518;&#65292;&#36824;&#35201;<tt class="literal">close()</tt>&#36825;&#20010;session&#12290;
            </p><p>
                &#22914;&#26524;&#22312;&#29992;&#25143;&#24605;&#32771;&#30340;&#36807;&#31243;&#20013;&#65292;<tt class="literal">Session</tt>&#22240;&#20026;&#22826;&#22823;&#20102;&#32780;&#19981;&#33021;&#20445;&#23384;&#65292;&#37027;&#20040;&#36825;&#31181;&#27169;&#24335;&#26159;&#26377;
                &#38382;&#39064;&#30340;&#12290;&#20030;&#20363;&#26469;&#35828;&#65292;&#19968;&#20010;<tt class="literal">HttpSession</tt>&#24212;&#35813;&#23613;&#21487;&#33021;&#30340;&#23567;&#12290;&#30001;&#20110;
                <tt class="literal">Session</tt>&#26159;&#19968;&#32423;&#32531;&#23384;&#65292;&#24182;&#19988;&#20445;&#25345;&#20102;&#25152;&#26377;&#34987;&#36733;&#20837;&#36807;&#30340;&#23545;&#35937;&#65292;&#22240;&#27492;
                &#25105;&#20204;&#21482;&#24212;&#35813;&#22312;&#37027;&#20123;&#23569;&#37327;&#30340;request/response&#24773;&#20917;&#19979;&#20351;&#29992;&#36825;&#31181;&#31574;&#30053;&#12290;&#20320;&#24212;&#35813;&#21482;&#25226;&#19968;&#20010;<tt class="literal">Session</tt>&#29992;&#20110;&#21333;&#20010;&#23545;&#35805;&#65292;&#22240;&#20026;&#23427;&#24456;&#24555;&#23601;&#20250;&#20986;&#29616;&#33039;&#25968;&#25454;&#12290;
            </p><p>
                &#65288;&#27880;&#24847;&#65292;&#26089;&#26399;&#30340;Hibernate&#29256;&#26412;&#38656;&#35201;&#26126;&#30830;&#30340;&#23545;<tt class="literal">Session</tt>&#36827;&#34892;disconnec&#21644;reconnect&#12290;&#36825;&#20123;&#26041;&#27861;&#29616;&#22312;&#24050;&#32463;&#36807;&#26102;&#20102;&#65292;&#25171;&#24320;&#20107;&#21153;&#21644;&#20851;&#38381;&#20107;&#21153;&#20250;&#36215;&#21040;&#21516;&#26679;&#30340;&#25928;&#26524;&#12290;&#65289;
            </p><p>
                &#27492;&#22806;&#65292;&#20063;&#35831;&#27880;&#24847;&#65292;&#20320;&#24212;&#35813;&#35753;&#19982;&#25968;&#25454;&#24211;&#36830;&#25509;&#26029;&#24320;&#30340;<tt class="literal">Session</tt>&#23545;&#25345;&#20037;&#23618;&#20445;&#25345;
                &#20851;&#38381;&#29366;&#24577;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#22312;&#19977;&#23618;&#29615;&#22659;&#20013;&#65292;&#20351;&#29992;&#26377;&#29366;&#24577;&#30340;EJB session bean&#26469;&#25345;&#26377;<tt class="literal">Session</tt>&#65292;
                &#32780;&#19981;&#35201;&#25226;&#23427;&#20256;&#36882;&#21040;web&#23618;&#65288;&#29978;&#33267;&#25226;&#23427;&#24207;&#21015;&#21270;&#21040;&#19968;&#20010;&#21333;&#29420;&#30340;&#23618;&#65289;&#65292;&#20445;&#23384;&#22312;<tt class="literal">HttpSession</tt>&#20013;&#12290;
            </p><p>
                &#25193;&#23637;session&#27169;&#24335;&#65292;&#25110;&#32773;&#34987;&#31216;&#20026;<span class="emphasis"><em>&#27599;&#27425;&#23545;&#35805;&#19968;&#20010;session(session-per-conversation)</em></span>, &#22312;&#19982;&#33258;&#21160;&#31649;&#29702;&#24403;&#21069;session&#19978;&#19979;&#25991;&#32852;&#29992;&#30340;&#26102;&#20505;&#20250;&#26356;&#22256;&#38590;&#12290;&#20320;&#38656;&#35201;&#25552;&#20379;&#20320;&#33258;&#24049;&#30340;<tt class="literal">CurrentSessionContext</tt>&#23454;&#29616;&#12290;&#35831;&#21442;&#38405;Hibernate Wiki&#20197;&#33719;&#24471;&#31034;&#20363;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-optimistic-detached"></a>11.3.3.&nbsp;&#33073;&#31649;&#23545;&#35937;(deatched object)&#21644;&#33258;&#21160;&#29256;&#26412;&#21270;</h3></div></div><div></div></div><p>
                &#36825;&#31181;&#26041;&#24335;&#19979;&#65292;&#19982;&#25345;&#20037;&#21270;&#23384;&#20648;&#30340;&#27599;&#27425;&#20132;&#20114;&#37117;&#21457;&#29983;&#22312;&#19968;&#20010;&#26032;&#30340;<tt class="literal">Session</tt>&#20013;&#12290;
                &#28982;&#32780;&#65292;&#21516;&#19968;&#25345;&#20037;&#21270;&#23545;&#35937;&#23454;&#20363;&#21487;&#20197;&#22312;&#22810;&#27425;&#19982;&#25968;&#25454;&#24211;&#30340;&#20132;&#20114;&#20013;&#37325;&#29992;&#12290;&#24212;&#29992;&#31243;&#24207;&#25805;&#32437;&#33073;&#31649;&#23545;&#35937;&#23454;&#20363;
                &#30340;&#29366;&#24577;&#65292;&#36825;&#20010;&#33073;&#31649;&#23545;&#35937;&#23454;&#20363;&#26368;&#21021;&#26159;&#22312;&#21478;&#19968;&#20010;<tt class="literal">Session</tt> &#20013;&#36733;&#20837;&#30340;&#65292;&#28982;&#21518;
                &#35843;&#29992; <tt class="literal">Session.update()</tt>&#65292;<tt class="literal">Session.saveOrUpdate()</tt>, &#25110;&#32773;
                <tt class="literal">Session.merge()</tt> &#26469;&#37325;&#26032;&#20851;&#32852;&#35813;&#23545;&#35937;&#23454;&#20363;&#12290;
            </p><pre class="programlisting">// foo is an instance loaded by a previous Session
foo.setProperty("bar");
session = factory.openSession();
Transaction t = session.beginTransaction();
session.saveOrUpdate(foo); // Use merge() if "foo" might have been loaded already
t.commit();
session.close();</pre><p>
                Hibernate&#20250;&#20877;&#19968;&#27425;&#22312;&#21516;&#27493;&#30340;&#26102;&#20505;&#26816;&#26597;&#23545;&#35937;&#23454;&#20363;&#30340;&#29256;&#26412;&#65292;&#22914;&#26524;&#21457;&#29983;&#26356;&#26032;&#20914;&#31361;&#65292;&#23601;&#25243;&#20986;&#24322;&#24120;&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#30830;&#20449;&#23545;&#35937;&#27809;&#26377;&#34987;&#20462;&#25913;&#36807;&#65292;&#20320;&#20063;&#21487;&#20197;&#35843;&#29992;<tt class="literal">lock()</tt> &#26469;&#35774;&#32622;
                <tt class="literal">LockMode.READ</tt>&#65288;&#32469;&#36807;&#25152;&#26377;&#30340;&#32531;&#23384;&#65292;&#25191;&#34892;&#29256;&#26412;&#26816;&#26597;&#65289;&#65292;&#20174;&#32780;&#21462;
                &#20195; <tt class="literal">update()</tt>&#25805;&#20316;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="transactions-optimistic-customizing"></a>11.3.4.&nbsp;&#23450;&#21046;&#33258;&#21160;&#29256;&#26412;&#21270;&#34892;&#20026;</h3></div></div><div></div></div><p>
               &#23545;&#20110;&#29305;&#23450;&#30340;&#23646;&#24615;&#21644;&#38598;&#21512;&#65292;&#36890;&#36807;&#20026;&#23427;&#20204;&#35774;&#32622;&#26144;&#23556;&#23646;&#24615;<tt class="literal">optimistic-lock</tt>&#30340;&#20540;
               &#20026;<tt class="literal">false</tt>&#65292;&#26469;&#31105;&#27490;Hibernate&#30340;&#29256;&#26412;&#33258;&#21160;&#22686;&#21152;&#12290;&#36825;&#26679;&#30340;&#35805;&#65292;&#22914;&#26524;&#35813;&#23646;&#24615;
               &#33039;&#25968;&#25454;&#65292;Hibernate&#23558;&#19981;&#20877;&#22686;&#21152;&#29256;&#26412;&#21495;&#12290;
            </p><p>
								&#36951;&#30041;&#31995;&#32479;&#30340;&#25968;&#25454;&#24211;Schema&#36890;&#24120;&#26159;&#38745;&#24577;&#30340;&#65292;&#19981;&#21487;&#20462;&#25913;&#30340;&#12290;&#25110;&#32773;&#65292;&#20854;&#20182;&#24212;&#29992;&#31243;&#24207;&#20063;&#21487;&#33021;&#35775;&#38382;&#21516;&#19968;&#25968;&#25454;
								&#24211;&#65292;&#26681;&#26412;&#26080;&#27861;&#24471;&#30693;&#22914;&#20309;&#22788;&#29702;&#29256;&#26412;&#21495;&#65292;&#29978;&#33267;&#26102;&#38388;&#25139;&#12290;&#22312;&#20197;&#19978;&#30340;&#25152;&#26377;&#22330;&#26223;&#20013;&#65292;&#23454;&#29616;&#29256;&#26412;&#21270;&#19981;&#33021;&#20381;&#38752;
								&#25968;&#25454;&#24211;&#34920;&#30340;&#26576;&#20010;&#29305;&#23450;&#21015;&#12290;&#22312;<tt class="literal">&lt;class&gt;</tt>&#30340;&#26144;&#23556;&#20013;&#35774;&#32622;
								<tt class="literal">optimistic-lock="all"</tt>&#21487;&#20197;&#22312;&#27809;&#26377;&#29256;&#26412;&#25110;&#32773;&#26102;&#38388;&#25139;&#23646;&#24615;&#26144;&#23556;&#30340;&#24773;&#20917;&#19979;&#23454;&#29616;
								&#29256;&#26412;&#26816;&#26597;&#65292;&#27492;&#26102;Hibernate&#23558;&#27604;&#36739;&#19968;&#34892;&#35760;&#24405;&#30340;&#27599;&#20010;&#23383;&#27573;&#30340;&#29366;&#24577;&#12290;&#35831;&#27880;&#24847;&#65292;&#21482;&#26377;&#24403;Hibernate&#33021;&#22815;&#27604;
								&#36739;&#26032;&#26087;&#29366;&#24577;&#30340;&#24773;&#20917;&#19979;&#65292;&#36825;&#31181;&#26041;&#24335;&#25165;&#33021;&#29983;&#25928;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;
								&#20320;&#24517;&#39035;&#20351;&#29992;&#21333;&#20010;&#38271;&#29983;&#21629;&#21608;&#26399;<tt class="literal">Session</tt>&#27169;&#24335;&#65292;&#32780;&#19981;&#33021;&#20351;&#29992;
								session-per-request-with-detached-objects&#27169;&#24335;&#12290;
            </p><p>
               &#26377;&#20123;&#24773;&#20917;&#19979;&#65292;&#21482;&#35201;&#26356;&#25913;&#19981;&#21457;&#29983;&#20132;&#38169;&#65292;&#24182;&#21457;&#20462;&#25913;&#20063;&#26159;&#20801;&#35768;&#30340;&#12290;&#24403;&#20320;&#22312;<tt class="literal">&lt;class&gt;</tt>
               &#30340;&#26144;&#23556;&#20013;&#35774;&#32622;<tt class="literal">optimistic-lock="dirty"</tt>&#65292;Hibernate&#22312;&#21516;&#27493;&#30340;&#26102;&#20505;&#23558;&#21482;&#27604;&#36739;&#26377;&#33039;
               &#25968;&#25454;&#30340;&#23383;&#27573;&#12290;
            </p><p>
                &#22312;&#20197;&#19978;&#25152;&#26377;&#22330;&#26223;&#20013;&#65292;&#19981;&#31649;&#26159;&#19987;&#38376;&#35774;&#32622;&#19968;&#20010;&#29256;&#26412;/&#26102;&#38388;&#25139;&#21015;&#65292;&#36824;&#26159;&#36827;&#34892;&#20840;&#37096;&#23383;&#27573;/&#33039;&#25968;&#25454;&#23383;&#27573;&#27604;&#36739;&#65292;
                Hibernate&#37117;&#20250;&#38024;&#23545;&#27599;&#20010;&#23454;&#20307;&#23545;&#35937;&#21457;&#36865;&#19968;&#26465;<tt class="literal">UPDATE</tt>&#65288;&#24102;&#26377;&#30456;&#24212;&#30340;
                <tt class="literal">WHERE</tt>&#35821;&#21477; &#65289;&#30340;SQL&#35821;&#21477;&#26469;&#25191;&#34892;&#29256;&#26412;&#26816;&#26597;&#21644;&#25968;&#25454;&#26356;&#26032;&#12290;&#22914;&#26524;&#20320;&#23545;&#20851;&#32852;&#23454;&#20307;
                &#35774;&#32622;&#32423;&#32852;&#20851;&#31995;&#20351;&#29992;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;&#65288;transitive persistence&#65289;&#65292;&#37027;&#20040;Hibernate&#21487;&#33021;&#20250;&#25191;&#34892;&#19981;&#24517;
                &#35201;&#30340;update&#35821;&#21477;&#12290;&#36825;&#36890;&#24120;&#19981;&#26159;&#20010;&#38382;&#39064;&#65292;&#20294;&#26159;&#25968;&#25454;&#24211;&#37324;&#38754;&#23545;<span class="emphasis"><em>on update</em></span>&#28857;&#28779;
                &#30340;&#35302;&#21457;&#22120;&#21487;&#33021;&#22312;&#33073;&#31649;&#23545;&#35937;&#27809;&#26377;&#20219;&#20309;&#26356;&#25913;&#30340;&#24773;&#20917;&#19979;&#34987;&#35302;&#21457;&#12290;&#22240;&#27492;&#65292;&#20320;&#21487;&#20197;&#22312;
                <tt class="literal">&lt;class&gt;</tt>&#30340;&#26144;&#23556;&#20013;&#65292;&#36890;&#36807;&#35774;&#32622;<tt class="literal">select-before-update="true"</tt>
                &#26469;&#23450;&#21046;&#36825;&#19968;&#34892;&#20026;&#65292;&#24378;&#21046;Hibernate <tt class="literal">SELECT</tt>&#36825;&#20010;&#23545;&#35937;&#23454;&#20363;&#65292;&#20174;&#32780;&#20445;&#35777;&#65292;
                &#22312;&#26356;&#26032;&#35760;&#24405;&#20043;&#21069;&#65292;&#23545;&#35937;&#30340;&#30830;&#26159;&#34987;&#20462;&#25913;&#36807;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="transactions-locking"></a>11.4.&nbsp;&#24754;&#35266;&#38145;&#23450;(Pessimistic Locking)</h2></div></div><div></div></div><p>
           &#29992;&#25143;&#20854;&#23454;&#24182;&#19981;&#38656;&#35201;&#33457;&#24456;&#22810;&#31934;&#21147;&#21435;&#25285;&#24515;&#38145;&#23450;&#31574;&#30053;&#30340;&#38382;&#39064;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#21482;&#35201;&#20026;JDBC&#36830;&#25509;&#25351;&#23450;&#19968;&#19979;&#38548;
           &#31163;&#32423;&#21035;&#65292;&#28982;&#21518;&#35753;&#25968;&#25454;&#24211;&#21435;&#25630;&#23450;&#19968;&#20999;&#23601;&#22815;&#20102;&#12290;&#28982;&#32780;&#65292;&#39640;&#32423;&#29992;&#25143;&#26377;&#26102;&#20505;&#24076;&#26395;&#36827;&#34892;&#19968;&#20010;&#25490;&#23427;&#30340;&#24754;&#35266;&#38145;&#23450;&#65292;
           &#25110;&#32773;&#22312;&#19968;&#20010;&#26032;&#30340;&#20107;&#21153;&#21551;&#21160;&#30340;&#26102;&#20505;&#65292;&#37325;&#26032;&#36827;&#34892;&#38145;&#23450;&#12290;
        </p><p>
            Hibernate&#24635;&#26159;&#20351;&#29992;&#25968;&#25454;&#24211;&#30340;&#38145;&#23450;&#26426;&#21046;&#65292;&#20174;&#19981;&#22312;&#20869;&#23384;&#20013;&#38145;&#23450;&#23545;&#35937;&#65281;
        </p><p>
            &#31867;<tt class="literal">LockMode</tt> &#23450;&#20041;&#20102;Hibernate&#25152;&#38656;&#30340;&#19981;&#21516;&#30340;&#38145;&#23450;&#32423;&#21035;&#12290;&#19968;&#20010;&#38145;&#23450;
            &#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#30340;&#26426;&#21046;&#26469;&#35774;&#32622;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#24403;Hibernate&#26356;&#26032;&#25110;&#32773;&#25554;&#20837;&#19968;&#34892;&#35760;&#24405;&#30340;&#26102;&#20505;&#65292;&#38145;&#23450;&#32423;&#21035;&#33258;&#21160;&#35774;&#32622;&#20026;<tt class="literal">LockMode.WRITE</tt>&#12290;
                </p></li><li><p>
                    &#24403;&#29992;&#25143;&#26174;&#24335;&#30340;&#20351;&#29992;&#25968;&#25454;&#24211;&#25903;&#25345;&#30340;SQL&#26684;&#24335;<tt class="literal">SELECT ... FOR UPDATE</tt> 
                    &#21457;&#36865;SQL&#30340;&#26102;&#20505;&#65292;&#38145;&#23450;&#32423;&#21035;&#35774;&#32622;&#20026;<tt class="literal">LockMode.UPGRADE</tt> 
                </p></li><li><p>
                    &#24403;&#29992;&#25143;&#26174;&#24335;&#30340;&#20351;&#29992;Oracle&#25968;&#25454;&#24211;&#30340;SQL&#35821;&#21477;<tt class="literal">SELECT ... FOR UPDATE NOWAIT</tt>
                    &#30340;&#26102;&#20505;&#65292;&#38145;&#23450;&#32423;&#21035;&#35774;&#32622;<tt class="literal">LockMode.UPGRADE_NOWAIT</tt> 
                </p></li><li><p>
                    &#24403;Hibernate&#22312;&#8220;&#21487;&#37325;&#22797;&#35835;&#8221;&#25110;&#32773;&#26159;&#8220;&#24207;&#21015;&#21270;&#8221;&#25968;&#25454;&#24211;&#38548;&#31163;&#32423;&#21035;&#19979;&#35835;&#21462;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;&#38145;&#23450;&#27169;&#24335;
                    &#33258;&#21160;&#35774;&#32622;&#20026;<tt class="literal">LockMode.READ</tt>&#12290;&#36825;&#31181;&#27169;&#24335;&#20063;&#21487;&#20197;&#36890;&#36807;&#29992;&#25143;&#26174;&#24335;&#25351;&#23450;&#36827;&#34892;&#35774;&#32622;&#12290;
                </p></li><li><p>
						<tt class="literal">LockMode.NONE</tt> &#20195;&#34920;&#26080;&#38656;&#38145;&#23450;&#12290;&#22312;<tt class="literal">Transaction</tt>&#32467;&#26463;&#26102;&#65292;
						&#25152;&#26377;&#30340;&#23545;&#35937;&#37117;&#20999;&#25442;&#21040;&#35813;&#27169;&#24335;&#19978;&#26469;&#12290;&#19982;session&#30456;&#20851;&#32852;&#30340;&#23545;&#35937;&#36890;&#36807;&#35843;&#29992;<tt class="literal">update()</tt>
						&#25110;&#32773;<tt class="literal">saveOrUpdate()</tt>&#33073;&#31163;&#35813;&#27169;&#24335;&#12290;
        </p></li></ul></div><p>
            "&#26174;&#24335;&#30340;&#29992;&#25143;&#25351;&#23450;"&#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#20960;&#31181;&#26041;&#24335;&#20043;&#19968;&#26469;&#34920;&#31034;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#35843;&#29992; <tt class="literal">Session.load()</tt>&#30340;&#26102;&#20505;&#25351;&#23450;<tt class="literal">&#38145;&#23450;&#27169;&#24335;(LockMode)</tt>&#12290;
                </p></li><li><p>
                    &#35843;&#29992;<tt class="literal">Session.lock()</tt>&#12290;
                </p></li><li><p>
                    &#35843;&#29992;<tt class="literal">Query.setLockMode()</tt>&#12290;
                </p></li></ul></div><p>
           &#22914;&#26524;&#22312;<tt class="literal">UPGRADE</tt>&#25110;&#32773;<tt class="literal">UPGRADE_NOWAIT</tt>&#38145;&#23450;&#27169;&#24335;&#19979;&#35843;
           &#29992;<tt class="literal">Session.load()</tt>&#65292;&#24182;&#19988;&#35201;&#35835;&#21462;&#30340;&#23545;&#35937;&#23578;&#26410;&#34987;session&#36733;&#20837;&#36807;&#65292;&#37027;&#20040;&#23545;&#35937;
           &#36890;&#36807;<tt class="literal">SELECT ... FOR UPDATE</tt>&#36825;&#26679;&#30340;SQL&#35821;&#21477;&#34987;&#36733;&#20837;&#12290;&#22914;&#26524;&#20026;&#19968;&#20010;&#23545;&#35937;&#35843;&#29992;
           <tt class="literal">load()</tt>&#26041;&#27861;&#26102;&#65292;&#35813;&#23545;&#35937;&#24050;&#32463;&#22312;&#21478;&#19968;&#20010;&#36739;&#23569;&#38480;&#21046;&#30340;&#38145;&#23450;&#27169;&#24335;&#19979;&#34987;&#36733;&#20837;&#20102;&#65292;&#37027;
           &#20040;Hibernate&#23601;&#23545;&#35813;&#23545;&#35937;&#35843;&#29992;<tt class="literal">lock()</tt> &#26041;&#27861;&#12290;
        </p><p>
            &#22914;&#26524;&#25351;&#23450;&#30340;&#38145;&#23450;&#27169;&#24335;&#26159;<tt class="literal">READ</tt>, <tt class="literal">UPGRADE</tt> &#25110;
            <tt class="literal">UPGRADE_NOWAIT</tt>&#65292;&#37027;&#20040;<tt class="literal">Session.lock()</tt>&#23601;
            &#25191;&#34892;&#29256;&#26412;&#21495;&#26816;&#26597;&#12290;&#65288;&#22312;<tt class="literal">UPGRADE</tt> &#25110;&#32773;<tt class="literal">UPGRADE_NOWAIT</tt>
            &#38145;&#23450;&#27169;&#24335;&#19979;&#65292;&#25191;&#34892;<tt class="literal">SELECT ... FOR UPDATE</tt>&#36825;&#26679;&#30340;SQL&#35821;&#21477;&#12290;&#65289;
        </p><p>
           &#22914;&#26524;&#25968;&#25454;&#24211;&#19981;&#25903;&#25345;&#29992;&#25143;&#35774;&#32622;&#30340;&#38145;&#23450;&#27169;&#24335;&#65292;Hibernate&#23558;&#20351;&#29992;&#36866;&#24403;&#30340;&#26367;&#20195;&#27169;&#24335;&#65288;&#32780;&#19981;&#26159;&#25172;&#20986;&#24322;&#24120;&#65289;&#12290;
           &#36825;&#19968;&#28857;&#21487;&#20197;&#30830;&#20445;&#24212;&#29992;&#31243;&#24207;&#30340;&#21487;&#31227;&#26893;&#24615;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="transactions-connection-release"></a>11.5.&nbsp;&#36830;&#25509;&#37322;&#25918;&#27169;&#24335;(Connection Release Modes)</h2></div></div><div></div></div><p>
            Hibernate&#20851;&#20110;JDBC&#36830;&#25509;&#31649;&#29702;&#30340;&#26087;(2.x)&#34892;&#20026;&#26159;&#65292;<tt class="literal">Session</tt>&#22312;&#31532;&#19968;&#27425;&#38656;&#35201;&#30340;&#26102;&#20505;&#33719;&#21462;&#19968;&#20010;&#36830;&#25509;&#65292;&#22312;session&#20851;&#38381;&#20043;&#21069;&#19968;&#30452;&#20250;&#25345;&#26377;&#36825;&#20010;&#36830;&#25509;&#12290;Hibernate&#24341;&#20837;&#20102;&#36830;&#25509;&#37322;&#25918;&#30340;&#27010;&#24565;&#65292;&#26469;&#21578;&#35785;session&#22914;&#20309;&#22788;&#29702;&#23427;&#30340;JDBC&#36830;&#25509;&#12290;&#27880;&#24847;&#65292;&#19979;&#38754;&#30340;&#35752;&#35770;&#21482;&#36866;&#29992;&#20110;&#37319;&#29992;&#37197;&#32622;<tt class="literal">ConnectionProvider</tt>&#26469;&#25552;&#20379;&#36830;&#25509;&#30340;&#24773;&#20917;&#65292;&#29992;&#25143;&#33258;&#24049;&#25552;&#20379;&#30340;&#36830;&#25509;&#19982;&#36825;&#37324;&#30340;&#35752;&#35770;&#26080;&#20851;&#12290;&#36890;&#36807;<tt class="literal">org.hibernate.ConnectionReleaseMode</tt>&#30340;&#19981;&#21516;&#26522;&#20030;&#20540;&#26469;&#20351;&#29992;&#19981;&#29992;&#30340;&#37322;&#25918;&#27169;&#24335;:
            
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    <tt class="literal">ON_CLOSE</tt> - &#22522;&#26412;&#19978;&#23601;&#26159;&#19978;&#38754;&#25552;&#21040;&#30340;&#32769;&#24335;&#34892;&#20026;&#12290;Hibernate session&#22312;&#31532;&#19968;&#27425;&#38656;&#35201;&#36827;&#34892;JDBC&#25805;&#20316;&#30340;&#26102;&#20505;&#33719;&#21462;&#36830;&#25509;&#65292;&#28982;&#21518;&#25345;&#26377;&#23427;&#65292;&#30452;&#21040;session&#20851;&#38381;&#12290;
                </p></li><li><p>
                    <tt class="literal">AFTER_TRANSACTION</tt> - &#22312;<tt class="literal">org.hibernate.Transaction</tt>&#32467;&#26463;&#21518;&#37322;&#25918;&#36830;&#25509;&#12290;
                </p></li><li><p>
                    <tt class="literal">AFTER_STATEMENT</tt> (&#20063;&#34987;&#31216;&#20570;&#31215;&#26497;&#37322;&#25918;) - &#22312;&#27599;&#19968;&#26465;&#35821;&#21477;&#34987;&#25191;&#34892;&#21518;&#23601;&#37322;&#25918;&#36830;&#25509;&#12290;&#20294;&#20551;&#33509;&#35821;&#21477;&#30041;&#19979;&#20102;&#19982;session&#30456;&#20851;&#30340;&#36164;&#28304;&#65292;&#37027;&#23601;&#19981;&#20250;&#34987;&#37322;&#25918;&#12290;&#30446;&#21069;&#21807;&#19968;&#30340;&#36825;&#31181;&#24773;&#24418;&#23601;&#26159;&#20351;&#29992;<tt class="literal">org.hibernate.ScrollableResults</tt>&#12290;
                </p></li></ul></div><p>
            <tt class="literal">hibernate.connection.release_mode</tt>&#37197;&#32622;&#21442;&#25968;&#29992;&#26469;&#25351;&#23450;&#20351;&#29992;&#21738;&#19968;&#31181;&#37322;&#25918;&#27169;&#24335;&#12290;&#21487;&#33021;&#30340;&#20540;&#26377;&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    <tt class="literal">auto</tt>(&#40664;&#35748;) - &#36825;&#19968;&#36873;&#25321;&#25226;&#37322;&#25918;&#27169;&#24335;&#22996;&#27966;&#32473;<tt class="literal">org.hibernate.transaction.TransactionFactory.getDefaultReleaseMode()</tt>&#26041;&#27861;&#12290;&#23545;JTATransactionFactory&#26469;&#35828;&#65292;&#23427;&#20250;&#36820;&#22238;ConnectionReleaseMode.AFTER_STATEMENT;&#23545;JDBCTransactionFactory&#26469;&#35828;&#65292;&#21017;&#26159;ConnectionReleaseMode.AFTER_TRANSACTION&#12290;&#24456;&#23569;&#38656;&#35201;&#20462;&#25913;&#36825;&#19968;&#40664;&#35748;&#34892;&#20026;&#65292;&#22240;&#20026;&#20551;&#33509;&#35774;&#32622;&#19981;&#24403;&#65292;&#23601;&#20250;&#24102;&#26469;bug&#65292;&#25110;&#32773;&#32473;&#29992;&#25143;&#20195;&#30721;&#24102;&#26469;&#35823;&#23548;&#12290;
                </p></li><li><p>
                    <tt class="literal">on_close</tt> - &#20351;&#29992; ConnectionReleaseMode.ON_CLOSE.  &#36825;&#31181;&#26041;&#24335;&#26159;&#20026;&#20102;&#21521;&#19979;&#20860;&#23481;&#30340;,&#20294;&#26159;&#24050;&#32463;&#23436;&#20840;&#19981;&#34987;&#40723;&#21169;&#20351;&#29992;&#20102;&#12290;
                </p></li><li><p>
                    <tt class="literal">after_transaction</tt> - &#20351;&#29992;ConnectionReleaseMode.AFTER_TRANSACTION&#12290;&#36825;&#19968;&#35774;&#32622;&#19981;&#24212;&#35813;&#22312;JTA&#29615;&#22659;&#19979;&#20351;&#29992;&#12290;&#20063;&#35201;&#27880;&#24847;&#65292;&#20351;&#29992;ConnectionReleaseMode.AFTER_TRANSACTION&#30340;&#26102;&#20505;&#65292;&#20551;&#33509;session &#22788;&#20110;auto-commit&#29366;&#24577;&#65292;&#36830;&#25509;&#20250;&#20687;AFTER_STATEMENT&#37027;&#26679;&#34987;&#37322;&#25918;&#12290;
                </p></li><li><p>
                    <tt class="literal">after_statement</tt> - &#20351;&#29992;ConnectionReleaseMode.AFTER_STATEMENT&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;&#20250;&#26597;&#35810;&#37197;&#32622;&#30340;<tt class="literal">ConnectionProvider</tt>&#65292;&#26159;&#21542;&#23427;&#25903;&#25345;&#36825;&#19968;&#35774;&#32622;&#65288;(<tt class="literal">supportsAggressiveRelease()</tt>)&#65289;&#12290;&#20551;&#33509;&#19981;&#25903;&#25345;&#65292;&#37322;&#25918;&#27169;&#24335;&#20250;&#34987;&#35774;&#32622;&#20026;ConnectionReleaseMode.AFTER_TRANSACTION&#12290;&#21482;&#26377;&#22312;&#20320;&#27599;&#27425;&#35843;&#29992;<tt class="literal">ConnectionProvider.getConnection()</tt>&#33719;&#21462;&#24213;&#23618;JDBC&#36830;&#25509;&#30340;&#26102;&#20505;&#65292;&#37117;&#21487;&#20197;&#30830;&#20449;&#33719;&#24471;&#21516;&#19968;&#20010;&#36830;&#25509;&#30340;&#26102;&#20505;&#65292;&#36825;&#19968;&#35774;&#32622;&#25165;&#26159;&#23433;&#20840;&#30340;&#65307;&#25110;&#32773;&#22312;auto-commit&#29615;&#22659;&#20013;&#65292;&#20320;&#21487;&#20197;&#19981;&#31649;&#26159;&#21542;&#27599;&#27425;&#37117;&#33719;&#24471;&#21516;&#19968;&#20010;&#36830;&#25509;&#30340;&#26102;&#20505;&#65292;&#36825;&#25165;&#26159;&#23433;&#20840;&#30340;&#12290;
                    
                </p></li></ul></div></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="events"></a>&#31532;&nbsp;12&nbsp;&#31456;&nbsp;
	&#25318;&#25130;&#22120;&#19982;&#20107;&#20214;(Interceptors and events)
	</h2></div></div><div></div></div><p>
	    &#24212;&#29992;&#31243;&#24207;&#33021;&#22815;&#21709;&#24212;Hibernate&#20869;&#37096;&#20135;&#29983;&#30340;&#29305;&#23450;&#20107;&#20214;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;&#36825;&#26679;&#23601;&#20801;&#35768;&#23454;&#29616;&#26576;&#20123;&#36890;&#29992;&#30340;&#21151;&#33021;
		&#20197;&#21450;&#20801;&#35768;&#23545;Hibernate&#21151;&#33021;&#36827;&#34892;&#25193;&#23637;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-interceptors"></a>12.1.&nbsp;
		&#25318;&#25130;&#22120;(Interceptors)
		</h2></div></div><div></div></div><p>
            <tt class="literal">Interceptor</tt>&#25509;&#21475;&#25552;&#20379;&#20102;&#20174;&#20250;&#35805;(session)&#22238;&#35843;(callback)&#24212;&#29992;&#31243;&#24207;(application)&#30340;&#26426;&#21046;&#65292;
                        &#36825;&#31181;&#22238;&#35843;&#26426;&#21046;&#21487;&#20197;&#20801;&#35768;&#24212;&#29992;&#31243;&#24207;&#22312;&#25345;&#20037;&#21270;&#23545;&#35937;&#34987;&#20445;&#23384;&#12289;&#26356;&#26032;&#12289;&#21024;&#38500;&#25110;&#26159;&#21152;&#36733;&#20043;&#21069;&#65292;&#26816;&#26597;&#24182;&#65288;&#25110;&#65289;&#20462;&#25913;&#20854;
			&#23646;&#24615;&#12290;&#19968;&#20010;&#21487;&#33021;&#30340;&#29992;&#36884;&#65292;&#23601;&#26159;&#29992;&#26469;&#36319;&#36394;&#23457;&#26680;(auditing)&#20449;&#24687;&#12290;&#20363;&#22914;&#65306;&#19979;&#38754;&#30340;&#36825;&#20010;<tt class="literal">&#25318;&#25130;&#22120;</tt>&#65292;&#20250;&#22312;&#19968;&#20010;&#23454;&#29616;&#20102;
			<tt class="literal">Auditable</tt>&#25509;&#21475;&#30340;&#23545;&#35937;&#34987;&#21019;&#24314;&#26102;&#33258;&#21160;&#22320;&#35774;&#32622;<tt class="literal">createTimestamp</tt>&#23646;&#24615;&#65292;&#24182;&#22312;&#23454;&#29616;&#20102;
			<tt class="literal">Auditable</tt>&#25509;&#21475;&#30340;&#23545;&#35937;&#34987;&#26356;&#26032;&#26102;&#65292;&#21516;&#27493;&#26356;&#26032;<tt class="literal">lastUpdateTimestamp</tt>&#23646;&#24615;&#12290;
        </p><p>
            &#20320;&#21487;&#20197;&#30452;&#25509;&#23454;&#29616;<tt class="literal">Interceptor</tt>&#25509;&#21475;&#65292;&#20063;&#21487;&#20197;&#65288;&#26368;&#22909;&#65289;&#32487;&#25215;&#33258;<tt class="literal">EmptyInterceptor</tt>&#12290;
        </p><pre class="programlisting">package org.hibernate.test;

import java.io.Serializable;
import java.util.Date;
import java.util.Iterator;

import org.hibernate.EmptyInterceptor;
import org.hibernate.Transaction;
import org.hibernate.type.Type;

public class AuditInterceptor extends EmptyInterceptor {

    private int updates;
    private int creates;
    private int loads;

    public void onDelete(Object entity,
                         Serializable id,
                         Object[] state,
                         String[] propertyNames,
                         Type[] types) {
        // do nothing
    }

    public boolean onFlushDirty(Object entity,
                                Serializable id,
                                Object[] currentState,
                                Object[] previousState,
                                String[] propertyNames,
                                Type[] types) {

        if ( entity instanceof Auditable ) {
            updates++;
            for ( int i=0; i &lt; propertyNames.length; i++ ) {
                if ( "lastUpdateTimestamp".equals( propertyNames[i] ) ) {
                    currentState[i] = new Date();
                    return true;
                }
            }
        }
        return false;
    }

    public boolean onLoad(Object entity,
                          Serializable id,
                          Object[] state,
                          String[] propertyNames,
                          Type[] types) {
        if ( entity instanceof Auditable ) {
            loads++;
        }
        return false;
    }

    public boolean onSave(Object entity,
                          Serializable id,
                          Object[] state,
                          String[] propertyNames,
                          Type[] types) {

        if ( entity instanceof Auditable ) {
            creates++;
            for ( int i=0; i&lt;propertyNames.length; i++ ) {
                if ( "createTimestamp".equals( propertyNames[i] ) ) {
                    state[i] = new Date();
                    return true;
                }
            }
        }
        return false;
    }

    public void afterTransactionCompletion(Transaction tx) {
        if ( tx.wasCommitted() ) {
            System.out.println("Creations: " + creates + ", Updates: " + updates, "Loads: " + loads);
        }
        updates=0;
        creates=0;
        loads=0;
    }

}</pre><p>
            &#25318;&#25130;&#22120;&#21487;&#20197;&#26377;&#20004;&#31181;:<tt class="literal">Session</tt>&#33539;&#22260;&#20869;&#30340;&#65292;&#21644;<tt class="literal">SessionFactory</tt>&#33539;&#22260;&#20869;&#30340;&#12290;
        </p><p>
		    &#24403;&#20351;&#29992;&#26576;&#20010;&#37325;&#36733;&#30340;SessionFactory.openSession()&#20351;&#29992;<tt class="literal">Interceptor</tt>&#20316;&#20026;&#21442;&#25968;&#35843;&#29992;&#25171;&#24320;&#19968;&#20010;session&#30340;&#26102;&#20505;&#65292;&#23601;&#25351;&#23450;&#20102;<tt class="literal">Session</tt>&#33539;&#22260;&#20869;&#30340;&#25318;&#25130;&#22120;&#12290;
		    
        </p><pre class="programlisting">Session session = sf.openSession( new AuditInterceptor() );</pre><p>
		    <tt class="literal">SessionFactory</tt>&#33539;&#22260;&#20869;&#30340;&#25318;&#25130;&#22120;&#35201;&#36890;&#36807;<tt class="literal">Configuration</tt>&#20013;&#27880;&#20876;&#65292;&#32780;&#36825;&#24517;&#39035;&#22312;&#21019;&#24314;<tt class="literal">SessionFactory</tt>&#20043;&#21069;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#32473;&#20986;&#30340;&#25318;&#25130;&#22120;&#20250;&#34987;&#36825;&#20010;<tt class="literal">SessionFactory</tt>&#25152;&#25171;&#24320;&#30340;&#25152;&#26377;session&#20351;&#29992;&#20102;&#65307;&#38500;&#38750;session&#25171;&#24320;&#26102;&#26126;&#30830;&#25351;&#26126;&#20102;&#20351;&#29992;&#30340;&#25318;&#25130;&#22120;&#12290;<tt class="literal">SessionFactory</tt>&#33539;&#22260;&#20869;&#30340;&#25318;&#25130;&#22120;&#65292;&#24517;&#39035;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#22240;&#20026;&#22810;&#20010;session&#21487;&#33021;&#24182;&#21457;&#20351;&#29992;&#36825;&#20010;&#25318;&#25130;&#22120;&#65292;&#35201;&#22240;&#27492;&#23567;&#24515;&#19981;&#35201;&#20445;&#23384;&#19982;session&#30456;&#20851;&#30340;&#29366;&#24577;&#12290;
        </p><pre class="programlisting">new Configuration().setInterceptor( new AuditInterceptor() );</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-events"></a>12.2.&nbsp;
		&#20107;&#20214;&#31995;&#32479;(Event system)
		</h2></div></div><div></div></div><p>
		    &#22914;&#26524;&#38656;&#35201;&#21709;&#24212;&#25345;&#20037;&#23618;&#30340;&#26576;&#20123;&#29305;&#27530;&#20107;&#20214;&#65292;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;Hibernate3&#30340;&#20107;&#20214;&#26694;&#26550;&#12290;
			&#35813;&#20107;&#20214;&#31995;&#32479;&#21487;&#20197;&#29992;&#26469;&#26367;&#20195;&#25318;&#25130;&#22120;&#65292;&#20063;&#21487;&#20197;&#20316;&#20026;&#25318;&#25130;&#22120;&#30340;&#34917;&#20805;&#26469;&#20351;&#29992;&#12290;
		    
        </p><p>
                    &#22522;&#26412;&#19978;&#65292;<tt class="literal">Session</tt>&#25509;&#21475;&#30340;&#27599;&#20010;&#26041;&#27861;&#37117;&#26377;&#30456;&#23545;&#24212;&#30340;&#20107;&#20214;&#12290;&#27604;&#22914;
			<tt class="literal">LoadEvent</tt>&#65292;<tt class="literal">FlushEvent</tt>&#65292;&#31561;&#31561;&#65288;&#26597;&#38405;XML&#37197;&#32622;&#25991;&#20214;
			&#30340;DTD&#65292;&#20197;&#21450;<tt class="literal">org.hibernate.event</tt>&#21253;&#26469;&#33719;&#24471;&#25152;&#26377;&#24050;&#23450;&#20041;&#30340;&#20107;&#20214;&#30340;&#21015;&#34920;&#65289;&#12290;&#24403;&#26576;&#20010;&#26041;
			&#27861;&#34987;&#35843;&#29992;&#26102;&#65292;Hibernate <tt class="literal">Session</tt>&#20250;&#29983;&#25104;&#19968;&#20010;&#30456;&#23545;&#24212;&#30340;&#20107;&#20214;&#24182;&#28608;&#27963;&#25152;
			&#26377;&#37197;&#32622;&#22909;&#30340;&#20107;&#20214;&#30417;&#21548;&#22120;&#12290;&#31995;&#32479;&#39044;&#35774;&#30340;&#30417;&#21548;&#22120;&#23454;&#29616;&#30340;&#22788;&#29702;&#36807;&#31243;&#23601;&#26159;&#34987;&#30417;&#21548;&#30340;&#26041;&#27861;&#35201;&#20570;&#30340;&#65288;&#34987;&#30417;&#21548;&#30340;&#26041;&#27861;&#25152;&#20570;&#30340;&#20854;&#23454;&#20165;&#20165;&#26159;&#28608;&#27963;&#30417;&#21548;&#22120;&#65292;
                        &#8220;&#23454;&#38469;&#8221;&#30340;&#24037;&#20316;&#26159;&#30001;&#30417;&#21548;&#22120;&#23436;&#25104;&#30340;&#65289;&#12290;&#19981;&#36807;&#65292;&#20320;&#21487;&#20197;&#33258;&#30001;&#22320;&#36873;&#25321;&#23454;&#29616;
			&#19968;&#20010;&#33258;&#24049;&#23450;&#21046;&#30340;&#30417;&#21548;&#22120;&#65288;&#27604;&#22914;&#65292;&#23454;&#29616;&#24182;&#27880;&#20876;&#29992;&#26469;&#22788;&#29702;&#22788;&#29702;<tt class="literal">LoadEvent</tt>&#30340;<tt class="literal">LoadEventListener</tt>&#25509;&#21475;&#65289;&#65292;
                        &#26469;&#36127;&#36131;&#22788;&#29702;&#25152;&#26377;&#30340;&#35843;&#29992;<tt class="literal">Session</tt>&#30340;<tt class="literal">load()</tt>&#26041;&#27861;&#30340;&#35831;&#27714;&#12290;
        </p><p>
		    &#30417;&#21548;&#22120;&#24212;&#35813;&#34987;&#30475;&#20316;&#26159;&#21333;&#20363;(singleton)&#23545;&#35937;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#25152;&#26377;&#21516;&#31867;&#22411;&#30340;&#20107;&#20214;&#30340;&#22788;&#29702;&#20849;&#20139;&#21516;&#19968;&#20010;&#30417;&#21548;&#22120;&#23454;&#20363;&#65292;&#22240;&#27492;&#30417;&#21548;&#22120;
			&#19981;&#24212;&#35813;&#20445;&#23384;&#20219;&#20309;&#29366;&#24577;&#65288;&#20063;&#23601;&#26159;&#19981;&#24212;&#35813;&#20351;&#29992;&#25104;&#21592;&#21464;&#37327;&#65289;&#12290;
        </p><p>
                    &#29992;&#25143;&#23450;&#21046;&#30340;&#30417;&#21548;&#22120;&#24212;&#35813;&#23454;&#29616;&#19982;&#25152;&#35201;&#22788;&#29702;&#30340;&#20107;&#20214;&#30456;&#23545;&#24212;&#30340;&#25509;&#21475;&#65292;&#25110;&#32773;&#20174;&#19968;&#20010;&#21512;&#36866;&#30340;&#22522;&#31867;&#32487;&#25215;&#65288;&#29978;&#33267;&#26159;&#20174;Hibernate&#33258;&#24102;&#30340;&#40664;&#35748;&#20107;&#20214;&#30417;&#21548;&#22120;&#31867;&#32487;&#25215;&#65292;
                        &#20026;&#20102;&#26041;&#20415;&#20320;&#36825;&#26679;&#20570;&#65292;&#36825;&#20123;&#31867;&#37117;&#34987;&#22768;&#26126;&#25104;non-final&#30340;&#20102;&#65289;&#12290;&#29992;&#25143;&#23450;&#21046;&#30340;&#30417;&#21548;&#22120;&#21487;&#20197;&#36890;&#36807;&#32534;&#31243;&#20351;&#29992;<tt class="literal">Configuration</tt>&#23545;&#35937;
                        &#26469;&#27880;&#20876;&#65292;&#20063;&#21487;&#20197;&#22312;Hibernate&#30340;XML&#26684;&#24335;&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#36827;&#34892;&#22768;&#26126;&#65288;&#19981;&#25903;&#25345;&#22312;Properties&#26684;&#24335;&#30340;&#37197;&#32622;&#25991;&#20214;&#22768;&#26126;&#30417;&#21548;&#22120;&#65289;&#12290;
                        &#19979;&#38754;&#26159;&#19968;&#20010;&#29992;&#25143;&#23450;&#21046;&#30340;&#21152;&#36733;&#20107;&#20214;(load event)&#30340;&#30417;&#21548;&#22120;&#65306;
        </p><pre class="programlisting">public class MyLoadListener implements LoadEventListener {
    // this is the single method defined by the LoadEventListener interface
    public void onLoad(LoadEvent event, LoadEventListener.LoadType loadType)
            throws HibernateException {
        if ( !MySecurity.isAuthorized( event.getEntityClassName(), event.getEntityId() ) ) {
            throw MySecurityException("Unauthorized access");
        }
    }
}</pre><p>
		    &#20320;&#36824;&#38656;&#35201;&#20462;&#25913;&#19968;&#22788;&#37197;&#32622;&#65292;&#26469;&#21578;&#35785;Hibernate&#65292;&#38500;&#20102;&#40664;&#35748;&#30340;&#30417;&#21548;&#22120;&#65292;&#36824;&#35201;&#38468;&#21152;&#36873;&#23450;&#30340;&#30417;&#21548;&#22120;&#12290;
        </p><pre class="programlisting">&lt;hibernate-configuration&gt;
    &lt;session-factory&gt;
        ...
        &lt;event type="load"&gt;
            &lt;listener class="com.eg.MyLoadListener"/&gt;
            &lt;listener class="org.hibernate.event.def.DefaultLoadEventListener"/&gt;
        &lt;/event&gt;
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</pre><p>
		    &#30475;&#30475;&#29992;&#21478;&#19968;&#31181;&#26041;&#24335;&#65292;&#36890;&#36807;&#32534;&#31243;&#30340;&#26041;&#24335;&#26469;&#27880;&#20876;&#23427;&#12290;
        </p><pre class="programlisting">Configuration cfg = new Configuration();
LoadEventListener[] stack = { new MyLoadListener(), new DefaultLoadEventListener() };
cfg.EventListeners().setLoadEventListeners(stack);</pre><p>
		    &#36890;&#36807;&#22312;XML&#37197;&#32622;&#25991;&#20214;&#22768;&#26126;&#32780;&#27880;&#20876;&#30340;&#30417;&#21548;&#22120;&#19981;&#33021;&#20849;&#20139;&#23454;&#20363;&#12290;&#22914;&#26524;&#22312;&#22810;&#20010;<tt class="literal">&lt;listener/&gt;</tt>&#33410;&#28857;&#20013;&#20351;&#29992;
			&#20102;&#30456;&#21516;&#30340;&#31867;&#30340;&#21517;&#23383;&#65292;&#21017;&#27599;&#19968;&#20010;&#24341;&#29992;&#37117;&#23558;&#20250;&#20135;&#29983;&#19968;&#20010;&#29420;&#31435;&#30340;&#23454;&#20363;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;&#22810;&#20010;&#30417;&#21548;&#22120;&#31867;&#22411;&#20043;&#38388;&#20849;&#20139;
			&#30417;&#21548;&#22120;&#30340;&#23454;&#20363;&#65292;&#21017;&#20320;&#24517;&#39035;&#20351;&#29992;&#32534;&#31243;&#30340;&#26041;&#24335;&#26469;&#36827;&#34892;&#27880;&#20876;&#12290;
        </p><p>
                    &#20026;&#20160;&#20040;&#25105;&#20204;&#23454;&#29616;&#20102;&#29305;&#23450;&#30417;&#21548;&#22120;&#30340;&#25509;&#21475;&#65292;&#22312;&#27880;&#20876;&#30340;&#26102;&#20505;&#36824;&#35201;&#26126;&#30830;&#25351;&#20986;&#25105;&#20204;&#35201;&#27880;&#20876;&#21738;&#20010;&#20107;&#20214;&#30340;&#30417;&#21548;&#22120;&#21602;&#65311;
                    &#36825;&#26159;&#22240;&#20026;&#19968;&#20010;&#31867;&#21487;&#33021;&#23454;&#29616;&#22810;&#20010;&#30417;&#21548;&#22120;&#30340;&#25509;&#21475;&#12290;&#22312;&#27880;&#20876;&#30340;&#26102;&#20505;&#26126;&#30830;&#25351;&#23450;&#35201;&#30417;&#21548;&#30340;&#20107;&#20214;&#65292;&#21487;&#20197;&#35753;&#21551;&#29992;&#25110;&#32773;&#31105;&#29992;&#23545;&#26576;&#20010;&#20107;&#20214;&#30340;&#30417;&#21548;&#30340;&#37197;&#32622;&#24037;&#20316;&#31616;&#21333;&#20123;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-decl-security"></a>12.3.&nbsp;
		Hibernate&#30340;&#22768;&#26126;&#24335;&#23433;&#20840;&#26426;&#21046;
		</h2></div></div><div></div></div><p>
		    &#36890;&#24120;&#65292;Hibernate&#24212;&#29992;&#31243;&#24207;&#30340;&#22768;&#26126;&#24335;&#23433;&#20840;&#26426;&#21046;&#30001;&#20250;&#35805;&#22806;&#35266;&#23618;(session facade)&#25152;&#31649;&#29702;&#12290;
                    &#29616;&#22312;&#65292;Hibernate3&#20801;&#35768;&#26576;&#20123;&#29305;&#23450;&#30340;&#34892;&#20026;&#30001;JACC&#36827;&#34892;&#35768;&#21487;&#31649;&#29702;&#65292;&#30001;JAAS&#36827;&#34892;&#25480;&#26435;&#31649;&#29702;&#12290;
                    &#26412;&#21151;&#33021;&#26159;&#19968;&#20010;&#24314;&#31435;&#22312;&#20107;&#20214;&#26694;&#26550;&#20043;&#19978;&#30340;&#21487;&#36873;&#30340;&#21151;&#33021;&#12290;
        </p><p>
		    &#39318;&#20808;&#65292;&#20320;&#24517;&#39035;&#35201;&#37197;&#32622;&#36866;&#24403;&#30340;&#20107;&#20214;&#30417;&#21548;&#22120;&#65288;event listener&#65289;&#65292;&#26469;&#28608;&#27963;&#20351;&#29992;JAAS&#31649;&#29702;&#25480;&#26435;&#30340;&#21151;&#33021;&#12290;
        </p><pre class="programlisting">&lt;listener type="pre-delete" class="org.hibernate.secure.JACCPreDeleteEventListener"/&gt;
&lt;listener type="pre-update" class="org.hibernate.secure.JACCPreUpdateEventListener"/&gt;
&lt;listener type="pre-insert" class="org.hibernate.secure.JACCPreInsertEventListener"/&gt;
&lt;listener type="pre-load" class="org.hibernate.secure.JACCPreLoadEventListener"/&gt;</pre><p>
            &#27880;&#24847;&#65292;<tt class="literal">&lt;listener type="..." class="..."/&gt;</tt>&#21482;&#26159;<tt class="literal">&lt;event type="..."&gt;&lt;listener class="..."/&gt;&lt;/event&gt;</tt>&#30340;&#31616;&#20889;&#65292;&#23545;&#27599;&#19968;&#20010;&#20107;&#20214;&#31867;&#22411;&#37117;&#24517;&#39035;&#20005;&#26684;&#30340;&#26377;&#19968;&#20010;&#30417;&#21548;&#22120;&#19982;&#20043;&#23545;&#24212;&#12290;
        </p><p>
		    &#25509;&#19979;&#26469;&#65292;&#20173;&#28982;&#22312;<tt class="literal">hibernate.cfg.xml</tt>&#25991;&#20214;&#20013;&#65292;&#32465;&#23450;&#35282;&#33394;&#30340;&#26435;&#38480;&#65306;
        </p><pre class="programlisting">&lt;grant role="admin" entity-name="User" actions="insert,update,read"/&gt;
&lt;grant role="su" entity-name="User" actions="*"/&gt;</pre><p>
		    &#36825;&#20123;&#35282;&#33394;&#30340;&#21517;&#23383;&#23601;&#26159;&#20320;&#30340;JACC provider&#25152;&#23450;&#20041;&#30340;&#35282;&#33394;&#30340;&#21517;&#23383;&#12290;
        </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="batch"></a>&#31532;&nbsp;13&nbsp;&#31456;&nbsp;&#25209;&#37327;&#22788;&#29702;&#65288;Batch processing&#65289;</h2></div></div><div></div></div><p>
        &#20351;&#29992;Hibernate&#23558; 100 000 &#26465;&#35760;&#24405;&#25554;&#20837;&#21040;&#25968;&#25454;&#24211;&#30340;&#19968;&#20010;&#24456;&#33258;&#28982;&#30340;&#20570;&#27861;&#21487;&#33021;&#26159;&#36825;&#26679;&#30340;
    </p><pre class="programlisting">Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();
for ( int i=0; i&lt;100000; i++ ) {
    Customer customer = new Customer(.....);
    session.save(customer);
}
tx.commit();
session.close();</pre><p>
        &#36825;&#27573;&#31243;&#24207;&#22823;&#27010;&#36816;&#34892;&#21040; 50 000 &#26465;&#35760;&#24405;&#24038;&#21491;&#20250;&#22833;&#36133;&#24182;&#25243;&#20986; <tt class="literal">&#20869;&#23384;&#28322;&#20986;&#24322;&#24120;&#65288;OutOfMemoryException&#65289;</tt> &#12290;
        &#36825;&#26159;&#22240;&#20026; Hibernate &#25226;&#25152;&#26377;&#26032;&#25554;&#20837;&#30340; <tt class="literal">&#23458;&#25143;&#65288;Customer&#65289;</tt>&#23454;&#20363;&#22312; session&#32423;&#21035;&#30340;&#32531;&#23384;&#21306;&#36827;&#34892;&#20102;&#32531;&#23384;&#30340;&#32536;&#25925;&#12290;
    </p><p>
        &#25105;&#20204;&#20250;&#22312;&#26412;&#31456;&#21578;&#35785;&#20320;&#22914;&#20309;&#36991;&#20813;&#27492;&#31867;&#38382;&#39064;&#12290;&#39318;&#20808;&#65292;&#22914;&#26524;&#20320;&#35201;&#25191;&#34892;&#25209;&#37327;&#22788;&#29702;&#24182;&#19988;&#24819;&#35201;&#36798;&#21040;&#19968;&#20010;&#29702;&#24819;&#30340;&#24615;&#33021;&#65292;
        &#37027;&#20040;&#20351;&#29992;JDBC&#30340;&#25209;&#37327;&#65288;batching&#65289;&#21151;&#33021;&#26159;&#33267;&#20851;&#37325;&#35201;&#12290;&#23558;JDBC&#30340;&#25209;&#37327;&#25235;&#21462;&#25968;&#37327;&#65288;batch size&#65289;&#21442;&#25968;&#35774;&#32622;&#21040;&#19968;&#20010;&#21512;&#36866;&#20540;
        &#65288;&#27604;&#22914;&#65292;10-50&#20043;&#38388;&#65289;&#65306;
    </p><pre class="programlisting">hibernate.jdbc.batch_size 20</pre><p>
        &#20320;&#20063;&#21487;&#33021;&#24819;&#22312;&#25191;&#34892;&#25209;&#37327;&#22788;&#29702;&#26102;&#20851;&#38381;&#20108;&#32423;&#32531;&#23384;&#65306;
    </p><pre class="programlisting">hibernate.cache.use_second_level_cache false</pre><p>
        &#20294;&#26159;&#65292;&#36825;&#19981;&#26159;&#32477;&#23545;&#24517;&#39035;&#30340;&#65292;&#22240;&#20026;&#25105;&#20204;&#21487;&#20197;&#26174;&#24335;&#35774;&#32622;<tt class="literal">CacheMode</tt>&#26469;&#20851;&#38381;&#19982;&#20108;&#32423;&#32531;&#23384;&#30340;&#20132;&#20114;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="batch-inserts"></a>13.1.&nbsp;&#25209;&#37327;&#25554;&#20837;&#65288;Batch inserts&#65289;</h2></div></div><div></div></div><p>
            &#22914;&#26524;&#35201;&#23558;&#24456;&#22810;&#23545;&#35937;&#25345;&#20037;&#21270;&#65292;&#20320;&#24517;&#39035;&#36890;&#36807;&#32463;&#24120;&#30340;&#35843;&#29992; <tt class="literal">flush()</tt> &#20197;&#21450;&#31245;&#21518;&#35843;&#29992; 
            <tt class="literal">clear()</tt> &#26469;&#25511;&#21046;&#31532;&#19968;&#32423;&#32531;&#23384;&#30340;&#22823;&#23567;&#12290;
        </p><pre class="programlisting">Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();
   
for ( int i=0; i&lt;100000; i++ ) {
    Customer customer = new Customer(.....);
    session.save(customer);
    if ( i % 20 == 0 ) { //20, same as the JDBC batch size //20,&#19982;JDBC&#25209;&#37327;&#35774;&#32622;&#30456;&#21516;
        //flush a batch of inserts and release memory:
        //&#23558;&#26412;&#25209;&#25554;&#20837;&#30340;&#23545;&#35937;&#31435;&#21363;&#20889;&#20837;&#25968;&#25454;&#24211;&#24182;&#37322;&#25918;&#20869;&#23384;
        session.flush();
        session.clear();
    }
}
   
tx.commit();
session.close();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="batch-update"></a>13.2.&nbsp;&#25209;&#37327;&#26356;&#26032;&#65288;Batch updates&#65289;</h2></div></div><div></div></div><p>
            &#27492;&#26041;&#27861;&#21516;&#26679;&#36866;&#29992;&#20110;&#26816;&#32034;&#21644;&#26356;&#26032;&#25968;&#25454;&#12290;&#27492;&#22806;&#65292;&#22312;&#36827;&#34892;&#20250;&#36820;&#22238;&#24456;&#22810;&#34892;&#25968;&#25454;&#30340;&#26597;&#35810;&#26102;&#65292;
            &#20320;&#38656;&#35201;&#20351;&#29992; <tt class="literal">scroll()</tt> &#26041;&#27861;&#20197;&#20415;&#20805;&#20998;&#21033;&#29992;&#26381;&#21153;&#22120;&#31471;&#28216;&#26631;&#25152;&#24102;&#26469;&#30340;&#22909;&#22788;&#12290;
        </p><pre class="programlisting">Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();
   
ScrollableResults customers = session.getNamedQuery("GetCustomers")
    .setCacheMode(CacheMode.IGNORE)
    .scroll(ScrollMode.FORWARD_ONLY);
int count=0;
while ( customers.next() ) {
    Customer customer = (Customer) customers.get(0);
    customer.updateStuff(...);
    if ( ++count % 20 == 0 ) {
        //flush a batch of updates and release memory:
        session.flush();
        session.clear();
    }
}
   
tx.commit();
session.close();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="batch-statelesssession"></a>13.3.&nbsp;StatelessSession (&#26080;&#29366;&#24577;session)&#25509;&#21475;</h2></div></div><div></div></div><p>
            &#20316;&#20026;&#36873;&#25321;&#65292;Hibernate&#25552;&#20379;&#20102;&#22522;&#20110;&#21629;&#20196;&#30340;API&#65292;&#21487;&#20197;&#29992;detached object&#30340;&#24418;&#24335;&#25226;&#25968;&#25454;&#20197;&#27969;&#30340;&#26041;&#27861;&#21152;&#20837;&#21040;&#25968;&#25454;&#24211;&#65292;&#25110;&#20174;&#25968;&#25454;&#24211;&#36755;&#20986;&#12290;<tt class="literal">StatelessSession</tt>&#27809;&#26377;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#65292;&#20063;&#19981;&#25552;&#20379;&#22810;&#23569;&#39640;&#23618;&#30340;&#29983;&#21629;&#21608;&#26399;&#35821;&#20041;&#12290;&#29305;&#21035;&#26159;&#65292;&#26080;&#29366;&#24577;session&#19981;&#23454;&#29616;&#31532;&#19968;&#32423;cache,&#20063;&#19981;&#21644;&#31532;&#20108;&#32423;&#32531;&#23384;&#65292;&#25110;&#32773;&#26597;&#35810;&#32531;&#23384;&#20132;&#20114;&#12290;&#23427;&#19981;&#23454;&#29616;&#20107;&#21153;&#21270;&#20889;&#65292;&#20063;&#19981;&#23454;&#29616;&#33039;&#25968;&#25454;&#26816;&#26597;&#12290;&#29992;stateless session&#36827;&#34892;&#30340;&#25805;&#20316;&#29978;&#33267;&#19981;&#32423;&#32852;&#21040;&#20851;&#32852;&#23454;&#20363;&#12290;stateless session&#24573;&#30053;&#38598;&#21512;&#31867;(Collections)&#12290;&#36890;&#36807;stateless session&#36827;&#34892;&#30340;&#25805;&#20316;&#19981;&#35302;&#21457;Hibernate&#30340;&#20107;&#20214;&#27169;&#22411;&#21644;&#25318;&#25130;&#22120;&#12290;&#26080;&#29366;&#24577;session&#23545;&#25968;&#25454;&#30340;&#28151;&#28102;&#29616;&#35937;&#20813;&#30123;&#65292;&#22240;&#20026;&#23427;&#27809;&#26377;&#31532;&#19968;&#32423;&#32531;&#23384;&#12290;&#26080;&#29366;&#24577;session&#26159;&#20302;&#23618;&#30340;&#25277;&#35937;&#65292;&#21644;&#20302;&#23618;JDBC&#30456;&#24403;&#25509;&#36817;&#12290;
        </p><pre class="programlisting">StatelessSession session = sessionFactory.openStatelessSession();
Transaction tx = session.beginTransaction();
   
ScrollableResults customers = session.getNamedQuery("GetCustomers")
    .scroll(ScrollMode.FORWARD_ONLY);
while ( customers.next() ) {
    Customer customer = (Customer) customers.get(0);
    customer.updateStuff(...);
    session.update(customer);
}
   
tx.commit();
session.close();</pre><p>
            &#27880;&#24847;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#26597;&#35810;&#36820;&#22238;&#30340;<tt class="literal">Customer</tt>&#23454;&#20363;&#31435;&#21363;&#34987;&#33073;&#31649;(detach)&#12290;&#23427;&#20204;&#19982;&#20219;&#20309;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#37117;&#27809;&#26377;&#20851;&#31995;&#12290;
        </p><p>
            <tt class="literal">StatelessSession</tt> &#25509;&#21475;&#23450;&#20041;&#30340;<tt class="literal">insert(), update()</tt> &#21644; <tt class="literal">delete()</tt>&#25805;&#20316;&#26159;&#30452;&#25509;&#30340;&#25968;&#25454;&#24211;&#34892;&#32423;&#21035;&#25805;&#20316;&#65292;&#20854;&#32467;&#26524;&#26159;&#31435;&#21051;&#25191;&#34892;&#19968;&#26465;<tt class="literal">INSERT, UPDATE</tt> &#25110; <tt class="literal">DELETE</tt> &#35821;&#21477;&#12290;&#22240;&#27492;&#65292;&#23427;&#20204;&#30340;&#35821;&#20041;&#21644;<tt class="literal">Session</tt> &#25509;&#21475;&#23450;&#20041;&#30340;<tt class="literal">save(), saveOrUpdate()</tt> &#21644;<tt class="literal">delete()</tt> &#25805;&#20316;&#26377;&#24456;&#22823;&#30340;&#19981;&#21516;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="batch-direct"></a>13.4.&nbsp;DML(&#25968;&#25454;&#25805;&#20316;&#35821;&#35328;)&#39118;&#26684;&#30340;&#25805;&#20316;(DML-style operations)</h2></div></div><div></div></div><p>
        hence manipulating (using the SQL <tt class="literal">Data Manipulation Language</tt>
            (DML) statements: <tt class="literal">INSERT</tt>, <tt class="literal">UPDATE</tt>, <tt class="literal">DELETE</tt>)
            data directly in the database will not affect in-memory state. However, Hibernate provides methods
            for bulk SQL-style DML statement execution which are performed through the
            Hibernate Query Language (<a href="#queryhql" title="&#31532;&nbsp;14&nbsp;&#31456;&nbsp;HQL: Hibernate&#26597;&#35810;&#35821;&#35328;">&#31532;&nbsp;14&nbsp;&#31456; <i>HQL: Hibernate&#26597;&#35810;&#35821;&#35328;</i></a>).
            
            
            &#23601;&#20687;&#24050;&#32463;&#35752;&#35770;&#30340;&#37027;&#26679;&#65292;&#33258;&#21160;&#21644;&#36879;&#26126;&#30340; &#23545;&#35937;/&#20851;&#31995; &#26144;&#23556;&#65288;object/relational mapping&#65289;&#20851;&#27880;&#20110;&#31649;&#29702;&#23545;&#35937;&#30340;&#29366;&#24577;&#12290;
            &#36825;&#23601;&#24847;&#21619;&#30528;&#23545;&#35937;&#30340;&#29366;&#24577;&#23384;&#22312;&#20110;&#20869;&#23384;&#65292;&#22240;&#27492;&#30452;&#25509;&#25805;&#20316; (&#20351;&#29992; SQL <tt class="literal">Data Manipulation Language</tt>(DML,&#25968;&#25454;&#25805;&#20316;&#35821;&#35328;&#65289;&#35821;&#21477; &#65306;<tt class="literal">INSERT</tt> ,<tt class="literal">UPDATE</tt> &#21644;
            <tt class="literal">DELETE</tt>) &#25968;&#25454;&#24211;&#20013;&#30340;&#25968;&#25454;&#23558;&#19981;&#20250;&#24433;&#21709;&#20869;&#23384;&#20013;&#30340;&#23545;&#35937;&#29366;&#24577;&#21644;&#23545;&#35937;&#25968;&#25454;&#12290;
            &#19981;&#36807;&#65292;Hibernate&#25552;&#20379;&#36890;&#36807;Hibernate&#26597;&#35810;&#35821;&#35328;&#65288;<a href="#queryhql" title="&#31532;&nbsp;14&nbsp;&#31456;&nbsp;HQL: Hibernate&#26597;&#35810;&#35821;&#35328;">&#31532;&nbsp;14&nbsp;&#31456; <i>HQL: Hibernate&#26597;&#35810;&#35821;&#35328;</i></a>&#65289;&#26469;&#25191;&#34892;&#22823;&#25209;
            &#37327;SQL&#39118;&#26684;&#30340;DML&#35821;&#21477;&#30340;&#26041;&#27861;&#12290;
        </p><p>
            <tt class="literal">UPDATE</tt> &#21644; <tt class="literal">DELETE</tt>&#35821;&#21477;&#30340;&#35821;&#27861;&#20026;&#65306;
            <tt class="literal">( UPDATE | DELETE ) FROM? EntityName (WHERE where_conditions)?</tt>
            &#26377;&#20960;&#28857;&#35828;&#26126;&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#22312;FROM&#23376;&#21477;&#65288;from-clause&#65289;&#20013;&#65292;FROM&#20851;&#38190;&#23383;&#26159;&#21487;&#36873;&#30340;
                </p></li><li><p>
                    &#22312;FROM&#23376;&#21477;&#65288;from-clause&#65289;&#20013;&#21482;&#33021;&#26377;&#19968;&#20010;&#23454;&#20307;&#21517;&#65292;&#23427;&#21487;&#20197;&#26159;&#21035;&#21517;&#12290;&#22914;&#26524;&#23454;&#20307;&#21517;&#26159;&#21035;&#21517;&#65292;&#37027;&#20040;&#20219;&#20309;&#34987;&#24341;&#29992;&#30340;&#23646;&#24615;&#37117;&#24517;&#39035;&#21152;&#19978;&#27492;&#21035;&#21517;&#30340;&#21069;&#32512;&#65307;&#22914;&#26524;&#19981;&#26159;&#21035;&#21517;&#65292;&#37027;&#20040;&#20219;&#20309;&#26377;&#21069;&#32512;&#30340;&#23646;&#24615;&#24341;&#29992;&#37117;&#26159;&#38750;&#27861;&#30340;&#12290;
                </p></li><li><p>
                    &#19981;&#33021;&#22312;&#22823;&#25209;&#37327;HQL&#35821;&#21477;&#20013;&#20351;&#29992;<a href="#queryhql-joins-forms" title="14.4.&nbsp;join &#35821;&#27861;&#30340;&#24418;&#24335;">&#31532;&nbsp;14.4&nbsp;&#33410; &#8220;join &#35821;&#27861;&#30340;&#24418;&#24335;&#8221;</a>&#65288;&#26174;&#24335;&#25110;&#32773;&#38544;&#24335;&#30340;&#37117;&#19981;&#34892;&#65289;&#12290;&#19981;&#36807;&#22312;WHERE&#23376;&#21477;&#20013;&#21487;&#20197;&#20351;&#29992;&#23376;&#26597;&#35810;&#12290;&#21487;&#20197;&#22312;where&#23376;&#21477;&#20013;&#20351;&#29992;&#23376;&#26597;&#35810;&#65292;&#23376;&#26597;&#35810;&#26412;&#36523;&#21487;&#20197;&#21253;&#21547;join&#12290;

                </p></li><li><p>
                       &#25972;&#20010;WHERE&#23376;&#21477;&#26159;&#21487;&#36873;&#30340;&#12290;
                </p></li></ul></div><p>
            &#20030;&#20010;&#20363;&#23376;&#65292;&#20351;&#29992;<tt class="literal">Query.executeUpdate()</tt>&#26041;&#27861;&#25191;&#34892;&#19968;&#20010;HQL
            <tt class="literal">UPDATE</tt>&#35821;&#21477;(&#65306;
             (&#26041;&#27861;&#21629;&#21517;&#26159;&#26469;&#28304;&#20110;JDBC's <tt class="literal">PreparedStatement.executeUpdate()</tt>):
        </p><pre class="programlisting">Session session = sessionFactory.openSession();
		Transaction tx = session.beginTransaction();

		String hqlUpdate = "update Customer c set c.name = :newName where c.name = :oldName";
		// or String hqlUpdate = "update Customer set name = :newName where name = :oldName";
		int updatedEntities = s.createQuery( hqlUpdate )
		        .setString( "newName", newName )
		        .setString( "oldName", oldName )
		        .executeUpdate();
		tx.commit();
		session.close();</pre><p>
            HQL <tt class="literal">UPDATE</tt>&#35821;&#21477;&#65292;&#40664;&#35748;&#19981;&#20250;&#24433;&#21709;&#26356;&#26032;&#23454;&#20307;&#30340;<a href="#mapping-declaration-version" title="5.1.7.&nbsp;&#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)">&#31532;&nbsp;5.1.7&nbsp;&#33410; &#8220;&#29256;&#26412;&#65288;version&#65289;(&#21487;&#36873;)&#8221;</a>&#25110;&#32773;<a href="#mapping-declaration-timestamp" title="5.1.8.&nbsp;timestamp (&#21487;&#36873;)">&#31532;&nbsp;5.1.8&nbsp;&#33410; &#8220;timestamp (&#21487;&#36873;)&#8221;</a>&#23646;&#24615;&#20540;&#12290;&#36825;&#21644;EJB3&#35268;&#33539;&#26159;&#19968;&#33268;&#30340;&#12290;&#20294;&#26159;&#65292;&#36890;&#36807;&#20351;&#29992;<tt class="literal">versioned update</tt>&#65292;&#20320;&#21487;&#20197;&#24378;&#21046;Hibernate&#27491;&#30830;&#30340;&#37325;&#32622;<tt class="literal">version</tt>&#25110;&#32773;<tt class="literal">timestamp</tt>&#23646;&#24615;&#20540;&#12290;&#36825;&#36890;&#36807;&#22312;<tt class="literal">UPDATE</tt>&#20851;&#38190;&#23383;&#21518;&#38754;&#22686;&#21152;<tt class="literal">VERSIONED</tt>&#20851;&#38190;&#23383;&#26469;&#23454;&#29616;&#30340;&#12290;
        </p><pre class="programlisting">Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();
String hqlVersionedUpdate = "update versioned Customer set name = :newName where name = :oldName";
int updatedEntities = s.createQuery( hqlUpdate )
        .setString( "newName", newName )
        .setString( "oldName", oldName )
        .executeUpdate();
tx.commit();
session.close();</pre><p>
            &#27880;&#24847;&#65292;&#33258;&#23450;&#20041;&#30340;&#29256;&#26412;&#31867;&#22411;(<tt class="literal">org.hibernate.usertype.UserVersionType</tt>)&#19981;&#20801;&#35768;&#21644;<tt class="literal">update versioned</tt>&#35821;&#21477;&#32852;&#29992;&#12290;
        </p><p>
            &#25191;&#34892;&#19968;&#20010;HQL <tt class="literal">DELETE</tt>&#65292;&#21516;&#26679;&#20351;&#29992; <tt class="literal">Query.executeUpdate()</tt> &#26041;&#27861;:
        </p><pre class="programlisting">Session session = sessionFactory.openSession();
		Transaction tx = session.beginTransaction();

		String hqlDelete = "delete Customer c where c.name = :oldName";
		// or String hqlDelete = "delete Customer where name = :oldName";
		int deletedEntities = s.createQuery( hqlDelete )
		        .setString( "oldName", oldName )
		        .executeUpdate();
		tx.commit();
		session.close();</pre><p>
            &#30001;<tt class="literal">Query.executeUpdate()</tt>&#26041;&#27861;&#36820;&#22238;&#30340;<tt class="literal">&#25972;&#22411;</tt>&#20540;&#34920;&#26126;&#20102;&#21463;&#27492;&#25805;&#20316;&#24433;&#21709;&#30340;&#35760;&#24405;&#25968;&#37327;&#12290;
            &#27880;&#24847;&#36825;&#20010;&#25968;&#20540;&#21487;&#33021;&#19982;&#25968;&#25454;&#24211;&#20013;&#34987;&#65288;&#26368;&#21518;&#19968;&#26465;SQL&#35821;&#21477;&#65289;&#24433;&#21709;&#20102;&#30340;&#8220;&#34892;&#8221;&#25968;&#26377;&#20851;&#65292;&#20063;&#21487;&#33021;&#27809;&#26377;&#12290;&#19968;&#20010;&#22823;&#25209;&#37327;HQL&#25805;&#20316;&#21487;&#33021;&#23548;&#33268;&#22810;&#26465;&#23454;&#38469;&#30340;SQL&#35821;&#21477;&#34987;&#25191;&#34892;&#65292;
            &#20030;&#20010;&#20363;&#23376;&#65292;&#23545;joined-subclass&#26144;&#23556;&#26041;&#24335;&#30340;&#31867;&#36827;&#34892;&#30340;&#27492;&#31867;&#25805;&#20316;&#12290;&#36825;&#20010;&#36820;&#22238;&#20540;&#20195;&#34920;&#20102;&#23454;&#38469;&#34987;&#35821;&#21477;&#24433;&#21709;&#20102;&#30340;&#35760;&#24405;&#25968;&#37327;&#12290;&#22312;&#37027;&#20010;joined-subclass&#30340;&#20363;&#23376;&#20013;&#65292;
            &#23545;&#19968;&#20010;&#23376;&#31867;&#30340;&#21024;&#38500;&#23454;&#38469;&#19978;&#21487;&#33021;&#19981;&#20165;&#20165;&#20250;&#21024;&#38500;&#23376;&#31867;&#26144;&#23556;&#21040;&#30340;&#34920;&#32780;&#19988;&#20250;&#24433;&#21709;&#8220;&#26681;&#8221;&#34920;&#65292;&#36824;&#26377;&#21487;&#33021;&#24433;&#21709;&#19982;&#20043;&#26377;&#32487;&#25215;&#20851;&#31995;&#30340;joined-subclass&#26144;&#23556;&#26041;&#24335;&#30340;&#23376;&#31867;&#30340;&#34920;&#12290;
        </p><p>
            <tt class="literal">INSERT</tt>&#35821;&#21477;&#30340;&#20266;&#30721;&#26159;:
            <tt class="literal">INSERT INTO EntityName properties_list select_statement</tt>.  
            &#35201;&#27880;&#24847;&#30340;&#26159;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#21482;&#25903;&#25345;INSERT INTO ... SELECT ...&#24418;&#24335;,&#19981;&#25903;&#25345;INSERT INTO ... VALUES ...&#24418;&#24335;.
                </p><p>
                    properties_list&#21644;SQL <tt class="literal">INSERT</tt>&#35821;&#21477;&#20013;&#30340;<tt class="literal">&#23383;&#27573;&#23450;&#20041;(column speficiation)</tt>&#31867;&#20284;&#12290;&#23545;&#21442;&#19982;&#32487;&#25215;&#26641;&#26144;&#23556;&#30340;&#23454;&#20307;&#32780;&#35328;&#65292;&#21482;&#26377;&#30452;&#25509;&#23450;&#20041;&#22312;&#32473;&#23450;&#30340;&#31867;&#32423;&#21035;&#30340;&#23646;&#24615;&#25165;&#33021;&#30452;&#25509;&#22312;properties_list&#20013;&#20351;&#29992;&#12290;&#36229;&#31867;&#30340;&#23646;&#24615;&#19981;&#34987;&#25903;&#25345;&#65307;&#23376;&#31867;&#30340;&#23646;&#24615;&#26080;&#24847;&#20041;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;<tt class="literal">INSERT</tt>&#22825;&#29983;&#19981;&#25903;&#25345;&#22810;&#24577;&#12290;
                </p></li><li><p>
                    select_statement&#21487;&#20197;&#26159;&#20219;&#20309;&#21512;&#27861;&#30340;HQL&#36873;&#25321;&#26597;&#35810;&#65292;&#19981;&#36807;&#35201;&#20445;&#35777;&#36820;&#22238;&#31867;&#22411;&#24517;&#39035;&#21644;&#35201;&#25554;&#20837;&#30340;&#31867;&#22411;&#23436;&#20840;&#21305;&#37197;&#12290;&#30446;&#21069;&#65292;&#36825;&#19968;&#26816;&#26597;&#26159;&#22312;&#26597;&#35810;&#32534;&#35793;&#30340;&#26102;&#20505;&#36827;&#34892;&#30340;&#65292;&#32780;&#19981;&#26159;&#25226;&#23427;&#20132;&#32473;&#25968;&#25454;&#24211;&#12290;&#27880;&#24847;&#65292;&#22312;Hibernate<tt class="literal">Type</tt>&#38388;&#22914;&#26524;&#21482;&#26159;<span class="emphasis"><em>&#31561;&#20215;&#65288;equivalent&#65289;</em></span>&#32780;&#38750;<span class="emphasis"><em>&#30456;&#31561;(equal)</em></span>&#65292;&#20250;&#23548;&#33268;&#38382;&#39064;&#12290;&#23450;&#20041;&#20026;<tt class="literal">org.hibernate.type.DateType</tt>&#21644;<tt class="literal">org.hibernate.type.TimestampType</tt>&#30340;&#20004;&#20010;&#23646;&#24615;&#21487;&#33021;&#20250;&#20135;&#29983;&#31867;&#22411;&#19981;&#21305;&#37197;&#38169;&#35823;&#65292;&#34429;&#28982;&#25968;&#25454;&#24211;&#32423;&#21487;&#33021;&#19981;&#21152;&#21306;&#20998;&#25110;&#32773;&#21487;&#20197;&#22788;&#29702;&#36825;&#31181;&#36716;&#25442;&#12290;
                </p></li><li><p>
                    &#23545;id&#23646;&#24615;&#26469;&#35828;,insert&#35821;&#21477;&#32473;&#20320;&#20004;&#20010;&#36873;&#25321;&#12290;&#20320;&#21487;&#20197;&#26126;&#30830;&#22320;&#22312;properties_list&#34920;&#20013;&#25351;&#23450;id&#23646;&#24615;&#65288;&#36825;&#26679;&#23427;&#30340;&#20540;&#26159;&#20174;&#23545;&#24212;&#30340;select&#34920;&#36798;&#24335;&#20013;&#33719;&#24471;&#65289;&#65292;&#25110;&#32773;&#22312;properties_list&#20013;&#30465;&#30053;&#23427;&#65288;&#27492;&#26102;&#20351;&#29992;&#29983;&#25104;&#25351;&#65289;&#12290;&#21518;&#19968;&#31181;&#36873;&#25321;&#21482;&#26377;&#24403;&#20351;&#29992;&#22312;&#25968;&#25454;&#24211;&#20013;&#29983;&#25104;&#20540;&#30340;id&#20135;&#29983;&#22120;&#26102;&#25165;&#33021;&#20351;&#29992;&#65307;&#22914;&#26524;&#26159;&#8220;&#20869;&#23384;&#8221;&#20013;&#35745;&#31639;&#30340;&#31867;&#22411;&#29983;&#25104;&#22120;&#65292;&#22312;&#35299;&#26512;&#26102;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;&#27880;&#24847;&#65292;&#20026;&#20102;&#35828;&#26126;&#36825;&#19968;&#38382;&#39064;&#65292;&#25968;&#25454;&#24211;&#20135;&#29983;&#20540;&#30340;&#29983;&#25104;&#22120;&#26159;<tt class="literal">org.hibernate.id.SequenceGenerator</tt>&#65288;&#21644;&#23427;&#30340;&#23376;&#31867;&#65289;&#65292;&#20197;&#21450;&#20219;&#20309;<tt class="literal">org.hibernate.id.PostInsertIdentifierGenerator</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#36825;&#20799;&#26368;&#20540;&#24471;&#27880;&#24847;&#30340;&#24847;&#22806;&#26159;<tt class="literal">org.hibernate.id.TableHiLoGenerator</tt>&#65292;&#23427;&#19981;&#33021;&#22312;&#27492;&#20351;&#29992;&#65292;&#22240;&#20026;&#23427;&#27809;&#26377;&#24471;&#21040;&#20854;&#20540;&#30340;&#36884;&#24452;&#12290;
                </p></li><li><p>
                    &#23545;&#26144;&#23556;&#20026;<tt class="literal">version</tt> &#25110; <tt class="literal">timestamp</tt>&#30340;&#23646;&#24615;&#26469;&#35828;&#65292;insert&#35821;&#21477;&#20063;&#32473;&#20320;&#20004;&#20010;&#36873;&#25321;&#65292;&#20320;&#21487;&#20197;&#22312;properties_list&#34920;&#20013;&#25351;&#23450;&#65288;&#27492;&#26102;&#20854;&#20540;&#20174;&#23545;&#24212;&#30340;select&#34920;&#36798;&#24335;&#20013;&#33719;&#24471;&#65289;&#65292;&#25110;&#32773;&#22312;properties_list&#20013;&#30465;&#30053;&#23427;&#65288;&#27492;&#26102;&#65292;&#20351;&#29992;&#22312;<tt class="literal">org.hibernate.type.VersionType</tt> &#20013;&#23450;&#20041;&#30340;<tt class="literal">seed value(&#31181;&#23376;&#20540;)</tt>&#65289;&#12290;
                </p></li></ul></div><p>
            &#25191;&#34892;HQL <tt class="literal">INSERT</tt>&#35821;&#21477;&#30340;&#20363;&#23376;&#22914;&#19979;&#65306;
        </p><pre class="programlisting">Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

String hqlInsert = "insert into DelinquentAccount (id, name) select c.id, c.name from Customer c where ...";
int createdEntities = s.createQuery( hqlInsert )
        .executeUpdate();
tx.commit();
session.close();</pre></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="queryhql"></a>&#31532;&nbsp;14&nbsp;&#31456;&nbsp;HQL: Hibernate&#26597;&#35810;&#35821;&#35328;</h2></div></div><div></div></div><p>
        Hibernate&#37197;&#22791;&#20102;&#19968;&#31181;&#38750;&#24120;&#24378;&#22823;&#30340;&#26597;&#35810;&#35821;&#35328;&#65292;&#36825;&#31181;&#35821;&#35328;&#30475;&#19978;&#21435;&#24456;&#20687;SQL&#12290;&#20294;&#26159;&#19981;&#35201;&#34987;&#35821;&#27861;&#32467;&#26500;
        &#19978;&#30340;&#30456;&#20284;&#25152;&#36855;&#24785;&#65292;HQL&#26159;&#38750;&#24120;&#26377;&#24847;&#35782;&#30340;&#34987;&#35774;&#35745;&#20026;&#23436;&#20840;&#38754;&#21521;&#23545;&#35937;&#30340;&#26597;&#35810;&#65292;&#23427;&#21487;&#20197;&#29702;&#35299;&#22914;&#32487;&#25215;&#12289;&#22810;&#24577;
        &#21644;&#20851;&#32852;&#20043;&#31867;&#30340;&#27010;&#24565;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-casesensitivity"></a>14.1.&nbsp;&#22823;&#23567;&#20889;&#25935;&#24863;&#24615;&#38382;&#39064;</h2></div></div><div></div></div><p>
            &#38500;&#20102;Java&#31867;&#19982;&#23646;&#24615;&#30340;&#21517;&#31216;&#22806;&#65292;&#26597;&#35810;&#35821;&#21477;&#23545;&#22823;&#23567;&#20889;&#24182;&#19981;&#25935;&#24863;&#12290;
            &#25152;&#20197; <tt class="literal">SeLeCT</tt> &#19982;
            <tt class="literal">sELEct</tt> &#20197;&#21450;
            <tt class="literal">SELECT</tt> &#26159;&#30456;&#21516;&#30340;&#65292;&#20294;&#26159;
            <tt class="literal">org.hibernate.eg.FOO</tt> &#24182;&#19981;&#31561;&#20215;&#20110;
            <tt class="literal">org.hibernate.eg.Foo</tt> &#24182;&#19988;
            <tt class="literal">foo.barSet</tt> &#20063;&#19981;&#31561;&#20215;&#20110;
            <tt class="literal">foo.BARSET</tt>&#12290;
        </p><p>
            &#26412;&#25163;&#20876;&#20013;&#30340;HQL&#20851;&#38190;&#23383;&#23558;&#20351;&#29992;&#23567;&#20889;&#23383;&#27597;. &#24456;&#22810;&#29992;&#25143;&#21457;&#29616;&#20351;&#29992;&#23436;&#20840;&#22823;&#20889;&#30340;&#20851;&#38190;&#23383;&#20250;&#20351;&#26597;&#35810;&#35821;&#21477;
	     &#30340;&#21487;&#35835;&#24615;&#26356;&#24378;, &#20294;&#25105;&#20204;&#21457;&#29616;&#65292;&#24403;&#25226;&#26597;&#35810;&#35821;&#21477;&#23884;&#20837;&#21040;Java&#35821;&#21477;&#20013;&#30340;&#26102;&#20505;&#20351;&#29992;&#22823;&#20889;&#20851;&#38190;&#23383;&#27604;&#36739;&#38590;&#30475;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-from"></a>14.2.&nbsp;from&#23376;&#21477;</h2></div></div><div></div></div><p>
            Hibernate&#20013;&#26368;&#31616;&#21333;&#30340;&#26597;&#35810;&#35821;&#21477;&#30340;&#24418;&#24335;&#22914;&#19979;&#65306;
        </p><pre class="programlisting">from eg.Cat</pre><p>
            &#35813;&#23376;&#21477;&#31616;&#21333;&#30340;&#36820;&#22238;<tt class="literal">eg.Cat</tt>&#31867;&#30340;&#25152;&#26377;&#23454;&#20363;&#12290;
            &#36890;&#24120;&#25105;&#20204;&#19981;&#38656;&#35201;&#20351;&#29992;&#31867;&#30340;&#20840;&#38480;&#23450;&#21517;, &#22240;&#20026; <tt class="literal">auto-import</tt>&#65288;&#33258;&#21160;&#24341;&#20837;&#65289;
            &#26159;&#32570;&#30465;&#30340;&#24773;&#20917;&#12290; &#25152;&#20197;&#25105;&#20204;&#20960;&#20046;&#21482;&#20351;&#29992;&#22914;&#19979;&#30340;&#31616;&#21333;&#20889;&#27861;&#65306;
        </p><pre class="programlisting">from Cat</pre><p>
            &#22823;&#22810;&#25968;&#24773;&#20917;&#19979;, &#20320;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;<span class="emphasis"><em>&#21035;&#21517;</em></span>, &#21407;&#22240;&#26159;&#20320;&#21487;&#33021;&#38656;&#35201;
            &#22312;&#26597;&#35810;&#35821;&#21477;&#30340;&#20854;&#23427;&#37096;&#20998;&#24341;&#29992;&#21040;<tt class="literal">Cat</tt>
        </p><pre class="programlisting">from Cat as cat</pre><p>
            &#36825;&#20010;&#35821;&#21477;&#25226;&#21035;&#21517;<tt class="literal">cat</tt>&#25351;&#23450;&#32473;&#31867;<tt class="literal">Cat</tt>
            &#30340;&#23454;&#20363;, &#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;&#38543;&#21518;&#30340;&#26597;&#35810;&#20013;&#20351;&#29992;&#27492;&#21035;&#21517;&#20102;&#12290; &#20851;&#38190;&#23383;<tt class="literal">as</tt>
            &#26159;&#21487;&#36873;&#30340;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#36825;&#26679;&#20889;:
        </p><pre class="programlisting">from Cat cat</pre><p>
            &#23376;&#21477;&#20013;&#21487;&#20197;&#21516;&#26102;&#20986;&#29616;&#22810;&#20010;&#31867;, &#20854;&#26597;&#35810;&#32467;&#26524;&#26159;&#20135;&#29983;&#19968;&#20010;&#31515;&#21345;&#20799;&#31215;&#25110;&#20135;&#29983;&#36328;&#34920;&#30340;&#36830;&#25509;&#12290;
        </p><pre class="programlisting">from Formula, Parameter</pre><pre class="programlisting">from Formula as form, Parameter as param</pre><p>
            &#26597;&#35810;&#35821;&#21477;&#20013;&#21035;&#21517;&#30340;&#24320;&#22836;&#37096;&#20998;&#23567;&#20889;&#34987;&#35748;&#20026;&#26159;&#23454;&#36341;&#20013;&#30340;&#22909;&#20064;&#24815;&#65292;
            &#36825;&#26679;&#20570;&#19982;Java&#21464;&#37327;&#30340;&#21629;&#21517;&#26631;&#20934;&#20445;&#25345;&#20102;&#19968;&#33268;
            (&#27604;&#22914;&#65292;<tt class="literal">domesticCat</tt>)&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-joins"></a>14.3.&nbsp;&#20851;&#32852;(Association)&#19982;&#36830;&#25509;(Join)</h2></div></div><div></div></div><p>
            &#25105;&#20204;&#20063;&#21487;&#20197;&#20026;&#30456;&#20851;&#32852;&#30340;&#23454;&#20307;&#29978;&#33267;&#26159;&#23545;&#19968;&#20010;&#38598;&#21512;&#20013;&#30340;&#20840;&#37096;&#20803;&#32032;&#25351;&#23450;&#19968;&#20010;&#21035;&#21517;, &#36825;&#26102;&#35201;&#20351;&#29992;&#20851;&#38190;&#23383;<tt class="literal">join</tt>&#12290;
        </p><pre class="programlisting">from Cat as cat 
    inner join cat.mate as mate
    left outer join cat.kittens as kitten</pre><pre class="programlisting">from Cat as cat left join cat.mate.kittens as kittens</pre><pre class="programlisting">from Formula form full join form.parameter param</pre><p>
            &#21463;&#25903;&#25345;&#30340;&#36830;&#25509;&#31867;&#22411;&#26159;&#20174;ANSI SQL&#20013;&#20511;&#37492;&#26469;&#30340;&#12290;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    <tt class="literal">inner join</tt>&#65288;&#20869;&#36830;&#25509;&#65289;
                </p></li><li><p>
                    <tt class="literal">left outer join</tt>&#65288;&#24038;&#22806;&#36830;&#25509;&#65289;
                </p></li><li><p>
                    <tt class="literal">right outer join</tt>&#65288;&#21491;&#22806;&#36830;&#25509;&#65289;
                </p></li><li><p>
                    <tt class="literal">full join</tt> (&#20840;&#36830;&#25509;&#65292;&#24182;&#19981;&#24120;&#29992;)
                </p></li></ul></div><p>
            &#35821;&#21477;<tt class="literal">inner join</tt>, <tt class="literal">left outer join</tt> &#20197;&#21450;
            <tt class="literal">right outer join</tt> &#21487;&#20197;&#31616;&#20889;&#12290;
        </p><pre class="programlisting">from Cat as cat 
    join cat.mate as mate
    left join cat.kittens as kitten</pre><p>
            &#36890;&#36807;HQL&#30340;<tt class="literal">with</tt>&#20851;&#38190;&#23383;&#65292;&#20320;&#21487;&#20197;&#25552;&#20379;&#39069;&#22806;&#30340;join&#26465;&#20214;&#12290;
        </p><pre class="programlisting">from Cat as cat 
    left join cat.kittens as kitten 
        with kitten.bodyWeight &gt; 10.0</pre><p>
            &#36824;&#26377;&#65292;&#19968;&#20010;"fetch"&#36830;&#25509;&#20801;&#35768;&#20165;&#20165;&#20351;&#29992;&#19968;&#20010;&#36873;&#25321;&#35821;&#21477;&#23601;&#23558;&#30456;&#20851;&#32852;&#30340;&#23545;&#35937;&#25110;&#19968;&#32452;&#20540;&#30340;&#38598;&#21512;&#38543;&#30528;&#20182;&#20204;&#30340;&#29238;&#23545;&#35937;&#30340;&#21021;&#22987;&#21270;&#32780;&#34987;&#21021;&#22987;&#21270;&#65292;&#36825;&#31181;&#26041;&#27861;&#22312;&#20351;&#29992;&#21040;&#38598;&#21512;&#30340;&#24773;&#20917;&#19979;&#23588;&#20854;&#26377;&#29992;&#65292;&#23545;&#20110;&#20851;&#32852;&#21644;&#38598;&#21512;&#26469;&#35828;&#65292;&#23427;&#26377;&#25928;&#30340;&#20195;&#26367;&#20102;&#26144;&#23556;&#25991;&#20214;&#20013;&#30340;&#22806;&#32852;&#25509;
            &#19982;&#24310;&#36831;&#22768;&#26126;&#65288;lazy declarations&#65289;. &#26597;&#30475;
            <a href="#performance-fetching" title="19.1.&nbsp;&#xA;			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)&#xA;		">&#31532;&nbsp;19.1&nbsp;&#33410; &#8220;
			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)
		&#8221;</a> &#20197;&#33719;&#24471;&#31561;&#22810;&#30340;&#20449;&#24687;&#12290;
        </p><pre class="programlisting">from Cat as cat 
    inner join fetch cat.mate
    left join fetch cat.kittens</pre><p>
            &#19968;&#20010;fetch&#36830;&#25509;&#36890;&#24120;&#19981;&#38656;&#35201;&#34987;&#25351;&#23450;&#21035;&#21517;, &#22240;&#20026;&#30456;&#20851;&#32852;&#30340;&#23545;&#35937;&#19981;&#24212;&#24403;&#34987;&#29992;&#22312;
            <tt class="literal">where</tt> &#23376;&#21477; (&#25110;&#20854;&#23427;&#20219;&#20309;&#23376;&#21477;)&#20013;&#12290;&#21516;&#26102;&#65292;&#30456;&#20851;&#32852;&#30340;&#23545;&#35937;
            &#24182;&#19981;&#22312;&#26597;&#35810;&#30340;&#32467;&#26524;&#20013;&#30452;&#25509;&#36820;&#22238;&#65292;&#20294;&#21487;&#20197;&#36890;&#36807;&#20182;&#20204;&#30340;&#29238;&#23545;&#35937;&#26469;&#35775;&#38382;&#21040;&#20182;&#20204;&#12290;
        </p><pre class="programlisting">from Cat as cat 
    inner join fetch cat.mate
    left join fetch cat.kittens child
    left join fetch child.kittens</pre><p>
            &#20551;&#33509;&#20351;&#29992;<tt class="literal">iterate()</tt>&#26469;&#35843;&#29992;&#26597;&#35810;&#65292;&#35831;&#27880;&#24847;<tt class="literal">fetch</tt>&#26500;&#36896;&#26159;&#19981;&#33021;&#20351;&#29992;&#30340;(<tt class="literal">scroll()</tt> &#21487;&#20197;&#20351;&#29992;)&#12290;<tt class="literal">fetch</tt>&#20063;&#19981;&#24212;&#35813;&#19982;<tt class="literal">setMaxResults()</tt> &#25110;<tt class="literal">setFirstResult()</tt>&#20849;&#29992;&#65292;&#36825;&#26159;&#22240;&#20026;&#36825;&#20123;&#25805;&#20316;&#26159;&#22522;&#20110;&#32467;&#26524;&#38598;&#30340;&#65292;&#32780;&#22312;&#39044;&#20808;&#25235;&#21462;&#38598;&#21512;&#31867;&#26102;&#21487;&#33021;&#21253;&#21547;&#37325;&#22797;&#30340;&#25968;&#25454;&#65292;&#20063;&#23601;&#26159;&#35828;&#26080;&#27861;&#39044;&#20808;&#30693;&#36947;&#31934;&#30830;&#30340;&#34892;&#25968;&#12290;<tt class="literal">fetch</tt>&#36824;&#19981;&#33021;&#19982;&#29420;&#31435;&#30340; <tt class="literal">with</tt>&#26465;&#20214;&#19968;&#36215;&#20351;&#29992;&#12290;&#36890;&#36807;&#22312;&#19968;&#27425;&#26597;&#35810;&#20013;fetch&#22810;&#20010;&#38598;&#21512;&#65292;&#21487;&#20197;&#21046;&#36896;&#20986;&#31515;&#21345;&#23572;&#31215;&#65292;&#22240;&#27492;&#35831;&#22810;&#21152;&#27880;&#24847;&#12290;&#23545;bag&#26144;&#23556;&#26469;&#35828;&#65292;&#21516;&#26102;join fetch&#22810;&#20010;&#38598;&#21512;&#35282;&#33394;&#21487;&#33021;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#32473;&#20986;&#24182;&#38750;&#39044;&#26399;&#30340;&#32467;&#26524;&#65292;&#20063;&#35831;&#23567;&#24515;&#12290;&#26368;&#21518;&#27880;&#24847;&#65292;&#20351;&#29992;<tt class="literal">full join fetch</tt> &#19982; <tt class="literal">right join fetch</tt>&#26159;&#27809;&#26377;&#24847;&#20041;&#30340;&#12290;
        </p><p>
            &#22914;&#26524;&#20320;&#20351;&#29992;&#23646;&#24615;&#32423;&#21035;&#30340;&#24310;&#36831;&#33719;&#21462;&#65288;lazy fetching&#65289;&#65288;&#36825;&#26159;&#36890;&#36807;&#37325;&#26032;&#32534;&#20889;&#23383;&#33410;&#30721;&#23454;&#29616;&#30340;&#65289;&#65292;&#21487;&#20197;&#20351;&#29992; <tt class="literal">fetch  
all properties</tt> 
            &#26469;&#24378;&#21046;Hibernate&#31435;&#21363;&#21462;&#24471;&#37027;&#20123;&#21407;&#26412;&#38656;&#35201;&#24310;&#36831;&#21152;&#36733;&#30340;&#23646;&#24615;&#65288;&#22312;&#31532;&#19968;&#20010;&#26597;&#35810;&#20013;&#65289;&#12290;

        </p><pre class="programlisting">from Document fetch all properties order by name</pre><pre class="programlisting">from Document doc fetch all properties where lower(doc.name) like '%cats%'</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-joins-forms"></a>14.4.&nbsp;join &#35821;&#27861;&#30340;&#24418;&#24335;</h2></div></div><div></div></div><p>
		    HQL&#25903;&#25345;&#20004;&#31181;&#20851;&#32852;join&#30340;&#24418;&#24335;&#65306;<tt class="literal">implicit(&#38544;&#24335;)</tt> &#19982;<tt class="literal">explicit&#65288;&#26174;&#24335;&#65289;</tt>&#12290;
		</p><p>
		    &#19978;&#19968;&#33410;&#20013;&#32473;&#20986;&#30340;&#26597;&#35810;&#37117;&#26159;&#20351;&#29992;<tt class="literal">explicit(&#26174;&#24335;)</tt>&#24418;&#24335;&#30340;&#65292;&#20854;&#20013;form&#23376;&#21477;&#20013;&#26126;&#30830;&#32473;&#20986;&#20102;join&#20851;&#38190;&#23383;&#12290;&#36825;&#26159;&#24314;&#35758;&#20351;&#29992;&#30340;&#26041;&#24335;&#12290;
	    </p><p>
		    <tt class="literal">implicit&#65288;&#38544;&#24335;&#65289;</tt>&#24418;&#24335;&#19981;&#20351;&#29992;join&#20851;&#38190;&#23383;&#12290;&#20851;&#32852;&#20351;&#29992;"&#28857;&#21495;"&#26469;&#36827;&#34892;&#8220;&#24341;&#29992;&#8221;&#12290;<tt class="literal">implicit</tt> join&#21487;&#20197;&#22312;&#20219;&#20309;HQL&#23376;&#21477;&#20013;&#20986;&#29616;.<tt class="literal">implicit</tt> join&#22312;&#26368;&#32456;&#30340;SQL&#35821;&#21477;&#20013;&#20197;inner join&#30340;&#26041;&#24335;&#20986;&#29616;&#12290;
	    </p><pre class="programlisting">from Cat as cat where cat.mate.name like '%s%'</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-select"></a>14.5.&nbsp;select&#23376;&#21477;</h2></div></div><div></div></div><p>
            <tt class="literal">select</tt> &#23376;&#21477;&#36873;&#25321;&#23558;&#21738;&#20123;&#23545;&#35937;&#19982;&#23646;&#24615;&#36820;
            &#22238;&#21040;&#26597;&#35810;&#32467;&#26524;&#38598;&#20013;. &#32771;&#34385;&#22914;&#19979;&#24773;&#20917;:
        </p><pre class="programlisting">select mate 
from Cat as cat 
    inner join cat.mate as mate</pre><p>
            &#35813;&#35821;&#21477;&#23558;&#36873;&#25321;<tt class="literal">mate</tt>s of other <tt class="literal">Cat</tt>s&#12290;&#65288;&#20854;&#20182;&#29483;&#30340;&#37197;&#20598;&#65289;
            &#23454;&#38469;&#19978;, &#20320;&#21487;&#20197;&#26356;&#31616;&#27905;&#30340;&#29992;&#20197;&#19979;&#30340;&#26597;&#35810;&#35821;&#21477;&#34920;&#36798;&#30456;&#21516;&#30340;&#21547;&#20041;:
        </p><pre class="programlisting">select cat.mate from Cat cat</pre><p>
            &#26597;&#35810;&#35821;&#21477;&#21487;&#20197;&#36820;&#22238;&#20540;&#20026;&#20219;&#20309;&#31867;&#22411;&#30340;&#23646;&#24615;&#65292;&#21253;&#25324;&#36820;&#22238;&#31867;&#22411;&#20026;&#26576;&#31181;&#32452;&#20214;(Component)&#30340;&#23646;&#24615;:
        </p><pre class="programlisting">select cat.name from DomesticCat cat
where cat.name like 'fri%'</pre><pre class="programlisting">select cust.name.firstName from Customer as cust</pre><p>
            &#26597;&#35810;&#35821;&#21477;&#21487;&#20197;&#36820;&#22238;&#22810;&#20010;&#23545;&#35937;&#21644;&#65288;&#25110;&#65289;&#23646;&#24615;&#65292;&#23384;&#25918;&#22312;
            <tt class="literal">Object[]</tt>&#38431;&#21015;&#20013;,
        </p><pre class="programlisting">select mother, offspr, mate.name 
from DomesticCat as mother
    inner join mother.mate as mate
    left outer join mother.kittens as offspr</pre><p>
            &#25110;&#23384;&#25918;&#22312;&#19968;&#20010;<tt class="literal">List</tt>&#23545;&#35937;&#20013;,
        </p><pre class="programlisting">select new list(mother, offspr, mate.name)
from DomesticCat as mother
    inner join mother.mate as mate
    left outer join mother.kittens as offspr</pre><p>
            &#20063;&#21487;&#33021;&#30452;&#25509;&#36820;&#22238;&#19968;&#20010;&#23454;&#38469;&#30340;&#31867;&#22411;&#23433;&#20840;&#30340;Java&#23545;&#35937;,
        </p><pre class="programlisting">select new Family(mother, mate, offspr)
from DomesticCat as mother
    join mother.mate as mate
    left join mother.kittens as offspr</pre><p>
            &#20551;&#35774;&#31867;<tt class="literal">Family</tt>&#26377;&#19968;&#20010;&#21512;&#36866;&#30340;&#26500;&#36896;&#20989;&#25968;.
        </p><p>
            &#20320;&#21487;&#20197;&#20351;&#29992;&#20851;&#38190;&#23383;<tt class="literal">as</tt>&#32473;&#8220;&#34987;&#36873;&#25321;&#20102;&#30340;&#34920;&#36798;&#24335;&#8221;&#25351;&#27966;&#21035;&#21517;:
        </p><pre class="programlisting">select max(bodyWeight) as max, min(bodyWeight) as min, count(*) as n
from Cat cat</pre><p>
            &#36825;&#31181;&#20570;&#27861;&#22312;&#19982;&#23376;&#21477;<tt class="literal">select new map</tt>&#19968;&#36215;&#20351;&#29992;&#26102;&#26368;&#26377;&#29992;:
        </p><pre class="programlisting">select new map( max(bodyWeight) as max, min(bodyWeight) as min, count(*) as n )
from Cat cat</pre><p>
            &#35813;&#26597;&#35810;&#36820;&#22238;&#20102;&#19968;&#20010;<tt class="literal">Map</tt>&#30340;&#23545;&#35937;&#65292;&#20869;&#23481;&#26159;&#21035;&#21517;&#19982;&#34987;&#36873;&#25321;&#30340;&#20540;&#32452;&#25104;&#30340;&#21517;-&#20540;&#26144;&#23556;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-aggregation"></a>14.6.&nbsp;&#32858;&#38598;&#20989;&#25968;</h2></div></div><div></div></div><p>
            HQL&#26597;&#35810;&#29978;&#33267;&#21487;&#20197;&#36820;&#22238;&#20316;&#29992;&#20110;&#23646;&#24615;&#20043;&#19978;&#30340;&#32858;&#38598;&#20989;&#25968;&#30340;&#35745;&#31639;&#32467;&#26524;:
        </p><pre class="programlisting">select avg(cat.weight), sum(cat.weight), max(cat.weight), count(cat)
from Cat cat</pre><p>
            &#21463;&#25903;&#25345;&#30340;&#32858;&#38598;&#20989;&#25968;&#22914;&#19979;&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    <tt class="literal">avg(...), sum(...), min(...), max(...)</tt>
                </p></li><li><p>
                    <tt class="literal">count(*)</tt>
                </p></li><li><p>
                    <tt class="literal">count(...), count(distinct ...), count(all...)</tt>
                </p></li></ul></div><p>
            &#20320;&#21487;&#20197;&#22312;&#36873;&#25321;&#23376;&#21477;&#20013;&#20351;&#29992;&#25968;&#23398;&#25805;&#20316;&#31526;&#12289;&#36830;&#25509;&#20197;&#21450;&#32463;&#36807;&#39564;&#35777;&#30340;SQL&#20989;&#25968;&#65306;
        </p><pre class="programlisting">select cat.weight + sum(kitten.weight) 
from Cat cat 
    join cat.kittens kitten
group by cat.id, cat.weight</pre><pre class="programlisting">select firstName||' '||initial||' '||upper(lastName) from Person</pre><p>
            &#20851;&#38190;&#23383;<tt class="literal">distinct</tt>&#19982;<tt class="literal">all</tt> &#20063;&#21487;&#20197;&#20351;&#29992;&#65292;&#23427;&#20204;&#20855;&#26377;&#19982;SQL&#30456;&#21516;&#30340;&#35821;&#20041;.
        </p><pre class="programlisting">select distinct cat.name from Cat cat

select count(distinct cat.name), count(cat) from Cat cat</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-polymorphism"></a>14.7.&nbsp;&#22810;&#24577;&#26597;&#35810;</h2></div></div><div></div></div><p>
            &#19968;&#20010;&#22914;&#19979;&#30340;&#26597;&#35810;&#35821;&#21477;:
        </p><pre class="programlisting">from Cat as cat</pre><p>
            &#19981;&#20165;&#36820;&#22238;<tt class="literal">Cat</tt>&#31867;&#30340;&#23454;&#20363;, &#20063;&#21516;&#26102;&#36820;&#22238;&#23376;&#31867;
            <tt class="literal">DomesticCat</tt>&#30340;&#23454;&#20363;. Hibernate &#21487;&#20197;&#22312;<tt class="literal">from</tt>&#23376;&#21477;&#20013;&#25351;&#23450;<span class="emphasis"><em>&#20219;&#20309;</em></span> 
            Java &#31867;&#25110;&#25509;&#21475;. &#26597;&#35810;&#20250;&#36820;&#22238;&#32487;&#25215;&#20102;&#35813;&#31867;&#30340;&#25152;&#26377;&#25345;&#20037;&#21270;&#23376;&#31867;
            &#30340;&#23454;&#20363;&#25110;&#36820;&#22238;&#22768;&#26126;&#20102;&#35813;&#25509;&#21475;&#30340;&#25152;&#26377;&#25345;&#20037;&#21270;&#31867;&#30340;&#23454;&#20363;&#12290;&#19979;&#38754;&#30340;&#26597;&#35810;&#35821;&#21477;&#36820;&#22238;&#25152;&#26377;&#30340;&#34987;&#25345;&#20037;&#21270;&#30340;&#23545;&#35937;&#65306;        
       </p><pre class="programlisting">from java.lang.Object o</pre><p>
            &#25509;&#21475;<tt class="literal">Named</tt> &#21487;&#33021;&#34987;&#21508;&#31181;&#21508;&#26679;&#30340;&#25345;&#20037;&#21270;&#31867;&#22768;&#26126;&#65306;
        </p><pre class="programlisting">from Named n, Named m where n.name = m.name</pre><p>
            &#27880;&#24847;&#65292;&#26368;&#21518;&#30340;&#20004;&#20010;&#26597;&#35810;&#23558;&#38656;&#35201;&#36229;&#36807;&#19968;&#20010;&#30340;SQL <tt class="literal">SELECT</tt>.&#36825;&#34920;&#26126;<tt class="literal">order by</tt>&#23376;&#21477;
            &#27809;&#26377;&#23545;&#25972;&#20010;&#32467;&#26524;&#38598;&#36827;&#34892;&#27491;&#30830;&#30340;&#25490;&#24207;.
            (&#36825;&#20063;&#35828;&#26126;&#20320;&#19981;&#33021;&#23545;&#36825;&#26679;&#30340;&#26597;&#35810;&#20351;&#29992;<tt class="literal">Query.scroll()</tt>&#26041;&#27861;.)
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-where"></a>14.8.&nbsp;where&#23376;&#21477;</h2></div></div><div></div></div><p>
            <tt class="literal">where</tt>&#23376;&#21477;&#20801;&#35768;&#20320;&#23558;&#36820;&#22238;&#30340;&#23454;&#20363;&#21015;&#34920;&#30340;&#33539;&#22260;&#32553;&#23567;.
            &#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#21035;&#21517;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#23646;&#24615;&#21517;&#26469;&#30452;&#25509;&#24341;&#29992;&#23646;&#24615;:
        </p><pre class="programlisting">from Cat where name='Fritz'</pre><p>
        	&#22914;&#26524;&#25351;&#27966;&#20102;&#21035;&#21517;&#65292;&#38656;&#35201;&#20351;&#29992;&#23436;&#25972;&#30340;&#23646;&#24615;&#21517;:
        </p><pre class="programlisting">from Cat as cat where cat.name='Fritz'</pre><p>
            &#36820;&#22238;&#21517;&#20026;&#65288;&#23646;&#24615;name&#31561;&#20110;&#65289;'Fritz'&#30340;<tt class="literal">Cat</tt>&#31867;&#30340;&#23454;&#20363;&#12290; 
        </p><pre class="programlisting">select foo 
from Foo foo, Bar bar
where foo.startDate = bar.date</pre><p>
            &#23558;&#36820;&#22238;&#25152;&#26377;&#28385;&#36275;&#19979;&#38754;&#26465;&#20214;&#30340;<tt class="literal">Foo</tt>&#31867;&#30340;&#23454;&#20363;&#65306;
            &#23384;&#22312;&#22914;&#19979;&#30340;<tt class="literal">bar</tt>&#30340;&#19968;&#20010;&#23454;&#20363;&#65292;&#20854;<tt class="literal">date</tt>&#23646;&#24615;&#31561;&#20110;
            <tt class="literal">Foo</tt>&#30340;<tt class="literal">startDate</tt>&#23646;&#24615;&#12290;
            &#22797;&#21512;&#36335;&#24452;&#34920;&#36798;&#24335;&#20351;&#24471;<tt class="literal">where</tt>&#23376;&#21477;&#38750;&#24120;&#30340;&#24378;&#22823;&#65292;&#32771;&#34385;&#22914;&#19979;&#24773;&#20917;&#65306;
        </p><pre class="programlisting">from Cat cat where cat.mate.name is not null</pre><p>
            &#35813;&#26597;&#35810;&#23558;&#34987;&#32763;&#35793;&#25104;&#20026;&#19968;&#20010;&#21547;&#26377;&#34920;&#36830;&#25509;&#65288;&#20869;&#36830;&#25509;&#65289;&#30340;SQL&#26597;&#35810;&#12290;&#22914;&#26524;&#20320;&#25171;&#31639;&#20889;&#20687;&#36825;&#26679;&#30340;&#26597;&#35810;&#35821;&#21477;
        </p><pre class="programlisting">from Foo foo  
where foo.bar.baz.customer.address.city is not null</pre><p>
            &#22312;SQL&#20013;&#65292;&#20320;&#20026;&#36798;&#27492;&#30446;&#30340;&#23558;&#38656;&#35201;&#36827;&#34892;&#19968;&#20010;&#22235;&#34920;&#36830;&#25509;&#30340;&#26597;&#35810;&#12290;
        </p><p>
            <tt class="literal">=</tt>&#36816;&#31639;&#31526;&#19981;&#20165;&#21487;&#20197;&#34987;&#29992;&#26469;&#27604;&#36739;&#23646;&#24615;&#30340;&#20540;&#65292;&#20063;&#21487;&#20197;&#29992;&#26469;&#27604;&#36739;&#23454;&#20363;&#65306;
        </p><pre class="programlisting">from Cat cat, Cat rival where cat.mate = rival.mate</pre><pre class="programlisting">select cat, mate 
from Cat cat, Cat mate
where cat.mate = mate</pre><p>
            &#29305;&#27530;&#23646;&#24615;&#65288;&#23567;&#20889;&#65289;<tt class="literal">id</tt>&#21487;&#20197;&#29992;&#26469;&#34920;&#31034;&#19968;&#20010;&#23545;&#35937;&#30340;&#21807;&#19968;&#30340;&#26631;&#35782;&#31526;&#12290;&#65288;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#35813;&#23545;&#35937;&#30340;&#23646;&#24615;&#21517;&#12290;&#65289;
        </p><pre class="programlisting">from Cat as cat where cat.id = 123

from Cat as cat where cat.mate.id = 69</pre><p>
            &#31532;&#20108;&#20010;&#26597;&#35810;&#26159;&#26377;&#25928;&#30340;&#12290;&#27492;&#26102;&#19981;&#38656;&#35201;&#36827;&#34892;&#34920;&#36830;&#25509;&#65281;
        </p><p>
            &#21516;&#26679;&#20063;&#21487;&#20197;&#20351;&#29992;&#22797;&#21512;&#26631;&#35782;&#31526;&#12290;&#27604;&#22914;<tt class="literal">Person</tt>&#31867;&#26377;&#19968;&#20010;&#22797;&#21512;&#26631;&#35782;&#31526;&#65292;&#23427;&#30001;<tt class="literal">country</tt>&#23646;&#24615; 
            &#19982;<tt class="literal">medicareNumber</tt>&#23646;&#24615;&#32452;&#25104;&#12290;
        </p><pre class="programlisting">from bank.Person person
where person.id.country = 'AU' 
    and person.id.medicareNumber = 123456</pre><pre class="programlisting">from bank.Account account
where account.owner.id.country = 'AU' 
    and account.owner.id.medicareNumber = 123456</pre><p>
            &#31532;&#20108;&#20010;&#26597;&#35810;&#20063;&#19981;&#38656;&#35201;&#36827;&#34892;&#34920;&#36830;&#25509;&#12290;
        </p><p>
            &#21516;&#26679;&#30340;&#65292;&#29305;&#27530;&#23646;&#24615;<tt class="literal">class</tt>&#22312;&#36827;&#34892;&#22810;&#24577;&#25345;&#20037;&#21270;&#30340;&#24773;&#20917;&#19979;&#34987;&#29992;&#26469;&#23384;&#21462;&#19968;&#20010;&#23454;&#20363;&#30340;&#37492;&#21035;&#20540;&#65288;discriminator value&#65289;&#12290;
            &#19968;&#20010;&#23884;&#20837;&#21040;where&#23376;&#21477;&#20013;&#30340;Java&#31867;&#30340;&#21517;&#23383;&#23558;&#34987;&#36716;&#25442;&#20026;&#35813;&#31867;&#30340;&#37492;&#21035;&#20540;&#12290;
        </p><pre class="programlisting">from Cat cat where cat.class = DomesticCat</pre><p>
            &#20320;&#20063;&#21487;&#20197;&#22768;&#26126;&#19968;&#20010;&#23646;&#24615;&#30340;&#31867;&#22411;&#26159;&#32452;&#20214;&#25110;&#32773;&#22797;&#21512;&#29992;&#25143;&#31867;&#22411;&#65288;&#20197;&#21450;&#30001;&#32452;&#20214;&#26500;&#25104;&#30340;&#32452;&#20214;&#31561;&#31561;&#65289;&#12290;&#27704;&#36828;&#19981;&#35201;&#23581;&#35797;&#20351;&#29992;&#20197;&#32452;&#20214;&#31867;&#22411;&#26469;&#32467;&#23614;&#30340;&#36335;&#24452;&#34920;&#36798;&#24335;&#65288;path-expression&#65289;
            &#65288;&#19982;&#27492;&#30456;&#21453;&#65292;&#20320;&#24212;&#24403;&#20351;&#29992;&#32452;&#20214;&#30340;&#19968;&#20010;&#23646;&#24615;&#26469;&#32467;&#23614;&#65289;&#12290;
            &#20030;&#20363;&#26469;&#35828;&#65292;&#22914;&#26524;<tt class="literal">store.owner</tt>&#21547;&#26377;&#19968;&#20010;&#21253;&#21547;&#20102;&#32452;&#20214;&#30340;&#23454;&#20307;<tt class="literal">address</tt>
        </p><pre class="programlisting">store.owner.address.city    // &#27491;&#30830;
store.owner.address         // &#38169;&#35823;!</pre><p>
            &#19968;&#20010;&#8220;&#20219;&#24847;&#8221;&#31867;&#22411;&#26377;&#20004;&#20010;&#29305;&#27530;&#30340;&#23646;&#24615;<tt class="literal">id</tt>&#21644;<tt class="literal">class</tt>,
            &#26469;&#20801;&#35768;&#25105;&#20204;&#25353;&#29031;&#19979;&#38754;&#30340;&#26041;&#24335;&#34920;&#36798;&#19968;&#20010;&#36830;&#25509;&#65288;<tt class="literal">AuditLog.item</tt>
            &#26159;&#19968;&#20010;&#23646;&#24615;&#65292;&#35813;&#23646;&#24615;&#34987;&#26144;&#23556;&#20026;<tt class="literal">&lt;any&gt;</tt>&#65289;&#12290;
        </p><pre class="programlisting">from AuditLog log, Payment payment 
where log.item.class = 'Payment' and log.item.id = payment.id</pre><p>
            &#27880;&#24847;&#65292;&#22312;&#19978;&#38754;&#30340;&#26597;&#35810;&#19982;&#21477;&#20013;&#65292;<tt class="literal">log.item.class</tt> &#21644; <tt class="literal">payment.class</tt>
            &#23558;&#28041;&#21450;&#21040;&#23436;&#20840;&#19981;&#21516;&#30340;&#25968;&#25454;&#24211;&#20013;&#30340;&#21015;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-expressions"></a>14.9.&nbsp;&#34920;&#36798;&#24335;</h2></div></div><div></div></div><p>
            &#22312;<tt class="literal">where</tt>&#23376;&#21477;&#20013;&#20801;&#35768;&#20351;&#29992;&#30340;&#34920;&#36798;&#24335;&#21253;&#25324;
            &#22823;&#22810;&#25968;&#20320;&#21487;&#20197;&#22312;SQL&#20351;&#29992;&#30340;&#34920;&#36798;&#24335;&#31181;&#31867;:
        </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                    &#25968;&#23398;&#36816;&#31639;&#31526;<tt class="literal">+, -, *, /</tt>
                </p></li><li><p>
                    &#20108;&#36827;&#21046;&#27604;&#36739;&#36816;&#31639;&#31526;<tt class="literal">=, &gt;=, &lt;=, &lt;&gt;, !=, like</tt>
                </p></li><li><p>
                    &#36923;&#36753;&#36816;&#31639;&#31526;<tt class="literal">and, or, not</tt>
                </p></li><li><p>
                    <tt class="literal">in</tt>,
                    <tt class="literal">not in</tt>,
                    <tt class="literal">between</tt>,
                    <tt class="literal">is null</tt>,
                    <tt class="literal">is not null</tt>,
                    <tt class="literal">is empty</tt>,
                    <tt class="literal">is not empty</tt>,
                    <tt class="literal">member of</tt> and 
                    <tt class="literal">not member of</tt>
                </p></li><li><p>
                	"&#31616;&#21333;&#30340;" case, <tt class="literal">case ... when ... then ... else ... end</tt>,&#21644;
                    "&#25628;&#32034;" case, <tt class="literal">case when ... then ... else ... end</tt> 
                </p></li><li><p>
                    &#23383;&#31526;&#20018;&#36830;&#25509;&#31526;<tt class="literal">...||...</tt> or <tt class="literal">concat(...,...)</tt>
                </p></li><li><p>
                    <tt class="literal">current_date()</tt>, <tt class="literal">current_time()</tt>,
                    <tt class="literal">current_timestamp()</tt>
                </p></li><li><p>
					<tt class="literal">second(...)</tt>, <tt class="literal">minute(...)</tt>, 
					<tt class="literal">hour(...)</tt>, <tt class="literal">day(...)</tt>, 
					<tt class="literal">month(...)</tt>, <tt class="literal">year(...)</tt>,
                </p></li><li><p>
                    EJB-QL 3.0&#23450;&#20041;&#30340;&#20219;&#20309;&#20989;&#25968;&#25110;&#25805;&#20316;&#65306;<tt class="literal">substring(), trim(),
                    lower(), upper(), length(), locate(), abs(), sqrt(), bit_length()&#65292; mod()</tt>
                </p></li><li><p>
                    <tt class="literal">coalesce()</tt> &#21644; <tt class="literal">nullif()</tt>
                </p></li><li><p>
                    <tt class="literal">str()</tt> &#25226;&#25968;&#23383;&#25110;&#32773;&#26102;&#38388;&#20540;&#36716;&#25442;&#20026;&#21487;&#35835;&#30340;&#23383;&#31526;&#20018;
                </p></li><li><p>
                    <tt class="literal">cast(... as ...)</tt>, &#20854;&#31532;&#20108;&#20010;&#21442;&#25968;&#26159;&#26576;Hibernate&#31867;&#22411;&#30340;&#21517;&#23383;&#65292;&#20197;&#21450;<tt class="literal">extract(... from ...)</tt>&#65292;&#21482;&#35201;ANSI 
                    <tt class="literal">cast()</tt> &#21644; <tt class="literal">extract()</tt> &#34987;&#24213;&#23618;&#25968;&#25454;&#24211;&#25903;&#25345;
                </p></li><li><p>
                    HQL <tt class="literal">index()</tt> &#20989;&#25968;&#65292;&#20316;&#29992;&#20110;join&#30340;&#26377;&#24207;&#38598;&#21512;&#30340;&#21035;&#21517;&#12290;
                    
                </p></li><li><p>
                    HQL&#20989;&#25968;&#65292;&#25226;&#38598;&#21512;&#20316;&#20026;&#21442;&#25968;:<tt class="literal">size(), minelement(), maxelement(), minindex(), maxindex()</tt>,&#36824;&#26377;&#29305;&#21035;&#30340;<tt class="literal">elements()</tt> &#21644;<tt class="literal">indices</tt>&#20989;&#25968;&#65292;&#21487;&#20197;&#19982;&#25968;&#37327;&#35789;&#21152;&#20197;&#38480;&#23450;&#65306;<tt class="literal">some, all, exists, any, in</tt>&#12290;
                    
                </p></li><li><p>
                &#20219;&#20309;&#25968;&#25454;&#24211;&#25903;&#25345;&#30340;SQL&#26631;&#37327;&#20989;&#25968;&#65292;&#27604;&#22914;<tt class="literal">sign()</tt>, 
                    <tt class="literal">trunc()</tt>, <tt class="literal">rtrim()</tt>, <tt class="literal">sin()</tt>
                </p></li><li><p>
                    JDBC&#39118;&#26684;&#30340;&#21442;&#25968;&#20256;&#20837; <tt class="literal">?</tt>
                </p></li><li><p>
                    &#21629;&#21517;&#21442;&#25968;<tt class="literal">:name</tt>, <tt class="literal">:start_date</tt>, <tt class="literal">:x1</tt>
                </p></li><li><p>
                    SQL &#30452;&#25509;&#24120;&#37327; <tt class="literal">'foo'</tt>, <tt class="literal">69</tt>, <tt class="literal">6.66E+2</tt>, <tt class="literal">'1970-01-01 10:00:01.0'</tt>
                </p></li><li><p>
                    Java <tt class="literal">public static final</tt> &#31867;&#22411;&#30340;&#24120;&#37327; <tt class="literal">eg.Color.TABBY</tt>
                </p></li></ul></div><p>
            &#20851;&#38190;&#23383;<tt class="literal">in</tt>&#19982;<tt class="literal">between</tt>&#21487;&#25353;&#22914;&#19979;&#26041;&#27861;&#20351;&#29992;:
        </p><pre class="programlisting">from DomesticCat cat where cat.name between 'A' and 'B'</pre><pre class="programlisting">from DomesticCat cat where cat.name in ( 'Foo', 'Bar', 'Baz' )</pre><p>
            &#32780;&#19988;&#21542;&#23450;&#30340;&#26684;&#24335;&#20063;&#21487;&#20197;&#22914;&#19979;&#20070;&#20889;&#65306;
        </p><pre class="programlisting">from DomesticCat cat where cat.name not between 'A' and 'B'</pre><pre class="programlisting">from DomesticCat cat where cat.name not in ( 'Foo', 'Bar', 'Baz' )</pre><p>
            &#21516;&#26679;, &#23376;&#21477;<tt class="literal">is null</tt>&#19982;<tt class="literal">is not null</tt>&#21487;&#20197;&#34987;&#29992;&#26469;&#27979;&#35797;&#31354;&#20540;(null).
        </p><p>
            &#22312;Hibernate&#37197;&#32622;&#25991;&#20214;&#20013;&#22768;&#26126;HQL&#8220;&#26597;&#35810;&#26367;&#20195;&#65288;query substitutions&#65289;&#8221;&#20043;&#21518;&#65292;
            &#24067;&#23572;&#34920;&#36798;&#24335;&#65288;Booleans&#65289;&#21487;&#20197;&#22312;&#20854;&#20182;&#34920;&#36798;&#24335;&#20013;&#36731;&#26494;&#30340;&#20351;&#29992;:
        </p><pre class="programlisting">&lt;property name="hibernate.query.substitutions"&gt;true 1, false 0&lt;/property&gt;</pre><p>
            &#31995;&#32479;&#23558;&#35813;HQL&#36716;&#25442;&#20026;SQL&#35821;&#21477;&#26102;&#65292;&#35813;&#35774;&#32622;&#34920;&#26126;&#23558;&#29992;&#23383;&#31526; <tt class="literal">1</tt> &#21644;  
<tt class="literal">0</tt> &#26469;
            &#21462;&#20195;&#20851;&#38190;&#23383;<tt class="literal">true</tt> &#21644; <tt class="literal">false</tt>:

        </p><pre class="programlisting">from Cat cat where cat.alive = true</pre><p>
            &#20320;&#21487;&#20197;&#29992;&#29305;&#27530;&#23646;&#24615;<tt class="literal">size</tt>, &#25110;&#26159;&#29305;&#27530;&#20989;&#25968;<tt class="literal">size()</tt>&#27979;&#35797;&#19968;&#20010;&#38598;&#21512;&#30340;&#22823;&#23567;&#12290;
        </p><pre class="programlisting">from Cat cat where cat.kittens.size &gt; 0</pre><pre class="programlisting">from Cat cat where size(cat.kittens) &gt; 0</pre><p>
            &#23545;&#20110;&#32034;&#24341;&#20102;&#65288;&#26377;&#24207;&#65289;&#30340;&#38598;&#21512;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">minindex</tt> &#19982; <tt class="literal">maxindex</tt>&#20989;&#25968;&#26469;&#24341;&#29992;&#21040;&#26368;&#23567;&#19982;&#26368;&#22823;&#30340;&#32034;&#24341;&#24207;&#25968;&#12290;
            &#21516;&#29702;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">minelement</tt> &#19982; <tt class="literal">maxelement</tt>&#20989;&#25968;&#26469; 
&#24341;&#29992;&#21040;&#19968;&#20010;&#22522;&#26412;&#25968;&#25454;&#31867;&#22411;&#30340;&#38598;&#21512;&#20013;&#26368;&#23567;&#19982;&#26368;&#22823;&#30340;&#20803;&#32032;&#12290;

        </p><pre class="programlisting">from Calendar cal where maxelement(cal.holidays) &gt; current_date</pre><pre class="programlisting">from Order order where maxindex(order.items) &gt; 100</pre><pre class="programlisting">from Order order where minelement(order.items) &gt; 10000</pre><p>
&#22312;&#20256;&#36882;&#19968;&#20010;&#38598;&#21512;&#30340;&#32034;&#24341;&#38598;&#25110;&#32773;&#26159;&#20803;&#32032;&#38598;(<tt class="literal">elements</tt>&#19982;<tt class="literal">indices</tt> &#20989;&#25968;)
            &#25110;&#32773;&#20256;&#36882;&#19968;&#20010;&#23376;&#26597;&#35810;&#30340;&#32467;&#26524;&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#20351;&#29992;SQL&#20989;&#25968;<tt class="literal">any, some, all, exists, in</tt>

        </p><pre class="programlisting">select mother from Cat as mother, Cat as kit
where kit in elements(foo.kittens)</pre><pre class="programlisting">select p from NameList list, Person p
where p.name = some elements(list.names)</pre><pre class="programlisting">from Cat cat where exists elements(cat.kittens)</pre><pre class="programlisting">from Player p where 3 &gt; all elements(p.scores)</pre><pre class="programlisting">from Show show where 'fizard' in indices(show.acts)</pre><p>
            &#27880;&#24847;&#65292;&#22312;Hibernate3&#31181;&#65292;&#36825;&#20123;&#32467;&#26500;&#21464;&#37327;- <tt class="literal">size</tt>, <tt class="literal">elements</tt>,
            <tt class="literal">indices</tt>, <tt class="literal">minindex</tt>, <tt class="literal">maxindex</tt>,
            <tt class="literal">minelement</tt>, <tt class="literal">maxelement</tt> - &#21482;&#33021;&#22312;where&#23376;&#21477;&#20013;&#20351;&#29992;&#12290;
        </p><p>
            &#19968;&#20010;&#34987;&#32034;&#24341;&#36807;&#30340;&#65288;&#26377;&#24207;&#30340;&#65289;&#38598;&#21512;&#30340;&#20803;&#32032;(arrays, lists, maps)&#21487;&#20197;&#22312;&#20854;&#20182;&#32034;&#24341;&#20013;&#34987;&#24341;&#29992;&#65288;&#21482;&#33021;&#22312;where&#23376;&#21477;&#20013;&#65289;&#65306;
        </p><pre class="programlisting">from Order order where order.items[0].id = 1234</pre><pre class="programlisting">select person from Person person, Calendar calendar
where calendar.holidays['national day'] = person.birthDay
    and person.nationality.calendar = calendar</pre><pre class="programlisting">select item from Item item, Order order
where order.items[ order.deliveredItemIndices[0] ] = item and order.id = 11</pre><pre class="programlisting">select item from Item item, Order order
where order.items[ maxindex(order.items) ] = item and order.id = 11</pre><p>
            &#22312;<tt class="literal">[]</tt>&#20013;&#30340;&#34920;&#36798;&#24335;&#29978;&#33267;&#21487;&#20197;&#26159;&#19968;&#20010;&#31639;&#25968;&#34920;&#36798;&#24335;&#12290;
        </p><pre class="programlisting">select item from Item item, Order order
where order.items[ size(order.items) - 1 ] = item</pre><p>
            &#23545;&#20110;&#19968;&#20010;&#19968;&#23545;&#22810;&#30340;&#20851;&#32852;&#65288;one-to-many association&#65289;&#25110;&#26159;&#20540;&#30340;&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#65292;
            HQL&#20063;&#25552;&#20379;&#20869;&#24314;&#30340;<tt class="literal">index()</tt>&#20989;&#25968;&#65292;
        </p><pre class="programlisting">select item, index(item) from Order order 
    join order.items item
where index(item) &lt; 5</pre><p>
            &#22914;&#26524;&#24213;&#23618;&#25968;&#25454;&#24211;&#25903;&#25345;&#26631;&#37327;&#30340;SQL&#20989;&#25968;&#65292;&#23427;&#20204;&#20063;&#21487;&#20197;&#34987;&#20351;&#29992;
        </p><pre class="programlisting">from DomesticCat cat where upper(cat.name) like 'FRI%'</pre><p>
            &#22914;&#26524;&#20320;&#36824;&#19981;&#33021;&#23545;&#25152;&#26377;&#30340;&#36825;&#20123;&#28145;&#20449;&#19981;&#30097;&#65292;&#24819;&#24819;&#19979;&#38754;&#30340;&#26597;&#35810;&#12290;&#22914;&#26524;&#20351;&#29992;SQL&#65292;&#35821;&#21477;&#38271;&#24230;&#20250;&#22686;&#38271;&#22810;&#23569;&#65292;&#21487;&#35835;&#24615;&#20250;&#19979;&#38477;&#22810;&#23569;&#65306;
        </p><pre class="programlisting">select cust
from Product prod,
    Store store
    inner join store.customers cust
where prod.name = 'widget'
    and store.location.name in ( 'Melbourne', 'Sydney' )
    and prod = all elements(cust.currentOrder.lineItems)</pre><p>
            <span class="emphasis"><em>&#25552;&#31034;:</em></span> &#20250;&#20687;&#22914;&#19979;&#30340;&#35821;&#21477;
        </p><pre class="programlisting">SELECT cust.name, cust.address, cust.phone, cust.id, cust.current_order
FROM customers cust,
    stores store,
    locations loc,
    store_customers sc,
    product prod
WHERE prod.name = 'widget'
    AND store.loc_id = loc.id
    AND loc.name IN ( 'Melbourne', 'Sydney' )
    AND sc.store_id = store.id
    AND sc.cust_id = cust.id
    AND prod.id = ALL(
        SELECT item.prod_id
        FROM line_items item, orders o
        WHERE item.order_id = o.id
            AND cust.current_order = o.id
    )</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-ordering"></a>14.10.&nbsp;order by&#23376;&#21477;</h2></div></div><div></div></div><p>
            &#26597;&#35810;&#36820;&#22238;&#30340;&#21015;&#34920;(list)&#21487;&#20197;&#25353;&#29031;&#19968;&#20010;&#36820;&#22238;&#30340;&#31867;&#25110;&#32452;&#20214;&#65288;components)&#20013;&#30340;&#20219;&#20309;&#23646;&#24615;&#65288;property&#65289;&#36827;&#34892;&#25490;&#24207;&#65306;
        </p><pre class="programlisting">from DomesticCat cat
order by cat.name asc, cat.weight desc, cat.birthdate</pre><p>
            &#21487;&#36873;&#30340;<tt class="literal">asc</tt>&#25110;<tt class="literal">desc</tt>&#20851;&#38190;&#23383;&#25351;&#26126;&#20102;&#25353;&#29031;&#21319;&#24207;&#25110;&#38477;&#24207;&#36827;&#34892;&#25490;&#24207;.
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-grouping"></a>14.11.&nbsp;group by&#23376;&#21477;</h2></div></div><div></div></div><p>
            &#19968;&#20010;&#36820;&#22238;&#32858;&#38598;&#20540;(aggregate values)&#30340;&#26597;&#35810;&#21487;&#20197;&#25353;&#29031;&#19968;&#20010;&#36820;&#22238;&#30340;&#31867;&#25110;&#32452;&#20214;&#65288;components)&#20013;&#30340;&#20219;&#20309;&#23646;&#24615;&#65288;property&#65289;&#36827;&#34892;&#20998;&#32452;&#65306;
        </p><pre class="programlisting">select cat.color, sum(cat.weight), count(cat) 
from Cat cat
group by cat.color</pre><pre class="programlisting">select foo.id, avg(name), max(name) 
from Foo foo join foo.names name
group by foo.id</pre><p>
            <tt class="literal">having</tt>&#23376;&#21477;&#22312;&#36825;&#37324;&#20063;&#20801;&#35768;&#20351;&#29992;.
        </p><pre class="programlisting">select cat.color, sum(cat.weight), count(cat) 
from Cat cat
group by cat.color 
having cat.color in (eg.Color.TABBY, eg.Color.BLACK)</pre><p>
            &#22914;&#26524;&#24213;&#23618;&#30340;&#25968;&#25454;&#24211;&#25903;&#25345;&#30340;&#35805;(&#20363;&#22914;&#19981;&#33021;&#22312;MySQL&#20013;&#20351;&#29992;)&#65292;SQL&#30340;&#19968;&#33324;&#20989;&#25968;&#19982;&#32858;&#38598;&#20989;&#25968;&#20063;&#21487;&#20197;&#20986;&#29616;
            &#22312;<tt class="literal">having</tt>&#19982;<tt class="literal">order by</tt> &#23376;&#21477;&#20013;&#12290;    
        </p><pre class="programlisting">select cat
from Cat cat
    join cat.kittens kitten
group by cat
having avg(kitten.weight) &gt; 100
order by count(kitten) asc, sum(kitten.weight) desc</pre><p>
            &#27880;&#24847;<tt class="literal">group by</tt>&#23376;&#21477;&#19982;
            <tt class="literal">order by</tt>&#23376;&#21477;&#20013;&#37117;&#19981;&#33021;&#21253;&#21547;&#31639;&#26415;&#34920;&#36798;&#24335;&#65288;arithmetic expressions&#65289;.
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-subqueries"></a>14.12.&nbsp;&#23376;&#26597;&#35810;</h2></div></div><div></div></div><p>
            &#23545;&#20110;&#25903;&#25345;&#23376;&#26597;&#35810;&#30340;&#25968;&#25454;&#24211;&#65292;Hibernate&#25903;&#25345;&#22312;&#26597;&#35810;&#20013;&#20351;&#29992;&#23376;&#26597;&#35810;&#12290;&#19968;&#20010;&#23376;&#26597;&#35810;&#24517;&#39035;&#34987;&#22278;&#25324;&#21495;&#21253;&#22260;&#36215;&#26469;&#65288;&#32463;&#24120;&#26159;SQL&#32858;&#38598;&#20989;&#25968;&#30340;&#22278;&#25324;&#21495;&#65289;&#12290;
            &#29978;&#33267;&#30456;&#20114;&#20851;&#32852;&#30340;&#23376;&#26597;&#35810;&#65288;&#24341;&#29992;&#21040;&#22806;&#37096;&#26597;&#35810;&#20013;&#30340;&#21035;&#21517;&#30340;&#23376;&#26597;&#35810;&#65289;&#20063;&#26159;&#20801;&#35768;&#30340;&#12290;
        </p><pre class="programlisting">from Cat as fatcat 
where fatcat.weight &gt; ( 
    select avg(cat.weight) from DomesticCat cat 
)</pre><pre class="programlisting">from DomesticCat as cat 
where cat.name = some ( 
    select name.nickName from Name as name 
)</pre><pre class="programlisting">from Cat as cat 
where not exists ( 
    from Cat as mate where mate.mate = cat 
)</pre><pre class="programlisting">from DomesticCat as cat 
where cat.name not in ( 
    select name.nickName from Name as name 
)</pre><pre class="programlisting">select cat.id, (select max(kit.weight) from cat.kitten kit) 
from Cat as cat</pre><p>
            &#27880;&#24847;&#65292;HQL&#33258;&#26597;&#35810;&#21482;&#21487;&#20197;&#22312;select&#25110;&#32773;where&#23376;&#21477;&#20013;&#20986;&#29616;&#12290;
        </p><p>
            &#22312;select&#21015;&#34920;&#20013;&#21253;&#21547;&#19968;&#20010;&#34920;&#36798;&#24335;&#20197;&#19978;&#30340;&#23376;&#26597;&#35810;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#20803;&#32452;&#26500;&#36896;&#31526;&#65288;tuple constructors&#65289;&#65306; 
        </p><pre class="programlisting">from Cat as cat 
where not ( cat.name, cat.color ) in ( 
    select cat.name, cat.color from DomesticCat cat 
)</pre><p>
            &#27880;&#24847;&#22312;&#26576;&#20123;&#25968;&#25454;&#24211;&#20013;&#65288;&#19981;&#21253;&#25324;Oracle&#19982;HSQL&#65289;&#65292;&#20320;&#20063;&#21487;&#20197;&#22312;&#20854;&#20182;&#35821;&#22659;&#20013;&#20351;&#29992;&#20803;&#32452;&#26500;&#36896;&#31526;&#65292;
            &#27604;&#22914;&#26597;&#35810;&#29992;&#25143;&#31867;&#22411;&#30340;&#32452;&#20214;&#19982;&#32452;&#21512;&#65306;
        </p><pre class="programlisting">from Person where name = ('Gavin', 'A', 'King')</pre><p>
            &#35813;&#26597;&#35810;&#31561;&#20215;&#20110;&#26356;&#22797;&#26434;&#30340;&#65306;
        </p><pre class="programlisting">from Person where name.first = 'Gavin' and name.initial = 'A' and name.last = 'King')</pre><p>
            &#26377;&#20004;&#20010;&#24456;&#22909;&#30340;&#29702;&#30001;&#20351;&#20320;&#19981;&#24212;&#24403;&#20316;&#36825;&#26679;&#30340;&#20107;&#24773;&#65306;&#39318;&#20808;&#65292;&#23427;&#19981;&#23436;&#20840;&#36866;&#29992;&#20110;&#21508;&#20010;&#25968;&#25454;&#24211;&#24179;&#21488;&#65307;&#20854;&#27425;&#65292;&#26597;&#35810;&#29616;&#22312;&#20381;&#36182;&#20110;&#26144;&#23556;&#25991;&#20214;&#20013;&#23646;&#24615;&#30340;&#39034;&#24207;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-examples"></a>14.13.&nbsp;HQL&#31034;&#20363;</h2></div></div><div></div></div><p>
            Hibernate&#26597;&#35810;&#21487;&#20197;&#38750;&#24120;&#30340;&#24378;&#22823;&#19982;&#22797;&#26434;&#12290;&#23454;&#38469;&#19978;&#65292;Hibernate&#30340;&#19968;&#20010;&#20027;&#35201;&#21334;&#28857;&#23601;&#26159;&#26597;&#35810;&#35821;&#21477;&#30340;&#23041;&#21147;&#12290;&#36825;&#37324;&#26377;&#19968;&#20123;&#20363;&#23376;&#65292;&#23427;&#20204;&#19982;&#25105;&#22312;&#26368;&#36817;&#30340;
            &#19968;&#20010;&#39033;&#30446;&#20013;&#20351;&#29992;&#30340;&#26597;&#35810;&#38750;&#24120;&#30456;&#20284;&#12290;&#27880;&#24847;&#20320;&#33021;&#29992;&#21040;&#30340;&#22823;&#22810;&#25968;&#26597;&#35810;&#27604;&#36825;&#20123;&#35201;&#31616;&#21333;&#30340;&#22810;&#65281;
        </p><p>
            &#19979;&#38754;&#30340;&#26597;&#35810;&#23545;&#20110;&#26576;&#20010;&#29305;&#23450;&#30340;&#23458;&#25143;&#30340;&#25152;&#26377;&#26410;&#25903;&#20184;&#30340;&#36134;&#21333;&#65292;&#22312;&#32473;&#23450;&#32473;&#26368;&#23567;&#24635;&#20215;&#20540;&#30340;&#24773;&#20917;&#19979;&#65292;&#36820;&#22238;&#35746;&#21333;&#30340;id&#65292;&#26465;&#30446;&#30340;&#25968;&#37327;&#21644;&#24635;&#20215;&#20540;&#65292;
            &#36820;&#22238;&#20540;&#25353;&#29031;&#24635;&#20215;&#20540;&#30340;&#32467;&#26524;&#36827;&#34892;&#25490;&#24207;&#12290;&#20026;&#20102;&#20915;&#23450;&#20215;&#26684;&#65292;&#26597;&#35810;&#20351;&#29992;&#20102;&#24403;&#21069;&#30446;&#24405;&#12290;&#20316;&#20026;&#36716;&#25442;&#32467;&#26524;&#30340;SQL&#26597;&#35810;&#65292;&#20351;&#29992;&#20102;<tt class="literal">ORDER</tt>, 
            <tt class="literal">ORDER_LINE</tt>, <tt class="literal">PRODUCT</tt>, <tt class="literal">CATALOG</tt> &#21644;<tt class="literal">PRICE</tt>
            &#24211;&#34920;&#12290;
        </p><pre class="programlisting">select order.id, sum(price.amount), count(item)
from Order as order
    join order.lineItems as item
    join item.product as product,
    Catalog as catalog
    join catalog.prices as price
where order.paid = false
    and order.customer = :customer
    and price.product = product
    and catalog.effectiveDate &lt; sysdate
    and catalog.effectiveDate &gt;= all (
        select cat.effectiveDate 
        from Catalog as cat
        where cat.effectiveDate &lt; sysdate
    )
group by order
having sum(price.amount) &gt; :minAmount
order by sum(price.amount) desc</pre><p>
            &#36825;&#31616;&#30452;&#26159;&#19968;&#20010;&#24618;&#29289;&#65281;&#23454;&#38469;&#19978;&#65292;&#22312;&#29616;&#23454;&#29983;&#27963;&#20013;&#65292;&#25105;&#24182;&#19981;&#28909;&#34935;&#20110;&#23376;&#26597;&#35810;&#65292;&#25152;&#20197;&#25105;&#30340;&#26597;&#35810;&#35821;&#21477;&#30475;&#36215;&#26469;&#26356;&#20687;&#36825;&#20010;&#65306;
        </p><pre class="programlisting">select order.id, sum(price.amount), count(item)
from Order as order
    join order.lineItems as item
    join item.product as product,
    Catalog as catalog
    join catalog.prices as price
where order.paid = false
    and order.customer = :customer
    and price.product = product
    and catalog = :currentCatalog
group by order
having sum(price.amount) &gt; :minAmount
order by sum(price.amount) desc</pre><p>
            &#19979;&#38754;&#19968;&#20010;&#26597;&#35810;&#35745;&#31639;&#27599;&#19968;&#31181;&#29366;&#24577;&#19979;&#30340;&#25903;&#20184;&#30340;&#25968;&#30446;&#65292;&#38500;&#21435;&#25152;&#26377;&#22788;&#20110;<tt class="literal">AWAITING_APPROVAL</tt>&#29366;&#24577;&#30340;&#25903;&#20184;&#65292;&#22240;&#20026;&#22312;&#35813;&#29366;&#24577;&#19979;
            &#24403;&#21069;&#30340;&#29992;&#25143;&#20316;&#20986;&#20102;&#29366;&#24577;&#30340;&#26368;&#26032;&#25913;&#21464;&#12290;&#35813;&#26597;&#35810;&#34987;&#36716;&#25442;&#25104;&#21547;&#26377;&#20004;&#20010;&#20869;&#36830;&#25509;&#20197;&#21450;&#19968;&#20010;&#30456;&#20851;&#32852;&#30340;&#23376;&#36873;&#25321;&#30340;SQL&#26597;&#35810;&#65292;&#35813;&#26597;&#35810;&#20351;&#29992;&#20102;&#34920;
            <tt class="literal">PAYMENT</tt>, <tt class="literal">PAYMENT_STATUS</tt> &#20197;&#21450; 
            <tt class="literal">PAYMENT_STATUS_CHANGE</tt>&#12290;
        </p><pre class="programlisting">select count(payment), status.name 
from Payment as payment 
    join payment.currentStatus as status
    join payment.statusChanges as statusChange
where payment.status.name &lt;&gt; PaymentStatus.AWAITING_APPROVAL
    or (
        statusChange.timeStamp = ( 
            select max(change.timeStamp) 
            from PaymentStatusChange change 
            where change.payment = payment
        )
        and statusChange.user &lt;&gt; :currentUser
    )
group by status.name, status.sortOrder
order by status.sortOrder</pre><p>
            &#22914;&#26524;&#25105;&#25226;<tt class="literal">statusChanges</tt>&#23454;&#20363;&#38598;&#26144;&#23556;&#20026;&#19968;&#20010;&#21015;&#34920;&#65288;list&#65289;&#32780;&#19981;&#26159;&#19968;&#20010;&#38598;&#21512;&#65288;set&#65289;, 
            &#20070;&#20889;&#26597;&#35810;&#35821;&#21477;&#23558;&#26356;&#21152;&#31616;&#21333;.
        </p><pre class="programlisting">select count(payment), status.name 
from Payment as payment
    join payment.currentStatus as status
where payment.status.name &lt;&gt; PaymentStatus.AWAITING_APPROVAL
    or payment.statusChanges[ maxIndex(payment.statusChanges) ].user &lt;&gt; :currentUser
group by status.name, status.sortOrder
order by status.sortOrder</pre><p>
            &#19979;&#38754;&#19968;&#20010;&#26597;&#35810;&#20351;&#29992;&#20102;MS SQL Server&#30340; <tt class="literal">isNull()</tt>&#20989;&#25968;&#29992;&#20197;&#36820;&#22238;&#24403;&#21069;&#29992;&#25143;&#25152;&#23646;&#32452;&#32455;&#30340;&#32452;&#32455;&#24080;&#21495;&#21450;&#32452;&#32455;&#26410;&#25903;&#20184;&#30340;&#36134;&#12290;
            &#23427;&#34987;&#36716;&#25442;&#25104;&#19968;&#20010;&#23545;&#34920;<tt class="literal">ACCOUNT</tt>, <tt class="literal">PAYMENT</tt>, <tt class="literal">PAYMENT_STATUS</tt>,
            <tt class="literal">ACCOUNT_TYPE</tt>, <tt class="literal">ORGANIZATION</tt> &#20197;&#21450; <tt class="literal">ORG_USER</tt>&#36827;&#34892;&#30340;&#19977;&#20010;&#20869;&#36830;&#25509;&#65292;
            &#19968;&#20010;&#22806;&#36830;&#25509;&#21644;&#19968;&#20010;&#23376;&#36873;&#25321;&#30340;SQL&#26597;&#35810;&#12290;
        </p><pre class="programlisting">select account, payment
from Account as account
    left outer join account.payments as payment
where :currentUser in elements(account.holder.users)
    and PaymentStatus.UNPAID = isNull(payment.currentStatus.name, PaymentStatus.UNPAID)
order by account.type.sortOrder, account.accountNumber, payment.dueDate</pre><p>
            &#23545;&#20110;&#19968;&#20123;&#25968;&#25454;&#24211;&#65292;&#25105;&#20204;&#38656;&#35201;&#24323;&#29992;&#65288;&#30456;&#20851;&#30340;&#65289;&#23376;&#36873;&#25321;&#12290;
        </p><pre class="programlisting">select account, payment
from Account as account
    join account.holder.users as user
    left outer join account.payments as payment
where :currentUser = user
    and PaymentStatus.UNPAID = isNull(payment.currentStatus.name, PaymentStatus.UNPAID)
order by account.type.sortOrder, account.accountNumber, payment.dueDate</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-bulk"></a>14.14.&nbsp;&#25209;&#37327;&#30340;UPDATE&#21644;DELETE</h2></div></div><div></div></div><p>
            HQL&#29616;&#22312;&#25903;&#25345; <tt class="literal">update</tt>, <tt class="literal">delete</tt> &#21644;
            <tt class="literal">insert ... select ...</tt>&#35821;&#21477;.  &#26597;&#38405;
            <a href="#batch-direct" title="13.4.&nbsp;DML(&#25968;&#25454;&#25805;&#20316;&#35821;&#35328;)&#39118;&#26684;&#30340;&#25805;&#20316;(DML-style operations)">&#31532;&nbsp;13.4&nbsp;&#33410; &#8220;DML(&#25968;&#25454;&#25805;&#20316;&#35821;&#35328;)&#39118;&#26684;&#30340;&#25805;&#20316;(DML-style operations)&#8221;</a> &#20197;&#33719;&#24471;&#26356;&#22810;&#20449;&#24687;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queryhql-tipstricks"></a>14.15.&nbsp;&#23567;&#25216;&#24039; &amp; &#23567;&#31373;&#38376;</h2></div></div><div></div></div><p>
            &#20320;&#21487;&#20197;&#32479;&#35745;&#26597;&#35810;&#32467;&#26524;&#30340;&#25968;&#30446;&#32780;&#19981;&#24517;&#23454;&#38469;&#30340;&#36820;&#22238;&#20182;&#20204;&#65306;
        </p><pre class="programlisting">( (Integer) session.iterate("select count(*) from ....").next() ).intValue()</pre><p>
            &#33509;&#24819;&#26681;&#25454;&#19968;&#20010;&#38598;&#21512;&#30340;&#22823;&#23567;&#26469;&#36827;&#34892;&#25490;&#24207;&#65292;&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#30340;&#35821;&#21477;&#65306;
        </p><pre class="programlisting">select usr.id, usr.name
from User as usr 
    left join usr.messages as msg
group by usr.id, usr.name
order by count(msg)</pre><p>
            &#22914;&#26524;&#20320;&#30340;&#25968;&#25454;&#24211;&#25903;&#25345;&#23376;&#36873;&#25321;&#65292;&#20320;&#21487;&#20197;&#22312;&#20320;&#30340;&#26597;&#35810;&#30340;where&#23376;&#21477;&#20013;&#20026;&#36873;&#25321;&#30340;&#22823;&#23567;&#65288;selection size&#65289;&#25351;&#23450;&#19968;&#20010;&#26465;&#20214;:
        </p><pre class="programlisting">from User usr where size(usr.messages) &gt;= 1</pre><p>
            &#22914;&#26524;&#20320;&#30340;&#25968;&#25454;&#24211;&#19981;&#25903;&#25345;&#23376;&#36873;&#25321;&#35821;&#21477;&#65292;&#20351;&#29992;&#19979;&#38754;&#30340;&#26597;&#35810;&#65306;
        </p><pre class="programlisting">select usr.id, usr.name
from User usr.name
    join usr.messages msg
group by usr.id, usr.name
having count(msg) &gt;= 1</pre><p>
            &#22240;&#20026;&#20869;&#36830;&#25509;&#65288;inner join&#65289;&#30340;&#21407;&#22240;&#65292;&#36825;&#20010;&#35299;&#20915;&#26041;&#26696;&#19981;&#33021;&#36820;&#22238;&#21547;&#26377;&#38646;&#20010;&#20449;&#24687;&#30340;<tt class="literal">User</tt>
            &#31867;&#30340;&#23454;&#20363;, &#25152;&#20197;&#36825;&#31181;&#24773;&#20917;&#19979;&#20351;&#29992;&#19979;&#38754;&#30340;&#26684;&#24335;&#23558;&#26159;&#26377;&#24110;&#21161;&#30340;:
        </p><pre class="programlisting">select usr.id, usr.name
from User as usr
    left join usr.messages as msg
group by usr.id, usr.name
having count(msg) = 0</pre><p>
            JavaBean&#30340;&#23646;&#24615;&#21487;&#20197;&#34987;&#32465;&#23450;&#21040;&#19968;&#20010;&#21629;&#21517;&#26597;&#35810;&#65288;named query&#65289;&#30340;&#21442;&#25968;&#19978;&#65306;
        </p><pre class="programlisting">Query q = s.createQuery("from foo Foo as foo where foo.name=:name and foo.size=:size");
q.setProperties(fooBean); // fooBean&#21253;&#21547;&#26041;&#27861;getName()&#19982;getSize()
List foos = q.list();</pre><p>
            &#36890;&#36807;&#23558;&#25509;&#21475;<tt class="literal">Query</tt>&#19982;&#19968;&#20010;&#36807;&#28388;&#22120;&#65288;filter&#65289;&#19968;&#36215;&#20351;&#29992;&#65292;&#38598;&#21512;&#65288;Collections&#65289;&#26159;&#21487;&#20197;&#20998;&#39029;&#30340;&#65306;
        </p><pre class="programlisting">Query q = s.createFilter( collection, "" ); // &#19968;&#20010;&#31616;&#21333;&#30340;&#36807;&#28388;&#22120;
q.setMaxResults(PAGE_SIZE);
q.setFirstResult(PAGE_SIZE * pageNumber);
List page = q.list();</pre><p>
            &#36890;&#36807;&#20351;&#29992;&#26597;&#35810;&#36807;&#28388;&#22120;&#65288;query filter&#65289;&#21487;&#20197;&#23558;&#38598;&#21512;&#65288;Collection&#65289;&#30340;&#21407;&#32032;&#20998;&#32452;&#25110;&#25490;&#24207;:
        </p><pre class="programlisting">Collection orderedCollection = s.filter( collection, "order by this.amount" );
Collection counts = s.filter( collection, "select this.type, count(this) group by this.type" );</pre><p>
            &#19981;&#29992;&#36890;&#36807;&#21021;&#22987;&#21270;&#65292;&#20320;&#23601;&#21487;&#20197;&#30693;&#36947;&#19968;&#20010;&#38598;&#21512;&#65288;Collection&#65289;&#30340;&#22823;&#23567;&#65306;
        </p><pre class="programlisting">( (Integer) session.iterate("select count(*) from ....").next() ).intValue();</pre></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="querycriteria"></a>&#31532;&nbsp;15&nbsp;&#31456;&nbsp;
    &#26465;&#20214;&#26597;&#35810;(Criteria Queries)
    </h2></div></div><div></div></div><p>
        &#20855;&#26377;&#19968;&#20010;&#30452;&#35266;&#30340;&#12289;&#21487;&#25193;&#23637;&#30340;&#26465;&#20214;&#26597;&#35810;API&#26159;Hibernate&#30340;&#29305;&#33394;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-creating"></a>15.1.&nbsp;&#21019;&#24314;&#19968;&#20010;<tt class="literal">Criteria</tt> &#23454;&#20363;</h2></div></div><div></div></div><p>
            <tt class="literal">org.hibernate.Criteria</tt>&#25509;&#21475;&#34920;&#31034;&#29305;&#23450;&#25345;&#20037;&#31867;&#30340;&#19968;&#20010;&#26597;&#35810;&#12290;<tt class="literal">Session</tt>&#26159;
            <tt class="literal">Criteria</tt>&#23454;&#20363;&#30340;&#24037;&#21378;&#12290;
        </p><pre class="programlisting">Criteria crit = sess.createCriteria(Cat.class);
crit.setMaxResults(50);
List cats = crit.list();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-narrowing"></a>15.2.&nbsp;&#38480;&#21046;&#32467;&#26524;&#38598;&#20869;&#23481;</h2></div></div><div></div></div><p>
            &#19968;&#20010;&#21333;&#29420;&#30340;&#26597;&#35810;&#26465;&#20214;&#26159;<tt class="literal">org.hibernate.criterion.Criterion</tt>
            &#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;<tt class="literal">org.hibernate.criterion.Restrictions</tt>&#31867;
            &#23450;&#20041;&#20102;&#33719;&#24471;&#26576;&#20123;&#20869;&#32622;<tt class="literal">Criterion</tt>&#31867;&#22411;&#30340;&#24037;&#21378;&#26041;&#27861;&#12290;
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "Fritz%") )
    .add( Restrictions.between("weight", minWeight, maxWeight) )
    .list();</pre><p>
            &#32422;&#26463;&#21487;&#20197;&#25353;&#36923;&#36753;&#20998;&#32452;&#12290;
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "Fritz%") )
    .add( Restrictions.or(
        Restrictions.eq( "age", new Integer(0) ),
        Restrictions.isNull("age")
    ) )
    .list();</pre><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.in( "name", new String[] { "Fritz", "Izi", "Pk" } ) )
    .add( Restrictions.disjunction()
        .add( Restrictions.isNull("age") )
    	.add( Restrictions.eq("age", new Integer(0) ) )
    	.add( Restrictions.eq("age", new Integer(1) ) )
    	.add( Restrictions.eq("age", new Integer(2) ) )
    ) )
    .list();</pre><p>
            Hibernate&#25552;&#20379;&#20102;&#30456;&#24403;&#22810;&#30340;&#20869;&#32622;criterion&#31867;&#22411;(<tt class="literal">Restrictions</tt>
            &#23376;&#31867;), &#20294;&#26159;&#23588;&#20854;&#26377;&#29992;&#30340;&#26159;&#21487;&#20197;&#20801;&#35768;&#20320;&#30452;&#25509;&#20351;&#29992;SQL&#12290;
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.sqlRestriction("lower({alias}.name) like lower(?)", "Fritz%", Hibernate.STRING) )
    .list();</pre><p>
            <tt class="literal">{alias}</tt>&#21344;&#20301;&#31526;&#24212;&#24403;&#34987;&#26367;&#25442;&#20026;&#34987;&#26597;&#35810;&#23454;&#20307;&#30340;&#21015;&#21035;&#21517;&#12290;
        </p><p>
             
            <tt class="literal">Property</tt>&#23454;&#20363;&#26159;&#33719;&#24471;&#19968;&#20010;&#26465;&#20214;&#30340;&#21478;&#22806;&#19968;&#31181;&#36884;&#24452;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#35843;&#29992;<tt class="literal">Property.forName()</tt>
            &#21019;&#24314;&#19968;&#20010;<tt class="literal">Property</tt>&#12290;
           
        </p><pre class="programlisting">
Property age = Property.forName("age");
List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.disjunction()
        .add( age.isNull() )
    	.add( age.eq( new Integer(0) ) )
    	.add( age.eq( new Integer(1) ) )
    	.add( age.eq( new Integer(2) ) )
    ) )
    .add( Property.forName("name").in( new String[] { "Fritz", "Izi", "Pk" } ) )
    .list();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-ordering"></a>15.3.&nbsp;&#32467;&#26524;&#38598;&#25490;&#24207;</h2></div></div><div></div></div><p>
            &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">org.hibernate.criterion.Order</tt>&#26469;&#20026;&#26597;&#35810;&#32467;&#26524;&#25490;&#24207;&#12290;
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "F%")
    .addOrder( Order.asc("name") )
    .addOrder( Order.desc("age") )
    .setMaxResults(50)
    .list();</pre><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Property.forName("name").like("F%") )
    .addOrder( Property.forName("name").asc() )
    .addOrder( Property.forName("age").desc() )
    .setMaxResults(50)
    .list();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-associations"></a>15.4.&nbsp;&#20851;&#32852;</h2></div></div><div></div></div><p>
            &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">createCriteria()</tt>&#38750;&#24120;&#23481;&#26131;&#30340;&#22312;&#20114;&#30456;&#20851;&#32852;&#30340;&#23454;&#20307;&#38388;&#24314;&#31435;
            &#32422;&#26463;&#12290;
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "F%") )
    .createCriteria("kittens")
        .add( Restrictions.like("name", "F%") )
    .list();</pre><p>
            &#27880;&#24847;&#31532;&#20108;&#20010; <tt class="literal">createCriteria()</tt>&#36820;&#22238;&#19968;&#20010;&#26032;&#30340;
            <tt class="literal">Criteria</tt>&#23454;&#20363;&#65292;&#35813;&#23454;&#20363;&#24341;&#29992;<tt class="literal">kittens</tt> &#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#12290;
        </p><p>
            &#25509;&#19979;&#26469;&#65292;&#26367;&#25442;&#24418;&#24577;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#20063;&#26159;&#24456;&#26377;&#29992;&#30340;&#12290;
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .createAlias("kittens", "kt")
    .createAlias("mate", "mt")
    .add( Restrictions.eqProperty("kt.name", "mt.name") )
    .list();</pre><p>
            
            (<tt class="literal">createAlias()</tt>&#24182;&#19981;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;
            <tt class="literal">Criteria</tt>&#23454;&#20363;&#12290;)
        </p><p>
            <tt class="literal">Cat</tt>&#23454;&#20363;&#25152;&#20445;&#23384;&#30340;&#20043;&#21069;&#20004;&#27425;&#26597;&#35810;&#25152;&#36820;&#22238;&#30340;kittens&#38598;&#21512;&#26159;
            <span class="emphasis"><em>&#27809;&#26377;</em></span>&#34987;&#26465;&#20214;&#39044;&#36807;&#28388;&#30340;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#21482;&#33719;&#24471;&#31526;&#21512;&#26465;&#20214;&#30340;kittens&#65292;
            &#20320;&#24517;&#39035;&#20351;&#29992;<tt class="literal">ResultTransformer</tt>&#12290;
            
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .createCriteria("kittens", "kt")
        .add( Restrictions.eq("name", "F%") )
    .setResultTransformer(Criteria.ALIAS_TO_ENTITY_MAP)
    .list();
Iterator iter = cats.iterator();
while ( iter.hasNext() ) {
    Map map = (Map) iter.next();
    Cat cat = (Cat) map.get(Criteria.ROOT_ALIAS);
    Cat kitten = (Cat) map.get("kt");
}</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-dynamicfetching"></a>15.5.&nbsp;&#21160;&#24577;&#20851;&#32852;&#25235;&#21462;</h2></div></div><div></div></div><p>
            &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">setFetchMode()</tt>&#22312;&#36816;&#34892;&#26102;&#23450;&#20041;&#21160;&#24577;&#20851;&#32852;&#25235;&#21462;&#30340;&#35821;&#20041;&#12290;
        </p><pre class="programlisting">List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "Fritz%") )
    .setFetchMode("mate", FetchMode.EAGER)
    .setFetchMode("kittens", FetchMode.EAGER)
    .list();</pre><p>
            &#36825;&#20010;&#26597;&#35810;&#21487;&#20197;&#36890;&#36807;&#22806;&#36830;&#25509;&#25235;&#21462;<tt class="literal">mate</tt>&#21644;<tt class="literal">kittens</tt>&#12290;
           &#26597;&#30475;<a href="#performance-fetching" title="19.1.&nbsp;&#xA;			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)&#xA;		">&#31532;&nbsp;19.1&nbsp;&#33410; &#8220;
			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)
		&#8221;</a>&#21487;&#20197;&#33719;&#24471;&#26356;&#22810;&#20449;&#24687;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-examples"></a>15.6.&nbsp;&#26597;&#35810;&#31034;&#20363;</h2></div></div><div></div></div><p>
            <tt class="literal">org.hibernate.criterion.Example</tt>&#31867;&#20801;&#35768;&#20320;&#36890;&#36807;&#19968;&#20010;&#32473;&#23450;&#23454;&#20363;
            &#26500;&#24314;&#19968;&#20010;&#26465;&#20214;&#26597;&#35810;&#12290;
        </p><pre class="programlisting">Cat cat = new Cat();
cat.setSex('F');
cat.setColor(Color.BLACK);
List results = session.createCriteria(Cat.class)
    .add( Example.create(cat) )
    .list();</pre><p>
           &#29256;&#26412;&#23646;&#24615;&#12289;&#26631;&#35782;&#31526;&#21644;&#20851;&#32852;&#34987;&#24573;&#30053;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#20540;&#20026;null&#30340;&#23646;&#24615;&#23558;&#34987;&#25490;&#38500;&#12290;
        </p><p>
           &#20320;&#21487;&#20197;&#33258;&#34892;&#35843;&#25972;<tt class="literal">Example</tt>&#20351;&#20043;&#26356;&#23454;&#29992;&#12290;
        </p><pre class="programlisting">Example example = Example.create(cat)
    .excludeZeroes()           //exclude zero valued properties
    .excludeProperty("color")  //exclude the property named "color"
    .ignoreCase()              //perform case insensitive string comparisons
    .enableLike();             //use like for string comparisons
List results = session.createCriteria(Cat.class)
    .add(example)
    .list();</pre><p>
            &#20320;&#29978;&#33267;&#21487;&#20197;&#20351;&#29992;examples&#22312;&#20851;&#32852;&#23545;&#35937;&#19978;&#25918;&#32622;&#26465;&#20214;&#12290;
        </p><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .add( Example.create(cat) )
    .createCriteria("mate")
        .add( Example.create( cat.getMate() ) )
    .list();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-projection"></a>15.7.&nbsp;&#25237;&#24433;(Projections)&#12289;&#32858;&#21512;&#65288;aggregation&#65289;&#21644;&#20998;&#32452;&#65288;grouping&#65289;</h2></div></div><div></div></div><p>
            <tt class="literal">org.hibernate.criterion.Projections</tt>&#26159;
            <tt class="literal">Projection</tt> &#30340;&#23454;&#20363;&#24037;&#21378;&#12290;&#25105;&#20204;&#36890;&#36807;&#35843;&#29992;
            <tt class="literal">setProjection()</tt>&#24212;&#29992;&#25237;&#24433;&#21040;&#19968;&#20010;&#26597;&#35810;&#12290;
        </p><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .setProjection( Projections.rowCount() )
    .add( Restrictions.eq("color", Color.BLACK) )
    .list();</pre><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .setProjection( Projections.projectionList()
        .add( Projections.rowCount() )
        .add( Projections.avg("weight") )
        .add( Projections.max("weight") )
        .add( Projections.groupProperty("color") )
    )
    .list();</pre><p>
            &#22312;&#19968;&#20010;&#26465;&#20214;&#26597;&#35810;&#20013;&#27809;&#26377;&#24517;&#35201;&#26174;&#24335;&#30340;&#20351;&#29992; "group by" &#12290;&#26576;&#20123;&#25237;&#24433;&#31867;&#22411;&#23601;&#26159;&#34987;&#23450;&#20041;&#20026;<span class="emphasis"><em>
            &#20998;&#32452;&#25237;&#24433;</em></span>&#65292;&#20182;&#20204;&#20063;&#20986;&#29616;&#22312;SQL&#30340;<tt class="literal">group by</tt>&#23376;&#21477;&#20013;&#12290;
        </p><p>
            &#20320;&#21487;&#20197;&#36873;&#25321;&#25226;&#19968;&#20010;&#21035;&#21517;&#25351;&#27966;&#32473;&#19968;&#20010;&#25237;&#24433;&#65292;&#36825;&#26679;&#21487;&#20197;&#20351;&#25237;&#24433;&#20540;&#34987;&#32422;&#26463;&#25110;&#25490;&#24207;&#25152;&#24341;&#29992;&#12290;&#19979;&#38754;&#26159;&#20004;&#31181;&#19981;&#21516;&#30340;&#23454;&#29616;&#26041;&#24335;&#65306;
        </p><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .setProjection( Projections.alias( Projections.groupProperty("color"), "colr" ) )
    .addOrder( Order.asc("colr") )
    .list();</pre><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .setProjection( Projections.groupProperty("color").as("colr") )
    .addOrder( Order.asc("colr") )
    .list();</pre><p>
            <tt class="literal">alias()</tt>&#21644;<tt class="literal">as()</tt>&#26041;&#27861;&#31616;&#20415;&#30340;&#23558;&#19968;&#20010;&#25237;&#24433;&#23454;&#20363;&#21253;&#35013;&#21040;&#21478;&#22806;&#19968;&#20010;
            &#21035;&#21517;&#30340;<tt class="literal">Projection</tt>&#23454;&#20363;&#20013;&#12290;&#31616;&#32780;&#35328;&#20043;&#65292;&#24403;&#20320;&#28155;&#21152;&#19968;&#20010;&#25237;&#24433;&#21040;&#19968;&#20010;&#25237;&#24433;&#21015;&#34920;&#20013;&#26102;
            &#20320;&#21487;&#20197;&#20026;&#23427;&#25351;&#23450;&#19968;&#20010;&#21035;&#21517;&#65306;
        </p><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .setProjection( Projections.projectionList()
        .add( Projections.rowCount(), "catCountByColor" )
        .add( Projections.avg("weight"), "avgWeight" )
        .add( Projections.max("weight"), "maxWeight" )
        .add( Projections.groupProperty("color"), "color" )
    )
    .addOrder( Order.desc("catCountByColor") )
    .addOrder( Order.desc("avgWeight") )
    .list();</pre><pre class="programlisting">List results = session.createCriteria(Domestic.class, "cat")
    .createAlias("kittens", "kit")
    .setProjection( Projections.projectionList()
        .add( Projections.property("cat.name"), "catName" )
        .add( Projections.property("kit.name"), "kitName" )
    )
    .addOrder( Order.asc("catName") )
    .addOrder( Order.asc("kitName") )
    .list();</pre><p>
            &#20320;&#20063;&#21487;&#20197;&#20351;&#29992;<tt class="literal">Property.forName()</tt>&#26469;&#34920;&#31034;&#25237;&#24433;&#65306;
        </p><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .setProjection( Property.forName("name") )
    .add( Property.forName("color").eq(Color.BLACK) )
    .list();</pre><pre class="programlisting">List results = session.createCriteria(Cat.class)
    .setProjection( Projections.projectionList()
        .add( Projections.rowCount().as("catCountByColor") )
        .add( Property.forName("weight").avg().as("avgWeight") )
        .add( Property.forName("weight").max().as("maxWeight") )
        .add( Property.forName("color").group().as("color" )
    )
    .addOrder( Order.desc("catCountByColor") )
    .addOrder( Order.desc("avgWeight") )
    .list();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querycriteria-detachedqueries"></a>15.8.&nbsp;&#31163;&#32447;(detached)&#26597;&#35810;&#21644;&#23376;&#26597;&#35810;</h2></div></div><div></div></div><p>
    		<tt class="literal">DetachedCriteria</tt>&#31867;&#20351;&#20320;&#22312;&#19968;&#20010;session&#33539;&#22260;&#20043;&#22806;&#21019;&#24314;&#19968;&#20010;&#26597;&#35810;&#65292;&#24182;&#19988;&#21487;&#20197;&#20351;&#29992;&#20219;&#24847;&#30340;
    		 <tt class="literal">Session</tt>&#26469;&#25191;&#34892;&#23427;&#12290;
    	</p><pre class="programlisting">DetachedCriteria query = DetachedCriteria.forClass(Cat.class)
    .add( Property.forName("sex").eq('F') );
    
Session session = ....;
Transaction txn = session.beginTransaction();
List results = query.getExecutableCriteria(session).setMaxResults(100).list();
txn.commit();
session.close();</pre><p>
			<tt class="literal">DetachedCriteria</tt>&#20063;&#21487;&#20197;&#29992;&#20197;&#34920;&#31034;&#23376;&#26597;&#35810;&#12290;&#26465;&#20214;&#23454;&#20363;&#21253;&#21547;&#23376;&#26597;&#35810;&#21487;&#20197;&#36890;&#36807;
			<tt class="literal">Subqueries</tt>&#25110;&#32773;<tt class="literal">Property</tt>&#33719;&#24471;&#12290;
		</p><pre class="programlisting">DetachedCriteria avgWeight = DetachedCriteria.forClass(Cat.class)
	.setProjection( Property.forName("weight").avg() );
session.createCriteria(Cat.class)
	.add( Property.forName("weight).gt(avgWeight) )
	.list();</pre><pre class="programlisting">DetachedCriteria weights = DetachedCriteria.forClass(Cat.class)
	.setProjection( Property.forName("weight") );
session.createCriteria(Cat.class)
	.add( Subqueries.geAll("weight", weights) )
	.list();</pre><p>
			&#29978;&#33267;&#30456;&#20114;&#20851;&#32852;&#30340;&#23376;&#26597;&#35810;&#20063;&#26159;&#26377;&#21487;&#33021;&#30340;&#65306;
		</p><pre class="programlisting">DetachedCriteria avgWeightForSex = DetachedCriteria.forClass(Cat.class, "cat2")
	.setProjection( Property.forName("weight").avg() )
	.add( Property.forName("cat2.sex").eqProperty("cat.sex") );
session.createCriteria(Cat.class, "cat")
	.add( Property.forName("weight).gt(avgWeightForSex) )
	.list();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="query-criteria-naturalid"></a>15.9.&nbsp;&#26681;&#25454;&#33258;&#28982;&#26631;&#35782;&#26597;&#35810;(Queries by natural identifier)</h2></div></div><div></div></div><p>
            &#23545;&#22823;&#22810;&#25968;&#26597;&#35810;&#65292;&#21253;&#25324;&#26465;&#20214;&#26597;&#35810;&#32780;&#35328;&#65292;&#22240;&#20026;&#26597;&#35810;&#32531;&#23384;&#30340;&#22833;&#25928;(invalidation)&#21457;&#29983;&#24471;&#22826;&#39057;&#32321;&#65292;&#26597;&#35810;&#32531;&#23384;&#19981;&#26159;&#38750;&#24120;&#39640;&#25928;&#12290;&#28982;&#32780;&#65292;&#26377;&#19968;&#31181;&#29305;&#21035;&#30340;&#26597;&#35810;&#65292;&#21487;&#20197;&#36890;&#36807;&#19981;&#21464;&#30340;&#33258;&#28982;&#38190;&#20248;&#21270;&#32531;&#23384;&#30340;&#22833;&#25928;&#31639;&#27861;&#12290;&#22312;&#26576;&#20123;&#24212;&#29992;&#20013;&#65292;&#36825;&#31181;&#31867;&#22411;&#30340;&#26597;&#35810;&#27604;&#36739;&#24120;&#35265;&#12290;&#26465;&#20214;&#26597;&#35810;API&#23545;&#36825;&#31181;&#29992;&#20363;&#25552;&#20379;&#20102;&#29305;&#21035;&#35268;&#32422;&#12290;
        </p><p>
            &#39318;&#20808;&#65292;&#20320;&#24212;&#35813;&#23545;&#20320;&#30340;entity&#20351;&#29992;<tt class="literal">&lt;natural-id&gt;</tt>&#26469;&#26144;&#23556;&#33258;&#28982;&#38190;&#65292;&#28982;&#21518;&#25171;&#24320;&#31532;&#20108;&#32423;&#32531;&#23384;&#12290;
        </p><pre class="programlisting">&lt;class name="User"&gt;
    &lt;cache usage="read-write"/&gt;
    &lt;id name="id"&gt;
        &lt;generator class="increment"/&gt;
    &lt;/id&gt;
    &lt;natural-id&gt;
        &lt;property name="name"/&gt;
        &lt;property name="org"/&gt;
    &lt;/natural-id&gt;
    &lt;property name="password"/&gt;
&lt;/class&gt;</pre><p>
            &#27880;&#24847;,&#27492;&#21151;&#33021;&#23545;&#20855;&#26377;<span class="emphasis"><em>mutable</em></span>&#33258;&#28982;&#38190;&#30340;entity&#24182;&#19981;&#36866;&#29992;&#12290;
        </p><p>
            &#28982;&#21518;&#65292;&#25171;&#24320;Hibernate &#26597;&#35810;&#32531;&#23384;&#12290;
        </p><p>
            &#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#29992;<tt class="literal">Restrictions.naturalId()</tt>&#26469;&#20351;&#29992;&#26356;&#21152;&#39640;&#25928;&#30340;&#32531;&#23384;&#31639;&#27861;&#12290;
        </p><pre class="programlisting">session.createCriteria(User.class)
    .add( Restrictions.naturalId()
        .set("name", "gavin")
        .set("org", "hb") 
    ).setCacheable(true)
    .uniqueResult();</pre></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="querysql"></a>&#31532;&nbsp;16&nbsp;&#31456;&nbsp;Native SQL&#26597;&#35810;</h2></div></div><div></div></div><p>
		&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#20320;&#30340;&#25968;&#25454;&#24211;&#30340;Native SQL&#35821;&#35328;&#26469;&#26597;&#35810;&#25968;&#25454;&#12290;&#36825;&#23545;&#20320;&#22312;&#35201;&#20351;&#29992;&#25968;&#25454;&#24211;&#30340;&#26576;&#20123;&#29305;&#24615;&#30340;&#26102;&#20505;(&#27604;&#22914;&#35828;&#22312;&#26597;&#35810;&#25552;&#31034;&#25110;&#32773;Oracle&#20013;&#30340;
		<tt class="literal">CONNECT</tt>&#20851;&#38190;&#23383;)&#65292;&#36825;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;&#36825;&#23601;&#33021;&#22815;&#25195;&#28165;&#20320;&#25226;&#21407;&#26469;&#30452;&#25509;&#20351;&#29992;SQL/JDBC &#30340;&#31243;&#24207;&#36801;&#31227;&#21040;&#22522;&#20110;
		Hibernate&#24212;&#29992;&#30340;&#36947;&#36335;&#19978;&#30340;&#38556;&#30861;&#12290;
    </p><p>
		Hibernate3&#20801;&#35768;&#20320;&#20351;&#29992;&#25163;&#20889;&#30340;sql&#26469;&#23436;&#25104;&#25152;&#26377;&#30340;create,update,delete,&#21644;load&#25805;&#20316;&#65288;&#21253;&#25324;&#23384;&#20648;&#36807;&#31243;&#65289;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querysql-creating"></a>16.1.&nbsp;&#20351;&#29992;<tt class="literal">SQLQuery</tt></h2></div></div><div></div></div><p>&#23545;&#21407;&#29983;SQL&#26597;&#35810;&#25191;&#34892;&#30340;&#25511;&#21046;&#26159;&#36890;&#36807;<tt class="literal">SQLQuery</tt>&#25509;&#21475;&#36827;&#34892;&#30340;&#65292;&#36890;&#36807;&#25191;&#34892;<tt class="literal">Session.createSQLQuery()</tt>&#33719;&#21462;&#36825;&#20010;&#25509;&#21475;&#12290;&#26368;&#31616;&#21333;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21487;&#20197;&#37319;&#29992;&#20197;&#19979;&#24418;&#24335;&#65306;</p><pre class="programlisting">List cats = sess.createSQLQuery("select * from cats")
    .addEntity(Cat.class)
    .list();</pre><p>&#36825;&#20010;&#26597;&#35810;&#25351;&#23450;&#20102;:</p><div class="itemizedlist"><ul type="disc"><li><p>SQL&#26597;&#35810;&#23383;&#31526;&#20018;</p></li><li><p>&#26597;&#35810;&#36820;&#22238;&#30340;&#23454;&#20307;</p></li></ul></div><p>&#36825;&#37324;&#65292;&#32467;&#26524;&#38598;&#23383;&#27573;&#21517;&#34987;&#20551;&#35774;&#20026;&#19982;&#26144;&#23556;&#25991;&#20214;&#20013;&#25351;&#26126;&#30340;&#23383;&#27573;&#21517;&#30456;&#21516;&#12290;&#23545;&#20110;&#36830;&#25509;&#20102;&#22810;&#20010;&#34920;&#30340;&#26597;&#35810;&#65292;&#36825;&#23601;&#21487;&#33021;&#36896;&#25104;&#38382;&#39064;&#65292;&#22240;&#20026;&#21487;&#33021;&#22312;&#22810;&#20010;&#34920;&#20013;&#20986;&#29616;&#21516;&#26679;&#21517;&#23383;&#30340;&#23383;&#27573;&#12290;&#19979;&#38754;&#30340;&#26041;&#27861;&#23601;&#21487;&#20197;&#36991;&#20813;&#23383;&#27573;&#21517;&#37325;&#22797;&#30340;&#38382;&#39064;:</p><pre class="programlisting">List cats = sess.createSQLQuery("select {cat.*} from cats cat")
    .addEntity("cat", Cat.class)
    .list();</pre><p>
			&#36825;&#20010;&#26597;&#35810;&#25351;&#23450;&#20102;:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
			SQL&#26597;&#35810;&#35821;&#21477;&#65292;&#23427;&#24102;&#19968;&#20010;&#21344;&#20301;&#31526;&#65292;&#21487;&#20197;&#35753;Hibernate&#20351;&#29992;&#23383;&#27573;&#30340;&#21035;&#21517;.
        </p></li><li><p>
			&#26597;&#35810;&#36820;&#22238;&#30340;&#23454;&#20307;&#65292;&#21644;&#23427;&#30340;SQL&#34920;&#30340;&#21035;&#21517;.
        </p></li></ul></div><p>
			<tt class="literal">addEntity()</tt>&#26041;&#27861;&#23558;SQL&#34920;&#30340;&#21035;&#21517;&#21644;&#23454;&#20307;&#31867;&#32852;&#31995;&#36215;&#26469;&#65292;&#24182;&#19988;&#30830;&#23450;&#26597;&#35810;&#32467;&#26524;&#38598;&#30340;&#24418;&#24577;&#12290;
        </p><p>
			<tt class="literal">addJoin()</tt>&#26041;&#27861;&#21487;&#20197;&#34987;&#29992;&#20110;&#36733;&#20837;&#20854;&#20182;&#30340;&#23454;&#20307;&#21644;&#38598;&#21512;&#30340;&#20851;&#32852;.
        </p><pre class="programlisting">List cats = sess.createSQLQuery(
        "select {cat.*}, {kitten.*} from cats cat, cats kitten where kitten.mother = cat.id"
    )
    .addEntity("cat", Cat.class)
    .addJoin("kitten", "cat.kittens")
    .list();</pre><p>
			&#21407;&#29983;&#30340;SQL&#26597;&#35810;&#21487;&#33021;&#36820;&#22238;&#19968;&#20010;&#31616;&#21333;&#30340;&#26631;&#37327;&#20540;&#25110;&#32773;&#19968;&#20010;&#26631;&#37327;&#21644;&#23454;&#20307;&#30340;&#32467;&#21512;&#20307;&#12290;
        </p><pre class="programlisting">Double max = (Double) sess.createSQLQuery("select max(cat.weight) as maxWeight from cats cat")
        .addScalar("maxWeight", Hibernate.DOUBLE);
        .uniqueResult();</pre><p>&#38500;&#27492;&#20043;&#22806;&#65292;&#20320;&#36824;&#21487;&#20197;&#22312;&#20320;&#30340;hbm&#25991;&#20214;&#20013;&#25551;&#36848;&#32467;&#26524;&#38598;&#26144;&#23556;&#20449;&#24687;&#65292;&#22312;&#26597;&#35810;&#20013;&#20351;&#29992;&#12290;</p><pre class="programlisting">List cats = sess.createSQLQuery(
        "select {cat.*}, {kitten.*} from cats cat, cats kitten where kitten.mother = cat.id"
    )
    .setResultSetMapping("catAndKitten")
    .list();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querysql-aliasreferences"></a>16.2.&nbsp;&#21035;&#21517;&#21644;&#23646;&#24615;&#24341;&#29992;</h2></div></div><div></div></div><p>
			&#19978;&#38754;&#20351;&#29992;&#30340;<tt class="literal">{cat.*}</tt>&#26631;&#35760;&#26159; "&#25152;&#26377;&#23646;&#24615;" &#30340;&#31616;&#20889;.&#20320;&#21487;&#20197;&#26174;&#24335;&#22320;&#21015;&#20986;&#38656;&#35201;&#30340;&#23383;&#27573;,&#20294;&#26159;&#20320;&#24517;&#39035;&#35753;Hibernate
			&#20026;&#27599;&#19968;&#20010;&#23646;&#24615;&#27880;&#20837;&#23383;&#27573;&#30340;&#21035;&#21517;.&#36825;&#20123;&#23383;&#27573;&#30340;&#31449;&#20301;&#31526;&#26159;&#20197;&#23383;&#27573;&#21035;&#21517;&#20026;&#21069;&#23548;,&#20877;&#21152;&#19978;&#23646;&#24615;&#21517;.&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#37324;,&#25105;&#20204;&#20174;&#19968;&#20010;&#20854;&#20182;&#30340;&#34920;(<tt class="literal">cat_log</tt>)
			&#20013;&#33719;&#21462;<tt class="literal">Cat</tt>&#23545;&#35937;,&#32780;&#38750;Cat&#23545;&#35937;&#21407;&#26412;&#22312;&#26144;&#23556;&#20803;&#25968;&#25454;&#20013;&#22768;&#26126;&#30340;&#34920;.&#27880;&#24847;&#25105;&#20204;&#29978;&#33267;&#22312;where&#23376;&#21477;&#20013;&#20063;&#21487;&#20197;&#20351;&#29992;&#23646;&#24615;&#21035;&#21517;.
            &#23545;&#20110;&#21629;&#21517;&#26597;&#35810;,{}&#35821;&#27861;&#24182;&#19981;&#26159;&#24517;&#38656;&#30340;.&#20320;&#21487;&#20197;&#22312;<a href="#querysql-namedqueries" title="16.3.&nbsp;&#21629;&#21517;SQL&#26597;&#35810;">&#31532;&nbsp;16.3&nbsp;&#33410; &#8220;&#21629;&#21517;SQL&#26597;&#35810;&#8221;</a>&#24471;&#21040;&#26356;&#22810;&#30340;&#32454;&#33410;.
        </p><pre class="programlisting">String sql = "select cat.originalId as {cat.id}, " +
    "cat.mateid as {cat.mate}, cat.sex as {cat.sex}, " +
    "cat.weight*10 as {cat.weight}, cat.name as {cat.name} " +
    "from cat_log cat where {cat.mate} = :catId"
    
List loggedCats = sess.createSQLQuery(sql)
    .addEntity("cat", Cat.class)
    .setLong("catId", catId)
    .list();</pre><p>
            <span class="emphasis"><em>&#27880;&#24847;:</em></span>&#22914;&#26524;&#20320;&#26126;&#30830;&#22320;&#21015;&#20986;&#20102;&#27599;&#20010;&#23646;&#24615;,&#20320;&#24517;&#39035;&#21253;&#21547;<span class="emphasis"><em>&#36825;&#20010;&#31867;</em></span>&#21644;<span class="emphasis"><em>&#23427;&#30340;&#23376;&#31867;</em></span>&#30340;&#23646;&#24615;!
        </p><p>
    &#19979;&#34920;&#21015;&#20986;&#20102;&#20351;&#29992;&#21035;&#21517;&#27880;&#23556;&#21442;&#25968;&#30340;&#19981;&#21516;&#21487;&#33021;&#24615;&#12290;&#27880;&#24847;&#65306;&#19979;&#38754;&#32467;&#26524;&#20013;&#30340;&#21035;&#21517;&#21482;&#26159;&#31034;&#20363;&#65292;&#23454;&#29992;&#26102;&#27599;&#20010;&#21035;&#21517;&#38656;&#35201;&#21807;&#19968;&#24182;&#19988;&#19981;&#21516;&#30340;&#21517;&#23383;&#12290;
    </p><div class="table"><a name="aliasinjection-summary"></a><p class="title"><b>&#34920;&nbsp;16.1.&nbsp;&#21035;&#21517;&#27880;&#23556;(alias injection names)</b></p><table summary="&#21035;&#21517;&#27880;&#23556;(alias injection names)" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>&#25551;&#36848;</th><th>&#35821;&#27861;</th><th>&#31034;&#20363;</th><td class="auto-generated">&nbsp;</td></tr></thead><tbody><tr><td>&#31616;&#21333;&#23646;&#24615;</td><td><tt class="literal">{[aliasname].[propertyname]</tt></td><td><tt class="literal">A_NAME as {item.name}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#22797;&#21512;&#23646;&#24615;</td><td><tt class="literal">{[aliasname].[componentname].[propertyname]}</tt></td><td><tt class="literal">CURRENCY as {item.amount.currency}, VALUE as {item.amount.value}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#23454;&#20307;&#36776;&#21035;&#22120;(Discriminator of an entity)</td><td><tt class="literal">{[aliasname].class}</tt></td><td><tt class="literal">DISC as {item.class}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#23454;&#20307;&#30340;&#25152;&#26377;&#23646;&#24615;</td><td><tt class="literal">{[aliasname].*}</tt></td><td><tt class="literal">{item.*}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#38598;&#21512;&#38190;(collection key)</td><td><tt class="literal">{[aliasname].key}</tt></td><td><tt class="literal">ORGID as {coll.key}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#38598;&#21512;id</td><td><tt class="literal">{[aliasname].id}</tt></td><td><tt class="literal">EMPID as {coll.id}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#38598;&#21512;&#20803;&#32032;</td><td><tt class="literal">{[aliasname].element}</tt></td><td><tt class="literal">XID as {coll.element}</tt></td><td>&nbsp;</td></tr><tr><td>&#38598;&#21512;&#20803;&#32032;&#30340;&#23646;&#24615;</td><td><tt class="literal">{[aliasname].element.[propertyname]}</tt></td><td><tt class="literal">NAME as {coll.element.name}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#38598;&#21512;&#20803;&#32032;&#30340;&#25152;&#26377;&#23646;&#24615;</td><td><tt class="literal">{[aliasname].element.*}</tt></td><td><tt class="literal">{coll.element.*}</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&#38598;&#21512;&#30340;&#25152;&#26377;&#23646;&#24615;</td><td><tt class="literal">{[aliasname].*}</tt></td><td><tt class="literal">{coll.*}</tt></td><td class="auto-generated">&nbsp;</td></tr></tbody></table></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querysql-namedqueries"></a>16.3.&nbsp;&#21629;&#21517;SQL&#26597;&#35810;</h2></div></div><div></div></div><p>
			&#21487;&#20197;&#22312;&#26144;&#23556;&#25991;&#26723;&#20013;&#23450;&#20041;&#26597;&#35810;&#30340;&#21517;&#23383;,&#28982;&#21518;&#23601;&#21487;&#20197;&#35937;&#35843;&#29992;&#19968;&#20010;&#21629;&#21517;&#30340;HQL&#26597;&#35810;&#19968;&#26679;&#30452;&#25509;&#35843;&#29992;&#21629;&#21517;SQL&#26597;&#35810;.&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#25105;&#20204;<span class="emphasis"><em>&#19981;</em></span>
			&#38656;&#35201;&#35843;&#29992;<tt class="literal">addEntity()</tt>&#26041;&#27861;.
        </p><pre class="programlisting">&lt;sql-query name="persons"&gt;
    &lt;return alias="person" class="eg.Person"/&gt;
    SELECT person.NAME AS {person.name},
           person.AGE AS {person.age},
           person.SEX AS {person.sex}
    FROM PERSON person
    WHERE person.NAME LIKE :namePattern
&lt;/sql-query&gt;</pre><pre class="programlisting">List people = sess.getNamedQuery("persons")
    .setString("namePattern", namePattern)
    .setMaxResults(50)
    .list();</pre><p><tt class="literal">&lt;return-join&gt;</tt>&#21644;
    <tt class="literal">&lt;load-collection&gt;</tt> &#20803;&#32032;&#26159;&#29992;&#26469;&#36830;&#25509;&#20851;&#32852;&#20197;&#21450;&#23558;&#26597;&#35810;&#23450;&#20041;&#20026;&#39044;&#20808;&#21021;&#22987;&#21270;&#21508;&#20010;&#38598;&#21512;&#30340;&#12290;</p><pre class="programlisting">&lt;sql-query name="personsWith"&gt;
    &lt;return alias="person" class="eg.Person"/&gt;
    &lt;return-join alias="address" property="person.mailingAddress"/&gt;
    SELECT person.NAME AS {person.name},
           person.AGE AS {person.age},
           person.SEX AS {person.sex},
           adddress.STREET AS {address.street},
           adddress.CITY AS {address.city},
           adddress.STATE AS {address.state},
           adddress.ZIP AS {address.zip}
    FROM PERSON person
    JOIN ADDRESS adddress
        ON person.ID = address.PERSON_ID AND address.TYPE='MAILING'
    WHERE person.NAME LIKE :namePattern
&lt;/sql-query&gt;</pre><p>
			&#19968;&#20010;&#21629;&#21517;&#26597;&#35810;&#21487;&#33021;&#20250;&#36820;&#22238;&#19968;&#20010;&#26631;&#37327;&#20540;.&#20320;&#24517;&#39035;&#20351;&#29992;<tt class="literal">&lt;return-scalar&gt;</tt>&#20803;&#32032;&#26469;&#25351;&#23450;&#23383;&#27573;&#30340;&#21035;&#21517;&#21644;
			Hibernate&#31867;&#22411;
        </p><pre class="programlisting">&lt;sql-query name="mySqlQuery"&gt;
    &lt;return-scalar column="name" type="string"/&gt;
    &lt;return-scalar column="age" type="long"/&gt;
    SELECT p.NAME AS name,
           p.AGE AS age,
    FROM PERSON p WHERE p.NAME LIKE 'Hiber%'
&lt;/sql-query&gt;</pre><p>
    &#20320;&#21487;&#20197;&#25226;&#32467;&#26524;&#38598;&#26144;&#23556;&#30340;&#20449;&#24687;&#25918;&#22312;&#22806;&#37096;&#30340;<tt class="literal">&lt;resultset&gt;</tt>&#20803;&#32032;&#20013;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#22312;&#22810;&#20010;&#21629;&#21517;&#26597;&#35810;&#38388;&#65292;&#25110;&#32773;&#36890;&#36807;<tt class="literal">setResultSetMapping()</tt>API&#26469;&#35775;&#38382;&#12290;(&#27492;&#22788;&#21407;&#25991;&#21363;&#23384;&#30097;&#12290;&#21407;&#25991;&#20026;&#65306;You can externalize the resultset mapping informations in a
    <tt class="literal">&lt;resultset&gt;</tt> element to either reuse them accross
    several named queries or through the
    <tt class="literal">setResultSetMapping()</tt> API.)
    </p><pre class="programlisting">&lt;resultset name="personAddress"&gt;
    &lt;return alias="person" class="eg.Person"/&gt;
    &lt;return-join alias="address" property="person.mailingAddress"/&gt;
&lt;/resultset&gt;

&lt;sql-query name="personsWith" resultset-ref="personAddress"&gt;
    SELECT person.NAME AS {person.name},
           person.AGE AS {person.age},
           person.SEX AS {person.sex},
           adddress.STREET AS {address.street},
           adddress.CITY AS {address.city},
           adddress.STATE AS {address.state},
           adddress.ZIP AS {address.zip}
    FROM PERSON person
    JOIN ADDRESS adddress
        ON person.ID = address.PERSON_ID AND address.TYPE='MAILING'
    WHERE person.NAME LIKE :namePattern
&lt;/sql-query&gt;</pre><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="propertyresults"></a>16.3.1.&nbsp;&#20351;&#29992;return-property&#26469;&#26126;&#30830;&#22320;&#25351;&#23450;&#23383;&#27573;/&#21035;&#21517;</h3></div></div><div></div></div><p>
				&#20351;&#29992;<tt class="literal">&lt;return-property&gt;</tt>&#20320;&#21487;&#20197;&#26126;&#30830;&#30340;&#21578;&#35785;Hibernate&#20351;&#29992;&#21738;&#20123;&#23383;&#27573;&#21035;&#21517;,&#36825;&#21462;&#20195;&#20102;&#20351;&#29992;<tt class="literal">{}</tt>-&#35821;&#27861;
				&#26469;&#35753;Hibernate&#27880;&#20837;&#23427;&#33258;&#24049;&#30340;&#21035;&#21517;.
             </p><pre class="programlisting">&lt;sql-query name="mySqlQuery"&gt;
    &lt;return alias="person" class="eg.Person"&gt;
      &lt;return-property name="name" column="myName"/&gt;
      &lt;return-property name="age" column="myAge"/&gt;
      &lt;return-property name="sex" column="mySex"/&gt;
    &lt;/return&gt;
    SELECT person.NAME AS myName,
           person.AGE AS myAge,
           person.SEX AS mySex,
    FROM PERSON person WHERE person.NAME LIKE :name
&lt;/sql-query&gt;
</pre><tt class="literal">&lt;return-property&gt;</tt>&#20063;&#21487;&#29992;&#20110;&#22810;&#20010;&#23383;&#27573;,&#23427;&#35299;&#20915;&#20102;&#20351;&#29992;<tt class="literal">{}</tt>-&#35821;&#27861;&#19981;&#33021;&#32454;&#31890;&#24230;&#25511;&#21046;&#22810;&#20010;&#23383;&#27573;&#30340;&#38480;&#21046;
             <pre class="programlisting">&lt;sql-query name="organizationCurrentEmployments"&gt;
            &lt;return alias="emp" class="Employment"&gt;            
             &lt;return-property name="salary"&gt; 
               &lt;return-column name="VALUE"/&gt;
               &lt;return-column name="CURRENCY"/&gt;            
             &lt;/return-property&gt;
             &lt;return-property name="endDate" column="myEndDate"/&gt;
            &lt;/return&gt;
            SELECT EMPLOYEE AS {emp.employee}, EMPLOYER AS {emp.employer}, 
            STARTDATE AS {emp.startDate}, ENDDATE AS {emp.endDate},
            REGIONCODE as {emp.regionCode}, EID AS {emp.id}, VALUE, CURRENCY
            FROM EMPLOYMENT
            WHERE EMPLOYER = :id AND ENDDATE IS NULL
            ORDER BY STARTDATE ASC
&lt;/sql-query&gt;</pre><p>
				&#27880;&#24847;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;,&#25105;&#20204;&#20351;&#29992;&#20102;<tt class="literal">&lt;return-property&gt;</tt>&#32467;&#21512;<tt class="literal">{}</tt>&#30340;&#27880;&#20837;&#35821;&#27861;.
				&#20801;&#35768;&#29992;&#25143;&#26469;&#36873;&#25321;&#22914;&#20309;&#24341;&#29992;&#23383;&#27573;&#20197;&#21450;&#23646;&#24615;.
            </p><p>
			 &#22914;&#26524;&#20320;&#26144;&#23556;&#19968;&#20010;&#35782;&#21035;&#22120;(discriminator),&#20320;&#24517;&#39035;&#20351;&#29992;<tt class="literal">&lt;return-discriminator&gt;</tt> &#26469;&#25351;&#23450;&#35782;&#21035;&#22120;&#23383;&#27573;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="sp_query"></a>16.3.2.&nbsp;&#20351;&#29992;&#23384;&#20648;&#36807;&#31243;&#26469;&#26597;&#35810;</h3></div></div><div></div></div><p>
				 Hibernate 3&#24341;&#20837;&#20102;&#23545;&#23384;&#20648;&#36807;&#31243;&#26597;&#35810;(stored procedure)&#21644;&#20989;&#25968;(function)&#30340;&#25903;&#25345;.&#20197;&#19979;&#30340;&#35828;&#26126;&#20013;&#65292;&#36825;&#20108;&#32773;&#19968;&#33324;&#37117;&#36866;&#29992;&#12290;
				 
				 &#23384;&#20648;&#36807;&#31243;/&#20989;&#25968;&#24517;&#39035;&#36820;&#22238;&#19968;&#20010;&#32467;&#26524;&#38598;,&#20316;&#20026;Hibernate&#33021;&#22815;&#20351;&#29992;&#30340;&#31532;&#19968;&#20010;&#22806;&#37096;&#21442;&#25968;.
				 
				 &#19979;&#38754;&#26159;&#19968;&#20010;Oracle9&#21644;&#26356;&#39640;&#29256;&#26412;&#30340;&#23384;&#20648;&#36807;&#31243;&#20363;&#23376;.</p><pre class="programlisting">CREATE OR REPLACE FUNCTION selectAllEmployments 
    RETURN SYS_REFCURSOR 
AS 
    st_cursor SYS_REFCURSOR; 
BEGIN 
    OPEN st_cursor FOR 
 SELECT EMPLOYEE, EMPLOYER, 
 STARTDATE, ENDDATE, 
 REGIONCODE, EID, VALUE, CURRENCY 
 FROM EMPLOYMENT; 
      RETURN  st_cursor; 
 END;</pre><p>    
				 &#22312;Hibernate&#37324;&#35201;&#35201;&#20351;&#29992;&#36825;&#20010;&#26597;&#35810;,&#20320;&#38656;&#35201;&#36890;&#36807;&#21629;&#21517;&#26597;&#35810;&#26469;&#26144;&#23556;&#23427;.
			 </p><pre class="programlisting">&lt;sql-query name="selectAllEmployees_SP" callable="true"&gt;
    &lt;return alias="emp" class="Employment"&gt;
        &lt;return-property name="employee" column="EMPLOYEE"/&gt;
        &lt;return-property name="employer" column="EMPLOYER"/&gt;            
        &lt;return-property name="startDate" column="STARTDATE"/&gt;
        &lt;return-property name="endDate" column="ENDDATE"/&gt;            
        &lt;return-property name="regionCode" column="REGIONCODE"/&gt;            
        &lt;return-property name="id" column="EID"/&gt;                        
        &lt;return-property name="salary"&gt; 
            &lt;return-column name="VALUE"/&gt;
            &lt;return-column name="CURRENCY"/&gt;            
        &lt;/return-property&gt;
    &lt;/return&gt;
    { ? = call selectAllEmployments() }
&lt;/sql-query&gt;</pre><p>
			  &#27880;&#24847;&#23384;&#20648;&#36807;&#31243;&#24403;&#21069;&#20165;&#20165;&#36820;&#22238;&#26631;&#37327;&#21644;&#23454;&#20307;.&#29616;&#22312;&#19981;&#25903;&#25345;<tt class="literal">&lt;return-join&gt;</tt>&#21644;<tt class="literal">&lt;load-collection&gt;</tt>
			  
             </p><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="querysql-limits-storedprocedures"></a>16.3.2.1.&nbsp;&#20351;&#29992;&#23384;&#20648;&#36807;&#31243;&#30340;&#35268;&#21017;&#21644;&#38480;&#21046;</h4></div></div><div></div></div><p>
				   &#20026;&#20102;&#22312;Hibernate&#20013;&#20351;&#29992;&#23384;&#20648;&#36807;&#31243;,&#20320;&#24517;&#39035;&#36981;&#24490;&#19968;&#20123;&#35268;&#21017;.&#19981;&#36981;&#24490;&#36825;&#20123;&#35268;&#21017;&#30340;&#23384;&#20648;&#36807;&#31243;&#23558;&#19981;&#21487;&#29992;.&#22914;&#26524;&#20320;&#20173;&#28982;&#24819;&#35201;&#20351;&#29992;&#20182;&#20204;,
				   &#20320;&#24517;&#39035;&#36890;&#36807;<tt class="literal">session.connection()</tt>&#26469;&#25191;&#34892;&#20182;&#20204;.&#36825;&#20123;&#35268;&#21017;&#38024;&#23545;&#20110;&#19981;&#21516;&#30340;&#25968;&#25454;&#24211;.&#22240;&#20026;&#25968;&#25454;&#24211;
				   &#25552;&#20379;&#21830;&#26377;&#21508;&#31181;&#19981;&#21516;&#30340;&#23384;&#20648;&#36807;&#31243;&#35821;&#27861;&#21644;&#35821;&#20041;.
               </p><p>
                   &#23545;&#23384;&#20648;&#36807;&#31243;&#36827;&#34892;&#30340;&#26597;&#35810;&#26080;&#27861;&#20351;&#29992;<tt class="literal">setFirstResult()/setMaxResults()</tt>&#36827;&#34892;&#20998;&#39029;&#12290;
               </p><p>&#24314;&#35758;&#37319;&#29992;&#30340;&#35843;&#29992;&#26041;&#24335;&#26159;&#26631;&#20934;SQL92: <tt class="literal">{ ? = call
        functionName(&lt;parameters&gt;) }</tt> &#25110;&#32773; <tt class="literal">{ ? = call
        procedureName(&lt;parameters&gt;}</tt>.&#21407;&#29983;&#35843;&#29992;&#35821;&#27861;&#19981;&#34987;&#25903;&#25345;&#12290;</p><p>
				   &#23545;&#20110;Oracle&#26377;&#22914;&#19979;&#35268;&#21017;:
               </p><div class="itemizedlist"><ul type="disc" compact><li><p>&#20989;&#25968;&#24517;&#39035;&#36820;&#22238;&#19968;&#20010;&#32467;&#26524;&#38598;&#12290;&#23384;&#20648;&#36807;&#31243;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#24517;&#39035;&#26159;<tt class="literal">OUT</tt>&#65292;&#23427;&#36820;&#22238;&#19968;&#20010;&#32467;&#26524;&#38598;&#12290;&#36825;&#26159;&#36890;&#36807;Oracle 9&#25110;10&#30340;<tt class="literal">SYS_REFCURSOR</tt>&#31867;&#22411;&#26469;&#23436;&#25104;&#30340;&#12290;&#22312;Oracle&#20013;&#20320;&#38656;&#35201;&#23450;&#20041;&#19968;&#20010;<tt class="literal">REF CURSOR</tt>&#31867;&#22411;&#65292;&#21442;&#35265;Oracle&#30340;&#25163;&#20876;&#12290;</p></li></ul></div><p>                   
				   &#23545;&#20110;Sybase&#25110;&#32773;MS SQL server&#26377;&#22914;&#19979;&#35268;&#21017;:
               </p><div class="itemizedlist"><ul type="disc" compact><li><p>    
				   &#23384;&#20648;&#36807;&#31243;&#24517;&#39035;&#36820;&#22238;&#19968;&#20010;&#32467;&#26524;&#38598;&#12290;.&#27880;&#24847;&#36825;&#20123;servers&#21487;&#33021;&#36820;&#22238;&#22810;&#20010;&#32467;&#26524;&#38598;&#20197;&#21450;&#26356;&#26032;&#30340;&#25968;&#30446;.Hibernate&#23558;&#21462;&#20986;&#31532;&#19968;&#26465;&#32467;&#26524;&#38598;&#20316;&#20026;&#23427;&#30340;&#36820;&#22238;&#20540;&#65292;
				   &#20854;&#20182;&#23558;&#34987;&#20002;&#24323;&#12290;
               </p></li><li><p>    
				   &#22914;&#26524;&#20320;&#33021;&#22815;&#22312;&#23384;&#20648;&#36807;&#31243;&#37324;&#35774;&#23450;<tt class="literal">SET NOCOUNT ON</tt>&#65292;&#36825;&#21487;&#33021;&#20250;&#25928;&#29575;&#26356;&#39640;&#65292;&#20294;&#36825;&#19981;&#26159;&#24517;&#38656;&#30340;&#12290;
               </p></li></ul></div></div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querysql-cud"></a>16.4.&nbsp;&#23450;&#21046;SQL&#29992;&#26469;create&#65292;update&#21644;delete</h2></div></div><div></div></div><p>
			Hibernate3&#33021;&#22815;&#20351;&#29992;&#23450;&#21046;&#30340;SQL&#35821;&#21477;&#26469;&#25191;&#34892;create,update&#21644;delete&#25805;&#20316;&#12290;&#22312;Hibernate&#20013;&#65292;&#25345;&#20037;&#21270;&#30340;&#31867;&#21644;&#38598;&#21512;&#24050;&#32463;
			&#21253;&#21547;&#20102;&#19968;&#22871;&#37197;&#32622;&#26399;&#20135;&#29983;&#30340;&#35821;&#21477;(insertsql, deletesql, updatesql&#31561;&#31561;)&#65292;&#36825;&#20123;&#26144;&#23556;&#26631;&#35760; <tt class="literal">&lt;sql-insert&gt;</tt>, 
			<tt class="literal">&lt;sql-delete&gt;</tt>, and <tt class="literal">&lt;sql-update&gt;</tt>&#37325;&#36733;&#20102;
			&#36825;&#20123;&#35821;&#21477;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id"&gt;
        &lt;generator class="increment"/&gt;
    &lt;/id&gt;
    &lt;property name="name" not-null="true"/&gt;
    &lt;sql-insert&gt;INSERT INTO PERSON (NAME, ID) VALUES ( UPPER(?), ? )&lt;/sql-insert&gt;
    &lt;sql-update&gt;UPDATE PERSON SET NAME=UPPER(?) WHERE ID=?&lt;/sql-update&gt;
    &lt;sql-delete&gt;DELETE FROM PERSON WHERE ID=?&lt;/sql-delete&gt;
&lt;/class&gt;</pre><p>
			&#36825;&#20123;SQL&#30452;&#25509;&#22312;&#20320;&#30340;&#25968;&#25454;&#24211;&#37324;&#25191;&#34892;&#65292;&#25152;&#20197;&#20320;&#21487;&#20197;&#33258;&#30001;&#30340;&#20351;&#29992;&#20320;&#21916;&#27426;&#30340;&#20219;&#24847;&#35821;&#27861;&#12290;&#20294;&#22914;&#26524;&#20320;&#20351;&#29992;&#25968;&#25454;&#24211;&#29305;&#23450;&#30340;&#35821;&#27861;&#65292;
			&#36825;&#24403;&#28982;&#20250;&#38477;&#20302;&#20320;&#26144;&#23556;&#30340;&#21487;&#31227;&#26893;&#24615;&#12290;
        </p><p>
			&#22914;&#26524;&#35774;&#23450;<tt class="literal">callable</tt>&#65292;&#21017;&#33021;&#22815;&#25903;&#25345;&#23384;&#20648;&#36807;&#31243;&#20102;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id"&gt;
        &lt;generator class="increment"/&gt;
    &lt;/id&gt;
    &lt;property name="name" not-null="true"/&gt;
    &lt;sql-insert callable="true"&gt;{call createPerson (?, ?)}&lt;/sql-insert&gt;
    &lt;sql-delete callable="true"&gt;{? = call deletePerson (?)}&lt;/sql-delete&gt;
    &lt;sql-update callable="true"&gt;{? = call updatePerson (?, ?)}&lt;/sql-update&gt;
&lt;/class&gt;</pre><p>
		  &#21442;&#25968;&#30340;&#20301;&#32622;&#39034;&#24207;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#65292;&#20182;&#20204;&#24517;&#39035;&#21644;Hibernate&#25152;&#26399;&#24453;&#30340;&#39034;&#24207;&#30456;&#21516;&#12290;
        </p><p>
		  &#20320;&#33021;&#22815;&#36890;&#36807;&#35774;&#23450;&#26085;&#24535;&#35843;&#35797;&#32423;&#21035;&#20026;<tt class="literal">org.hiberante.persister.entity</tt>,&#26469;&#26597;&#30475;Hibernate&#25152;&#26399;&#24453;&#30340;&#39034;&#24207;&#12290;&#22312;&#36825;&#20010;&#32423;&#21035;&#19979;&#65292;
		  Hibernate&#23558;&#20250;&#25171;&#21360;&#20986;create,update&#21644;delete&#23454;&#20307;&#30340;&#38745;&#24577;SQL&#12290;(&#22914;&#26524;&#24819;&#30475;&#21040;&#39044;&#35745;&#30340;&#39034;&#24207;&#12290;&#35760;&#24471;&#19981;&#35201;&#23558;&#23450;&#21046;SQL&#21253;&#21547;&#22312;&#26144;&#23556;&#25991;&#20214;&#37324;&#65292;
		  &#22240;&#20026;&#20182;&#20204;&#20250;&#37325;&#36733;Hibernate&#29983;&#25104;&#30340;&#38745;&#24577;SQL&#12290;)
        </p><p>
			&#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;(&#26368;&#22909;&#36825;&#20040;&#20570;)&#65292;&#23384;&#20648;&#36807;&#31243;&#38656;&#35201;&#36820;&#22238;&#25554;&#20837;/&#26356;&#26032;/&#21024;&#38500;&#30340;&#34892;&#25968;&#65292;&#22240;&#20026;Hibernate&#23545;&#35821;&#21477;&#30340;&#25104;&#21151;&#25191;&#34892;&#26377;&#20123;&#36816;&#34892;&#26102;&#30340;&#26816;&#26597;&#12290;
			Hibernate&#24120;&#20250;&#25226;&#36827;&#34892;CUD&#25805;&#20316;&#30340;&#35821;&#21477;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#27880;&#20876;&#20026;&#19968;&#20010;&#25968;&#20540;&#22411;&#36755;&#20986;&#21442;&#25968;&#12290;
        </p><pre class="programlisting">CREATE OR REPLACE FUNCTION updatePerson (uid IN NUMBER, uname IN VARCHAR2)
    RETURN NUMBER IS
BEGIN

    update PERSON
    set
        NAME = uname,
    where
        ID = uid;

    return SQL%ROWCOUNT;

END updatePerson;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="querysql-load"></a>16.5.&nbsp;&#23450;&#21046;&#35013;&#36733;SQL</h2></div></div><div></div></div><p>
			&#20320;&#21487;&#33021;&#38656;&#35201;&#22768;&#26126;&#20320;&#33258;&#24049;&#30340;SQL(&#25110;HQL)&#26469;&#35013;&#36733;&#23454;&#20307;
        </p><pre class="programlisting">&lt;sql-query name="person"&gt;
    &lt;return alias="pers" class="Person" lock-mode="upgrade"/&gt;
    SELECT NAME AS {pers.name}, ID AS {pers.id}
    FROM PERSON
    WHERE ID=?
    FOR UPDATE
&lt;/sql-query&gt;</pre><p>
			&#36825;&#21482;&#26159;&#19968;&#20010;&#21069;&#38754;&#35752;&#35770;&#36807;&#30340;&#21629;&#21517;&#26597;&#35810;&#22768;&#26126;&#65292;&#20320;&#21487;&#20197;&#22312;&#31867;&#26144;&#23556;&#37324;&#24341;&#29992;&#36825;&#20010;&#21629;&#21517;&#26597;&#35810;&#12290;
        </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="id"&gt;
        &lt;generator class="increment"/&gt;
    &lt;/id&gt;
    &lt;property name="name" not-null="true"/&gt;
    &lt;loader query-ref="person"/&gt;
&lt;/class&gt;</pre><p>
		    &#36825;&#20063;&#21487;&#20197;&#29992;&#20110;&#23384;&#20648;&#36807;&#31243;
        </p><p>&#20320;&#29978;&#33267;&#21487;&#20197;&#23450;&#19968;&#20010;&#29992;&#20110;&#38598;&#21512;&#35013;&#36733;&#30340;&#26597;&#35810;:</p><pre class="programlisting">&lt;set name="employments" inverse="true"&gt;
    &lt;key/&gt;
    &lt;one-to-many class="Employment"/&gt;
    &lt;loader query-ref="employments"/&gt;
&lt;/set&gt;</pre><pre class="programlisting">&lt;sql-query name="employments"&gt;
    &lt;load-collection alias="emp" role="Person.employments"/&gt;
    SELECT {emp.*}
    FROM EMPLOYMENT emp
    WHERE EMPLOYER = :id
    ORDER BY STARTDATE ASC, EMPLOYEE ASC
&lt;/sql-query&gt;</pre><p>&#20320;&#29978;&#33267;&#36824;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#23454;&#20307;&#35013;&#36733;&#22120;&#65292;&#23427;&#36890;&#36807;&#36830;&#25509;&#25235;&#21462;&#35013;&#36733;&#19968;&#20010;&#38598;&#21512;:</p><pre class="programlisting">&lt;sql-query name="person"&gt;
    &lt;return alias="pers" class="Person"/&gt;
    &lt;return-join alias="emp" property="pers.employments"/&gt;
    SELECT NAME AS {pers.*}, {emp.*}
    FROM PERSON pers
    LEFT OUTER JOIN EMPLOYMENT emp
        ON pers.ID = emp.PERSON_ID
    WHERE ID=?
&lt;/sql-query&gt;</pre></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="filters"></a>&#31532;&nbsp;17&nbsp;&#31456;&nbsp;&#36807;&#28388;&#25968;&#25454;</h2></div></div><div></div></div><p>

                Hibernate3 &#25552;&#20379;&#20102;&#19968;&#31181;&#21019;&#26032;&#30340;&#26041;&#24335;&#26469;&#22788;&#29702;&#20855;&#26377;&#8220;&#26174;&#24615;(visibility)&#8221;&#35268;&#21017;&#30340;&#25968;&#25454;&#65292;&#37027;&#23601;&#26159;&#20351;&#29992;<span class="emphasis"><em>Hibernate filter</em></span>&#12290;
                <span class="emphasis"><em>Hibernate filter</em></span>&#26159;&#20840;&#23616;&#26377;&#25928;&#30340;&#12289;&#20855;&#26377;&#21517;&#23383;&#12289;&#21487;&#20197;&#24102;&#21442;&#25968;&#30340;&#36807;&#28388;&#22120;&#65292;
                &#23545;&#20110;&#26576;&#20010;&#29305;&#23450;&#30340;Hibernate session&#24744;&#21487;&#20197;&#36873;&#25321;&#26159;&#21542;&#21551;&#29992;&#65288;&#25110;&#31105;&#29992;&#65289;&#26576;&#20010;&#36807;&#28388;&#22120;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="objectstate-filters"></a>17.1.&nbsp;Hibernate &#36807;&#28388;&#22120;(filters)</h2></div></div><div></div></div><p>
                        Hibernate3&#26032;&#22686;&#20102;&#23545;&#26576;&#20010;&#31867;&#25110;&#32773;&#38598;&#21512;&#20351;&#29992;&#39044;&#20808;&#23450;&#20041;&#30340;&#36807;&#28388;&#22120;&#26465;&#20214;(filter criteria)&#30340;&#21151;&#33021;&#12290;&#36807;&#28388;&#22120;&#26465;&#20214;&#30456;&#24403;&#20110;&#23450;&#20041;&#19968;&#20010;
                        &#38750;&#24120;&#31867;&#20284;&#20110;&#31867;&#21644;&#21508;&#31181;&#38598;&#21512;&#19978;&#30340;&#8220;where&#8221;&#23646;&#24615;&#30340;&#32422;&#26463;&#23376;&#21477;&#65292;&#20294;&#26159;&#36807;&#28388;&#22120;&#26465;&#20214;&#21487;&#20197;&#24102;&#21442;&#25968;&#12290;
                        &#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#22312;&#36816;&#34892;&#26102;&#20915;&#23450;&#26159;&#21542;&#21551;&#29992;&#32473;&#23450;&#30340;&#36807;&#28388;&#22120;&#65292;&#20197;&#21450;&#20351;&#29992;&#20160;&#20040;&#26679;&#30340;&#21442;&#25968;&#20540;&#12290;
                        &#36807;&#28388;&#22120;&#30340;&#29992;&#27861;&#24456;&#20687;&#25968;&#25454;&#24211;&#35270;&#22270;&#65292;&#21482;&#19981;&#36807;&#26159;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#30830;&#23450;&#20351;&#29992;&#20160;&#20040;&#26679;&#30340;&#21442;&#25968;&#30340;&#12290;
                        
        </p><p>

            &#35201;&#20351;&#29992;&#36807;&#28388;&#22120;&#65292;&#24517;&#39035;&#39318;&#20808;&#22312;&#30456;&#24212;&#30340;&#26144;&#23556;&#33410;&#28857;&#20013;&#23450;&#20041;&#12290;&#32780;&#23450;&#20041;&#19968;&#20010;&#36807;&#28388;&#22120;&#65292;&#35201;&#29992;&#21040;&#20301;&#20110;<tt class="literal">&lt;hibernate-mapping/&gt;</tt>
			&#33410;&#28857;&#20043;&#20869;&#30340;<tt class="literal">&lt;filter-def/&gt;</tt>&#33410;&#28857;&#65306;
        </p><pre class="programlisting">&lt;filter-def name="myFilter"&gt;
    &lt;filter-param name="myFilterParam" type="string"/&gt;
&lt;/filter-def&gt;</pre><p>
			&#23450;&#20041;&#22909;&#20043;&#21518;&#65292;&#23601;&#21487;&#20197;&#22312;&#26576;&#20010;&#31867;&#20013;&#20351;&#29992;&#36825;&#20010;&#36807;&#28388;&#22120;&#65306;
        </p><pre class="programlisting">&lt;class name="myClass" ...&gt;
    ...
    &lt;filter name="myFilter" condition=":myFilterParam = MY_FILTERED_COLUMN"/&gt;
&lt;/class&gt;</pre><p>
			&#20063;&#21487;&#20197;&#22312;&#26576;&#20010;&#38598;&#21512;&#20351;&#29992;&#23427;&#65306;
        </p><pre class="programlisting">&lt;set ...&gt;
    &lt;filter name="myFilter" condition=":myFilterParam = MY_FILTERED_COLUMN"/&gt;
&lt;/set&gt;</pre><p>
                        &#21487;&#20197;&#22312;&#22810;&#20010;&#31867;&#25110;&#38598;&#21512;&#20013;&#20351;&#29992;&#26576;&#20010;&#36807;&#28388;&#22120;&#65307;&#26576;&#20010;&#31867;&#25110;&#32773;&#38598;&#21512;&#20013;&#20063;&#21487;&#20197;&#20351;&#29992;&#22810;&#20010;&#36807;&#28388;&#22120;&#12290;
        </p><p>

			<tt class="literal">Session</tt>&#23545;&#35937;&#20013;&#20250;&#29992;&#21040;&#30340;&#26041;&#27861;&#26377;&#65306;<tt class="literal">enableFilter(String filterName)</tt>,
            <tt class="literal">getEnabledFilter(String filterName)</tt>, &#21644; <tt class="literal">disableFilter(String filterName)</tt>.
			Session&#20013;&#40664;&#35748;&#26159;<span class="emphasis"><em>&#19981;</em></span>&#21551;&#29992;&#36807;&#28388;&#22120;&#30340;&#65292;&#24517;&#39035;&#36890;&#36807;<tt class="literal">Session.enabledFilter()</tt>&#26041;&#27861;&#26174;&#24335;&#30340;&#21551;&#29992;&#12290;
			&#35813;&#26041;&#27861;&#36820;&#22238;&#34987;&#21551;&#29992;&#30340;<tt class="literal">Filter</tt>&#30340;&#23454;&#20363;&#12290;&#20197;&#19978;&#25991;&#23450;&#20041;&#30340;&#36807;&#28388;&#22120;&#20026;&#20363;&#65306;
        </p><pre class="programlisting">session.enableFilter("myFilter").setParameter("myFilterParam", "some-value");</pre><p>
			&#27880;&#24847;&#65292;org.hibernate.Filter&#30340;&#26041;&#27861;&#20801;&#35768;&#38142;&#24335;&#26041;&#27861;&#35843;&#29992;&#12290;&#65288;&#31867;&#20284;&#19978;&#38754;&#20363;&#23376;&#20013;&#21551;&#29992;Filter&#20043;&#21518;&#35774;&#23450;Filter&#21442;&#25968;&#36825;&#20010;&#8220;&#26041;&#27861;&#38142;&#8221;&#65289;
                        Hibernate&#30340;&#20854;&#20182;&#37096;&#20998;&#20063;&#22823;&#22810;&#26377;&#36825;&#20010;&#29305;&#24615;&#12290;
        </p><p>
			&#19979;&#38754;&#26159;&#19968;&#20010;&#27604;&#36739;&#23436;&#25972;&#30340;&#20363;&#23376;&#65292;&#20351;&#29992;&#20102;&#35760;&#24405;&#29983;&#25928;&#26085;&#26399;&#27169;&#24335;&#36807;&#28388;&#26377;&#26102;&#25928;&#30340;&#25968;&#25454;&#65306;
        </p><pre class="programlisting">&lt;filter-def name="effectiveDate"&gt;
    &lt;filter-param name="asOfDate" type="date"/&gt;
&lt;/filter-def&gt;

&lt;class name="Employee" ...&gt;
...
    &lt;many-to-one name="department" column="dept_id" class="Department"/&gt;
    &lt;property name="effectiveStartDate" type="date" column="eff_start_dt"/&gt;
    &lt;property name="effectiveEndDate" type="date" column="eff_end_dt"/&gt;
...
    &lt;!--
        Note that this assumes non-terminal records have an eff_end_dt set to
        a max db date for simplicity-sake

		&#27880;&#24847;&#65292;&#20026;&#20102;&#31616;&#21333;&#36215;&#35265;&#65292;&#27492;&#22788;&#20551;&#35774;&#38599;&#29992;&#20851;&#31995;&#29983;&#25928;&#26399;&#23578;&#26410;&#32467;&#26463;&#30340;&#35760;&#24405;&#30340;eff_end_dt&#23383;&#27573;&#30340;&#20540;&#31561;&#20110;&#25968;&#25454;&#24211;&#26368;&#22823;&#30340;&#26085;&#26399;
    --&gt;
    &lt;filter name="effectiveDate"
            condition=":asOfDate BETWEEN eff_start_dt and eff_end_dt"/&gt;
&lt;/class&gt;

&lt;class name="Department" ...&gt;
...
    &lt;set name="employees" lazy="true"&gt;
        &lt;key column="dept_id"/&gt;
        &lt;one-to-many class="Employee"/&gt;
        &lt;filter name="effectiveDate"
                condition=":asOfDate BETWEEN eff_start_dt and eff_end_dt"/&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><p>
			&#23450;&#20041;&#22909;&#21518;&#65292;&#22914;&#26524;&#24819;&#35201;&#20445;&#35777;&#21462;&#22238;&#30340;&#37117;&#26159;&#30446;&#21069;&#22788;&#20110;&#29983;&#25928;&#26399;&#30340;&#35760;&#24405;&#65292;&#21482;&#38656;&#22312;&#33719;&#21462;&#38599;&#21592;&#25968;&#25454;&#30340;&#25805;&#20316;&#20043;&#21069;&#20808;&#24320;&#21551;&#36807;&#28388;&#22120;&#21363;&#21487;&#65306;
        </p><pre class="programlisting">Session session = ...;
session.enabledFilter("effectiveDate").setParameter("asOfDate", new Date());
List results = session.createQuery("from Employee as e where e.salary &gt; :targetSalary")
         .setLong("targetSalary", new Long(1000000))
         .list();
</pre><p>

			&#22312;&#19978;&#38754;&#30340;HQL&#20013;&#65292;&#34429;&#28982;&#25105;&#20204;&#20165;&#20165;&#26174;&#24335;&#30340;&#20351;&#29992;&#20102;&#19968;&#20010;&#34218;&#27700;&#26465;&#20214;&#65292;&#20294;&#22240;&#20026;&#21551;&#29992;&#20102;&#36807;&#28388;&#22120;&#65292;&#26597;&#35810;&#23558;&#20165;&#36820;&#22238;&#37027;&#20123;&#30446;&#21069;&#38599;&#29992;
			&#20851;&#31995;&#22788;&#20110;&#29983;&#25928;&#26399;&#30340;&#65292;&#24182;&#19988;&#34218;&#27700;&#39640;&#20110;&#19968;&#30334;&#19975;&#32654;&#20992;&#30340;&#38599;&#21592;&#30340;&#25968;&#25454;&#12290;

        </p><p>

			&#27880;&#24847;&#65306;&#22914;&#26524;&#20320;&#25171;&#31639;&#22312;&#20351;&#29992;&#22806;&#36830;&#25509;&#65288;&#25110;&#32773;&#36890;&#36807;HQL&#25110;load fetching&#65289;&#30340;&#21516;&#26102;&#20351;&#29992;&#36807;&#28388;&#22120;&#65292;&#35201;&#27880;&#24847;&#26465;&#20214;&#34920;&#36798;&#24335;&#30340;&#26041;&#21521;&#65288;&#24038;&#36824;&#26159;&#21491;&#65289;&#12290;
			&#26368;&#23433;&#20840;&#30340;&#26041;&#24335;&#26159;&#20351;&#29992;&#24038;&#22806;&#36830;&#25509;&#65288;left outer joining&#65289;&#12290;&#24182;&#19988;&#36890;&#24120;&#26469;&#35828;&#65292;&#20808;&#20889;&#21442;&#25968;&#65292;
			&#28982;&#21518;&#26159;&#25805;&#20316;&#31526;&#65292;&#26368;&#21518;&#20889;&#25968;&#25454;&#24211;&#23383;&#27573;&#21517;&#12290;
        </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="xml"></a>&#31532;&nbsp;18&nbsp;&#31456;&nbsp;XML&#26144;&#23556;</h2></div></div><div></div></div><p><span class="emphasis"><em>
        &#27880;&#24847;&#36825;&#26159;Hibernate 3.0&#30340;&#19968;&#20010;&#23454;&#39564;&#24615;&#30340;&#29305;&#24615;&#12290;&#36825;&#19968;&#29305;&#24615;&#20173;&#22312;&#31215;&#26497;&#24320;&#21457;&#20013;&#12290;
    </em></span></p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xml-intro"></a>18.1.&nbsp;&#29992;XML&#25968;&#25454;&#36827;&#34892;&#24037;&#20316;</h2></div></div><div></div></div><p>
            Hibernate&#20351;&#24471;&#20320;&#21487;&#20197;&#29992;XML&#25968;&#25454;&#26469;&#36827;&#34892;&#24037;&#20316;&#65292;&#24688;&#22914;&#20320;&#29992;&#25345;&#20037;&#21270;&#30340;POJO&#36827;&#34892;&#24037;&#20316;&#37027;&#26679;&#12290;&#35299;&#26512;&#36807;&#30340;XML&#26641;
            &#21487;&#20197;&#34987;&#35748;&#20026;&#26159;&#20195;&#26367;POJO&#30340;&#21478;&#22806;&#19968;&#31181;&#22312;&#23545;&#35937;&#23618;&#38754;&#19978;&#34920;&#31034;&#20851;&#31995;&#22411;&#25968;&#25454;&#30340;&#36884;&#24452;.
        </p><p>
            Hibernate&#25903;&#25345;&#37319;&#29992;dom4j&#20316;&#20026;&#25805;&#20316;XML&#26641;&#30340;API&#12290;&#20320;&#21487;&#20197;&#20889;&#19968;&#20123;&#26597;&#35810;&#20174;&#25968;&#25454;&#24211;&#20013;&#26816;&#32034;&#20986;
            dom4j&#26641;&#65292;&#38543;&#21518;&#20320;&#23545;&#36825;&#39063;&#26641;&#20570;&#30340;&#20219;&#20309;&#20462;&#25913;&#37117;&#23558;&#33258;&#21160;&#21516;&#27493;&#22238;&#25968;&#25454;&#24211;&#12290;&#20320;&#29978;&#33267;&#21487;&#20197;&#29992;dom4j&#35299;&#26512;
            &#19968;&#31687;XML&#25991;&#26723;&#65292;&#28982;&#21518;&#20351;&#29992;Hibernate&#30340;&#20219;&#19968;&#22522;&#26412;&#25805;&#20316;&#23558;&#23427;&#20889;&#20837;&#25968;&#25454;&#24211;&#65306;
            <tt class="literal">persist(), saveOrUpdate(), merge(), delete(), replicate()</tt> 
            (&#21512;&#24182;&#25805;&#20316;merge()&#30446;&#21069;&#36824;&#19981;&#25903;&#25345;)&#12290;
        </p><p>
            &#36825;&#19968;&#29305;&#24615;&#21487;&#20197;&#24212;&#29992;&#22312;&#24456;&#22810;&#22330;&#21512;&#65292;&#21253;&#25324;&#25968;&#25454;&#23548;&#20837;&#23548;&#20986;&#65292;&#36890;&#36807;JMS&#25110;SOAP&#20855;&#20307;&#21270;&#23454;&#20307;&#25968;&#25454;&#20197;&#21450;
            &#22522;&#20110;XSLT&#30340;&#25253;&#34920;&#12290;
        </p><p>
            &#19968;&#20010;&#21333;&#19968;&#30340;&#26144;&#23556;&#23601;&#21487;&#20197;&#23558;&#31867;&#30340;&#23646;&#24615;&#21644;XML&#25991;&#26723;&#30340;&#33410;&#28857;&#21516;&#26102;&#26144;&#23556;&#21040;&#25968;&#25454;&#24211;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;&#26144;&#23556;&#31867;&#65292;
            &#23427;&#20063;&#21487;&#20197;&#29992;&#26469;&#21482;&#26144;&#23556;XML&#25991;&#26723;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="xml-intro-mapping"></a>18.1.1.&nbsp;&#25351;&#23450;&#21516;&#26102;&#26144;&#23556;XML&#21644;&#31867;</h3></div></div><div></div></div><p>
                &#36825;&#26159;&#19968;&#20010;&#21516;&#26102;&#26144;&#23556;POJO&#21644;XML&#30340;&#20363;&#23376;&#65306;
            </p><pre class="programlisting">&lt;class name="Account" 
        table="ACCOUNTS" 
        node="account"&gt;
        
    &lt;id name="accountId" 
            column="ACCOUNT_ID" 
            node="@id"/&gt;
            
    &lt;many-to-one name="customer" 
            column="CUSTOMER_ID" 
            node="customer/@id" 
            embed-xml="false"/&gt;
            
    &lt;property name="balance" 
            column="BALANCE" 
            node="balance"/&gt;
            
    ...
    
&lt;/class&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="xml-onlyxml"></a>18.1.2.&nbsp;&#21482;&#23450;&#20041;XML&#26144;&#23556;</h3></div></div><div></div></div><p>
                &#36825;&#26159;&#19968;&#20010;&#19981;&#26144;&#23556;POJO&#30340;&#20363;&#23376;&#65306;
            </p><pre class="programlisting">&lt;class entity-name="Account" 
        table="ACCOUNTS" 
        node="account"&gt;
        
    &lt;id name="id" 
            column="ACCOUNT_ID" 
            node="@id" 
            type="string"/&gt;
            
    &lt;many-to-one name="customerId" 
            column="CUSTOMER_ID" 
            node="customer/@id" 
            embed-xml="false" 
            entity-name="Customer"/&gt;
            
    &lt;property name="balance" 
            column="BALANCE" 
            node="balance" 
            type="big_decimal"/&gt;
            
    ...
    
&lt;/class&gt;</pre><p>
                &#36825;&#20010;&#26144;&#23556;&#20351;&#24471;&#20320;&#26082;&#21487;&#20197;&#25226;&#25968;&#25454;&#20316;&#20026;&#19968;&#26869;dom4j&#26641;&#37027;&#26679;&#35775;&#38382;&#65292;&#21448;&#21487;&#20197;&#20316;&#20026;&#30001;&#23646;&#24615;&#38190;&#20540;&#23545;(java <tt class="literal">Map</tt>s)
                &#32452;&#25104;&#30340;&#22270;&#37027;&#26679;&#35775;&#38382;&#12290;&#23646;&#24615;&#21517;&#23383;&#32431;&#31929;&#26159;&#36923;&#36753;&#19978;&#30340;&#32467;&#26500;&#65292;&#20320;&#21487;&#20197;&#22312;HQL&#26597;&#35810;&#20013;&#24341;&#29992;&#23427;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xml-mapping"></a>18.2.&nbsp;XML&#26144;&#23556;&#20803;&#25968;&#25454;</h2></div></div><div></div></div><p>
            &#35768;&#22810;Hibernate&#26144;&#23556;&#20803;&#32032;&#20855;&#26377;<tt class="literal">node</tt>&#23646;&#24615;&#12290;&#36825;&#20351;&#20320;&#21487;&#20197;&#25351;&#23450;&#29992;&#26469;&#20445;&#23384;
            &#23646;&#24615;&#25110;&#23454;&#20307;&#25968;&#25454;&#30340;XML&#23646;&#24615;&#25110;&#20803;&#32032;&#12290;<tt class="literal">node</tt>&#23646;&#24615;&#24517;&#39035;&#26159;&#19979;&#21015;&#26684;&#24335;&#20043;&#19968;&#65306;
        </p><div class="itemizedlist"><ul type="disc" compact><li><p><tt class="literal">"element-name"</tt> - &#26144;&#23556;&#20026;&#25351;&#23450;&#30340;XML&#20803;&#32032;</p></li><li><p><tt class="literal">"@attribute-name"</tt> - &#26144;&#23556;&#20026;&#25351;&#23450;&#30340;XML&#23646;&#24615;</p></li><li><p><tt class="literal">"."</tt> - &#26144;&#23556;&#20026;&#29238;&#20803;&#32032;</p></li><li><p>
                <tt class="literal">"element-name/@attribute-name"</tt> - 
                &#26144;&#23556;&#20026;&#25351;&#23450;&#20803;&#32032;&#30340;&#25351;&#23450;&#23646;&#24615;
            </p></li></ul></div><p>
            &#23545;&#20110;&#38598;&#21512;&#21644;&#21333;&#20540;&#30340;&#20851;&#32852;&#65292;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;<tt class="literal">embed-xml</tt>&#23646;&#24615;&#21487;&#29992;&#12290;
            &#36825;&#20010;&#23646;&#24615;&#30340;&#32570;&#30465;&#20540;&#26159;&#30495;(<tt class="literal">embed-xml="true"</tt>)&#12290;&#22914;&#26524;<tt class="literal">embed-xml="true"</tt>&#65292;
            &#21017;&#23545;&#24212;&#20110;&#34987;&#20851;&#32852;&#23454;&#20307;&#25110;&#20540;&#31867;&#22411;&#30340;&#38598;&#21512;&#30340;XML&#26641;&#23558;&#30452;&#25509;&#23884;&#20837;&#25317;&#26377;&#36825;&#20123;&#20851;&#32852;&#30340;&#23454;&#20307;&#30340;XML&#26641;&#20013;&#12290;
            &#21542;&#21017;&#65292;&#22914;&#26524;<tt class="literal">embed-xml="false"</tt>&#65292;&#37027;&#20040;&#23545;&#20110;&#21333;&#20540;&#30340;&#20851;&#32852;&#65292;&#20165;&#34987;&#24341;&#29992;&#30340;&#23454;&#20307;&#30340;&#26631;&#35782;&#31526;&#20986;&#29616;&#22312;
            XML&#26641;&#20013;(&#34987;&#24341;&#29992;&#23454;&#20307;&#26412;&#36523;&#19981;&#20986;&#29616;)&#65292;&#32780;&#38598;&#21512;&#21017;&#26681;&#26412;&#19981;&#20986;&#29616;&#12290;
        </p><p>
            &#20320;&#24212;&#35813;&#23567;&#24515;&#65292;&#19981;&#35201;&#35753;&#22826;&#22810;&#20851;&#32852;&#30340;embed-xml&#23646;&#24615;&#20026;&#30495;(<tt class="literal">embed-xml="true"</tt>)&#65292;&#22240;&#20026;XML&#19981;&#33021;&#24456;&#22909;&#22320;&#22788;&#29702;
            &#24490;&#29615;&#24341;&#29992;!
        </p><pre class="programlisting">&lt;class name="Customer" 
        table="CUSTOMER" 
        node="customer"&gt;
        
    &lt;id name="id" 
            column="CUST_ID" 
            node="@id"/&gt;
            
    &lt;map name="accounts" 
            node="." 
            embed-xml="true"&gt;
        &lt;key column="CUSTOMER_ID" 
                not-null="true"/&gt;
        &lt;map-key column="SHORT_DESC" 
                node="@short-desc" 
                type="string"/&gt;
        &lt;one-to-many entity-name="Account"
                embed-xml="false" 
                node="account"/&gt;
    &lt;/map&gt;
    
    &lt;component name="name" 
            node="name"&gt;
        &lt;property name="firstName" 
                node="first-name"/&gt;
        &lt;property name="initial" 
                node="initial"/&gt;
        &lt;property name="lastName" 
                node="last-name"/&gt;
    &lt;/component&gt;
    
    ...
    
&lt;/class&gt;</pre><p>
            &#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20915;&#23450;&#23884;&#20837;&#24080;&#30446;&#21495;&#30721;(account id)&#30340;&#38598;&#21512;&#65292;&#20294;&#19981;&#23884;&#20837;&#23454;&#38469;&#30340;&#24080;&#30446;&#25968;&#25454;&#12290;&#19979;&#38754;&#30340;HQL&#26597;&#35810;&#65306;
        </p><pre class="programlisting">from Customer c left join fetch c.accounts where c.lastName like :lastName</pre><p>
            &#36820;&#22238;&#30340;&#25968;&#25454;&#38598;&#23558;&#26159;&#36825;&#26679;&#65306;
        </p><pre class="programlisting">&lt;customer id="123456789"&gt;
    &lt;account id="987632567" short-desc="Savings"/&gt;
    &lt;account id="985612323" short-desc="Credit Card"/&gt;
    &lt;name&gt;
        &lt;first-name&gt;Gavin&lt;/first-name&gt;
        &lt;initial&gt;A&lt;/initial&gt;
        &lt;last-name&gt;King&lt;/last-name&gt;
    &lt;/name&gt;
    ...
&lt;/customer&gt;</pre><p>
            &#22914;&#26524;&#20320;&#25226;&#19968;&#23545;&#22810;&#26144;&#23556;<tt class="literal">&lt;one-to-many&gt;</tt>&#30340;embed-xml&#23646;&#24615;&#32622;&#20026;&#30495;(<tt class="literal">embed-xml="true"</tt>)&#65292;
            &#21017;&#25968;&#25454;&#30475;&#19978;&#21435;&#23601;&#20687;&#36825;&#26679;&#65306;
        </p><pre class="programlisting">&lt;customer id="123456789"&gt;
    &lt;account id="987632567" short-desc="Savings"&gt;
        &lt;customer id="123456789"/&gt;
        &lt;balance&gt;100.29&lt;/balance&gt;
    &lt;/account&gt;
    &lt;account id="985612323" short-desc="Credit Card"&gt;
        &lt;customer id="123456789"/&gt;
        &lt;balance&gt;-2370.34&lt;/balance&gt;
    &lt;/account&gt;
    &lt;name&gt;
        &lt;first-name&gt;Gavin&lt;/first-name&gt;
        &lt;initial&gt;A&lt;/initial&gt;
        &lt;last-name&gt;King&lt;/last-name&gt;
    &lt;/name&gt;
    ...
&lt;/customer&gt;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xml-manipulation"></a>18.3.&nbsp;&#25805;&#20316;XML&#25968;&#25454;</h2></div></div><div></div></div><p>
            &#35753;&#25105;&#20204;&#26469;&#35835;&#20837;&#21644;&#26356;&#26032;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;XML&#25991;&#26723;&#12290;&#36890;&#36807;&#33719;&#21462;&#19968;&#20010;dom4j&#20250;&#35805;&#21487;&#20197;&#20570;&#21040;&#36825;&#19968;&#28857;&#65306;
        </p><pre class="programlisting">Document doc = ....;
       
Session session = factory.openSession();
Session dom4jSession = session.getSession(EntityMode.DOM4J);
Transaction tx = session.beginTransaction();

List results = dom4jSession
    .createQuery("from Customer c left join fetch c.accounts where c.lastName like :lastName")
    .list();
for ( int i=0; i&lt;results.size(); i++ ) {
    //add the customer data to the XML document
    Element customer = (Element) results.get(i);
    doc.add(customer);
}

tx.commit();
session.close();</pre><pre class="programlisting">Session session = factory.openSession();
Session dom4jSession = session.getSession(EntityMode.DOM4J);
Transaction tx = session.beginTransaction();

Element cust = (Element) dom4jSession.get("Customer", customerId);
for ( int i=0; i&lt;results.size(); i++ ) {
    Element customer = (Element) results.get(i);
    //change the customer name in the XML and database
    Element name = customer.element("name");
    name.element("first-name").setText(firstName);
    name.element("initial").setText(initial);
    name.element("last-name").setText(lastName);
}

tx.commit();
session.close();</pre><p>
            &#23558;&#36825;&#19968;&#29305;&#33394;&#19982;Hibernate&#30340;<tt class="literal">replicate()</tt>&#25805;&#20316;&#32467;&#21512;&#36215;&#26469;&#23545;&#20110;&#23454;&#29616;&#30340;&#22522;&#20110;XML&#30340;&#25968;&#25454;&#23548;&#20837;/&#23548;&#20986;&#23558;&#38750;&#24120;&#26377;&#29992;.
        </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="performance"></a>&#31532;&nbsp;19&nbsp;&#31456;&nbsp;&#25552;&#21319;&#24615;&#33021;
	</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="performance-fetching"></a>19.1.&nbsp;
			&#25235;&#21462;&#31574;&#30053;(Fetching strategies)
		</h2></div></div><div></div></div><p>
	
			<span class="emphasis"><em>&#25235;&#21462;&#31574;&#30053;&#65288;fetching strategy&#65289;</em></span> &#26159;&#25351;&#65306;&#24403;&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#22312;&#65288;Hibernate&#23454;&#20307;&#23545;&#35937;&#22270;&#30340;&#65289;&#20851;&#32852;&#20851;&#31995;&#38388;&#36827;&#34892;&#23548;&#33322;&#30340;&#26102;&#20505;&#65292;
			Hibernate&#22914;&#20309;&#33719;&#21462;&#20851;&#32852;&#23545;&#35937;&#30340;&#31574;&#30053;&#12290;&#25235;&#21462;&#31574;&#30053;&#21487;&#20197;&#22312;O/R&#26144;&#23556;&#30340;&#20803;&#25968;&#25454;&#20013;&#22768;&#26126;&#65292;&#20063;&#21487;&#20197;&#22312;&#29305;&#23450;&#30340;HQL
			&#25110;<tt class="literal">&#26465;&#20214;&#26597;&#35810;&#65288;Criteria Query&#65289;</tt>&#20013;&#37325;&#36733;&#22768;&#26126;&#12290;			
        </p><p>
			Hibernate3 &#23450;&#20041;&#20102;&#22914;&#19979;&#20960;&#31181;&#25235;&#21462;&#31574;&#30053;&#65306;
        </p><div class="itemizedlist"><ul type="disc"><li><p>
	
					<span class="emphasis"><em>&#36830;&#25509;&#25235;&#21462;&#65288;Join fetching&#65289;</em></span> - Hibernate&#36890;&#36807;
					&#22312;<tt class="literal">SELECT</tt>&#35821;&#21477;&#20351;&#29992;<tt class="literal">OUTER JOIN</tt>&#65288;&#22806;&#36830;&#25509;&#65289;&#26469;
					&#33719;&#24471;&#23545;&#35937;&#30340;&#20851;&#32852;&#23454;&#20363;&#25110;&#32773;&#20851;&#32852;&#38598;&#21512;&#12290;
                </p></li><li><p>
	
				<span class="emphasis"><em>&#26597;&#35810;&#25235;&#21462;&#65288;Select fetching&#65289;</em></span> - &#21478;&#22806;&#21457;&#36865;&#19968;&#26465; <tt class="literal">SELECT</tt>
                    &#35821;&#21477;&#25235;&#21462;&#24403;&#21069;&#23545;&#35937;&#30340;&#20851;&#32852;&#23454;&#20307;&#25110;&#38598;&#21512;&#12290;&#38500;&#38750;&#20320;&#26174;&#24335;&#30340;&#25351;&#23450;<tt class="literal">lazy="false"</tt>&#31105;&#27490;
				&#24310;&#36831;&#25235;&#21462;&#65288;lazy fetching&#65289;&#65292;&#21542;&#21017;&#21482;&#26377;&#24403;&#20320;&#30495;&#27491;&#35775;&#38382;&#20851;&#32852;&#20851;&#31995;&#30340;&#26102;&#20505;&#65292;&#25165;&#20250;&#25191;&#34892;&#31532;&#20108;&#26465;select&#35821;&#21477;&#12290;           
                </p></li><li><p>
				 <span class="emphasis"><em>&#23376;&#26597;&#35810;&#25235;&#21462;&#65288;Subselect fetching&#65289;</em></span> - &#21478;&#22806;&#21457;&#36865;&#19968;&#26465;<tt class="literal">SELECT</tt>
				 &#35821;&#21477;&#25235;&#21462;&#22312;&#21069;&#38754;&#26597;&#35810;&#21040;&#65288;&#25110;&#32773;&#25235;&#21462;&#21040;&#65289;&#30340;&#25152;&#26377;&#23454;&#20307;&#23545;&#35937;&#30340;&#20851;&#32852;&#38598;&#21512;&#12290;&#38500;&#38750;&#20320;&#26174;&#24335;&#30340;&#25351;&#23450;<tt class="literal">lazy="false"</tt>
				 &#31105;&#27490;&#24310;&#36831;&#25235;&#21462;&#65288;lazy fetching&#65289;&#65292;&#21542;&#21017;&#21482;&#26377;&#24403;&#20320;&#30495;&#27491;&#35775;&#38382;&#20851;&#32852;&#20851;&#31995;&#30340;&#26102;&#20505;&#65292;&#25165;&#20250;&#25191;&#34892;&#31532;&#20108;&#26465;select&#35821;&#21477;&#12290;
                </p></li><li><p>
    
	                <span class="emphasis"><em>&#25209;&#37327;&#25235;&#21462;&#65288;Batch fetching&#65289;</em></span> - &#23545;&#26597;&#35810;&#25235;&#21462;&#30340;&#20248;&#21270;&#26041;&#26696;&#65292;
				&#36890;&#36807;&#25351;&#23450;&#19968;&#20010;&#20027;&#38190;&#25110;&#22806;&#38190;&#21015;&#34920;&#65292;Hibernate&#20351;&#29992;&#21333;&#26465;<tt class="literal">SELECT</tt>&#35821;&#21477;&#33719;&#21462;&#19968;&#25209;&#23545;&#35937;&#23454;&#20363;&#25110;&#38598;&#21512;&#12290;
                </p></li></ul></div><p>
            Hibernate&#20250;&#21306;&#20998;&#19979;&#21015;&#21508;&#31181;&#24773;&#20917;&#65306;
        </p><div class="itemizedlist"><ul type="disc"><li><p>
                    <span class="emphasis"><em>Immediate fetching&#65292;&#31435;&#21363;&#25235;&#21462;</em></span> - &#24403;&#23487;&#20027;&#34987;&#21152;&#36733;&#26102;&#65292;&#20851;&#32852;&#12289;&#38598;&#21512;&#25110;&#23646;&#24615;&#34987;&#31435;&#21363;&#25235;&#21462;&#12290;
                </p></li><li><p>
                    <span class="emphasis"><em>Lazy collection fetching&#65292;&#24310;&#36831;&#38598;&#21512;&#25235;&#21462;</em></span>- &#30452;&#21040;&#24212;&#29992;&#31243;&#24207;&#23545;&#38598;&#21512;&#36827;&#34892;&#20102;&#19968;&#27425;&#25805;&#20316;&#26102;&#65292;&#38598;&#21512;&#25165;&#34987;&#25235;&#21462;&#12290;&#65288;&#23545;&#38598;&#21512;&#32780;&#35328;&#36825;&#26159;&#40664;&#35748;&#34892;&#20026;&#12290;&#65289;
                </p></li><li><p>
                    <span class="emphasis"><em>"Extra-lazy" collection fetching,"Extra-lazy"&#38598;&#21512;&#25235;&#21462;</em></span> -&#23545;&#38598;&#21512;&#31867;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#32780;&#35328;&#65292;&#37117;&#26159;&#30452;&#21040;&#38656;&#35201;&#26102;&#25165;&#21435;&#35775;&#38382;&#25968;&#25454;&#24211;&#12290;&#38500;&#38750;&#32477;&#23545;&#24517;&#35201;&#65292;Hibernate&#19981;&#20250;&#35797;&#22270;&#21435;&#25226;&#25972;&#20010;&#38598;&#21512;&#37117;&#25235;&#21462;&#21040;&#20869;&#23384;&#37324;&#26469;&#65288;&#36866;&#29992;&#20110;&#38750;&#24120;&#22823;&#30340;&#38598;&#21512;&#65289;&#12290;
                </p></li><li><p>
                    <span class="emphasis"><em>Proxy fetching&#65292;&#20195;&#29702;&#25235;&#21462;</em></span>  - &#23545;&#36820;&#22238;&#21333;&#20540;&#30340;&#20851;&#32852;&#32780;&#35328;&#65292;&#24403;&#20854;&#26576;&#20010;&#26041;&#27861;&#34987;&#35843;&#29992;&#65292;&#32780;&#38750;&#23545;&#20854;&#20851;&#38190;&#23383;&#36827;&#34892;get&#25805;&#20316;&#26102;&#25165;&#25235;&#21462;&#12290;
                </p></li><li><p>
                    <span class="emphasis"><em>"No-proxy" fetching,&#38750;&#20195;&#29702;&#25235;&#21462;</em></span> -  &#23545;&#36820;&#22238;&#21333;&#20540;&#30340;&#20851;&#32852;&#32780;&#35328;&#65292;&#24403;&#23454;&#20363;&#21464;&#37327;&#34987;&#35775;&#38382;&#30340;&#26102;&#20505;&#36827;&#34892;&#25235;&#21462;&#12290;&#19982;&#19978;&#38754;&#30340;&#20195;&#29702;&#25235;&#21462;&#30456;&#27604;&#65292;&#36825;&#31181;&#26041;&#27861;&#27809;&#26377;&#37027;&#20040;&#8220;&#24310;&#36831;&#8221;&#24471;&#21385;&#23475;(&#23601;&#31639;&#21482;&#35775;&#38382;&#26631;&#35782;&#31526;&#65292;&#20063;&#20250;&#23548;&#33268;&#20851;&#32852;&#25235;&#21462;)&#20294;&#26159;&#26356;&#21152;&#36879;&#26126;&#65292;&#22240;&#20026;&#23545;&#24212;&#29992;&#31243;&#24207;&#26469;&#35828;&#65292;&#19981;&#20877;&#30475;&#21040;proxy&#12290;&#36825;&#31181;&#26041;&#27861;&#38656;&#35201;&#22312;&#32534;&#35793;&#26399;&#38388;&#36827;&#34892;&#23383;&#33410;&#30721;&#22686;&#24378;&#25805;&#20316;&#65292;&#22240;&#27492;&#24456;&#23569;&#38656;&#35201;&#29992;&#21040;&#12290;
                </p></li><li><p>
                    <span class="emphasis"><em>Lazy attribute fetching&#65292;&#23646;&#24615;&#24310;&#36831;&#21152;&#36733;</em></span> - &#23545;&#23646;&#24615;&#25110;&#36820;&#22238;&#21333;&#20540;&#30340;&#20851;&#32852;&#32780;&#35328;&#65292;&#24403;&#20854;&#23454;&#20363;&#21464;&#37327;&#34987;&#35775;&#38382;&#30340;&#26102;&#20505;&#36827;&#34892;&#25235;&#21462;&#12290;&#38656;&#35201;&#32534;&#35793;&#26399;&#23383;&#33410;&#30721;&#24378;&#21270;&#65292;&#22240;&#27492;&#36825;&#19968;&#26041;&#27861;&#24456;&#23569;&#26159;&#24517;&#35201;&#30340;&#12290;
                </p></li></ul></div><p>
            &#36825;&#37324;&#26377;&#20004;&#20010;&#27491;&#20132;&#30340;&#27010;&#24565;&#65306;&#20851;&#32852;<span class="emphasis"><em>&#20309;&#26102;</em></span>&#34987;&#25235;&#21462;&#65292;&#20197;&#21450;&#34987;<span class="emphasis"><em>&#22914;&#20309;</em></span>&#25235;&#21462;&#65288;&#20250;&#37319;&#29992;&#20160;&#20040;&#26679;&#30340;SQL&#35821;&#21477;&#65289;&#12290;&#19981;&#35201;&#28151;&#28102;&#23427;&#20204;&#65281;&#25105;&#20204;&#20351;&#29992;<tt class="literal">&#25235;&#21462;</tt>&#26469;&#25913;&#21892;&#24615;&#33021;&#12290;&#25105;&#20204;&#20351;&#29992;<tt class="literal">&#24310;&#36831;</tt>&#26469;&#23450;&#20041;&#19968;&#20123;&#22865;&#32422;&#65292;&#23545;&#26576;&#29305;&#23450;&#31867;&#30340;&#26576;&#20010;&#33073;&#31649;&#30340;&#23454;&#20363;&#65292;&#30693;&#36947;&#26377;&#21738;&#20123;&#25968;&#25454;&#26159;&#21487;&#20197;&#20351;&#29992;&#30340;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-fetching-lazy"></a>19.1.1.&nbsp;&#25805;&#20316;&#24310;&#36831;&#21152;&#36733;&#30340;&#20851;&#32852;</h3></div></div><div></div></div><p>
                &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Hibernate 3&#23545;&#38598;&#21512;&#20351;&#29992;&#24310;&#36831;select&#25235;&#21462;&#65292;&#23545;&#36820;&#22238;&#21333;&#20540;&#30340;&#20851;&#32852;&#20351;&#29992;&#24310;&#36831;&#20195;&#29702;&#25235;&#21462;&#12290;&#23545;&#20960;&#20046;&#26159;&#25152;&#26377;&#30340;&#24212;&#29992;&#32780;&#35328;&#65292;&#20854;&#32477;&#22823;&#22810;&#25968;&#30340;&#20851;&#32852;&#65292;&#36825;&#31181;&#31574;&#30053;&#37117;&#26159;&#26377;&#25928;&#30340;&#12290;
            </p><p>
                <span class="emphasis"><em>&#27880;&#24847;:</em></span>&#20551;&#33509;&#20320;&#35774;&#32622;&#20102;<tt class="literal">hibernate.default_batch_fetch_size</tt>,Hibernate&#20250;&#23545;&#24310;&#36831;&#21152;&#36733;&#37319;&#21462;&#25209;&#37327;&#25235;&#21462;&#20248;&#21270;&#25514;&#26045;&#65288;&#36825;&#31181;&#20248;&#21270;&#20063;&#21487;&#33021;&#20250;&#22312;&#26356;&#32454;&#21270;&#30340;&#32423;&#21035;&#25171;&#24320;&#65289;&#12290;
            </p><p>
                &#28982;&#32780;&#65292;&#20320;&#24517;&#39035;&#20102;&#35299;&#24310;&#36831;&#25235;&#21462;&#24102;&#26469;&#30340;&#19968;&#20010;&#38382;&#39064;&#12290;&#22312;&#19968;&#20010;&#25171;&#24320;&#30340;Hibernate session&#19978;&#19979;&#25991;&#20043;&#22806;&#35843;&#29992;&#24310;&#36831;&#38598;&#21512;&#20250;&#23548;&#33268;&#19968;&#27425;&#24847;&#22806;&#12290;&#27604;&#22914;&#65306;
            </p><pre class="programlisting">s = sessions.openSession();
Transaction tx = s.beginTransaction();
            
User u = (User) s.createQuery("from User u where u.name=:userName")
	.setString("userName", userName).uniqueResult();
Map permissions = u.getPermissions();

tx.commit();
s.close();

Integer accessLevel = (Integer) permissions.get("accounts");  // Error!</pre><p>
		 &#22312;<tt class="literal">Session</tt>&#20851;&#38381;&#21518;&#65292;permessions&#38598;&#21512;&#23558;&#26159;&#26410;&#23454;&#20363;&#21270;&#30340;&#12289;&#19981;&#20877;&#21487;&#29992;&#65292;&#22240;&#27492;&#26080;&#27861;&#27491;&#24120;&#36733;&#20837;&#20854;&#29366;&#24577;&#12290;
            <span class="emphasis"><em>Hibernate&#23545;&#33073;&#31649;&#23545;&#35937;&#19981;&#25903;&#25345;&#24310;&#36831;&#23454;&#20363;&#21270;</em></span>. &#36825;&#37324;&#30340;&#20462;&#25913;&#26041;&#27861;&#26159;&#65306;&#23558;permissions&#35835;&#21462;&#25968;&#25454;&#30340;&#20195;&#30721;
			&#31227;&#21040;tx.commit()&#20043;&#21069;&#12290;
        </p><p>
			&#38500;&#27492;&#20043;&#22806;&#65292;&#36890;&#36807;&#23545;&#20851;&#32852;&#26144;&#23556;&#25351;&#23450;<tt class="literal">lazy="false"</tt>,&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992;&#38750;&#24310;&#36831;&#30340;&#38598;&#21512;&#25110;&#20851;&#32852;&#12290;&#20294;&#26159;&#65292;
			&#23545;&#32477;&#22823;&#37096;&#20998;&#38598;&#21512;&#26469;&#35828;&#65292;&#26356;&#25512;&#33616;&#20351;&#29992;&#24310;&#36831;&#26041;&#24335;&#25235;&#21462;&#25968;&#25454;&#12290;&#22914;&#26524;&#22312;&#20320;&#30340;&#23545;&#35937;&#27169;&#22411;&#20013;&#23450;&#20041;&#20102;&#22826;&#22810;&#30340;&#38750;&#24310;&#36831;&#20851;&#32852;&#65292;Hibernate&#26368;&#32456;&#20960;&#20046;&#38656;&#35201;&#22312;&#27599;&#20010;&#20107;&#21153;&#20013;&#36733;&#20837;&#25972;&#20010;&#25968;&#25454;&#24211;&#21040;&#20869;&#23384;&#20013;&#65281;
        </p><p>
         
		    &#20294;&#26159;&#65292;&#21478;&#19968;&#26041;&#38754;&#65292;&#22312;&#19968;&#20123;&#29305;&#27530;&#30340;&#20107;&#21153;&#20013;&#65292;&#25105;&#20204;&#20063;&#32463;&#24120;&#38656;&#35201;&#20351;&#29992;&#21040;&#36830;&#25509;&#25235;&#21462;&#65288;&#23427;&#26412;&#36523;&#19978;&#23601;&#26159;&#38750;&#24310;&#36831;&#30340;&#65289;&#65292;&#20197;&#20195;&#26367;&#26597;&#35810;&#25235;&#21462;&#12290;
			&#19979;&#38754;&#25105;&#20204;&#23558;&#20250;&#24456;&#24555;&#26126;&#30333;&#22914;&#20309;&#20855;&#20307;&#30340;&#23450;&#21046;Hibernate&#20013;&#30340;&#25235;&#21462;&#31574;&#30053;&#12290;&#22312;Hibernate3&#20013;&#65292;&#20855;&#20307;&#36873;&#25321;&#21738;&#31181;&#25235;&#21462;&#31574;&#30053;&#30340;&#26426;&#21046;&#26159;&#21644;&#36873;&#25321;
			&#21333;&#20540;&#20851;&#32852;&#25110;&#38598;&#21512;&#20851;&#32852;&#30456;&#19968;&#33268;&#30340;&#12290;
	    </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-fetching-custom"></a>19.1.2.&nbsp;
			
				&#35843;&#25972;&#25235;&#21462;&#31574;&#30053;&#65288;Tuning fetch strategies&#65289;
    		</h3></div></div><div></div></div><p>
			
				&#26597;&#35810;&#25235;&#21462;&#65288;&#40664;&#35748;&#30340;&#65289;&#22312;N+1&#26597;&#35810;&#30340;&#24773;&#20917;&#19979;&#26159;&#26497;&#20854;&#33030;&#24369;&#30340;&#65292;&#22240;&#27492;&#25105;&#20204;&#21487;&#33021;&#20250;&#35201;&#27714;&#22312;&#26144;&#23556;&#25991;&#26723;&#20013;&#23450;&#20041;&#20351;&#29992;&#36830;&#25509;&#25235;&#21462;&#65306;
			</p><pre class="programlisting">&lt;set name="permissions" 
            fetch="join"&gt;
    &lt;key column="userId"/&gt;
    &lt;one-to-many class="Permission"/&gt;
&lt;/set</pre><pre class="programlisting">&lt;many-to-one name="mother" class="Cat" fetch="join"/&gt;</pre><p>
			    &#22312;&#26144;&#23556;&#25991;&#26723;&#20013;&#23450;&#20041;&#30340;<tt class="literal">&#25235;&#21462;</tt>&#31574;&#30053;&#23558;&#20250;&#23545;&#20197;&#19979;&#21015;&#34920;&#26465;&#30446;&#20135;&#29983;&#24433;&#21709;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
               
			        &#36890;&#36807;<tt class="literal">get()</tt>&#25110;<tt class="literal">load()</tt>&#26041;&#27861;&#21462;&#24471;&#25968;&#25454;&#12290;
			    </p></li><li><p>
				    &#21482;&#26377;&#22312;&#20851;&#32852;&#20043;&#38388;&#36827;&#34892;&#23548;&#33322;&#26102;&#65292;&#25165;&#20250;&#38544;&#24335;&#30340;&#21462;&#24471;&#25968;&#25454;&#12290;
                </p></li><li><p>
					<tt class="literal">&#26465;&#20214;&#26597;&#35810;</tt>
                </p></li><li><p>
                    &#20351;&#29992;&#20102;<tt class="literal">subselect</tt>&#25235;&#21462;&#30340;HQL&#26597;&#35810;
                </p></li></ul></div><p>
                &#19981;&#31649;&#20320;&#20351;&#29992;&#21738;&#31181;&#25235;&#21462;&#31574;&#30053;&#65292;&#23450;&#20041;&#20026;&#38750;&#24310;&#36831;&#30340;&#31867;&#22270;&#20250;&#34987;&#20445;&#35777;&#19968;&#23450;&#35013;&#36733;&#20837;&#20869;&#23384;&#12290;&#27880;&#24847;&#36825;&#21487;&#33021;&#24847;&#21619;&#30528;&#22312;&#19968;&#26465;HQL&#26597;&#35810;&#21518;&#32039;&#36319;&#30528;&#19968;&#31995;&#21015;&#30340;&#26597;&#35810;&#12290;
            </p><p>
			    &#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#24182;&#19981;&#20351;&#29992;&#26144;&#23556;&#25991;&#26723;&#36827;&#34892;&#25235;&#21462;&#31574;&#30053;&#30340;&#23450;&#21046;&#12290;&#26356;&#22810;&#30340;&#26159;&#65292;&#20445;&#25345;&#20854;&#40664;&#35748;&#20540;&#65292;&#28982;&#21518;&#22312;&#29305;&#23450;&#30340;&#20107;&#21153;&#20013;&#65292;
				&#20351;&#29992;HQL&#30340;<tt class="literal">&#24038;&#36830;&#25509;&#25235;&#21462;&#65288;left join fetch&#65289;</tt> &#23545;&#20854;&#36827;&#34892;&#37325;&#36733;&#12290;&#36825;&#23558;&#36890;&#30693;
				Hibernate&#22312;&#31532;&#19968;&#27425;&#26597;&#35810;&#20013;&#20351;&#29992;&#22806;&#37096;&#20851;&#32852;&#65288;outer join&#65289;&#65292;&#30452;&#25509;&#24471;&#21040;&#20854;&#20851;&#32852;&#25968;&#25454;&#12290;
				&#22312;<tt class="literal">&#26465;&#20214;&#26597;&#35810;</tt> API&#20013;&#65292;&#24212;&#35813;&#35843;&#29992; <tt class="literal">setFetchMode(FetchMode.JOIN)</tt>&#35821;&#21477;&#12290;
            </p><p>
				&#20063;&#35768;&#20320;&#21916;&#27426;&#20165;&#20165;&#36890;&#36807;&#26465;&#20214;&#26597;&#35810;&#65292;&#23601;&#21487;&#20197;&#25913;&#21464;<tt class="literal">get()</tt> 
				&#25110; <tt class="literal">load()</tt>&#35821;&#21477;&#20013;&#30340;&#25968;&#25454;&#25235;&#21462;&#31574;&#30053;&#12290;&#20363;&#22914;&#65306;
            </p><pre class="programlisting">User user = (User) session.createCriteria(User.class)
            	.setFetchMode("permissions", FetchMode.JOIN)
            	.add( Restrictions.idEq(userId) )
            	.uniqueResult();</pre><p>
             
			    &#65288;&#36825;&#23601;&#26159;&#20854;&#20182;ORM&#35299;&#20915;&#26041;&#26696;&#30340;&#8220;&#25235;&#21462;&#35745;&#21010;(fetch plan)&#8221;&#22312;Hibernate&#20013;&#30340;&#31561;&#20215;&#29289;&#12290;&#65289;
            </p><p>
				&#25130;&#28982;&#19981;&#21516;&#30340;&#19968;&#31181;&#36991;&#20813;N+1&#27425;&#26597;&#35810;&#30340;&#26041;&#27861;&#26159;&#65292;&#20351;&#29992;&#20108;&#32423;&#32531;&#23384;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-fetching-proxies"></a>19.1.3.&nbsp;&#21333;&#31471;&#20851;&#32852;&#20195;&#29702;&#65288;Single-ended association proxies&#65289;
			</h3></div></div><div></div></div><p>
				&#22312;Hinerbate&#20013;&#65292;&#23545;&#38598;&#21512;&#30340;&#24310;&#36831;&#25235;&#21462;&#30340;&#37319;&#29992;&#20102;&#33258;&#24049;&#30340;&#23454;&#29616;&#26041;&#27861;&#12290;&#20294;&#26159;&#65292;&#23545;&#20110;&#21333;&#31471;&#20851;&#32852;&#30340;&#24310;&#36831;&#25235;&#21462;&#65292;&#21017;&#38656;&#35201;&#37319;&#29992;
				&#20854;&#20182;&#19981;&#21516;&#30340;&#26426;&#21046;&#12290;&#21333;&#31471;&#20851;&#32852;&#30340;&#30446;&#26631;&#23454;&#20307;&#24517;&#39035;&#20351;&#29992;&#20195;&#29702;&#65292;Hihernate&#22312;&#36816;&#34892;&#26399;&#20108;&#36827;&#21046;&#32423;&#65288;&#36890;&#36807;&#20248;&#24322;&#30340;CGLIB&#24211;&#65289;&#65292;
				&#20026;&#25345;&#20037;&#23545;&#35937;&#23454;&#29616;&#20102;&#24310;&#36831;&#36733;&#20837;&#20195;&#29702;&#12290;				
            </p><p>
				&#40664;&#35748;&#30340;&#65292;Hibernate3&#23558;&#20250;&#20026;&#25152;&#26377;&#30340;&#25345;&#20037;&#23545;&#35937;&#20135;&#29983;&#20195;&#29702;&#65288;&#22312;&#21551;&#21160;&#38454;&#27573;&#65289;&#65292;&#28982;&#21518;&#20351;&#29992;&#20182;&#20204;&#23454;&#29616;
				<tt class="literal">&#22810;&#23545;&#19968;&#65288;many-to-one&#65289;</tt>&#20851;&#32852;&#21644;<tt class="literal">&#19968;&#23545;&#19968;&#65288;one-to-one&#65289;</tt>
				&#20851;&#32852;&#30340;&#24310;&#36831;&#25235;&#21462;&#12290;
            </p><p>
				&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#65292;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">proxy</tt>&#23646;&#24615;&#20026;&#30446;&#26631;class&#22768;&#26126;&#19968;&#20010;&#25509;&#21475;&#20379;&#20195;&#29702;&#25509;&#21475;&#20351;&#29992;&#12290;
				&#40664;&#35748;&#30340;&#65292;Hibernate&#23558;&#20250;&#20351;&#29992;&#35813;&#31867;&#30340;&#19968;&#20010;&#23376;&#31867;&#12290;
				<span class="emphasis"><em>&#27880;&#24847;&#65306;&#34987;&#20195;&#29702;&#30340;&#31867;&#24517;&#39035;&#23454;&#29616;&#19968;&#20010;&#33267;&#23569;&#21253;&#21487;&#35265;&#30340;&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#65292;&#25105;&#20204;&#24314;&#35758;&#25152;&#26377;&#30340;&#25345;&#20037;&#31867;&#37117;&#24212;&#25317;&#26377;&#36825;&#26679;&#30340;&#26500;&#36896;&#20989;&#25968;</em></span>
            </p><p>
				&#22312;&#22914;&#27492;&#26041;&#24335;&#23450;&#20041;&#19968;&#20010;&#22810;&#24577;&#31867;&#30340;&#26102;&#20505;&#65292;&#26377;&#35768;&#22810;&#20540;&#24471;&#27880;&#24847;&#30340;&#24120;&#35265;&#24615;&#30340;&#38382;&#39064;&#65292;&#20363;&#22914;&#65306;
            </p><pre class="programlisting">&lt;class name="Cat" proxy="Cat"&gt;
    ......
    &lt;subclass name="DomesticCat"&gt;
        .....
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
				&#39318;&#20808;&#65292;<tt class="literal">Cat</tt>&#23454;&#20363;&#27704;&#36828;&#19981;&#21487;&#20197;&#34987;&#24378;&#21046;&#36716;&#25442;&#20026;<tt class="literal">DomesticCat</tt>,
				&#21363;&#20351;&#23427;&#26412;&#36523;&#23601;&#26159;<tt class="literal">DomesticCat</tt>&#23454;&#20363;&#12290;				
			 </p><pre class="programlisting">Cat cat = (Cat) session.load(Cat.class, id);  // instantiate a proxy (does not hit the db)
if ( cat.isDomesticCat() ) {                  // hit the db to initialize the proxy
    DomesticCat dc = (DomesticCat) cat;       // Error!
    ....
}</pre><p>
				&#20854;&#27425;&#65292;&#20195;&#29702;&#30340;&#8220;<tt class="literal">==</tt>&#8221;&#21487;&#33021;&#19981;&#20877;&#25104;&#31435;&#12290;
            </p><pre class="programlisting">Cat cat = (Cat) session.load(Cat.class, id);            // instantiate a Cat proxy
DomesticCat dc = 
        (DomesticCat) session.load(DomesticCat.class, id);  // acquire new DomesticCat proxy!
System.out.println(cat==dc);                            // false</pre><p>
				&#34429;&#28982;&#22914;&#27492;&#65292;&#20294;&#23454;&#38469;&#24773;&#20917;&#24182;&#27809;&#26377;&#30475;&#19978;&#21435;&#37027;&#20040;&#31967;&#31957;&#12290;&#34429;&#28982;&#25105;&#20204;&#29616;&#22312;&#26377;&#20004;&#20010;&#19981;&#21516;&#30340;&#24341;&#29992;&#65292;&#20998;&#21035;&#25351;&#21521;&#36825;&#20004;&#20010;&#19981;&#21516;&#30340;&#20195;&#29702;&#23545;&#35937;&#65292;
				&#20294;&#23454;&#38469;&#19978;&#65292;&#20854;&#24213;&#23618;&#24212;&#35813;&#26159;&#21516;&#19968;&#20010;&#23454;&#20363;&#23545;&#35937;&#65306; 
            </p><pre class="programlisting">cat.setWeight(11.0);  // hit the db to initialize the proxy
System.out.println( dc.getWeight() );  // 11.0</pre><p>
				&#31532;&#19977;&#65292;&#20320;&#19981;&#33021;&#23545;&#8220;final&#31867;&#8221;&#25110;&#8220;&#20855;&#26377;final&#26041;&#27861;&#30340;&#31867;&#8221;&#20351;&#29992;CGLIB&#20195;&#29702;&#12290; 				
            </p><p>
				&#26368;&#21518;&#65292;&#22914;&#26524;&#20320;&#30340;&#25345;&#20037;&#21270;&#23545;&#35937;&#22312;&#23454;&#20363;&#21270;&#26102;&#38656;&#35201;&#26576;&#20123;&#36164;&#28304;&#65288;&#20363;&#22914;&#65292;&#22312;&#23454;&#20363;&#21270;&#26041;&#27861;&#12289;&#40664;&#35748;&#26500;&#36896;&#26041;&#27861;&#20013;&#65289;&#65292;
				&#37027;&#20040;&#20195;&#29702;&#23545;&#35937;&#20063;&#21516;&#26679;&#38656;&#35201;&#20351;&#29992;&#36825;&#20123;&#36164;&#28304;&#12290;&#23454;&#38469;&#19978;&#65292;&#20195;&#29702;&#31867;&#26159;&#25345;&#20037;&#21270;&#31867;&#30340;&#23376;&#31867;&#12290; 				
            </p><p>
			
				&#36825;&#20123;&#38382;&#39064;&#37117;&#28304;&#20110;Java&#30340;&#21333;&#26681;&#32487;&#25215;&#27169;&#22411;&#30340;&#22825;&#29983;&#38480;&#21046;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#36991;&#20813;&#36825;&#20123;&#38382;&#39064;&#65292;&#37027;&#20040;&#20320;&#30340;&#27599;&#20010;&#25345;&#20037;&#21270;&#31867;&#24517;&#39035;&#23454;&#29616;&#19968;&#20010;&#25509;&#21475;&#65292;
				&#22312;&#27492;&#25509;&#21475;&#20013;&#24050;&#32463;&#22768;&#26126;&#20102;&#20854;&#19994;&#21153;&#26041;&#27861;&#12290;&#28982;&#21518;&#65292;&#20320;&#38656;&#35201;&#22312;&#26144;&#23556;&#25991;&#26723;&#20013;&#20877;&#25351;&#23450;&#36825;&#20123;&#25509;&#21475;&#12290;&#20363;&#22914;&#65306; 
            </p><pre class="programlisting">&lt;class name="CatImpl" proxy="Cat"&gt;
    ......
    &lt;subclass name="DomesticCatImpl" proxy="DomesticCat"&gt;
        .....
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
				
				&#36825;&#37324;<tt class="literal">CatImpl</tt>&#23454;&#29616;&#20102;<tt class="literal">Cat</tt>&#25509;&#21475;&#65292;
				<tt class="literal">DomesticCatImpl</tt>&#23454;&#29616;<tt class="literal">DomesticCat</tt>&#25509;&#21475;&#12290;
				&#22312;<tt class="literal">load()</tt>&#12289;<tt class="literal">iterate()</tt>&#26041;&#27861;&#20013;&#23601;&#20250;&#36820;&#22238;
				<tt class="literal">Cat</tt>&#21644;<tt class="literal">DomesticCat</tt>&#30340;&#20195;&#29702;&#23545;&#35937;&#12290;
				(&#27880;&#24847;<tt class="literal">list()</tt>&#24182;&#19981;&#20250;&#36820;&#22238;&#20195;&#29702;&#23545;&#35937;&#12290;)		
            </p><pre class="programlisting">Cat cat = (Cat) session.load(CatImpl.class, catid);
Iterator iter = session.iterate("from CatImpl as cat where cat.name='fritz'");
Cat fritz = (Cat) iter.next();</pre><p>
			
				&#36825;&#37324;&#65292;&#23545;&#35937;&#20043;&#38388;&#30340;&#20851;&#31995;&#20063;&#23558;&#34987;&#24310;&#36831;&#36733;&#20837;&#12290;&#36825;&#23601;&#24847;&#21619;&#30528;&#65292;&#20320;&#24212;&#35813;&#23558;&#23646;&#24615;&#22768;&#26126;&#20026;<tt class="literal">Cat</tt>&#65292;&#32780;&#19981;&#26159;<tt class="literal">CatImpl</tt>&#12290;
            </p><p>
		
				&#20294;&#26159;&#65292;&#22312;&#26377;&#20123;&#26041;&#27861;&#20013;&#26159;<span class="emphasis"><em>&#19981;&#38656;&#35201;</em></span>&#20351;&#29992;&#20195;&#29702;&#30340;&#12290;&#20363;&#22914;&#65306;
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
						<tt class="literal">equals()</tt>&#26041;&#27861;&#65292;&#22914;&#26524;&#25345;&#20037;&#31867;&#27809;&#26377;&#37325;&#36733;<tt class="literal">equals()</tt>&#26041;&#27861;&#12290;						
                    </p></li><li><p>
						<tt class="literal">hashCode()</tt>&#26041;&#27861;&#65292;&#22914;&#26524;&#25345;&#20037;&#31867;&#27809;&#26377;&#37325;&#36733;<tt class="literal">hashCode()</tt>&#26041;&#27861;&#12290;
                    </p></li><li><p>
						&#26631;&#24535;&#31526;&#30340;getter&#26041;&#27861;&#12290;
                    </p></li></ul></div><p>
				Hibernate&#23558;&#20250;&#35782;&#21035;&#20986;&#37027;&#20123;&#37325;&#36733;&#20102;<tt class="literal">equals()</tt>&#12289;&#25110;<tt class="literal">hashCode()</tt>&#26041;&#27861;&#30340;&#25345;&#20037;&#21270;&#31867;&#12290;
            </p><p>
                &#33509;&#36873;&#25321;<tt class="literal">lazy="no-proxy"</tt>&#32780;&#38750;&#40664;&#35748;&#30340;<tt class="literal">lazy="proxy"</tt>&#65292;&#25105;&#20204;&#21487;&#20197;&#36991;&#20813;&#31867;&#22411;&#36716;&#25442;&#24102;&#26469;&#30340;&#38382;&#39064;&#12290;&#28982;&#32780;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#38656;&#35201;&#32534;&#35793;&#26399;&#23383;&#33410;&#30721;&#22686;&#24378;&#65292;&#24182;&#19988;&#25152;&#26377;&#30340;&#25805;&#20316;&#37117;&#20250;&#23548;&#33268;&#31435;&#21051;&#36827;&#34892;&#20195;&#29702;&#21021;&#22987;&#21270;&#12290;
                
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-fetching-initialization"></a>19.1.4.&nbsp;&#23454;&#20363;&#21270;&#38598;&#21512;&#21644;&#20195;&#29702;&#65288;Initializing collections and proxies&#65289;
			</h3></div></div><div></div></div><p>
				&#22312;<tt class="literal">Session</tt>&#33539;&#22260;&#20043;&#22806;&#35775;&#38382;&#26410;&#21021;&#22987;&#21270;&#30340;&#38598;&#21512;&#25110;&#20195;&#29702;&#65292;Hibernate&#23558;&#20250;&#25243;&#20986;<tt class="literal">LazyInitializationException</tt>&#24322;&#24120;&#12290;
				&#20063;&#23601;&#26159;&#35828;&#65292;&#22312;&#20998;&#31163;&#29366;&#24577;&#19979;&#65292;&#35775;&#38382;&#19968;&#20010;&#23454;&#20307;&#25152;&#25317;&#26377;&#30340;&#38598;&#21512;&#65292;&#25110;&#32773;&#35775;&#38382;&#20854;&#25351;&#21521;&#20195;&#29702;&#30340;&#23646;&#24615;&#26102;&#65292;&#20250;&#24341;&#21457;&#27492;&#24322;&#24120;&#12290;
            </p><p>
			
				&#26377;&#26102;&#20505;&#25105;&#20204;&#38656;&#35201;&#20445;&#35777;&#26576;&#20010;&#20195;&#29702;&#25110;&#32773;&#38598;&#21512;&#22312;Session&#20851;&#38381;&#21069;&#23601;&#24050;&#32463;&#34987;&#21021;&#22987;&#21270;&#20102;&#12290;				
				&#24403;&#28982;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#24378;&#34892;&#35843;&#29992;<tt class="literal">cat.getSex()</tt>&#25110;&#32773;<tt class="literal">cat.getKittens().size()</tt>&#20043;&#31867;&#30340;&#26041;&#27861;&#26469;&#30830;&#20445;&#36825;&#19968;&#28857;&#12290;
				&#20294;&#26159;&#36825;&#26679;&#30340;&#31243;&#24207;&#20250;&#36896;&#25104;&#35835;&#32773;&#30340;&#30097;&#24785;&#65292;&#20063;&#19981;&#31526;&#21512;&#36890;&#24120;&#30340;&#20195;&#30721;&#35268;&#33539;&#12290;				
            </p><p>
			
				&#38745;&#24577;&#26041;&#27861;<tt class="literal">Hibernate.initialized()</tt>
				&#20026;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#25552;&#20379;&#20102;&#19968;&#20010;&#20415;&#25463;&#30340;&#36884;&#24452;&#26469;&#24310;&#36831;&#21152;&#36733;&#38598;&#21512;&#25110;&#20195;&#29702;&#12290;
				&#21482;&#35201;&#23427;&#30340;Session&#22788;&#20110;open&#29366;&#24577;&#65292;<tt class="literal">Hibernate.initialize(cat)</tt> &#23558;&#20250;&#20026;cat&#24378;&#21046;&#23545;&#20195;&#29702;&#23454;&#20363;&#21270;&#12290;
				&#21516;&#26679;&#65292;<tt class="literal">Hibernate.initialize( cat.getKittens() )</tt> &#23545;kittens&#30340;&#38598;&#21512;&#20855;&#26377;&#21516;&#26679;&#30340;&#21151;&#33021;&#12290; 
	        </p><p>
			
				&#36824;&#26377;&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;&#65292;&#23601;&#26159;&#20445;&#25345;<tt class="literal">Session</tt>&#19968;&#30452;&#22788;&#20110;open&#29366;&#24577;&#65292;&#30452;&#21040;&#25152;&#26377;&#38656;&#35201;&#30340;&#38598;&#21512;&#25110;&#20195;&#29702;&#37117;&#34987;&#36733;&#20837;&#12290;
				&#22312;&#26576;&#20123;&#24212;&#29992;&#26550;&#26500;&#20013;&#65292;&#29305;&#21035;&#26159;&#23545;&#20110;&#37027;&#20123;&#20351;&#29992;Hibernate&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;&#30340;&#20195;&#30721;&#65292;&#20197;&#21450;&#37027;&#20123;&#22312;&#19981;&#21516;&#24212;&#29992;&#23618;&#21644;&#19981;&#21516;&#29289;&#29702;&#36827;&#31243;&#20013;&#20351;&#29992;Hibernate&#30340;&#20195;&#30721;&#12290;
				&#22312;&#38598;&#21512;&#23454;&#20363;&#21270;&#26102;&#65292;&#22914;&#20309;&#20445;&#35777;<tt class="literal">Session</tt>&#22788;&#20110;open&#29366;&#24577;&#32463;&#24120;&#20250;&#26159;&#19968;&#20010;&#38382;&#39064;&#12290;&#26377;&#20004;&#31181;&#26041;&#27861;&#21487;&#20197;&#35299;&#20915;&#27492;&#38382;&#39064;&#65306;				
            </p><div class="itemizedlist"><ul type="disc"><li><p>
						&#22312;&#19968;&#20010;&#22522;&#20110;Web&#30340;&#24212;&#29992;&#20013;&#65292;&#21487;&#20197;&#21033;&#29992;servlet&#36807;&#28388;&#22120;&#65288;filter&#65289;&#65292;&#22312;&#29992;&#25143;&#35831;&#27714;&#65288;request&#65289;&#32467;&#26463;&#12289;&#39029;&#38754;&#29983;&#25104;
						&#32467;&#26463;&#26102;&#20851;&#38381;<tt class="literal">Session</tt>&#65288;&#36825;&#37324;&#20351;&#29992;&#20102;<span class="emphasis"><em>&#22312;&#23637;&#31034;&#23618;&#20445;&#25345;&#25171;&#24320;Session&#27169;&#24335;&#65288;Open Session in View&#65289;</em></span>&#65289;&#65292;
						&#24403;&#28982;&#65292;&#36825;&#23558;&#20381;&#36182;&#20110;&#24212;&#29992;&#26694;&#26550;&#20013;&#24322;&#24120;&#38656;&#35201;&#34987;&#27491;&#30830;&#30340;&#22788;&#29702;&#12290;&#22312;&#36820;&#22238;&#30028;&#38754;&#32473;&#29992;&#25143;&#20043;&#21069;&#65292;&#20035;&#33267;&#22312;&#29983;&#25104;&#30028;&#38754;&#36807;&#31243;&#20013;&#21457;&#29983;&#24322;&#24120;&#30340;&#24773;&#20917;&#19979;&#65292;
						&#27491;&#30830;&#20851;&#38381;<tt class="literal">Session</tt>&#21644;&#32467;&#26463;&#20107;&#21153;&#23558;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#65292;
                        &#35831;&#21442;&#35265;Hibernate wiki&#19978;&#30340;"Open Session in View"&#27169;&#24335;&#65292;&#20320;&#21487;&#20197;&#25214;&#21040;&#31034;&#20363;&#12290;
                    </p></li><li><p>
					
						&#22312;&#19968;&#20010;&#25317;&#26377;&#21333;&#29420;&#19994;&#21153;&#23618;&#30340;&#24212;&#29992;&#20013;&#65292;&#19994;&#21153;&#23618;&#24517;&#39035;&#22312;&#36820;&#22238;&#20043;&#21069;&#65292;&#20026;web&#23618;&#8220;&#20934;&#22791;&#8221;&#22909;&#20854;&#25152;&#38656;&#30340;&#25968;&#25454;&#38598;&#21512;&#12290;&#36825;&#23601;&#24847;&#21619;&#30528;
						&#19994;&#21153;&#23618;&#24212;&#35813;&#36733;&#20837;&#25152;&#26377;&#34920;&#29616;&#23618;/web&#23618;&#25152;&#38656;&#30340;&#25968;&#25454;&#65292;&#24182;&#23558;&#36825;&#20123;&#24050;&#23454;&#20363;&#21270;&#23436;&#27605;&#30340;&#25968;&#25454;&#36820;&#22238;&#12290;&#36890;&#24120;&#65292;&#24212;&#29992;&#31243;&#24207;&#24212;&#35813;
						&#20026;web&#23618;&#25152;&#38656;&#30340;&#27599;&#20010;&#38598;&#21512;&#35843;&#29992;<tt class="literal">Hibernate.initialize()</tt>&#65288;&#36825;&#20010;&#35843;&#29992;&#24517;&#39035;&#21457;&#29983;&#21681;session&#20851;&#38381;&#20043;&#21069;&#65289;&#65307;
						&#25110;&#32773;&#20351;&#29992;&#24102;&#26377;<tt class="literal">FETCH</tt>&#20174;&#21477;&#65292;&#25110;<tt class="literal">FetchMode.JOIN</tt>&#30340;Hibernate&#26597;&#35810;&#65292;
						&#20107;&#20808;&#21462;&#24471;&#25152;&#26377;&#30340;&#25968;&#25454;&#38598;&#21512;&#12290;&#22914;&#26524;&#20320;&#22312;&#24212;&#29992;&#20013;&#20351;&#29992;&#20102;<span class="emphasis"><em>Command</em></span>&#27169;&#24335;&#65292;&#20195;&#26367;<span class="emphasis"><em>Session Facade</em></span>						&#65292;
						&#37027;&#20040;&#36825;&#39033;&#20219;&#21153;&#23558;&#20250;&#21464;&#24471;&#31616;&#21333;&#30340;&#22810;&#12290;
                    </p></li><li><p>
						&#20320;&#20063;&#21487;&#20197;&#36890;&#36807;<tt class="literal">merge()</tt>&#25110;<tt class="literal">lock()</tt>&#26041;&#27861;&#65292;&#22312;&#35775;&#38382;&#26410;&#23454;&#20363;&#21270;&#30340;&#38598;&#21512;&#65288;&#25110;&#20195;&#29702;&#65289;&#20043;&#21069;&#65292;
						&#20026;&#20808;&#21069;&#36733;&#20837;&#30340;&#23545;&#35937;&#32465;&#23450;&#19968;&#20010;&#26032;&#30340;<tt class="literal">Session</tt>&#12290;
						&#26174;&#28982;&#65292;Hibernate&#23558;&#19981;&#20250;&#65292;&#20063;&#19981;<span class="emphasis"><em>&#24212;&#35813;</em></span>&#33258;&#21160;&#23436;&#25104;&#36825;&#20123;&#20219;&#21153;&#65292;&#22240;&#20026;&#36825;&#23558;&#24341;&#20837;&#19968;&#20010;&#29305;&#27530;&#30340;&#20107;&#21153;&#35821;&#20041;&#12290;
                    </p></li></ul></div><p>
				&#26377;&#26102;&#20505;&#65292;&#20320;&#24182;&#19981;&#38656;&#35201;&#23436;&#20840;&#23454;&#20363;&#21270;&#25972;&#20010;&#22823;&#30340;&#38598;&#21512;&#65292;&#20165;&#38656;&#35201;&#20102;&#35299;&#23427;&#30340;&#37096;&#20998;&#20449;&#24687;&#65288;&#20363;&#22914;&#20854;&#22823;&#23567;&#65289;&#12289;&#25110;&#32773;&#38598;&#21512;&#30340;&#37096;&#20998;&#20869;&#23481;&#12290;
            </p><p>
				
				&#20320;&#21487;&#20197;&#20351;&#29992;&#38598;&#21512;&#36807;&#28388;&#22120;&#24471;&#21040;&#20854;&#38598;&#21512;&#30340;&#22823;&#23567;&#65292;&#32780;&#19981;&#24517;&#23454;&#20363;&#21270;&#25972;&#20010;&#38598;&#21512;&#65306;
            </p><pre class="programlisting">( (Integer) s.createFilter( collection, "select count(*)" ).list().get(0) ).intValue()</pre><p>
				&#36825;&#37324;&#30340;<tt class="literal">createFilter()</tt>&#26041;&#27861;&#20063;&#21487;&#20197;&#34987;&#29992;&#26469;&#26377;&#25928;&#30340;&#25235;&#21462;&#38598;&#21512;&#30340;&#37096;&#20998;&#20869;&#23481;&#65292;&#32780;&#26080;&#38656;&#23454;&#20363;&#21270;&#25972;&#20010;&#38598;&#21512;&#65306;
            </p><pre class="programlisting">s.createFilter( lazyCollection, "").setFirstResult(0).setMaxResults(10).list();</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-fetching-batch"></a>19.1.5.&nbsp;&#20351;&#29992;&#25209;&#37327;&#25235;&#21462;&#65288;Using batch fetching&#65289;
			</h3></div></div><div></div></div><p>
				Hibernate&#21487;&#20197;&#20805;&#20998;&#26377;&#25928;&#30340;&#20351;&#29992;&#25209;&#37327;&#25235;&#21462;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#22914;&#26524;&#20165;&#19968;&#20010;&#35775;&#38382;&#20195;&#29702;&#65288;&#25110;&#38598;&#21512;&#65289;&#65292;&#37027;&#20040;Hibernate&#23558;&#19981;&#36733;&#20837;&#20854;&#20182;&#26410;&#23454;&#20363;&#21270;&#30340;&#20195;&#29702;&#12290;
				&#25209;&#37327;&#25235;&#21462;&#26159;&#24310;&#36831;&#26597;&#35810;&#25235;&#21462;&#30340;&#20248;&#21270;&#26041;&#26696;&#65292;&#20320;&#21487;&#20197;&#22312;&#20004;&#31181;&#25209;&#37327;&#25235;&#21462;&#26041;&#26696;&#20043;&#38388;&#36827;&#34892;&#36873;&#25321;&#65306;&#22312;&#31867;&#32423;&#21035;&#21644;&#38598;&#21512;&#32423;&#21035;&#12290;				
            </p><p>
				
				&#31867;/&#23454;&#20307;&#32423;&#21035;&#30340;&#25209;&#37327;&#25235;&#21462;&#24456;&#23481;&#26131;&#29702;&#35299;&#12290;&#20551;&#35774;&#20320;&#22312;&#36816;&#34892;&#26102;&#23558;&#38656;&#35201;&#38754;&#23545;&#19979;&#38754;&#30340;&#38382;&#39064;&#65306;&#20320;&#22312;&#19968;&#20010;<tt class="literal">Session</tt>&#20013;&#36733;&#20837;&#20102;25&#20010;
				<tt class="literal">Cat</tt>&#23454;&#20363;&#65292;&#27599;&#20010;<tt class="literal">Cat</tt>&#23454;&#20363;&#37117;&#25317;&#26377;&#19968;&#20010;&#24341;&#29992;&#25104;&#21592;<tt class="literal">owner</tt>&#65292;
				&#20854;&#25351;&#21521;<tt class="literal">Person</tt>&#65292;&#32780;<tt class="literal">Person</tt>&#31867;&#26159;&#20195;&#29702;&#65292;&#21516;&#26102;<tt class="literal">lazy="true"</tt>&#12290;
				&#22914;&#26524;&#20320;&#24517;&#39035;&#36941;&#21382;&#25972;&#20010;cats&#38598;&#21512;&#65292;&#23545;&#27599;&#20010;&#20803;&#32032;&#35843;&#29992;<tt class="literal">getOwner()</tt>&#26041;&#27861;&#65292;Hibernate&#23558;&#20250;&#40664;&#35748;&#30340;&#25191;&#34892;25&#27425;<tt class="literal">SELECT</tt>&#26597;&#35810;&#65292;
				&#24471;&#21040;&#20854;owner&#30340;&#20195;&#29702;&#23545;&#35937;&#12290;&#36825;&#26102;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#22312;&#26144;&#23556;&#25991;&#20214;&#30340;<tt class="literal">Person</tt>&#23646;&#24615;&#65292;&#26174;&#24335;&#22768;&#26126;<tt class="literal">batch-size</tt>&#65292;&#25913;&#21464;&#20854;&#34892;&#20026;&#65306;
				
            </p><pre class="programlisting">&lt;class name="Person" batch-size="10"&gt;...&lt;/class&gt;</pre><p>
				&#38543;&#20043;&#65292;Hibernate&#23558;&#21482;&#38656;&#35201;&#25191;&#34892;&#19977;&#27425;&#26597;&#35810;&#65292;&#20998;&#21035;&#20026;10&#12289;10&#12289;	5&#12290;
            </p><p>
				&#20320;&#20063;&#21487;&#20197;&#22312;&#38598;&#21512;&#32423;&#21035;&#23450;&#20041;&#25209;&#37327;&#25235;&#21462;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#27599;&#20010;<tt class="literal">Person</tt>&#37117;&#25317;&#26377;&#19968;&#20010;&#24310;&#36831;&#36733;&#20837;&#30340;<tt class="literal">Cats</tt>&#38598;&#21512;&#65292;
				&#29616;&#22312;&#65292;<tt class="literal">Sesssion</tt>&#20013;&#36733;&#20837;&#20102;10&#20010;person&#23545;&#35937;&#65292;&#36941;&#21382;person&#38598;&#21512;&#23558;&#20250;&#24341;&#36215;10&#27425;<tt class="literal">SELECT</tt>&#26597;&#35810;&#65292;
				&#27599;&#27425;&#26597;&#35810;&#37117;&#20250;&#35843;&#29992;<tt class="literal">getCats()</tt>&#26041;&#27861;&#12290;&#22914;&#26524;&#20320;&#22312;<tt class="literal">Person</tt>&#30340;&#26144;&#23556;&#23450;&#20041;&#37096;&#20998;&#65292;&#20801;&#35768;&#23545;<tt class="literal">cats</tt>&#25209;&#37327;&#25235;&#21462;,
				&#37027;&#20040;&#65292;Hibernate&#23558;&#21487;&#20197;&#39044;&#20808;&#25235;&#21462;&#25972;&#20010;&#38598;&#21512;&#12290;&#35831;&#30475;&#20363;&#23376;&#65306;
            </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;set name="cats" batch-size="3"&gt;
        ...
    &lt;/set&gt;
&lt;/class&gt;</pre><p>
				&#22914;&#26524;&#25972;&#20010;&#30340;<tt class="literal">batch-size</tt>&#26159;3&#65288;&#31508;&#35823;&#65311;&#65289;&#65292;&#37027;&#20040;Hibernate&#23558;&#20250;&#20998;&#22235;&#27425;&#25191;&#34892;<tt class="literal">SELECT</tt>&#26597;&#35810;&#65292;
				&#25353;&#29031;3&#12289;3&#12289;3&#12289;1&#30340;&#22823;&#23567;&#20998;&#21035;&#36733;&#20837;&#25968;&#25454;&#12290;&#36825;&#37324;&#30340;&#27599;&#27425;&#36733;&#20837;&#30340;&#25968;&#25454;&#37327;&#36824;&#20855;&#20307;&#20381;&#36182;&#20110;&#24403;&#21069;<tt class="literal">Session</tt>&#20013;&#26410;&#23454;&#20363;&#21270;&#38598;&#21512;&#30340;&#20010;&#25968;&#12290;
            </p><p>
				&#22914;&#26524;&#20320;&#30340;&#27169;&#22411;&#20013;&#26377;&#23884;&#22871;&#30340;&#26641;&#29366;&#32467;&#26500;&#65292;&#20363;&#22914;&#20856;&#22411;&#30340;&#24080;&#21333;&#65293;&#21407;&#26009;&#32467;&#26500;&#65288;bill-of-materials pattern&#65289;&#65292;&#38598;&#21512;&#30340;&#25209;&#37327;&#25235;&#21462;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;
				&#65288;&#23613;&#31649;&#22312;&#26356;&#22810;&#24773;&#20917;&#19979;&#23545;&#26641;&#36827;&#34892;&#35835;&#21462;&#26102;&#65292;<span class="emphasis"><em>&#23884;&#22871;&#38598;&#21512;&#65288;nested set&#65289;</em></span>&#25110;<span class="emphasis"><em>&#21407;&#26009;&#36335;&#24452;(materialized path)</em></span>&#65288;&times;&times;&#65289;
				 &#26159;&#26356;&#22909;&#30340;&#35299;&#20915;&#26041;&#27861;&#12290;&#65289;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-fetching-subselect"></a>19.1.6.&nbsp;&#20351;&#29992;&#23376;&#26597;&#35810;&#25235;&#21462;&#65288;Using subselect fetching&#65289;
			</h3></div></div><div></div></div><p>
                &#20551;&#33509;&#19968;&#20010;&#24310;&#36831;&#38598;&#21512;&#25110;&#21333;&#20540;&#20195;&#29702;&#38656;&#35201;&#25235;&#21462;&#65292;Hibernate&#20250;&#20351;&#29992;&#19968;&#20010;subselect&#37325;&#26032;&#36816;&#34892;&#21407;&#26469;&#30340;&#26597;&#35810;&#65292;&#19968;&#27425;&#24615;&#35835;&#20837;&#25152;&#26377;&#30340;&#23454;&#20363;&#12290;&#36825;&#21644;&#25209;&#37327;&#25235;&#21462;&#30340;&#23454;&#29616;&#26041;&#27861;&#26159;&#19968;&#26679;&#30340;&#65292;&#19981;&#20250;&#26377;&#30772;&#30862;&#30340;&#21152;&#36733;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-fetching-lazyproperties"></a>19.1.7.&nbsp;&#20351;&#29992;&#24310;&#36831;&#23646;&#24615;&#25235;&#21462;&#65288;Using lazy property fetching&#65289;	
			</h3></div></div><div></div></div><p>
				Hibernate3&#23545;&#21333;&#29420;&#30340;&#23646;&#24615;&#25903;&#25345;&#24310;&#36831;&#25235;&#21462;&#65292;&#36825;&#39033;&#20248;&#21270;&#25216;&#26415;&#20063;&#34987;&#31216;&#20026;<span class="emphasis"><em>&#32452;&#25235;&#21462;&#65288;fetch groups&#65289;</em></span>&#12290;
				&#35831;&#27880;&#24847;&#65292;&#35813;&#25216;&#26415;&#26356;&#22810;&#30340;&#23646;&#20110;&#24066;&#22330;&#29305;&#24615;&#12290;&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#65292;&#20248;&#21270;&#34892;&#35835;&#21462;&#27604;&#20248;&#21270;&#21015;&#35835;&#21462;&#26356;&#37325;&#35201;&#12290;&#20294;&#26159;&#65292;&#20165;&#36733;&#20837;&#31867;&#30340;&#37096;&#20998;&#23646;&#24615;&#22312;&#26576;&#20123;&#29305;&#23450;&#24773;&#20917;&#19979;&#20250;&#26377;&#29992;&#65292;&#20363;&#22914;&#22312;&#21407;&#26377;&#34920;&#20013;&#25317;&#26377;&#20960;&#30334;&#21015;&#25968;&#25454;&#12289;&#25968;&#25454;&#27169;&#22411;&#26080;&#27861;&#25913;&#21160;&#30340;&#24773;&#20917;&#19979;&#12290;
            </p><p>
				
				&#21487;&#20197;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#23545;&#29305;&#23450;&#30340;&#23646;&#24615;&#35774;&#32622;<tt class="literal">lazy</tt>&#65292;&#23450;&#20041;&#35813;&#23646;&#24615;&#20026;&#24310;&#36831;&#36733;&#20837;&#12290;
            </p><pre class="programlisting">&lt;class name="Document"&gt;
       &lt;id name="id"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="name" not-null="true" length="50"/&gt;
    &lt;property name="summary" not-null="true" length="200" lazy="true"/&gt;
    &lt;property name="text" not-null="true" length="2000" lazy="true"/&gt;
&lt;/class&gt;</pre><p>
				
				&#23646;&#24615;&#30340;&#24310;&#36831;&#36733;&#20837;&#35201;&#27714;&#22312;&#20854;&#20195;&#30721;&#26500;&#24314;&#26102;&#21152;&#20837;&#20108;&#36827;&#21046;&#25351;&#31034;&#25351;&#20196;&#65288;bytecode instrumentation&#65289;&#65292;&#22914;&#26524;&#20320;&#30340;&#25345;&#20037;&#31867;&#20195;&#30721;&#20013;&#26410;&#21547;&#26377;&#36825;&#20123;&#25351;&#20196;&#65292;
				Hibernate&#23558;&#20250;&#24573;&#30053;&#36825;&#20123;&#23646;&#24615;&#30340;&#24310;&#36831;&#35774;&#32622;&#65292;&#20173;&#28982;&#23558;&#20854;&#30452;&#25509;&#36733;&#20837;&#12290;
            </p><p>
				&#20320;&#21487;&#20197;&#22312;Ant&#30340;Task&#20013;&#65292;&#36827;&#34892;&#22914;&#19979;&#23450;&#20041;&#65292;&#23545;&#25345;&#20037;&#31867;&#20195;&#30721;&#21152;&#20837;&#8220;&#20108;&#36827;&#21046;&#25351;&#20196;&#12290;&#8221;
            </p><pre class="programlisting">&lt;target name="instrument" depends="compile"&gt;
    &lt;taskdef name="instrument" classname="org.hibernate.tool.instrument.InstrumentTask"&gt;
        &lt;classpath path="${jar.path}"/&gt;
        &lt;classpath path="${classes.dir}"/&gt;
        &lt;classpath refid="lib.class.path"/&gt;
    &lt;/taskdef&gt;

    &lt;instrument verbose="true"&gt;
        &lt;fileset dir="${testclasses.dir}/org/hibernate/auction/model"&gt;
            &lt;include name="*.class"/&gt;
        &lt;/fileset&gt;
    &lt;/instrument&gt;
&lt;/target&gt;</pre><p>
				
				&#36824;&#26377;&#19968;&#31181;&#21487;&#20197;&#20248;&#21270;&#30340;&#26041;&#27861;&#65292;&#23427;&#20351;&#29992;HQL&#25110;&#26465;&#20214;&#26597;&#35810;&#30340;&#25237;&#24433;&#65288;projection&#65289;&#29305;&#24615;&#65292;&#21487;&#20197;&#36991;&#20813;&#35835;&#21462;&#38750;&#24517;&#35201;&#30340;&#21015;&#65292;
				&#36825;&#19968;&#28857;&#33267;&#23569;&#23545;&#21482;&#35835;&#20107;&#21153;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;&#23427;&#26080;&#38656;&#22312;&#20195;&#30721;&#26500;&#24314;&#26102;&#8220;&#20108;&#36827;&#21046;&#25351;&#20196;&#8221;&#22788;&#29702;&#65292;&#22240;&#27492;&#26159;&#19968;&#20010;&#26356;&#21152;&#20540;&#24471;&#36873;&#25321;&#30340;&#35299;&#20915;&#26041;&#27861;&#12290;				
            </p><p>
				&#26377;&#26102;&#20320;&#38656;&#35201;&#22312;HQL&#20013;&#36890;&#36807;<tt class="literal">&#25235;&#21462;&#25152;&#26377;&#23646;&#24615;</tt>&#65292;&#24378;&#34892;&#25235;&#21462;&#25152;&#26377;&#20869;&#23481;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="performance-cache"></a>19.2.&nbsp;&#20108;&#32423;&#32531;&#23384;&#65288;The Second Level Cache&#65289;
		</h2></div></div><div></div></div><p>
			Hibernate&#30340;<tt class="literal">Session</tt>&#22312;&#20107;&#21153;&#32423;&#21035;&#36827;&#34892;&#25345;&#20037;&#21270;&#25968;&#25454;&#30340;&#32531;&#23384;&#25805;&#20316;&#12290;
   		    &#24403;&#28982;&#65292;&#20063;&#26377;&#21487;&#33021;&#20998;&#21035;&#20026;&#27599;&#20010;&#31867;&#65288;&#25110;&#38598;&#21512;)&#65292;&#37197;&#32622;&#38598;&#32676;&#12289;&#25110;JVM&#32423;&#21035;(<tt class="literal">SessionFactory&#32423;&#21035;</tt>)&#30340;&#32531;&#23384;&#12290;
			&#20320;&#29978;&#33267;&#21487;&#20197;&#20026;&#20043;&#25554;&#20837;&#19968;&#20010;&#38598;&#32676;&#30340;&#32531;&#23384;&#12290;&#27880;&#24847;&#65292;&#32531;&#23384;&#27704;&#36828;&#19981;&#30693;&#36947;&#20854;&#20182;&#24212;&#29992;&#31243;&#24207;&#23545;&#25345;&#20037;&#21270;&#20179;&#24211;&#65288;&#25968;&#25454;&#24211;&#65289;&#21487;&#33021;&#36827;&#34892;&#30340;&#20462;&#25913;
			&#65288;&#21363;&#20351;&#21487;&#20197;&#23558;&#32531;&#23384;&#25968;&#25454;&#35774;&#23450;&#20026;&#23450;&#26399;&#22833;&#25928;&#65289;&#12290; 
        </p><p>
			&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Hibernate&#20351;&#29992;EHCache&#36827;&#34892;JVM&#32423;&#21035;&#30340;&#32531;&#23384;&#65288;&#30446;&#21069;&#65292;Hibernate&#24050;&#32463;&#24223;&#24323;&#20102;&#23545;JCS&#30340;&#25903;&#25345;&#65292;&#26410;&#26469;&#29256;&#26412;&#20013;&#23558;&#20250;&#21435;&#25481;&#23427;&#65289;&#12290;
			&#20320;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">hibernate.cache.provider_class</tt>&#23646;&#24615;&#65292;&#25351;&#23450;&#20854;&#20182;&#30340;&#32531;&#23384;&#31574;&#30053;&#65292;
			&#35813;&#32531;&#23384;&#31574;&#30053;&#24517;&#39035;&#23454;&#29616;<tt class="literal">org.hibernate.cache.CacheProvider</tt>&#25509;&#21475;&#12290;
		</p><div class="table"><a name="cacheproviders"></a><p class="title"><b>&#34920;&nbsp;19.1.&nbsp;
				&#32531;&#23384;&#31574;&#30053;&#25552;&#20379;&#21830;&#65288;Cache Providers&#65289;
			</b></p><table summary="&#xA;				&#32531;&#23384;&#31574;&#30053;&#25552;&#20379;&#21830;&#65288;Cache Providers&#65289;&#xA;			" border="1"><colgroup><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Cache</th><th align="left">Provider class</th><th align="left">Type</th><th align="left">Cluster Safe</th><th align="left">Query Cache Supported</th></tr></thead><tbody><tr><td align="left">Hashtable (not intended for production use)</td><td align="left"><tt class="literal">org.hibernate.cache.HashtableCacheProvider</tt></td><td align="left">memory</td><td align="left">&nbsp;</td><td align="left">yes</td></tr><tr><td align="left">EHCache</td><td align="left"><tt class="literal">org.hibernate.cache.EhCacheProvider</tt></td><td align="left">memory, disk</td><td align="left">&nbsp;</td><td align="left">yes</td></tr><tr><td align="left">OSCache</td><td align="left"><tt class="literal">org.hibernate.cache.OSCacheProvider</tt></td><td align="left">memory, disk</td><td align="left">&nbsp;</td><td align="left">yes</td></tr><tr><td align="left">SwarmCache</td><td align="left"><tt class="literal">org.hibernate.cache.SwarmCacheProvider</tt></td><td align="left">clustered (ip multicast)</td><td align="left">yes (clustered invalidation)</td><td align="left">&nbsp;</td></tr><tr><td align="left">JBoss TreeCache</td><td align="left"><tt class="literal">org.hibernate.cache.TreeCacheProvider</tt></td><td align="left">clustered (ip multicast), transactional</td><td align="left">yes (replication)</td><td align="left">yes (clock sync req.)</td></tr></tbody></table></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-cache-mapping"></a>19.2.1.&nbsp;&#32531;&#23384;&#26144;&#23556;&#65288;Cache mappings&#65289;
			</h3></div></div><div></div></div><p>
				&#31867;&#25110;&#32773;&#38598;&#21512;&#26144;&#23556;&#30340;&#8220;<tt class="literal">&lt;cache&gt;</tt>&#20803;&#32032;&#8221;&#21487;&#20197;&#26377;&#19979;&#21015;&#24418;&#24335;&#65306; 
            </p><div class="programlistingco"><pre class="programlisting">&lt;cache 
    usage="transactional|read-write|nonstrict-read-write|read-only"  <span class="co">(1)</span>
    region="RegionName"                                              <span class="co">(2)</span>
    include="all|non-lazy"                                           <span class="co">(3)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
						   
						    <tt class="literal">usage</tt>(&#24517;&#39035;)&#35828;&#26126;&#20102;&#32531;&#23384;&#30340;&#31574;&#30053;:
                            <tt class="literal">transactional</tt>&#12289;
                            <tt class="literal">read-write</tt>&#12289;
                            <tt class="literal">nonstrict-read-write</tt>&#25110; 
                            <tt class="literal">read-only</tt>&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">region</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026;&#31867;&#25110;&#32773;&#38598;&#21512;&#30340;&#21517;&#23383;(class or
                            collection role name)) &#25351;&#23450;&#31532;&#20108;&#32423;&#32531;&#23384;&#30340;&#21306;&#22495;&#21517;(name of the second level cache 
                            region)
                            
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">include</tt> (&#21487;&#36873;,&#40664;&#35748;&#20026; <tt class="literal">all</tt>) 
                            <tt class="literal">non-lazy</tt> &#24403;&#23646;&#24615;&#32423;&#24310;&#36831;&#25235;&#21462;&#25171;&#24320;&#26102;, &#26631;&#35760;&#20026;<tt class="literal">lazy="true"</tt>&#30340;&#23454;&#20307;&#30340;&#23646;&#24615;&#21487;&#33021;&#26080;&#27861;&#34987;&#32531;&#23384;
                        </p></td></tr></table></div></div><p>
				&#21478;&#22806;(&#39318;&#36873;?), &#20320;&#21487;&#20197;&#22312;hibernate.cfg.xml&#20013;&#25351;&#23450;<tt class="literal">&lt;class-cache&gt;</tt>&#21644;
				<tt class="literal">&lt;collection-cache&gt;</tt> &#20803;&#32032;&#12290; 				
            </p><p>
                
				&#36825;&#37324;&#30340;<tt class="literal">usage</tt> &#23646;&#24615;&#25351;&#26126;&#20102;<span class="emphasis"><em>&#32531;&#23384;&#24182;&#21457;&#31574;&#30053;&#65288;cache concurrency strategy&#65289;</em></span>&#12290;
			</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-cache-readonly"></a>19.2.2.&nbsp;&#31574;&#30053;&#65306;&#21482;&#35835;&#32531;&#23384;&#65288;Strategy: read only&#65289;
			</h3></div></div><div></div></div><p>
				&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#21482;&#38656;&#35835;&#21462;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#30340;&#23454;&#20363;&#65292;&#32780;&#26080;&#38656;&#23545;&#20854;&#20462;&#25913;&#65292;
				&#37027;&#20040;&#23601;&#21487;&#20197;&#23545;&#20854;&#36827;&#34892;<tt class="literal">&#21482;&#35835;</tt> &#32531;&#23384;&#12290;&#36825;&#26159;&#26368;&#31616;&#21333;&#65292;&#20063;&#26159;&#23454;&#29992;&#24615;&#26368;&#22909;&#30340;&#26041;&#27861;&#12290;&#29978;&#33267;&#22312;&#38598;&#32676;&#20013;&#65292;&#23427;&#20063;&#33021;&#23436;&#32654;&#22320;&#36816;&#20316;&#12290; 
            </p><pre class="programlisting">&lt;class name="eg.Immutable" mutable="false"&gt;
    &lt;cache usage="read-only"/&gt;
    ....
&lt;/class&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-cache-readwrite"></a>19.2.3.&nbsp;
				&#31574;&#30053;:&#35835;/&#20889;&#32531;&#23384;&#65288;Strategy: read/write&#65289;
			</h3></div></div><div></div></div><p>
				
				&#22914;&#26524;&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#26356;&#26032;&#25968;&#25454;&#65292;&#37027;&#20040;&#20351;&#29992;<tt class="literal">&#35835;/&#20889;&#32531;&#23384;</tt> &#27604;&#36739;&#21512;&#36866;&#12290;
				&#22914;&#26524;&#24212;&#29992;&#31243;&#24207;&#35201;&#27714;&#8220;&#24207;&#21015;&#21270;&#20107;&#21153;&#8221;&#30340;&#38548;&#31163;&#32423;&#21035;&#65288;serializable transaction isolation level&#65289;&#65292;&#37027;&#20040;&#23601;&#20915;&#19981;&#33021;&#20351;&#29992;&#36825;&#31181;&#32531;&#23384;&#31574;&#30053;&#12290;
				&#22914;&#26524;&#22312;JTA&#29615;&#22659;&#20013;&#20351;&#29992;&#32531;&#23384;&#65292;&#20320;&#24517;&#39035;&#25351;&#23450;<tt class="literal">hibernate.transaction.manager_lookup_class</tt>&#23646;&#24615;&#30340;&#20540;&#65292;
				&#36890;&#36807;&#23427;&#65292;Hibernate&#25165;&#33021;&#30693;&#36947;&#35813;&#24212;&#29992;&#31243;&#24207;&#20013;JTA&#30340;<tt class="literal">TransactionManager</tt>&#30340;&#20855;&#20307;&#31574;&#30053;&#12290;				
				&#22312;&#20854;&#23427;&#29615;&#22659;&#20013;&#65292;&#20320;&#24517;&#39035;&#20445;&#35777;&#22312;<tt class="literal">Session.close()</tt>&#12289;&#25110;<tt class="literal">Session.disconnect()</tt>&#35843;&#29992;&#21069;&#65292;
				&#25972;&#20010;&#20107;&#21153;&#24050;&#32463;&#32467;&#26463;&#12290; &#22914;&#26524;&#20320;&#24819;&#22312;&#38598;&#32676;&#29615;&#22659;&#20013;&#20351;&#29992;&#27492;&#31574;&#30053;&#65292;&#20320;&#24517;&#39035;&#20445;&#35777;&#24213;&#23618;&#30340;&#32531;&#23384;&#23454;&#29616;&#25903;&#25345;&#38145;&#23450;(locking)&#12290;Hibernate&#20869;&#32622;&#30340;&#32531;&#23384;&#31574;&#30053;&#24182;&#19981;&#25903;&#25345;&#38145;&#23450;&#21151;&#33021;&#12290; 
            </p><pre class="programlisting">&lt;class name="eg.Cat" .... &gt;
    &lt;cache usage="read-write"/&gt;
    ....
    &lt;set name="kittens" ... &gt;
        &lt;cache usage="read-write"/&gt;
        ....
    &lt;/set&gt;
&lt;/class&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-cache-nonstrict"></a>19.2.4.&nbsp;
				&#31574;&#30053;:&#38750;&#20005;&#26684;&#35835;/&#20889;&#32531;&#23384;&#65288;Strategy: nonstrict read/write&#65289;				
			</h3></div></div><div></div></div><p>
				
				&#22914;&#26524;&#24212;&#29992;&#31243;&#24207;&#21482;&#20598;&#23572;&#38656;&#35201;&#26356;&#26032;&#25968;&#25454;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#20004;&#20010;&#20107;&#21153;&#21516;&#26102;&#26356;&#26032;&#21516;&#19968;&#35760;&#24405;&#30340;&#24773;&#20917;&#24456;&#19981;&#24120;&#35265;&#65289;&#65292;&#20063;&#19981;&#38656;&#35201;&#21313;&#20998;&#20005;&#26684;&#30340;&#20107;&#21153;&#38548;&#31163;&#65292;
				&#37027;&#20040;&#27604;&#36739;&#36866;&#21512;&#20351;&#29992;<tt class="literal">&#38750;&#20005;&#26684;&#35835;/&#20889;&#32531;&#23384;</tt>&#31574;&#30053;&#12290;&#22914;&#26524;&#22312;JTA&#29615;&#22659;&#20013;&#20351;&#29992;&#35813;&#31574;&#30053;&#65292;
				&#20320;&#24517;&#39035;&#20026;&#20854;&#25351;&#23450;<tt class="literal">hibernate.transaction.manager_lookup_class</tt>&#23646;&#24615;&#30340;&#20540;&#65292;
				&#22312;&#20854;&#23427;&#29615;&#22659;&#20013;&#65292;&#20320;&#24517;&#39035;&#20445;&#35777;&#22312;<tt class="literal">Session.close()</tt>&#12289;&#25110;<tt class="literal">Session.disconnect()</tt>&#35843;&#29992;&#21069;&#65292;
				&#25972;&#20010;&#20107;&#21153;&#24050;&#32463;&#32467;&#26463;&#12290;				
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-cache-transactional"></a>19.2.5.&nbsp;
				
				&#31574;&#30053;:&#20107;&#21153;&#32531;&#23384;&#65288;transactional&#65289;				
			</h3></div></div><div></div></div><p>
				Hibernate&#30340;<tt class="literal">&#20107;&#21153;&#32531;&#23384;</tt>&#31574;&#30053;&#25552;&#20379;&#20102;&#20840;&#20107;&#21153;&#30340;&#32531;&#23384;&#25903;&#25345;&#65292;
				&#20363;&#22914;&#23545;JBoss TreeCache&#30340;&#25903;&#25345;&#12290;&#36825;&#26679;&#30340;&#32531;&#23384;&#21482;&#33021;&#29992;&#20110;JTA&#29615;&#22659;&#20013;&#65292;&#20320;&#24517;&#39035;&#25351;&#23450;
			    &#20026;&#20854;<tt class="literal">hibernate.transaction.manager_lookup_class</tt>&#23646;&#24615;&#12290; 				
            </p></div><p>
			&#27809;&#26377;&#19968;&#31181;&#32531;&#23384;&#25552;&#20379;&#21830;&#33021;&#22815;&#25903;&#25345;&#19978;&#21015;&#30340;&#25152;&#26377;&#32531;&#23384;&#24182;&#21457;&#31574;&#30053;&#12290;&#19979;&#34920;&#20013;&#21015;&#20986;&#20102;&#21508;&#31181;&#25552;&#20379;&#22120;&#12289;&#21450;&#20854;&#21508;&#33258;&#36866;&#29992;&#30340;&#24182;&#21457;&#31574;&#30053;&#12290; 			
        </p><div class="table"><a name="d0e14570"></a><p class="title"><b>&#34920;&nbsp;19.2.&nbsp;
			&#21508;&#31181;&#32531;&#23384;&#25552;&#20379;&#21830;&#23545;&#32531;&#23384;&#24182;&#21457;&#31574;&#30053;&#30340;&#25903;&#25345;&#24773;&#20917;&#65288;Cache Concurrency Strategy Support&#65289;
			</b></p><table summary="&#xA;			&#21508;&#31181;&#32531;&#23384;&#25552;&#20379;&#21830;&#23545;&#32531;&#23384;&#24182;&#21457;&#31574;&#30053;&#30340;&#25903;&#25345;&#24773;&#20917;&#65288;Cache Concurrency Strategy Support&#65289;&#xA;			" border="1"><colgroup><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Cache</th><th align="left">read-only</th><th align="left">nonstrict-read-write</th><th align="left">read-write</th><th align="left">transactional</th></tr></thead><tbody><tr><td align="left">Hashtable (not intended for production use)</td><td align="left">yes</td><td align="left">yes</td><td align="left">yes</td><td align="left">&nbsp;</td></tr><tr><td align="left">EHCache</td><td align="left">yes</td><td align="left">yes</td><td align="left">yes</td><td align="left">&nbsp;</td></tr><tr><td align="left">OSCache</td><td align="left">yes</td><td align="left">yes</td><td align="left">yes</td><td align="left">&nbsp;</td></tr><tr><td align="left">SwarmCache</td><td align="left">yes</td><td align="left">yes</td><td align="left">&nbsp;</td><td align="left">&nbsp;</td></tr><tr><td align="left">JBoss TreeCache</td><td align="left">yes</td><td align="left">&nbsp;</td><td align="left">&nbsp;</td><td align="left">yes</td></tr></tbody></table></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="performance-sessioncache"></a>19.3.&nbsp;
			&#31649;&#29702;&#32531;&#23384;&#65288;Managing the caches&#65289;
    	</h2></div></div><div></div></div><p>
			&#26080;&#35770;&#20309;&#26102;&#65292;&#24403;&#20320;&#32473;<tt class="literal">save()</tt>&#12289;<tt class="literal">update()</tt>&#25110;
            <tt class="literal">saveOrUpdate()</tt>&#26041;&#27861;&#20256;&#36882;&#19968;&#20010;&#23545;&#35937;&#26102;&#65292;&#25110;&#20351;&#29992;<tt class="literal">load()</tt>&#12289;
			<tt class="literal">get()</tt>&#12289;<tt class="literal">list()</tt>&#12289;<tt class="literal">iterate()</tt>
			&#25110;<tt class="literal">scroll()</tt>&#26041;&#27861;&#33719;&#24471;&#19968;&#20010;&#23545;&#35937;&#26102;,
			&#35813;&#23545;&#35937;&#37117;&#23558;&#34987;&#21152;&#20837;&#21040;<tt class="literal">Session</tt>&#30340;&#20869;&#37096;&#32531;&#23384;&#20013;&#12290;
        </p><p>
			&#24403;&#38543;&#21518;flush()&#26041;&#27861;&#34987;&#35843;&#29992;&#26102;&#65292;&#23545;&#35937;&#30340;&#29366;&#24577;&#20250;&#21644;&#25968;&#25454;&#24211;&#21462;&#24471;&#21516;&#27493;&#12290;
			&#22914;&#26524;&#20320;&#19981;&#24076;&#26395;&#27492;&#21516;&#27493;&#25805;&#20316;&#21457;&#29983;&#65292;&#25110;&#32773;&#20320;&#27491;&#22788;&#29702;&#22823;&#37327;&#23545;&#35937;&#12289;&#38656;&#35201;&#23545;&#26377;&#25928;&#31649;&#29702;&#20869;&#23384;&#26102;&#65292;&#20320;&#21487;&#20197;&#35843;&#29992;<tt class="literal">evict()</tt>
			&#26041;&#27861;&#65292;&#20174;&#19968;&#32423;&#32531;&#23384;&#20013;&#21435;&#25481;&#36825;&#20123;&#23545;&#35937;&#21450;&#20854;&#38598;&#21512;&#12290; 
        </p><pre class="programlisting">ScrollableResult cats = sess.createQuery("from Cat as cat").scroll(); //a huge result set
while ( cats.next() ) {
    Cat cat = (Cat) cats.get(0);
    doSomethingWithACat(cat);
    sess.evict(cat);
}</pre><p>
			Session&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;<tt class="literal">contains()</tt>&#26041;&#27861;&#65292;&#29992;&#26469;&#21028;&#26029;&#26576;&#20010;&#23454;&#20363;&#26159;&#21542;&#22788;&#20110;&#24403;&#21069;session&#30340;&#32531;&#23384;&#20013;&#12290; 
        </p><p>
			&#22914;&#33509;&#35201;&#25226;&#25152;&#26377;&#30340;&#23545;&#35937;&#20174;session&#32531;&#23384;&#20013;&#24443;&#24213;&#28165;&#38500;&#65292;&#21017;&#38656;&#35201;&#35843;&#29992;<tt class="literal">Session.clear()</tt>&#12290; 
        </p><p>
			&#23545;&#20110;&#20108;&#32423;&#32531;&#23384;&#26469;&#35828;&#65292;&#22312;<tt class="literal">SessionFactory</tt>&#20013;&#23450;&#20041;&#20102;&#35768;&#22810;&#26041;&#27861;&#65292;
			&#28165;&#38500;&#32531;&#23384;&#20013;&#23454;&#20363;&#12289;&#25972;&#20010;&#31867;&#12289;&#38598;&#21512;&#23454;&#20363;&#25110;&#32773;&#25972;&#20010;&#38598;&#21512;&#12290; 			
        </p><pre class="programlisting">sessionFactory.evict(Cat.class, catId); //evict a particular Cat
sessionFactory.evict(Cat.class);  //evict all Cats
sessionFactory.evictCollection("Cat.kittens", catId); //evict a particular collection of kittens
sessionFactory.evictCollection("Cat.kittens"); //evict all kitten collections</pre><p>
			<tt class="literal">CacheMode</tt>&#21442;&#25968;&#29992;&#20110;&#25511;&#21046;&#20855;&#20307;&#30340;Session&#22914;&#20309;&#19982;&#20108;&#32423;&#32531;&#23384;&#36827;&#34892;&#20132;&#20114;&#12290;
        </p><div class="itemizedlist"><ul type="disc"><li><p>
			<tt class="literal">CacheMode.NORMAL</tt> - &#20174;&#20108;&#32423;&#32531;&#23384;&#20013;&#35835;&#12289;&#20889;&#25968;&#25454;&#12290;
        </p></li><li><p>
			<tt class="literal">CacheMode.GET</tt> - &#20174;&#20108;&#32423;&#32531;&#23384;&#20013;&#35835;&#21462;&#25968;&#25454;&#65292;&#20165;&#22312;&#25968;&#25454;&#26356;&#26032;&#26102;&#23545;&#20108;&#32423;&#32531;&#23384;&#20889;&#25968;&#25454;&#12290;
        </p></li><li><p>
			<tt class="literal">CacheMode.PUT</tt> - &#20165;&#21521;&#20108;&#32423;&#32531;&#23384;&#20889;&#25968;&#25454;&#65292;&#20294;&#19981;&#20174;&#20108;&#32423;&#32531;&#23384;&#20013;&#35835;&#25968;&#25454;&#12290;
        </p></li><li><p>
			<tt class="literal">CacheMode.REFRESH</tt> - &#20165;&#21521;&#20108;&#32423;&#32531;&#23384;&#20889;&#25968;&#25454;&#65292;&#20294;&#19981;&#20174;&#20108;&#32423;&#32531;&#23384;&#20013;&#35835;&#25968;&#25454;&#12290;&#36890;&#36807;
			<tt class="literal">hibernate.cache.use_minimal_puts</tt>&#30340;&#35774;&#32622;&#65292;&#24378;&#21046;&#20108;&#32423;&#32531;&#23384;&#20174;&#25968;&#25454;&#24211;&#20013;&#35835;&#21462;&#25968;&#25454;&#65292;&#21047;&#26032;&#32531;&#23384;&#20869;&#23481;&#12290;
        </p></li></ul></div><p>
			&#22914;&#33509;&#38656;&#35201;&#26597;&#30475;&#20108;&#32423;&#32531;&#23384;&#25110;&#26597;&#35810;&#32531;&#23384;&#21306;&#22495;&#30340;&#20869;&#23481;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">&#32479;&#35745;&#65288;Statistics&#65289;</tt> API&#12290;
        </p><pre class="programlisting">Map cacheEntries = sessionFactory.getStatistics()
        .getSecondLevelCacheStatistics(regionName)
        .getEntries();</pre><p>
			&#27492;&#26102;&#65292;&#20320;&#24517;&#39035;&#25163;&#24037;&#25171;&#24320;&#32479;&#35745;&#36873;&#39033;&#12290;&#21487;&#36873;&#30340;&#65292;&#20320;&#21487;&#20197;&#35753;Hibernate&#26356;&#20154;&#24037;&#21487;&#35835;&#30340;&#26041;&#24335;&#32500;&#25252;&#32531;&#23384;&#20869;&#23481;&#12290;
        </p><pre class="programlisting">hibernate.generate_statistics true
hibernate.cache.use_structured_entries true</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="performance-querycache"></a>19.4.&nbsp;&#26597;&#35810;&#32531;&#23384;&#65288;The Query Cache&#65289;
		</h2></div></div><div></div></div><p>
			&#26597;&#35810;&#30340;&#32467;&#26524;&#38598;&#20063;&#21487;&#20197;&#34987;&#32531;&#23384;&#12290;&#21482;&#26377;&#24403;&#32463;&#24120;&#20351;&#29992;&#21516;&#26679;&#30340;&#21442;&#25968;&#36827;&#34892;&#26597;&#35810;&#26102;&#65292;&#36825;&#25165;&#20250;&#26377;&#20123;&#29992;&#22788;&#12290;
			&#35201;&#20351;&#29992;&#26597;&#35810;&#32531;&#23384;&#65292;&#39318;&#20808;&#20320;&#24517;&#39035;&#25171;&#24320;&#23427;&#65306;			
        </p><pre class="programlisting">hibernate.cache.use_query_cache true</pre><p>
			
			&#35813;&#35774;&#32622;&#23558;&#20250;&#21019;&#24314;&#20004;&#20010;&#32531;&#23384;&#21306;&#22495; - &#19968;&#20010;&#29992;&#20110;&#20445;&#23384;&#26597;&#35810;&#32467;&#26524;&#38598;(<tt class="literal">org.hibernate.cache.StandardQueryCache</tt>)&#65307;
			&#21478;&#19968;&#20010;&#21017;&#29992;&#20110;&#20445;&#23384;&#26368;&#36817;&#26597;&#35810;&#30340;&#19968;&#31995;&#21015;&#34920;&#30340;&#26102;&#38388;&#25139;(<tt class="literal">org.hibernate.cache.UpdateTimestampsCache</tt>)&#12290;
			&#35831;&#27880;&#24847;&#65306;&#22312;&#26597;&#35810;&#32531;&#23384;&#20013;&#65292;&#23427;&#24182;&#19981;&#32531;&#23384;&#32467;&#26524;&#38598;&#20013;&#25152;&#21253;&#21547;&#30340;&#23454;&#20307;&#30340;&#30830;&#20999;&#29366;&#24577;&#65307;&#23427;&#21482;&#32531;&#23384;&#36825;&#20123;&#23454;&#20307;&#30340;&#26631;&#35782;&#31526;&#23646;&#24615;&#30340;&#20540;&#12289;&#20197;&#21450;&#21508;&#20540;&#31867;&#22411;&#30340;&#32467;&#26524;&#12290;
			&#25152;&#20197;&#26597;&#35810;&#32531;&#23384;&#36890;&#24120;&#20250;&#21644;&#20108;&#32423;&#32531;&#23384;&#19968;&#36215;&#20351;&#29992;&#12290; 
        </p><p>
			
			&#32477;&#22823;&#22810;&#25968;&#30340;&#26597;&#35810;&#24182;&#19981;&#33021;&#20174;&#26597;&#35810;&#32531;&#23384;&#20013;&#21463;&#30410;&#65292;&#25152;&#20197;Hibernate&#40664;&#35748;&#26159;&#19981;&#36827;&#34892;&#26597;&#35810;&#32531;&#23384;&#30340;&#12290;&#22914;&#33509;&#38656;&#35201;&#36827;&#34892;&#32531;&#23384;&#65292;&#35831;&#35843;&#29992;
			<tt class="literal">Query.setCacheable(true)</tt>&#26041;&#27861;&#12290;&#36825;&#20010;&#35843;&#29992;&#20250;&#35753;&#26597;&#35810;&#22312;&#25191;&#34892;&#36807;&#31243;&#20013;&#26102;&#20808;&#20174;&#32531;&#23384;&#20013;&#26597;&#25214;&#32467;&#26524;&#65292;
			&#24182;&#23558;&#33258;&#24049;&#30340;&#32467;&#26524;&#38598;&#25918;&#21040;&#32531;&#23384;&#20013;&#21435;&#12290; 
        </p><p>

			&#22914;&#26524;&#20320;&#35201;&#23545;&#26597;&#35810;&#32531;&#23384;&#30340;&#22833;&#25928;&#25919;&#31574;&#36827;&#34892;&#31934;&#30830;&#30340;&#25511;&#21046;&#65292;&#20320;&#24517;&#39035;&#35843;&#29992;<tt class="literal">Query.setCacheRegion()</tt>&#26041;&#27861;&#65292;
			&#20026;&#27599;&#20010;&#26597;&#35810;&#25351;&#23450;&#20854;&#21629;&#21517;&#30340;&#32531;&#23384;&#21306;&#22495;&#12290; 
        </p><pre class="programlisting">List blogs = sess.createQuery("from Blog blog where blog.blogger = :blogger")
    .setEntity("blogger", blogger)
    .setMaxResults(15)
    .setCacheable(true)
    .setCacheRegion("frontpages")
    .list();</pre><p>
			&#22914;&#26524;&#26597;&#35810;&#38656;&#35201;&#24378;&#34892;&#21047;&#26032;&#20854;&#26597;&#35810;&#32531;&#23384;&#21306;&#22495;&#65292;&#37027;&#20040;&#20320;&#24212;&#35813;&#35843;&#29992;<tt class="literal">Query.setCacheMode(CacheMode.REFRESH)</tt>&#26041;&#27861;&#12290;
			&#36825;&#23545;&#22312;&#20854;&#20182;&#36827;&#31243;&#20013;&#20462;&#25913;&#24213;&#23618;&#25968;&#25454;&#65288;&#20363;&#22914;&#65292;&#19981;&#36890;&#36807;Hibernate&#20462;&#25913;&#25968;&#25454;&#65289;&#65292;&#25110;&#23545;&#37027;&#20123;&#38656;&#35201;&#36873;&#25321;&#24615;&#26356;&#26032;&#29305;&#23450;&#26597;&#35810;&#32467;&#26524;&#38598;&#30340;&#24773;&#20917;&#29305;&#21035;&#26377;&#29992;&#12290;
			&#36825;&#26159;&#23545;<tt class="literal">SessionFactory.evictQueries()</tt>&#30340;&#26356;&#20026;&#26377;&#25928;&#30340;&#26367;&#20195;&#26041;&#26696;&#65292;&#21516;&#26679;&#21487;&#20197;&#28165;&#38500;&#26597;&#35810;&#32531;&#23384;&#21306;&#22495;&#12290;
        </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="performance-collections"></a>19.5.&nbsp;
		&#29702;&#35299;&#38598;&#21512;&#24615;&#33021;&#65288;Understanding Collection performance&#65289;	
		</h2></div></div><div></div></div><p>
			&#21069;&#38754;&#25105;&#20204;&#24050;&#32463;&#23545;&#38598;&#21512;&#36827;&#34892;&#20102;&#36275;&#22815;&#30340;&#35752;&#35770;&#12290;&#26412;&#27573;&#20013;&#65292;&#25105;&#20204;&#23558;&#30528;&#37325;&#35762;&#36848;&#38598;&#21512;&#22312;&#36816;&#34892;&#26102;&#30340;&#20107;&#23452;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-collections-taxonomy"></a>19.5.1.&nbsp;

            &#20998;&#31867;&#65288;Taxonomy&#65289;
			</h3></div></div><div></div></div><p>
			
			Hibernate&#23450;&#20041;&#20102;&#19977;&#31181;&#22522;&#26412;&#31867;&#22411;&#30340;&#38598;&#21512;&#65306;	
			</p><div class="itemizedlist"><ul type="disc"><li><p>
				
				&#20540;&#25968;&#25454;&#38598;&#21512;	
				</p></li><li><p>
				
				&#19968;&#23545;&#22810;&#20851;&#32852;	
				</p></li><li><p>
				
				&#22810;&#23545;&#22810;&#20851;&#32852;	
				</p></li></ul></div><p>
				&#36825;&#20010;&#20998;&#31867;&#26159;&#21306;&#20998;&#20102;&#19981;&#21516;&#30340;&#34920;&#21644;&#22806;&#38190;&#20851;&#31995;&#31867;&#22411;&#65292;&#20294;&#26159;&#23427;&#27809;&#26377;&#21578;&#35785;&#25105;&#20204;&#20851;&#31995;&#27169;&#22411;&#30340;&#25152;&#26377;&#20869;&#23481;&#12290;
				&#35201;&#23436;&#20840;&#29702;&#35299;&#20182;&#20204;&#30340;&#20851;&#31995;&#32467;&#26500;&#21644;&#24615;&#33021;&#29305;&#28857;&#65292;&#25105;&#20204;&#24517;&#39035;&#21516;&#26102;&#32771;&#34385;&#8220;&#29992;&#20110;Hibernate&#26356;&#26032;&#25110;&#21024;&#38500;&#38598;&#21512;&#34892;&#25968;&#25454;&#30340;&#20027;&#38190;&#30340;&#32467;&#26500;&#8221;&#12290;
				&#22240;&#27492;&#24471;&#21040;&#20102;&#22914;&#19979;&#30340;&#20998;&#31867;&#65306; 
            </p><div class="itemizedlist"><ul type="disc"><li><p>
				
				&#26377;&#24207;&#38598;&#21512;&#31867;	
				</p></li><li><p>
				
				&#38598;&#21512;&#65288;sets&#65289;	
				</p></li><li><p>
					
				&#21253;&#65288;bags)
				</p></li></ul></div><p>
				
				&#25152;&#26377;&#30340;&#26377;&#24207;&#38598;&#21512;&#31867;&#65288;maps, lists, arrays)&#37117;&#25317;&#26377;&#19968;&#20010;&#30001;<tt class="literal">&lt;key&gt;</tt>&#21644;
				<tt class="literal">&lt;index&gt;</tt>&#32452;&#25104;&#30340;&#20027;&#38190;&#12290;
				&#36825;&#31181;&#24773;&#20917;&#19979;&#38598;&#21512;&#31867;&#30340;&#26356;&#26032;&#26159;&#38750;&#24120;&#39640;&#25928;&#30340;&#8212;&#8212;&#20027;&#38190;&#24050;&#32463;&#34987;&#26377;&#25928;&#30340;&#32034;&#24341;&#65292;&#22240;&#27492;&#24403;Hibernate&#35797;&#22270;&#26356;&#26032;&#25110;&#21024;&#38500;&#19968;&#34892;&#26102;&#65292;&#21487;&#20197;&#36805;&#36895;&#25214;&#21040;&#35813;&#34892;&#25968;&#25454;&#12290; 
	        </p><p>
				
				&#38598;&#21512;(sets)&#30340;&#20027;&#38190;&#30001;<tt class="literal">&lt;key&gt;</tt>&#21644;&#20854;&#20182;&#20803;&#32032;&#23383;&#27573;&#26500;&#25104;&#12290;
				&#23545;&#20110;&#26377;&#20123;&#20803;&#32032;&#31867;&#22411;&#26469;&#35828;&#65292;&#36825;&#24456;&#20302;&#25928;&#65292;&#29305;&#21035;&#26159;&#32452;&#21512;&#20803;&#32032;&#25110;&#32773;&#22823;&#25991;&#26412;&#12289;&#22823;&#20108;&#36827;&#21046;&#23383;&#27573;&#65307;
				&#25968;&#25454;&#24211;&#21487;&#33021;&#26080;&#27861;&#26377;&#25928;&#30340;&#23545;&#22797;&#26434;&#30340;&#20027;&#38190;&#36827;&#34892;&#32034;&#24341;&#12290;
				&#21478;&#19968;&#26041;&#38754;&#65292;&#23545;&#20110;&#19968;&#23545;&#22810;&#12289;&#22810;&#23545;&#22810;&#20851;&#32852;&#65292;&#29305;&#21035;&#26159;&#21512;&#25104;&#30340;&#26631;&#35782;&#31526;&#26469;&#35828;&#65292;&#38598;&#21512;&#20063;&#21487;&#20197;&#36798;&#21040;&#21516;&#26679;&#30340;&#39640;&#25928;&#24615;&#33021;&#12290;&#65288;
				&#38468;&#27880;&#65306;&#22914;&#26524;&#20320;&#24076;&#26395;<tt class="literal">SchemaExport</tt>&#20026;&#20320;&#30340;<tt class="literal">&lt;set&gt;</tt>&#21019;&#24314;&#20027;&#38190;&#65292;
				&#20320;&#24517;&#39035;&#25226;&#25152;&#26377;&#30340;&#23383;&#27573;&#37117;&#22768;&#26126;&#20026;<tt class="literal">not-null="true"</tt>&#12290;&#65289; 
            </p><p>
				
				<tt class="literal">&lt;idbag&gt;</tt>&#26144;&#23556;&#23450;&#20041;&#20102;&#20195;&#29702;&#38190;&#65292;&#22240;&#27492;&#23427;&#24635;&#26159;&#21487;&#20197;&#24456;&#39640;&#25928;&#30340;&#34987;&#26356;&#26032;&#12290;&#20107;&#23454;&#19978;&#65292;
				<tt class="literal">&lt;idbag&gt;</tt>&#25317;&#26377;&#30528;&#26368;&#22909;&#30340;&#24615;&#33021;&#34920;&#29616;&#12290;
            </p><p>
				Bag&#26159;&#26368;&#24046;&#30340;&#12290;&#22240;&#20026;bag&#20801;&#35768;&#37325;&#22797;&#30340;&#20803;&#32032;&#20540;&#65292;&#20063;&#27809;&#26377;&#32034;&#24341;&#23383;&#27573;&#65292;&#22240;&#27492;&#19981;&#21487;&#33021;&#23450;&#20041;&#20027;&#38190;&#12290;
				Hibernate&#26080;&#27861;&#21028;&#26029;&#20986;&#37325;&#22797;&#30340;&#34892;&#12290;&#24403;&#36825;&#31181;&#38598;&#21512;&#34987;&#26356;&#25913;&#26102;&#65292;Hibernate&#23558;&#20250;&#20808;&#23436;&#25972;&#22320;&#31227;&#38500;
				&#65288;&#36890;&#36807;&#19968;&#20010;(in a single <tt class="literal">DELETE</tt>)&#65289;&#25972;&#20010;&#38598;&#21512;&#65292;&#28982;&#21518;&#20877;&#37325;&#26032;&#21019;&#24314;&#25972;&#20010;&#38598;&#21512;&#12290;
				&#22240;&#27492;Bag&#26159;&#38750;&#24120;&#20302;&#25928;&#30340;&#12290; 
            </p><p>
				&#35831;&#27880;&#24847;&#65306;&#23545;&#20110;&#19968;&#23545;&#22810;&#20851;&#32852;&#26469;&#35828;&#65292;&#8220;&#20027;&#38190;&#8221;&#24456;&#21487;&#33021;&#24182;&#19981;&#26159;&#25968;&#25454;&#24211;&#34920;&#30340;&#29289;&#29702;&#20027;&#38190;&#12290;
				&#20294;&#23601;&#31639;&#22312;&#27492;&#24773;&#20917;&#19979;&#65292;&#19978;&#38754;&#30340;&#20998;&#31867;&#20173;&#28982;&#26159;&#26377;&#29992;&#30340;&#12290;&#65288;&#23427;&#20173;&#28982;&#21453;&#26144;&#20102;Hibernate&#22312;&#38598;&#21512;&#30340;&#21508;&#25968;&#25454;&#34892;&#20013;&#26159;&#22914;&#20309;&#36827;&#34892;&#8220;&#23450;&#20301;&#8221;&#30340;&#12290;&#65289; 
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-collections-mostefficientupdate"></a>19.5.2.&nbsp;				
			Lists, maps &#21644;sets&#29992;&#20110;&#26356;&#26032;&#25928;&#29575;&#26368;&#39640;
			</h3></div></div><div></div></div><p>
				
				&#26681;&#25454;&#25105;&#20204;&#19978;&#38754;&#30340;&#35752;&#35770;&#65292;&#26174;&#28982;&#26377;&#24207;&#38598;&#21512;&#31867;&#22411;&#21644;&#22823;&#22810;&#25968;set&#37117;&#21487;&#20197;&#22312;&#22686;&#21152;&#12289;&#21024;&#38500;&#12289;&#20462;&#25913;&#20803;&#32032;&#20013;&#25317;&#26377;&#26368;&#22909;&#30340;&#24615;&#33021;&#12290; 
            </p><p>
				&#21487;&#35770;&#35777;&#30340;&#26159;&#23545;&#20110;&#22810;&#23545;&#22810;&#20851;&#32852;&#12289;&#20540;&#25968;&#25454;&#38598;&#21512;&#32780;&#35328;&#65292;&#26377;&#24207;&#38598;&#21512;&#31867;&#27604;&#38598;&#21512;(set)&#26377;&#19968;&#20010;&#22909;&#22788;&#12290;&#22240;&#20026;<tt class="literal">Set</tt>&#30340;&#20869;&#22312;&#32467;&#26500;&#65292;
				&#22914;&#26524;&#8220;&#25913;&#21464;&#8221;&#20102;&#19968;&#20010;&#20803;&#32032;&#65292;Hibernate&#24182;&#19981;&#20250;<tt class="literal">&#26356;&#26032;&#65288;UPDATE&#65289;</tt>&#36825;&#19968;&#34892;&#12290;
				&#23545;&#20110;<tt class="literal">Set</tt>&#26469;&#35828;&#65292;&#21482;&#26377;&#22312;<tt class="literal">&#25554;&#20837;&#65288;INSERT&#65289;</tt>&#21644;<tt class="literal">&#21024;&#38500;&#65288;DELETE&#65289;</tt>
				&#25805;&#20316;&#26102;&#8220;&#25913;&#21464;&#8221;&#25165;&#26377;&#25928;&#12290;&#20877;&#27425;&#24378;&#35843;&#65306;&#36825;&#27573;&#35752;&#35770;&#23545;&#8220;&#19968;&#23545;&#22810;&#20851;&#32852;&#8221;&#24182;&#19981;&#36866;&#29992;&#12290; 				
            </p><p>
				&#27880;&#24847;&#21040;&#25968;&#32452;&#26080;&#27861;&#24310;&#36831;&#36733;&#20837;&#65292;&#25105;&#20204;&#21487;&#20197;&#24471;&#20986;&#32467;&#35770;&#65292;list, map&#21644;idbags&#26159;&#26368;&#39640;&#25928;&#30340;&#65288;&#38750;&#21453;&#21521;&#65289;&#38598;&#21512;&#31867;&#22411;&#65292;set&#21017;&#32039;&#38543;&#20854;&#21518;&#12290;
				&#22312;Hibernate&#20013;&#65292;set&#24212;&#35813;&#26102;&#26368;&#36890;&#29992;&#30340;&#38598;&#21512;&#31867;&#22411;&#65292;&#36825;&#26102;&#22240;&#20026;&#8220;set&#8221;&#30340;&#35821;&#20041;&#22312;&#20851;&#31995;&#27169;&#22411;&#20013;&#26159;&#26368;&#33258;&#28982;&#30340;&#12290;
            </p><p>
				&#20294;&#26159;&#65292;&#22312;&#35774;&#35745;&#33391;&#22909;&#30340;Hibernate&#39046;&#22495;&#27169;&#22411;&#20013;&#65292;&#25105;&#20204;&#36890;&#24120;&#21487;&#20197;&#30475;&#21040;&#26356;&#22810;&#30340;&#38598;&#21512;&#20107;&#23454;&#19978;&#26159;&#24102;&#26377;<tt class="literal">inverse="true"</tt>
				&#30340;&#19968;&#23545;&#22810;&#30340;&#20851;&#32852;&#12290;&#23545;&#20110;&#36825;&#20123;&#20851;&#32852;&#65292;&#26356;&#26032;&#25805;&#20316;&#23558;&#20250;&#22312;&#22810;&#23545;&#19968;&#30340;&#36825;&#19968;&#31471;&#36827;&#34892;&#22788;&#29702;&#12290;&#22240;&#27492;&#23545;&#20110;&#27492;&#31867;&#24773;&#20917;&#65292;&#26080;&#38656;&#32771;&#34385;&#20854;&#38598;&#21512;&#30340;&#26356;&#26032;&#24615;&#33021;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-collections-mostefficentinverse"></a>19.5.3.&nbsp;
			Bag&#21644;list&#26159;&#21453;&#21521;&#38598;&#21512;&#31867;&#20013;&#25928;&#29575;&#26368;&#39640;&#30340;
			</h3></div></div><div></div></div><p>
				&#22312;&#25226;bag&#25172;&#36827;&#27700;&#27807;&#20043;&#21069;&#65292;&#20320;&#24517;&#39035;&#20102;&#35299;&#65292;&#22312;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;bag&#30340;&#24615;&#33021;(&#21253;&#25324;list)&#35201;&#27604;set&#39640;&#24471;&#22810;&#65306;
				&#23545;&#20110;&#25351;&#26126;&#20102;<tt class="literal">inverse="true"</tt>&#30340;&#38598;&#21512;&#31867;&#65288;&#27604;&#22914;&#35828;&#65292;&#26631;&#20934;&#30340;&#21452;&#21521;&#30340;&#19968;&#23545;&#22810;&#20851;&#32852;&#65289;&#65292;
				&#25105;&#20204;&#21487;&#20197;&#22312;&#26410;&#21021;&#22987;&#21270;(fetch)&#21253;&#20803;&#32032;&#30340;&#24773;&#20917;&#19979;&#30452;&#25509;&#21521;bag&#25110;list&#28155;&#21152;&#26032;&#20803;&#32032;&#65281;
				&#36825;&#26159;&#22240;&#20026;<tt class="literal">Collection.add()</tt>)&#25110;&#32773;<tt class="literal">Collection.addAll()</tt> &#26041;&#27861;
				&#23545;bag&#25110;&#32773;List&#24635;&#26159;&#36820;&#22238;true&#65288;&#36825;&#28857;&#19982;&#19982;Set&#19981;&#21516;&#65289;&#12290;&#22240;&#27492;&#23545;&#20110;&#19979;&#38754;&#30340;&#30456;&#21516;&#20195;&#30721;&#26469;&#35828;&#65292;&#36895;&#24230;&#20250;&#24555;&#24471;&#22810;&#12290; 
			</p><pre class="programlisting">Parent p = (Parent) sess.load(Parent.class, id);
    Child c = new Child();
    c.setParent(p);
    p.getChildren().add(c);  //no need to fetch the collection!
    sess.flush();</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-collections-oneshotdelete"></a>19.5.4.&nbsp;
			&#19968;&#27425;&#24615;&#21024;&#38500;&#65288;One shot delete&#65289;
			</h3></div></div><div></div></div><p>
				&#20598;&#23572;&#30340;&#65292;&#36880;&#20010;&#21024;&#38500;&#38598;&#21512;&#31867;&#20013;&#30340;&#20803;&#32032;&#26159;&#30456;&#24403;&#20302;&#25928;&#30340;&#12290;Hibernate&#24182;&#27809;&#37027;&#20040;&#31528;&#65292; 
				&#22914;&#26524;&#20320;&#24819;&#35201;&#25226;&#25972;&#20010;&#38598;&#21512;&#37117;&#21024;&#38500;&#65288;&#27604;&#22914;&#35828;&#35843;&#29992;list.clear()&#65289;&#65292;Hibernate&#21482;&#38656;&#35201;&#19968;&#20010;DELETE&#23601;&#25630;&#23450;&#20102;&#12290; 
            </p><p>
				&#20551;&#35774;&#25105;&#20204;&#22312;&#19968;&#20010;&#38271;&#24230;&#20026;20&#30340;&#38598;&#21512;&#31867;&#20013;&#26032;&#22686;&#21152;&#20102;&#19968;&#20010;&#20803;&#32032;&#65292;&#28982;&#21518;&#20877;&#21024;&#38500;&#20004;&#20010;&#12290;
				Hibernate&#20250;&#23433;&#25490;&#19968;&#26465;<tt class="literal">INSERT</tt>&#35821;&#21477;&#21644;&#20004;&#26465;<tt class="literal">DELETE</tt>&#35821;&#21477;&#65288;&#38500;&#38750;&#38598;&#21512;&#31867;&#26159;&#19968;&#20010;bag)&#12290;
				&#36825;&#24403;&#28982;&#26159;&#26174;&#32780;&#26131;&#35265;&#30340;&#12290; 
            </p><p>
				&#20294;&#26159;&#65292;&#20551;&#35774;&#25105;&#20204;&#21024;&#38500;&#20102;18&#20010;&#25968;&#25454;&#65292;&#21482;&#21097;&#19979;2&#20010;&#65292;&#28982;&#21518;&#26032;&#22686;3&#20010;&#12290;&#21017;&#26377;&#20004;&#31181;&#22788;&#29702;&#26041;&#24335;&#65306; 			
            </p><div class="itemizedlist"><ul type="disc"><li><p>
				&#36880;&#19968;&#30340;&#21024;&#38500;&#36825;18&#20010;&#25968;&#25454;&#65292;&#20877;&#26032;&#22686;&#19977;&#20010;&#65307;
				</p></li><li><p>
				&#21024;&#38500;&#25972;&#20010;&#38598;&#21512;&#31867;&#65288;&#21482;&#29992;&#19968;&#21477;DELETE&#35821;&#21477;&#65289;&#65292;&#28982;&#21518;&#22686;&#21152;5&#20010;&#25968;&#25454;&#12290; 
				</p></li></ul></div><p>
				Hibernate&#36824;&#27809;&#37027;&#20040;&#32874;&#26126;&#65292;&#30693;&#36947;&#31532;&#20108;&#31181;&#36873;&#25321;&#21487;&#33021;&#20250;&#27604;&#36739;&#24555;&#12290;
				&#65288;&#20063;&#35768;&#35753;Hibernate&#19981;&#36825;&#20040;&#32874;&#26126;&#20063;&#26159;&#22909;&#20107;&#65292;&#21542;&#21017;&#21487;&#33021;&#20250;&#24341;&#21457;&#24847;&#22806;&#30340;&#8220;&#25968;&#25454;&#24211;&#35302;&#21457;&#22120;&#8221;&#20043;&#31867;&#30340;&#38382;&#39064;&#12290;&#65289; 
            </p><p>
				&#24184;&#36816;&#30340;&#26159;&#65292;&#20320;&#21487;&#20197;&#24378;&#21046;&#20351;&#29992;&#31532;&#20108;&#31181;&#31574;&#30053;&#12290;&#20320;&#38656;&#35201;&#21462;&#28040;&#21407;&#26469;&#30340;&#25972;&#20010;&#38598;&#21512;&#31867;&#65288;&#35299;&#38500;&#20854;&#24341;&#29992;&#65289;&#65292;
				&#28982;&#21518;&#20877;&#36820;&#22238;&#19968;&#20010;&#26032;&#30340;&#23454;&#20363;&#21270;&#30340;&#38598;&#21512;&#31867;&#65292;&#21482;&#21253;&#21547;&#38656;&#35201;&#30340;&#20803;&#32032;&#12290;&#26377;&#20123;&#26102;&#20505;&#36825;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;
            </p><p>
				&#26174;&#28982;&#65292;&#19968;&#27425;&#24615;&#21024;&#38500;&#24182;&#19981;&#36866;&#29992;&#20110;&#34987;&#26144;&#23556;&#20026;<tt class="literal">inverse="true"</tt>&#30340;&#38598;&#21512;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="performance-monitoring"></a>19.6.&nbsp;
		&#30417;&#27979;&#24615;&#33021;&#65288;Monitoring performance&#65289;
		</h2></div></div><div></div></div><p>
			&#27809;&#26377;&#30417;&#27979;&#21644;&#24615;&#33021;&#21442;&#25968;&#32780;&#36827;&#34892;&#20248;&#21270;&#26159;&#27627;&#26080;&#24847;&#20041;&#30340;&#12290;Hibernate&#20026;&#20854;&#20869;&#37096;&#25805;&#20316;&#25552;&#20379;&#20102;&#19968;&#31995;&#21015;&#30340;&#31034;&#24847;&#22270;&#65292;&#22240;&#27492;&#21487;&#20197;&#20174;
			&#27599;&#20010;<tt class="literal">SessionFactory</tt>&#25235;&#21462;&#20854;&#32479;&#35745;&#25968;&#25454;&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-monitoring-sf"></a>19.6.1.&nbsp;
			&#30417;&#27979;SessionFactory	
			</h3></div></div><div></div></div><p>
				&#20320;&#21487;&#20197;&#26377;&#20004;&#31181;&#26041;&#24335;&#35775;&#38382;<tt class="literal">SessionFactory</tt>&#30340;&#25968;&#25454;&#35760;&#24405;&#65292;&#31532;&#19968;&#31181;&#23601;&#26159;&#33258;&#24049;&#30452;&#25509;&#35843;&#29992;
				<tt class="literal">sessionFactory.getStatistics()</tt>&#26041;&#27861;&#35835;&#21462;&#12289;&#26174;&#31034;<tt class="literal">&#32479;&#35745;</tt>&#25968;&#25454;&#12290;
            </p><p>
				&#27492;&#22806;&#65292;&#22914;&#26524;&#20320;&#25171;&#24320;<tt class="literal">StatisticsService</tt> MBean&#36873;&#39033;&#65292;&#37027;&#20040;Hibernate&#21017;&#21487;&#20197;&#20351;&#29992;JMX&#25216;&#26415;
				&#21457;&#24067;&#20854;&#25968;&#25454;&#35760;&#24405;&#12290;&#20320;&#21487;&#20197;&#35753;&#24212;&#29992;&#20013;&#25152;&#26377;&#30340;<tt class="literal">SessionFactory</tt>&#21516;&#26102;&#20849;&#20139;&#19968;&#20010;MBean&#65292;&#20063;&#21487;&#20197;&#27599;&#20010;
				SessionFactory&#20998;&#37197;&#19968;&#20010;MBean&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#21363;&#26159;&#20854;&#28436;&#31034;&#20195;&#30721;&#65306;
            </p><pre class="programlisting">// MBean service registration for a specific SessionFactory
Hashtable tb = new Hashtable();
tb.put("type", "statistics");
tb.put("sessionFactory", "myFinancialApp");
ObjectName on = new ObjectName("hibernate", tb); // MBean object name

StatisticsService stats = new StatisticsService(); // MBean implementation
stats.setSessionFactory(sessionFactory); // Bind the stats to a SessionFactory
server.registerMBean(stats, on); // Register the Mbean on the server</pre><pre class="programlisting">// MBean service registration for all SessionFactory's
Hashtable tb = new Hashtable();
tb.put("type", "statistics");
tb.put("sessionFactory", "all");
ObjectName on = new ObjectName("hibernate", tb); // MBean object name

StatisticsService stats = new StatisticsService(); // MBean implementation
server.registerMBean(stats, on); // Register the MBean on the server</pre><p>
				
				TODO&#65306;&#20173;&#38656;&#35201;&#35828;&#26126;&#30340;&#26159;&#65306;&#22312;&#31532;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#30452;&#25509;&#24471;&#21040;&#21644;&#20351;&#29992;MBean&#65307;&#32780;&#22312;&#31532;&#20108;&#20010;&#20363;&#23376;&#20013;&#65292;&#22312;&#20351;&#29992;MBean&#20043;&#21069;
				&#25105;&#20204;&#21017;&#38656;&#35201;&#32473;&#20986;SessionFactory&#30340;JNDI&#21517;&#65292;&#20351;&#29992;<tt class="literal">hibernateStatsBean.setSessionFactoryJNDIName("my/JNDI/Name")</tt>
				&#24471;&#21040;SessionFactory&#65292;&#28982;&#21518;&#23558;MBean&#20445;&#23384;&#20110;&#20854;&#20013;&#12290;
            </p><p>
				&#20320;&#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#26041;&#27861;&#25171;&#24320;&#25110;&#20851;&#38381;<tt class="literal">SessionFactory</tt>&#30340;&#30417;&#27979;&#21151;&#33021;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
						
						&#22312;&#37197;&#32622;&#26399;&#38388;&#65292;&#23558;<tt class="literal">hibernate.generate_statistics</tt>&#35774;&#32622;&#20026;<tt class="literal">true</tt>&#25110;<tt class="literal">false</tt>&#65307;
                    </p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>
						
						&#22312;&#36816;&#34892;&#26399;&#38388;&#65292;&#21017;&#21487;&#20197;&#21487;&#20197;&#36890;&#36807;<tt class="literal">sf.getStatistics().setStatisticsEnabled(true)</tt>
                        &#25110;<tt class="literal">hibernateStatsBean.setStatisticsEnabled(true)</tt>
                    </p></li></ul></div><p>
				&#20320;&#20063;&#21487;&#20197;&#22312;&#31243;&#24207;&#20013;&#35843;&#29992;<tt class="literal">clear()</tt>&#26041;&#27861;&#37325;&#32622;&#32479;&#35745;&#25968;&#25454;&#65292;&#35843;&#29992;<tt class="literal">logSummary()</tt>
				&#22312;&#26085;&#24535;&#20013;&#35760;&#24405;&#65288;info&#32423;&#21035;&#65289;&#20854;&#24635;&#32467;&#12290;				
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="performance-monitoring-metrics"></a>19.6.2.&nbsp;
			&#25968;&#25454;&#35760;&#24405;&#65288;Metrics&#65289;
			</h3></div></div><div></div></div><p>
				Hibernate&#25552;&#20379;&#20102;&#19968;&#31995;&#21015;&#25968;&#25454;&#35760;&#24405;&#65292;&#20854;&#35760;&#24405;&#30340;&#20869;&#23481;&#21253;&#25324;&#20174;&#26368;&#22522;&#26412;&#30340;&#20449;&#24687;&#21040;&#19982;&#20855;&#20307;&#22330;&#26223;&#30340;&#29305;&#27530;&#20449;&#24687;&#12290;&#25152;&#26377;&#30340;&#27979;&#37327;&#20540;&#37117;&#21487;&#20197;&#30001;
				<tt class="literal">Statistics</tt>&#25509;&#21475;&#36827;&#34892;&#35775;&#38382;&#65292;&#20027;&#35201;&#20998;&#20026;&#19977;&#31867;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
						&#20351;&#29992;<tt class="literal">Session</tt>&#30340;&#26222;&#36890;&#25968;&#25454;&#35760;&#24405;&#65292;&#20363;&#22914;&#25171;&#24320;&#30340;Session&#30340;&#20010;&#25968;&#12289;&#21462;&#24471;&#30340;JDBC&#30340;&#36830;&#25509;&#25968;&#31561;&#65307;
                    </p></li><li><p>
						&#23454;&#20307;&#12289;&#38598;&#21512;&#12289;&#26597;&#35810;&#12289;&#32531;&#23384;&#31561;&#20869;&#23481;&#30340;&#32479;&#19968;&#25968;&#25454;&#35760;&#24405;
                    </p></li><li><p>
						&#21644;&#20855;&#20307;&#23454;&#20307;&#12289;&#38598;&#21512;&#12289;&#26597;&#35810;&#12289;&#32531;&#23384;&#30456;&#20851;&#30340;&#35814;&#32454;&#25968;&#25454;&#35760;&#24405;
                    </p></li></ul></div><p>
				&#20363;&#22914;&#65306;&#20320;&#21487;&#20197;&#26816;&#26597;&#32531;&#23384;&#30340;&#21629;&#20013;&#25104;&#21151;&#27425;&#25968;&#65292;&#32531;&#23384;&#30340;&#21629;&#20013;&#22833;&#36133;&#27425;&#25968;&#65292;&#23454;&#20307;&#12289;&#38598;&#21512;&#21644;&#26597;&#35810;&#30340;&#20351;&#29992;&#27010;&#29575;&#65292;&#26597;&#35810;&#30340;&#24179;&#22343;&#26102;&#38388;&#31561;&#12290;&#35831;&#27880;&#24847;
				Java&#20013;&#26102;&#38388;&#30340;&#36817;&#20284;&#31934;&#24230;&#26159;&#27627;&#31186;&#12290;Hibernate&#30340;&#25968;&#25454;&#31934;&#24230;&#21644;&#20855;&#20307;&#30340;JVM&#26377;&#20851;&#65292;&#22312;&#26377;&#20123;&#24179;&#21488;&#19978;&#20854;&#31934;&#24230;&#29978;&#33267;&#21482;&#33021;&#31934;&#30830;&#21040;10&#31186;&#12290;
            </p><p>
				&#20320;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;getter&#26041;&#27861;&#24471;&#21040;&#20840;&#23616;&#25968;&#25454;&#35760;&#24405;&#65288;&#20363;&#22914;&#65292;&#21644;&#20855;&#20307;&#30340;&#23454;&#20307;&#12289;&#38598;&#21512;&#12289;&#32531;&#23384;&#21306;&#26080;&#20851;&#30340;&#25968;&#25454;&#65289;&#65292;&#20320;&#20063;&#21487;&#20197;&#22312;&#20855;&#20307;&#26597;&#35810;&#20013;&#36890;&#36807;&#26631;&#35760;&#23454;&#20307;&#21517;&#12289;
				&#25110;HQL&#12289;SQL&#35821;&#21477;&#24471;&#21040;&#26576;&#23454;&#20307;&#30340;&#25968;&#25454;&#35760;&#24405;&#12290;&#35831;&#21442;&#32771;<tt class="literal">Statistics</tt>&#12289;<tt class="literal">EntityStatistics</tt>&#12289;
                <tt class="literal">CollectionStatistics</tt>&#12289;<tt class="literal">SecondLevelCacheStatistics</tt>&#12289;
                &#21644;<tt class="literal">QueryStatistics</tt>&#30340;API&#25991;&#26723;&#20197;&#25235;&#21462;&#26356;&#22810;&#20449;&#24687;&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#21017;&#26159;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#65306;
            </p><pre class="programlisting">Statistics stats = HibernateUtil.sessionFactory.getStatistics();

double queryCacheHitCount  = stats.getQueryCacheHitCount();
double queryCacheMissCount = stats.getQueryCacheMissCount();
double queryCacheHitRatio =
  queryCacheHitCount / (queryCacheHitCount + queryCacheMissCount);

log.info("Query Hit ratio:" + queryCacheHitRatio);

EntityStatistics entityStats =
  stats.getEntityStatistics( Cat.class.getName() );
long changes =
        entityStats.getInsertCount()
        + entityStats.getUpdateCount()
        + entityStats.getDeleteCount();
log.info(Cat.class.getName() + " changed " + changes + "times"  );</pre><p>
				&#22914;&#26524;&#20320;&#24819;&#24471;&#21040;&#25152;&#26377;&#23454;&#20307;&#12289;&#38598;&#21512;&#12289;&#26597;&#35810;&#21644;&#32531;&#23384;&#21306;&#30340;&#25968;&#25454;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#26041;&#27861;&#33719;&#24471;&#23454;&#20307;&#12289;&#38598;&#21512;&#12289;&#26597;&#35810;&#21644;&#32531;&#23384;&#21306;&#21015;&#34920;&#65306;
				<tt class="literal">getQueries()</tt>&#12289;<tt class="literal">getEntityNames()</tt>&#12289;
				<tt class="literal">getCollectionRoleNames()</tt>&#21644;
                <tt class="literal">getSecondLevelCacheRegionNames()</tt>&#12290;
            </p></div></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="toolsetguide"></a>&#31532;&nbsp;20&nbsp;&#31456;&nbsp;&#24037;&#20855;&#31665;&#25351;&#21335;</h2></div></div><div></div></div><p>
		&#21487;&#20197;&#36890;&#36807;&#19968;&#31995;&#21015;Eclipse&#25554;&#20214;&#12289;&#21629;&#20196;&#34892;&#24037;&#20855;&#21644;Ant&#20219;&#21153;&#26469;&#36827;&#34892;&#19982;Hibernate&#20851;&#32852;&#30340;&#36716;&#25442;&#12290;

    </p><p>
        &#38500;&#20102;Ant&#20219;&#21153;&#22806;&#65292;&#24403;&#21069;&#30340;<span class="emphasis"><em>Hibernate Tools</em></span>&#20063;&#21253;&#21547;&#20102;Eclipse IDE&#30340;&#25554;&#20214;&#65292;&#29992;&#20110;&#19982;&#29616;&#23384;&#25968;&#25454;&#24211;&#30340;&#36870;&#21521;&#24037;&#31243;&#12290;
    </p><div class="itemizedlist"><ul type="disc"><li><p>

            <span class="emphasis"><em>Mapping Editor:</em></span> Hibernate XML&#26144;&#23556;&#25991;&#20214;&#30340;&#32534;&#36753;&#22120;&#65292;&#25903;&#25345;&#33258;&#21160;&#23436;&#25104;&#21644;&#35821;&#27861;&#39640;&#20142;&#12290;&#23427;&#20063;&#25903;&#25345;&#23545;&#31867;&#21517;&#21644;&#23646;&#24615;/&#23383;&#27573;&#21517;&#30340;&#35821;&#20041;&#33258;&#21160;&#23436;&#25104;&#65292;&#27604;&#36890;&#24120;&#30340;XML&#32534;&#36753;&#22120;&#26041;&#20415;&#24471;&#22810;&#12290;
        </p></li><li><p>
            <span class="emphasis"><em>Console:</em></span> Console&#26159;Eclipse&#30340;&#19968;&#20010;&#26032;&#35270;&#22270;&#12290;&#38500;&#20102;&#23545;&#20320;&#30340;console&#37197;&#32622;&#30340;&#26641;&#29366;&#27010;&#35272;&#65292;&#20320;&#36824;&#21487;&#20197;&#33719;&#24471;&#23545;&#20320;&#25345;&#20037;&#21270;&#31867;&#21450;&#20854;&#20851;&#32852;&#30340;&#20132;&#20114;&#24335;&#35270;&#22270;&#12290;Console&#20801;&#35768;&#20320;&#23545;&#25968;&#25454;&#24211;&#25191;&#34892;HQL&#26597;&#35810;&#65292;&#24182;&#30452;&#25509;&#22312;Eclipse&#20013;&#27983;&#35272;&#32467;&#26524;&#12290;
        </p></li><li><p>
            <span class="emphasis"><em>Development Wizards:</em></span> &#22312;Hibernate Eclipse tools&#20013;&#36824;&#25552;&#20379;&#20102;&#20960;&#20010;&#21521;&#23548;&#65307;&#20320;&#21487;&#20197;&#29992;&#21521;&#23548;&#24555;&#36895;&#29983;&#25104;Hibernate &#37197;&#32622;&#25991;&#20214;&#65288;cfg.xml&#65289;&#65292;&#20320;&#29978;&#33267;&#36824;&#21487;&#20197;&#21516;&#29616;&#23384;&#30340;&#25968;&#25454;&#24211;schema&#20013;&#21453;&#21521;&#24037;&#31243;&#20986;POJO&#28304;&#20195;&#30721;&#19982;Hibernate &#26144;&#23556;&#25991;&#20214;&#12290;&#21453;&#21521;&#24037;&#31243;&#25903;&#25345;&#21487;&#23450;&#21046;&#30340;&#27169;&#29256;&#12290;
        </p></li><li><p>
            <span class="emphasis"><em>Ant Tasks:</em></span>
        </p></li></ul></div><p>
        &#35201;&#24471;&#21040;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#26597;&#38405; <span class="emphasis"><em>Hibernate Tools</em></span> &#21253;&#21450;&#20854;&#25991;&#26723;&#12290;
    </p><p>
        &#21516;&#26102;&#65292;Hibernate&#20027;&#21457;&#34892;&#21253;&#36824;&#38468;&#24102;&#20102;&#19968;&#20010;&#38598;&#25104;&#30340;&#24037;&#20855;&#65288;&#23427;&#29978;&#33267;&#21487;&#20197;&#22312;Hibernate&#8220;&#20869;&#37096;&#8221;&#24555;&#36895;&#36816;&#34892;&#65289;<span class="emphasis"><em>SchemaExport</em></span> &#65292;&#20063;&#23601;&#26159;        <tt class="literal">hbm2ddl</tt>&#12290;

    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="toolsetguide-s1"></a>20.1.&nbsp;Schema&#33258;&#21160;&#29983;&#25104;&#65288;Automatic schema generation&#65289;</h2></div></div><div></div></div><p>
            &#21487;&#20197;&#20174;&#20320;&#30340;&#26144;&#23556;&#25991;&#20214;&#20351;&#29992;&#19968;&#20010;Hibernate&#24037;&#20855;&#29983;&#25104;DDL&#12290; &#29983;&#25104;&#30340;schema&#21253;&#21547;&#26377;&#23545;&#23454;&#20307;&#21644;&#38598;&#21512;&#31867;&#34920;&#30340;&#23436;&#25972;&#24615;&#24341;&#29992;&#32422;&#26463;&#65288;&#20027;&#38190;&#21644;&#22806;&#38190;&#65289;&#12290;&#28041;&#21450;&#21040;&#30340;&#26631;&#31034;&#31526;&#29983;&#25104;&#22120;&#25152;&#38656;&#30340;&#34920;&#21644;sequence&#20063;&#20250;&#21516;&#26102;&#29983;&#25104;&#12290;
        </p><p>
            &#22312;&#20351;&#29992;&#36825;&#20010;&#24037;&#20855;&#30340;&#26102;&#20505;&#65292;&#20320;<span class="emphasis"><em>&#24517;&#39035;</em></span> &#36890;&#36807;<tt class="literal">hibernate.dialet</tt>&#23646;&#24615;&#25351;&#23450;&#19968;&#20010;SQL<tt class="literal">&#26041;&#35328;(Dialet)</tt>&#65292;&#22240;&#20026;DDL&#26159;&#19982;&#20379;&#24212;&#21830;&#39640;&#24230;&#30456;&#20851;&#30340;&#12290;
        </p><p>
            &#39318;&#20808;&#65292;&#35201;&#23450;&#21046;&#20320;&#30340;&#26144;&#23556;&#25991;&#20214;&#65292;&#26469;&#25913;&#21892;&#29983;&#25104;&#30340;schema&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-2"></a>20.1.1.&nbsp;&#23545;schema&#23450;&#21046;&#21270;(Customizing the schema)</h3></div></div><div></div></div><p>
                &#24456;&#22810;Hibernate&#26144;&#23556;&#20803;&#32032;&#23450;&#20041;&#20102;&#21487;&#36873;&#30340;<tt class="literal">length</tt>&#12289;<tt class="literal">precision</tt> &#25110;&#32773; <tt class="literal">scale</tt>&#23646;&#24615;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#36825;&#20010;&#23646;&#24615;&#35774;&#32622;&#23383;&#27573;&#30340;&#38271;&#24230;&#12289;&#31934;&#24230;&#12289;&#23567;&#25968;&#28857;&#20301;&#25968;&#12290; 
            </p><pre class="programlisting">&lt;property name="zip" length="5"/&gt;</pre><pre class="programlisting">&lt;property name="balance" precision="12" scale="2"/&gt;</pre><p>
                &#26377;&#20123;tag&#36824;&#25509;&#21463;<tt class="literal">not-null</tt>&#23646;&#24615;&#65288;&#29992;&#26469;&#22312;&#34920;&#23383;&#27573;&#19978;&#29983;&#25104;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#65289;&#21644;<tt class="literal">unique</tt>&#23646;&#24615;&#65288;&#29992;&#26469;&#22312;&#34920;&#23383;&#27573;&#19978;&#29983;&#25104;<tt class="literal">UNIQUE</tt>&#32422;&#26463;&#65289;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="bar" column="barId" not-null="true"/&gt;</pre><pre class="programlisting">&lt;element column="serialNumber" type="long" not-null="true" unique="true"/&gt;</pre><p>
                <tt class="literal">unique-key</tt>&#23646;&#24615;&#21487;&#20197;&#23545;&#25104;&#32452;&#30340;&#23383;&#27573;&#25351;&#23450;&#19968;&#20010;&#21807;&#19968;&#38190;&#32422;&#26463;(unique key constraint)&#12290;&#30446;&#21069;&#65292;<tt class="literal">unique-key</tt>&#23646;&#24615;&#25351;&#23450;&#30340;&#20540;&#22312;&#29983;&#25104;DDL&#26102;<span class="emphasis"><em>&#24182;&#19981;&#20250;</em></span>&#34987;&#24403;&#20316;&#36825;&#20010;&#32422;&#26463;&#30340;&#21517;&#23383;&#65292;&#23427;&#20204;&#21482;&#26159;&#22312;&#29992;&#26469;&#22312;&#26144;&#23556;&#25991;&#20214;&#20869;&#37096;&#29992;&#20316;&#21306;&#20998;&#30340;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="org" column="orgId" unique-key="OrgEmployeeId"/&gt;
&lt;property name="employeeId" unique-key="OrgEmployee"/&gt;</pre><p>
                <tt class="literal">index</tt>&#23646;&#24615;&#20250;&#29992;&#23545;&#24212;&#30340;&#23383;&#27573;&#65288;&#19968;&#20010;&#25110;&#22810;&#20010;&#65289;&#29983;&#25104;&#19968;&#20010;index,&#23427;&#25351;&#20986;&#20102;&#36825;&#20010;index&#30340;&#21517;&#23383;&#12290;&#22914;&#26524;&#22810;&#20010;&#23383;&#27573;&#23545;&#24212;&#30340;index&#21517;&#23383;&#30456;&#21516;&#65292;&#23601;&#20250;&#29983;&#25104;&#21253;&#21547;&#36825;&#20123;&#23383;&#27573;&#30340;index&#12290;
            </p><pre class="programlisting">&lt;property name="lastName" index="CustName"/&gt;
&lt;property name="firstName" index="CustName"/&gt;</pre><p>
                <tt class="literal">foreign-key</tt>&#23646;&#24615;&#21487;&#20197;&#29992;&#26469;&#35206;&#30422;&#20219;&#20309;&#29983;&#25104;&#30340;&#22806;&#38190;&#32422;&#26463;&#30340;&#21517;&#23383;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="bar" column="barId" foreign-key="FKFooBar"/&gt;</pre><p>
                &#24456;&#22810;&#26144;&#23556;&#20803;&#32032;&#36824;&#25509;&#21463;<tt class="literal">&lt;column&gt;</tt>&#23376;&#20803;&#32032;&#12290;&#36825;&#22312;&#23450;&#20041;&#36328;&#36234;&#22810;&#23383;&#27573;&#30340;&#31867;&#22411;&#26102;&#29305;&#21035;&#26377;&#29992;&#12290;
            </p><pre class="programlisting">&lt;property name="name" type="my.customtypes.Name"/&gt;
    &lt;column name="last" not-null="true" index="bar_idx" length="30"/&gt;
    &lt;column name="first" not-null="true" index="bar_idx" length="20"/&gt;
    &lt;column name="initial"/&gt;
&lt;/property&gt;</pre><p>
                <tt class="literal">default</tt>&#23646;&#24615;&#20026;&#23383;&#27573;&#25351;&#23450;&#19968;&#20010;&#40664;&#35748;&#20540; (&#22312;&#20445;&#23384;&#34987;&#26144;&#23556;&#30340;&#31867;&#30340;&#26032;&#23454;&#20363;&#20043;&#21069;&#65292;&#20320;&#24212;&#35813;&#23558;&#21516;&#26679;&#30340;&#20540;&#36171;&#20110;&#23545;&#24212;&#30340;&#23646;&#24615;)&#12290;
            </p><pre class="programlisting">&lt;property name="credits" type="integer" insert="false"&gt;
    &lt;column name="credits" default="10"/&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;version name="version" type="integer" insert="false"&gt;
    &lt;column name="version" default="0"/&gt;
&lt;/property&gt;</pre><p>
                <tt class="literal">sql-type</tt>&#23646;&#24615;&#20801;&#35768;&#29992;&#25143;&#35206;&#30422;&#40664;&#35748;&#30340;Hibernate&#31867;&#22411;&#21040;SQL&#25968;&#25454;&#31867;&#22411;&#30340;&#26144;&#23556;&#12290;
            </p><pre class="programlisting">&lt;property name="balance" type="float"&gt;
    &lt;column name="balance" sql-type="decimal(13,3)"/&gt;
&lt;/property&gt;</pre><p>
                <tt class="literal">check</tt>&#23646;&#24615;&#20801;&#35768;&#29992;&#25143;&#25351;&#23450;&#19968;&#20010;&#32422;&#26463;&#26816;&#26597;&#12290;
            </p><pre class="programlisting">&lt;property name="foo" type="integer"&gt;
    &lt;column name="foo" check="foo &gt; 10"/&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;class name="Foo" table="foos" check="bar &lt; 100.0"&gt;
    ...
    &lt;property name="bar" type="float"/&gt;
&lt;/class&gt;</pre><div class="table"><a name="schemattributes-summary"></a><p class="title"><b>&#34920;&nbsp;20.1.&nbsp;Summary</b></p><table summary="Summary" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#23646;&#24615;(Attribute)</th><th>&#20540;&#65288;Values&#65289;</th><th>&#35299;&#37322;&#65288;Interpretation&#65289;</th></tr></thead><tbody><tr><td><tt class="literal">length</tt></td><td>&#25968;&#23383;</td><td>&#23383;&#27573;&#38271;&#24230;</td></tr><tr><td><tt class="literal">precision</tt></td><td>&#25968;&#23383;</td><td>&#31934;&#24230;(decimal precision)</td></tr><tr><td><tt class="literal">scale</tt></td><td>&#25968;&#23383;</td><td>&#23567;&#25968;&#28857;&#20301;&#25968;(decimal scale)</td></tr><tr><td><tt class="literal">not-null</tt></td><td><tt class="literal">true|false</tt></td><td>&#25351;&#26126;&#23383;&#27573;&#26159;&#21542;&#24212;&#35813;&#26159;&#38750;&#31354;&#30340;</td></tr><tr><td><tt class="literal">unique</tt></td><td><tt class="literal">true|false</tt></td><td>&#25351;&#26126;&#26159;&#21542;&#35813;&#23383;&#27573;&#20855;&#26377;&#24799;&#19968;&#32422;&#26463;</td></tr><tr><td><tt class="literal">index</tt></td><td><tt class="literal">index_name</tt></td><td>&#25351;&#26126;&#19968;&#20010;&#65288;&#22810;&#23383;&#27573;&#65289;&#30340;&#32034;&#24341;(index)&#30340;&#21517;&#23383;</td></tr><tr><td><tt class="literal">unique-key</tt></td><td><tt class="literal">unique_key_name</tt></td><td>&#25351;&#26126;&#22810;&#23383;&#27573;&#24799;&#19968;&#32422;&#26463;&#30340;&#21517;&#23383;&#65288;&#21442;&#35265;&#19978;&#38754;&#30340;&#35828;&#26126;&#65289;</td></tr><tr><td><tt class="literal">foreign-key</tt></td><td><tt class="literal">foreign_key_name</tt></td><td>
                                                                specifies the name of the foreign key constraint generated
                                for an association, for a <tt class="literal">&lt;one-to-one&gt;</tt>, 
                                <tt class="literal">&lt;many-to-one&gt;</tt>, <tt class="literal">&lt;key&gt;</tt>, 
                                or <tt class="literal">&lt;many-to-many&gt;</tt> mapping element. Note that
                                <tt class="literal">inverse="true"</tt> sides will not be considered
                                by <tt class="literal">SchemaExport</tt>.
                                &#25351;&#26126;&#19968;&#20010;&#22806;&#38190;&#30340;&#21517;&#23383;&#65292;&#23427;&#26159;&#20026;&#20851;&#32852;&#29983;&#25104;&#30340;&#65292;&#25110;&#32773;<tt class="literal">&lt;one-to-one&gt;</tt>&#65292;<tt class="literal">&lt;many-to-one&gt;</tt>, <tt class="literal">&lt;key&gt;</tt>, &#25110;&#32773;<tt class="literal">&lt;many-to-many&gt;</tt>&#26144;&#23556;&#20803;&#32032;&#12290;&#27880;&#24847;<tt class="literal">inverse="true"</tt>&#22312;<tt class="literal">SchemaExport</tt>&#26102;&#20250;&#34987;&#24573;&#30053;&#12290;

                            </td></tr><tr><td><tt class="literal">sql-type</tt></td><td><tt class="literal">SQL &#23383;&#27573;&#31867;&#22411;</tt></td><td>
                                &#35206;&#30422;&#40664;&#35748;&#30340;&#23383;&#27573;&#31867;&#22411;(&#21482;&#33021;&#29992;&#20110;<tt class="literal">&lt;column&gt;</tt>&#23646;&#24615;&#65289;
                            </td></tr><tr><td><tt class="literal">default</tt></td><td>SQL&#34920;&#36798;&#24335;</td><td>
                                &#20026;&#23383;&#27573;&#25351;&#23450;&#40664;&#35748;&#20540;
                            </td></tr><tr><td><tt class="literal">check</tt></td><td>SQL &#34920;&#36798;&#24335;</td><td>
                            	&#23545;&#23383;&#27573;&#25110;&#34920;&#21152;&#20837;SQL&#32422;&#26463;&#26816;&#26597;
                            </td></tr></tbody></table></div><p>
                <tt class="literal">&lt;comment&gt;</tt>&#20803;&#32032;&#21487;&#20197;&#35753;&#20320;&#22312;&#29983;&#25104;&#30340;schema&#20013;&#21152;&#20837;&#27880;&#37322;&#12290;
            </p><pre class="programlisting">&lt;class name="Customer" table="CurCust"&gt;
    &lt;comment&gt;Current customers only&lt;/comment&gt;
    ...
&lt;/class&gt;</pre><pre class="programlisting">&lt;property name="balance"&gt;
    &lt;column name="bal"&gt;
        &lt;comment&gt;Balance in USD&lt;/comment&gt;
    &lt;/column&gt;
&lt;/property&gt;</pre><p>
                &#32467;&#26524;&#26159;&#22312;&#29983;&#25104;&#30340;DDL&#20013;&#21253;&#21547;<tt class="literal">comment on table</tt> &#25110;&#32773;
                <tt class="literal">comment on column</tt>&#35821;&#21477;(&#20551;&#33509;&#25903;&#25345;&#30340;&#35805;)&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-3"></a>20.1.2.&nbsp;&#36816;&#34892;&#35813;&#24037;&#20855;</h3></div></div><div></div></div><p>
                <tt class="literal">SchemaExport</tt>&#24037;&#20855;&#25226;DDL&#33050;&#26412;&#20889;&#21040;&#26631;&#20934;&#36755;&#20986;&#65292;&#21516;&#26102;/&#25110;&#32773;&#25191;&#34892;DDL&#35821;&#21477;&#12290;
            </p><p>
                <tt class="literal">java -cp </tt><span class="emphasis"><em>hibernate_classpaths</em></span>
                <tt class="literal">org.hibernate.tool.hbm2ddl.SchemaExport</tt> <span class="emphasis"><em>options mapping_files</em></span>
            </p><div class="table"><a name="d0e15398"></a><p class="title"><b>&#34920;&nbsp;20.2.&nbsp;<tt class="literal">SchemaExport</tt>&#21629;&#20196;&#34892;&#36873;&#39033;</b></p><table summary="SchemaExport&#21629;&#20196;&#34892;&#36873;&#39033;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36873;&#39033;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="literal">--quiet</tt></td><td>&#19981;&#35201;&#25226;&#33050;&#26412;&#36755;&#20986;&#21040;stdout</td></tr><tr><td><tt class="literal">--drop</tt></td><td>&#21482;&#36827;&#34892;drop tables&#30340;&#27493;&#39588;</td></tr><tr><td><tt class="literal">--create</tt></td><td>&#21482;&#21019;&#24314;&#34920;</td></tr><tr><td><tt class="literal">--text</tt></td><td>&#19981;&#25191;&#34892;&#22312;&#25968;&#25454;&#24211;&#20013;&#36816;&#34892;&#30340;&#27493;&#39588;</td></tr><tr><td><tt class="literal">--output=my_schema.ddl</tt></td><td>&#25226;&#36755;&#20986;&#30340;ddl&#33050;&#26412;&#36755;&#20986;&#21040;&#19968;&#20010;&#25991;&#20214;</td></tr><tr><td><tt class="literal">--naming=eg.MyNamingStrategy</tt></td><td>&#36873;&#25321;&#19968;&#20010;&#21629;&#21517;&#31574;&#30053;(<tt class="literal">NamingStrategy</tt>)</td></tr><tr><td><tt class="literal">--config=hibernate.cfg.xml</tt></td><td>&#20174;XML&#25991;&#20214;&#35835;&#20837;Hibernate&#37197;&#32622;</td></tr><tr><td><tt class="literal">--properties=hibernate.properties</tt></td><td>&#20174;&#25991;&#20214;&#35835;&#20837;&#25968;&#25454;&#24211;&#23646;&#24615;</td></tr><tr><td><tt class="literal">--format</tt></td><td>&#25226;&#33050;&#26412;&#20013;&#30340;SQL&#35821;&#21477;&#23545;&#40784;&#21644;&#32654;&#21270;</td></tr><tr><td><tt class="literal">--delimiter=;</tt></td><td>&#20026;&#33050;&#26412;&#35774;&#32622;&#34892;&#32467;&#26463;&#31526;</td></tr></tbody></table></div><p>
                &#20320;&#29978;&#33267;&#21487;&#20197;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#23884;&#20837;<tt class="literal">SchemaExport</tt>&#24037;&#20855;:
            </p><pre class="programlisting">Configuration cfg = ....;
new SchemaExport(cfg).create(false, true);</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-4"></a>20.1.3.&nbsp;&#23646;&#24615;(Properties)</h3></div></div><div></div></div><p>
                &#21487;&#20197;&#36890;&#36807;&#22914;&#19979;&#26041;&#24335;&#25351;&#23450;&#25968;&#25454;&#24211;&#23646;&#24615;:
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>&#36890;&#36807;<tt class="literal">-D</tt><span class="emphasis"><em>&lt;property&gt;</em></span>&#31995;&#32479;&#21442;&#25968;</p></li><li><p>&#22312;<tt class="literal">hibernate.properties</tt>&#25991;&#20214;&#20013;</p></li><li><p>&#20301;&#20110;&#19968;&#20010;&#20854;&#23427;&#21517;&#23383;&#30340;properties&#25991;&#20214;&#20013;,&#28982;&#21518;&#29992; <tt class="literal">--properties</tt>&#21442;&#25968;&#25351;&#23450;</p></li></ul></div><p>
                &#25152;&#38656;&#30340;&#21442;&#25968;&#21253;&#25324;:
            </p><div class="table"><a name="d0e15511"></a><p class="title"><b>&#34920;&nbsp;20.3.&nbsp;SchemaExport &#36830;&#25509;&#23646;&#24615;</b></p><table summary="SchemaExport &#36830;&#25509;&#23646;&#24615;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#23646;&#24615;&#21517;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="literal">hibernate.connection.driver_class</tt></td><td>jdbc driver class</td></tr><tr><td><tt class="literal">hibernate.connection.url</tt></td><td>jdbc url</td></tr><tr><td><tt class="literal">hibernate.connection.username</tt></td><td>database user</td></tr><tr><td><tt class="literal">hibernate.connection.password</tt></td><td>user password</td></tr><tr><td><tt class="literal">hibernate.dialect</tt></td><td>&#26041;&#35328;(dialect)</td></tr></tbody></table></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-5"></a>20.1.4.&nbsp;&#20351;&#29992;Ant(Using Ant)</h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#22312;&#20320;&#30340;Ant build&#33050;&#26412;&#20013;&#35843;&#29992;<tt class="literal">SchemaExport</tt>:
            </p><pre class="programlisting">&lt;target name="schemaexport"&gt;
    &lt;taskdef name="schemaexport"
        classname="org.hibernate.tool.hbm2ddl.SchemaExportTask"
        classpathref="class.path"/&gt;
    
    &lt;schemaexport
        properties="hibernate.properties"
        quiet="no"
        text="no"
        drop="no"
        delimiter=";"
        output="schema-export.sql"&gt;
        &lt;fileset dir="src"&gt;
            &lt;include name="**/*.hbm.xml"/&gt;
        &lt;/fileset&gt;
    &lt;/schemaexport&gt;
&lt;/target&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-6"></a>20.1.5.&nbsp;&#23545;schema&#30340;&#22686;&#37327;&#26356;&#26032;(Incremental schema updates)</h3></div></div><div></div></div><p>
                <tt class="literal">SchemaUpdate</tt>&#24037;&#20855;&#23545;&#24050;&#23384;&#22312;&#30340;schema&#37319;&#29992;"&#22686;&#37327;"&#26041;&#24335;&#36827;&#34892;&#26356;&#26032;&#12290;&#27880;&#24847;<tt class="literal">SchemaUpdate</tt>&#20005;&#37325;&#20381;&#36182;&#20110;JDBC metadata API,&#25152;&#20197;&#23427;&#24182;&#38750;&#23545;&#25152;&#26377;JDBC&#39537;&#21160;&#37117;&#26377;&#25928;&#12290;
            </p><p>
                <tt class="literal">java -cp </tt><span class="emphasis"><em>hibernate_classpaths</em></span>
                <tt class="literal">org.hibernate.tool.hbm2ddl.SchemaUpdate</tt> <span class="emphasis"><em>options mapping_files</em></span>
            </p><div class="table"><a name="d0e15588"></a><p class="title"><b>&#34920;&nbsp;20.4.&nbsp;<tt class="literal">SchemaUpdate</tt>&#21629;&#20196;&#34892;&#36873;&#39033;</b></p><table summary="SchemaUpdate&#21629;&#20196;&#34892;&#36873;&#39033;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36873;&#39033;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="literal">--quiet</tt></td><td>&#19981;&#35201;&#25226;&#33050;&#26412;&#36755;&#20986;&#21040;stdout</td></tr><tr><td><tt class="literal">--text</tt></td><td>&#19981;&#25226;&#33050;&#26412;&#36755;&#20986;&#21040;&#25968;&#25454;&#24211;</td></tr><tr><td><tt class="literal">--naming=eg.MyNamingStrategy</tt></td><td>&#36873;&#25321;&#19968;&#20010;&#21629;&#21517;&#31574;&#30053; (<tt class="literal">NamingStrategy</tt>)</td></tr><tr><td><tt class="literal">--properties=hibernate.properties</tt></td><td>&#20174;&#25351;&#23450;&#25991;&#20214;&#35835;&#20837;&#25968;&#25454;&#24211;&#23646;&#24615;</td></tr><tr><td><tt class="literal">--config=hibernate.cfg.xml</tt></td><td>&#25351;&#23450;&#19968;&#20010; <tt class="literal">.cfg.xml</tt>&#25991;&#20214;</td></tr></tbody></table></div><p>
                &#20320;&#21487;&#20197;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#23884;&#20837;<tt class="literal">SchemaUpdate</tt>&#24037;&#20855;:
            </p><pre class="programlisting">Configuration cfg = ....;
new SchemaUpdate(cfg).execute(false);</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-7"></a>20.1.6.&nbsp;&#29992;Ant&#26469;&#22686;&#37327;&#26356;&#26032;schema(Using Ant for incremental schema updates)</h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#22312;Ant&#33050;&#26412;&#20013;&#35843;&#29992;<tt class="literal">SchemaUpdate</tt>&#65306;
            </p><pre class="programlisting">&lt;target name="schemaupdate"&gt;
    &lt;taskdef name="schemaupdate"
        classname="org.hibernate.tool.hbm2ddl.SchemaUpdateTask"
        classpathref="class.path"/&gt;
    
    &lt;schemaupdate
        properties="hibernate.properties"
        quiet="no"&gt;
        &lt;fileset dir="src"&gt;
            &lt;include name="**/*.hbm.xml"/&gt;
        &lt;/fileset&gt;
    &lt;/schemaupdate&gt;
&lt;/target&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-8"></a>20.1.7.&nbsp;Schema &#26657;&#39564;</h3></div></div><div></div></div><p>
                <tt class="literal">SchemaValidator</tt>&#24037;&#20855;&#20250;&#27604;&#36739;&#25968;&#25454;&#24211;&#29616;&#29366;&#26159;&#21542;&#19982;&#26144;&#23556;&#25991;&#26723;&#8220;&#21305;&#37197;&#8221;&#12290;&#27880;&#24847;&#65292;<tt class="literal">SchemaValidator</tt> &#20005;&#37325;&#20381;&#36182;&#20110;JDBC&#30340;metadata API&#65292;&#22240;&#27492;&#19981;&#26159;&#23545;&#25152;&#26377;&#30340;JDBC&#39537;&#21160;&#37117;&#36866;&#29992;&#12290;&#36825;&#19968;&#24037;&#20855;&#22312;&#27979;&#35797;&#30340;&#26102;&#20505;&#29305;&#21035;&#26377;&#29992;&#12290;
            </p><p>
                <tt class="literal">java -cp </tt><span class="emphasis"><em>hibernate_classpaths</em></span>
                <tt class="literal">org.hibernate.tool.hbm2ddl.SchemaValidator</tt> <span class="emphasis"><em>options mapping_files</em></span>
            </p><div class="table"><a name="d0e15680"></a><p class="title"><b>&#34920;&nbsp;20.5.&nbsp;<tt class="literal">SchemaValidator</tt>&#21629;&#20196;&#34892;&#21442;&#25968;</b></p><table summary="SchemaValidator&#21629;&#20196;&#34892;&#21442;&#25968;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36873;&#39033;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="literal">--naming=eg.MyNamingStrategy</tt></td><td>&#36873;&#25321;&#19968;&#20010;&#21629;&#21517;&#31574;&#30053; (<tt class="literal">NamingStrategy</tt>)</td></tr><tr><td><tt class="literal">--properties=hibernate.properties</tt></td><td>&#20174;&#25991;&#20214;&#20013;&#35835;&#21462;&#25968;&#25454;&#24211;&#23646;&#24615;</td></tr><tr><td><tt class="literal">--config=hibernate.cfg.xml</tt></td><td>&#25351;&#23450;&#19968;&#20010;<tt class="literal">.cfg.xml</tt>&#25991;&#20214;</td></tr></tbody></table></div><p>
               &#20320;&#21487;&#20197;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#23884;&#20837;<tt class="literal">SchemaValidator</tt>&#65306;
            </p><pre class="programlisting">Configuration cfg = ....;
new SchemaValidator(cfg).validate();</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-9"></a>20.1.8.&nbsp;&#20351;&#29992;Ant&#36827;&#34892;schema&#26657;&#39564;</h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#22312;Ant&#33050;&#26412;&#20013;&#35843;&#29992;<tt class="literal">SchemaValidator</tt>:
            </p><pre class="programlisting">&lt;target name="schemavalidate"&gt;
    &lt;taskdef name="schemavalidator"
        classname="org.hibernate.tool.hbm2ddl.SchemaValidatorTask"
        classpathref="class.path"/&gt;
    
    &lt;schemavalidator
        properties="hibernate.properties"&gt;
        &lt;fileset dir="src"&gt;
            &lt;include name="**/*.hbm.xml"/&gt;
        &lt;/fileset&gt;
    &lt;/schemaupdate&gt;
&lt;/target&gt;</pre></div></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="example-parentchild"></a>&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)</h2></div></div><div></div></div><p>
    &#21018;&#21018;&#25509;&#35302;Hibernate&#30340;&#20154;&#22823;&#22810;&#26159;&#20174;&#29238;&#23376;&#20851;&#31995;&#65288;parent / child type relationship&#65289;&#30340;&#24314;&#27169;&#20837;&#25163;&#30340;&#12290;&#29238;&#23376;&#20851;&#31995;&#30340;&#24314;&#27169;&#26377;&#20004;&#31181;&#26041;&#27861;&#12290;&#30001;&#20110;&#31181;&#31181;&#21407;&#22240;&#65292;&#26368;&#26041;&#20415;&#30340;&#26041;&#27861;&#26159;&#25226;<tt class="literal">Parent</tt>&#21644;<tt class="literal">Child</tt>&#37117;&#24314;&#27169;&#25104;&#23454;&#20307;&#31867;&#65292;&#24182;&#21019;&#24314;&#19968;&#20010;&#20174;<tt class="literal">Parent</tt>&#25351;&#21521;<tt class="literal">Child</tt>&#30340;&lt;one-to-many&gt;&#20851;&#32852;&#65292;&#23545;&#26032;&#25163;&#26469;&#35828;&#23588;&#20854;&#22914;&#27492;&#12290;&#36824;&#26377;&#19968;&#31181;&#26041;&#27861;&#65292;&#23601;&#26159;&#23558;<tt class="literal">Child</tt>&#22768;&#26126;&#20026;&#19968;&#20010;<tt class="literal">&lt;composite-element&gt;</tt>&#65288;&#32452;&#21512;&#20803;&#32032;&#65289;&#12290; &#20107;&#23454;&#19978;&#22312;Hibernate&#20013;one to many&#20851;&#32852;&#30340;&#40664;&#35748;&#35821;&#20041;&#36828;&#27809;&#26377;composite element&#36148;&#36817;parent / child&#20851;&#31995;&#30340;&#36890;&#24120;&#35821;&#20041;&#12290;&#19979;&#38754;&#25105;&#20204;&#20250;&#38416;&#36848;&#22914;&#20309;&#20351;&#29992;<span class="emphasis"><em>&#24102;&#26377;&#32423;&#32852;&#30340;&#21452;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;(bidirectional one to many association with cascades)</em></span>&#21435;&#24314;&#31435;&#26377;&#25928;&#12289;&#20248;&#32654;&#30340;parent / child&#20851;&#31995;&#12290;&#36825;&#19968;&#28857;&#20063;&#19981;&#38590;&#65281;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-parentchild-collections"></a>21.1.&nbsp;&#20851;&#20110;collections&#38656;&#35201;&#27880;&#24847;&#30340;&#19968;&#28857;</h2></div></div><div></div></div><p>    
        Hibernate collections&#34987;&#24403;&#20316;&#20854;&#25152;&#23646;&#23454;&#20307;&#32780;&#19981;&#26159;&#20854;&#21253;&#21547;&#23454;&#20307;&#30340;&#19968;&#20010;&#36923;&#36753;&#37096;&#20998;&#12290;&#36825;&#38750;&#24120;&#37325;&#35201;&#65281;&#23427;&#20027;&#35201;&#20307;&#29616;&#20026;&#20197;&#19979;&#20960;&#28857;&#65306;
    </p><div class="itemizedlist"><ul type="disc"><li><p>
            &#24403;&#21024;&#38500;&#25110;&#22686;&#21152;collection&#20013;&#23545;&#35937;&#30340;&#26102;&#20505;&#65292;collection&#25152;&#23646;&#32773;&#30340;&#29256;&#26412;&#20540;&#20250;&#36882;&#22686;&#12290;
        </p></li><li><p>
	    &#22914;&#26524;&#19968;&#20010;&#20174;collection&#20013;&#31227;&#38500;&#30340;&#23545;&#35937;&#26159;&#19968;&#20010;&#20540;&#31867;&#22411;(value type)&#30340;&#23454;&#20363;&#65292;&#27604;&#22914;composite element&#65292;&#37027;&#20040;&#36825;&#20010;&#23545;&#35937;&#30340;&#25345;&#20037;&#21270;&#29366;&#24577;&#23558;&#20250;&#32456;&#27490;&#65292;&#20854;&#22312;&#25968;&#25454;&#24211;&#20013;&#23545;&#24212;&#30340;&#35760;&#24405;&#20250;&#34987;&#21024;&#38500;&#12290;&#21516;&#26679;&#30340;&#65292;&#21521;collection&#22686;&#21152;&#19968;&#20010;value type&#30340;&#23454;&#20363;&#23558;&#20250;&#20351;&#20043;&#31435;&#21363;&#34987;&#25345;&#20037;&#21270;&#12290;
        </p></li><li><p>
            &#21478;&#19968;&#26041;&#38754;&#65292;&#22914;&#26524;&#20174;&#19968;&#23545;&#22810;&#25110;&#22810;&#23545;&#22810;&#20851;&#32852;&#30340;collection&#20013;&#31227;&#38500;&#19968;&#20010;&#23454;&#20307;&#65292;&#22312;&#32570;&#30465;&#24773;&#20917;&#19979;&#36825;&#20010;&#23545;&#35937;&#24182;&#19981;&#20250;&#34987;&#21024;&#38500;&#12290;&#36825;&#20010;&#34892;&#20026;&#26159;&#23436;&#20840;&#21512;&#20046;&#36923;&#36753;&#30340;&#65293;&#65293;&#25913;&#21464;&#19968;&#20010;&#23454;&#20307;&#30340;&#20869;&#37096;&#29366;&#24577;&#19981;&#24212;&#35813;&#20351;&#19982;&#23427;&#20851;&#32852;&#30340;&#23454;&#20307;&#28040;&#22833;&#25481;&#65281;&#21516;&#26679;&#30340;&#65292;&#21521;collection&#22686;&#21152;&#19968;&#20010;&#23454;&#20307;&#19981;&#20250;&#20351;&#20043;&#34987;&#25345;&#20037;&#21270;&#12290;
        </p></li></ul></div><p>
        &#23454;&#38469;&#19978;&#65292;&#21521;Collection&#22686;&#21152;&#19968;&#20010;&#23454;&#20307;&#30340;&#32570;&#30465;&#21160;&#20316;&#21482;&#26159;&#22312;&#20004;&#20010;&#23454;&#20307;&#20043;&#38388;&#21019;&#24314;&#19968;&#20010;&#36830;&#25509;&#32780;&#24050;&#65292;&#21516;&#26679;&#31227;&#38500;&#30340;&#26102;&#20505;&#20063;&#21482;&#26159;&#21024;&#38500;&#36830;&#25509;&#12290;&#36825;&#31181;&#22788;&#29702;&#23545;&#20110;&#25152;&#26377;&#30340;&#24773;&#20917;&#37117;&#26159;&#21512;&#36866;&#30340;&#12290;&#23545;&#20110;&#29238;&#23376;&#20851;&#31995;&#21017;&#26159;&#23436;&#20840;&#19981;&#36866;&#21512;&#30340;&#65292;&#22312;&#36825;&#31181;&#20851;&#31995;&#19979;&#65292;&#23376;&#23545;&#35937;&#30340;&#29983;&#23384;&#32465;&#23450;&#20110;&#29238;&#23545;&#35937;&#30340;&#29983;&#23384;&#21608;&#26399;&#12290;
    </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-parentchild-bidir"></a>21.2.&nbsp;&#21452;&#21521;&#30340;&#19968;&#23545;&#22810;&#20851;&#31995;(Bidirectional one-to-many)</h2></div></div><div></div></div><p>
        &#20551;&#35774;&#25105;&#20204;&#35201;&#23454;&#29616;&#19968;&#20010;&#31616;&#21333;&#30340;&#20174;Parent&#21040;Child&#30340;&lt;one-to-many&gt;&#20851;&#32852;&#12290;
    </p><pre class="programlisting">&lt;set name="children"&gt;
    &lt;key column="parent_id"/&gt;
    &lt;one-to-many class="Child"/&gt;
&lt;/set&gt;</pre><p>
        &#22914;&#26524;&#25105;&#20204;&#36816;&#34892;&#19979;&#38754;&#30340;&#20195;&#30721;
    </p><pre class="programlisting">Parent p = .....;
Child c = new Child();
p.getChildren().add(c);
session.save(c);
session.flush();</pre><p>
        Hibernate&#20250;&#20135;&#29983;&#20004;&#26465;SQL&#35821;&#21477;&#65306;
    </p><div class="itemizedlist"><ul type="disc"><li><p>&#19968;&#26465;<tt class="literal">INSERT</tt>&#35821;&#21477;&#65292;&#20026;<tt class="literal">c</tt>&#21019;&#24314;&#19968;&#26465;&#35760;&#24405;</p></li><li><p>
	    &#19968;&#26465;<tt class="literal">UPDATE</tt>&#35821;&#21477;&#65292;&#21019;&#24314;&#20174;<tt class="literal">p</tt>&#21040;<tt class="literal">c</tt>&#30340;&#36830;&#25509;
        </p></li></ul></div><p>
        &#36825;&#26679;&#20570;&#19981;&#20165;&#25928;&#29575;&#20302;&#65292;&#32780;&#19988;&#36829;&#21453;&#20102;&#21015;<tt class="literal">parent_id</tt>&#38750;&#31354;&#30340;&#38480;&#21046;&#12290;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#22312;&#38598;&#21512;&#31867;&#26144;&#23556;&#19978;&#25351;&#23450;<tt class="literal">not-null="true"</tt>&#26469;&#35299;&#20915;&#36829;&#21453;&#38750;&#31354;&#32422;&#26463;&#30340;&#38382;&#39064;&#65306;
    </p><pre class="programlisting">&lt;set name="children"&gt;
    &lt;key column="parent_id" not-null="true"/&gt;
    &lt;one-to-many class="Child"/&gt;
&lt;/set&gt;</pre><p>
    	&#28982;&#32780;&#65292;&#36825;&#24182;&#38750;&#26159;&#25512;&#33616;&#30340;&#35299;&#20915;&#26041;&#27861;&#12290;
   	</p><p>        &#36825;&#31181;&#29616;&#35937;&#30340;&#26681;&#26412;&#21407;&#22240;&#26159;&#20174;<tt class="literal">p</tt>&#21040;<tt class="literal">c</tt>&#30340;&#36830;&#25509;&#65288;&#22806;&#38190;parent_id&#65289;&#27809;&#26377;&#34987;&#24403;&#20316;<tt class="literal">Child</tt>&#23545;&#35937;&#29366;&#24577;&#30340;&#19968;&#37096;&#20998;&#65292;&#22240;&#32780;&#27809;&#26377;&#22312;INSERT&#35821;&#21477;&#20013;&#34987;&#21019;&#24314;&#12290;&#22240;&#27492;&#35299;&#20915;&#30340;&#21150;&#27861;&#23601;&#26159;&#25226;&#36825;&#20010;&#36830;&#25509;&#28155;&#21152;&#21040;Child&#30340;&#26144;&#23556;&#20013;&#12290;
    </p><pre class="programlisting">&lt;many-to-one name="parent" column="parent_id" not-null="true"/&gt;</pre><p>
        &#65288;&#25105;&#20204;&#36824;&#38656;&#35201;&#20026;&#31867;<tt class="literal">Child</tt>&#28155;&#21152;<tt class="literal">parent</tt>&#23646;&#24615;&#65289;
    </p><p>
        &#29616;&#22312;&#23454;&#20307;<tt class="literal">Child</tt>&#22312;&#31649;&#29702;&#36830;&#25509;&#30340;&#29366;&#24577;&#65292;&#20026;&#20102;&#20351;collection&#19981;&#26356;&#26032;&#36830;&#25509;&#65292;&#25105;&#20204;&#20351;&#29992;<tt class="literal">inverse</tt>&#23646;&#24615;&#12290;
    </p><pre class="programlisting">&lt;set name="children" inverse="true"&gt;
    &lt;key column="parent_id"/&gt;
    &lt;one-to-many class="Child"/&gt;
&lt;/set&gt;</pre><p>
        &#19979;&#38754;&#30340;&#20195;&#30721;&#26159;&#29992;&#26469;&#28155;&#21152;&#19968;&#20010;&#26032;&#30340;<tt class="literal">Child</tt>
    </p><pre class="programlisting">Parent p = (Parent) session.load(Parent.class, pid);
Child c = new Child();
c.setParent(p);
p.getChildren().add(c);
session.save(c);
session.flush();</pre><p>
        &#29616;&#22312;&#65292;&#21482;&#20250;&#26377;&#19968;&#26465;<tt class="literal">INSERT</tt>&#35821;&#21477;&#34987;&#25191;&#34892;&#65281;
    </p><p>
        &#20026;&#20102;&#35753;&#20107;&#24773;&#21464;&#24471;&#20117;&#20117;&#26377;&#26465;&#65292;&#21487;&#20197;&#20026;<tt class="literal">Parent</tt>&#21152;&#19968;&#20010;<tt class="literal">addChild()</tt>&#26041;&#27861;&#12290;
    </p><pre class="programlisting">public void addChild(Child c) {
    c.setParent(this);
    children.add(c);
}</pre><p>
        &#29616;&#22312;&#65292;&#28155;&#21152;<tt class="literal">Child</tt>&#30340;&#20195;&#30721;&#23601;&#26159;&#36825;&#26679;
    </p><pre class="programlisting">Parent p = (Parent) session.load(Parent.class, pid);
Child c = new Child();
p.addChild(c);
session.save(c);
session.flush();</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-parentchild-cascades"></a>21.3.&nbsp;&#32423;&#32852;&#29983;&#21629;&#21608;&#26399;&#65288;Cascading lifecycle&#65289;</h2></div></div><div></div></div><p>
	&#38656;&#35201;&#26174;&#24335;&#35843;&#29992;<tt class="literal">save()</tt>&#20173;&#28982;&#24456;&#40635;&#28902;&#65292;&#25105;&#20204;&#21487;&#20197;&#29992;&#32423;&#32852;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#12290;
     </p><pre class="programlisting">&lt;set name="children" inverse="true" cascade="all"&gt;
    &lt;key column="parent_id"/&gt;
    &lt;one-to-many class="Child"/&gt;
&lt;/set&gt;</pre><p>
         &#36825;&#26679;&#19978;&#38754;&#30340;&#20195;&#30721;&#21487;&#20197;&#31616;&#21270;&#20026;&#65306;
     </p><pre class="programlisting">Parent p = (Parent) session.load(Parent.class, pid);
Child c = new Child();
p.addChild(c);
session.flush();</pre><p>
         &#21516;&#26679;&#30340;&#65292;&#20445;&#23384;&#25110;&#21024;&#38500;<tt class="literal">Parent</tt>&#23545;&#35937;&#30340;&#26102;&#20505;&#24182;&#19981;&#38656;&#35201;&#36941;&#21382;&#20854;&#23376;&#23545;&#35937;&#12290;
         &#19979;&#38754;&#30340;&#20195;&#30721;&#20250;&#21024;&#38500;&#23545;&#35937;<tt class="literal">p</tt>&#21450;&#20854;&#25152;&#26377;&#23376;&#23545;&#35937;&#23545;&#24212;&#30340;&#25968;&#25454;&#24211;&#35760;&#24405;&#12290;
     </p><pre class="programlisting">Parent p = (Parent) session.load(Parent.class, pid);
session.delete(p);
session.flush();</pre><p>
         &#28982;&#32780;&#65292;&#36825;&#27573;&#20195;&#30721;
     </p><pre class="programlisting">Parent p = (Parent) session.load(Parent.class, pid);
Child c = (Child) p.getChildren().iterator().next();
p.getChildren().remove(c);
c.setParent(null);
session.flush();</pre><p>
         &#19981;&#20250;&#20174;&#25968;&#25454;&#24211;&#21024;&#38500;<tt class="literal">c</tt>&#65307;&#23427;&#21482;&#20250;&#21024;&#38500;&#19982;<tt class="literal">p</tt>&#20043;&#38388;&#30340;&#36830;&#25509;&#65288;&#24182;&#19988;&#20250;&#23548;&#33268;&#36829;&#21453;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#65292;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65289;&#12290;&#20320;&#38656;&#35201;&#26174;&#24335;&#35843;&#29992;<tt class="literal">delete()</tt>&#26469;&#21024;&#38500;<tt class="literal">Child</tt>&#12290; 
     </p><pre class="programlisting">Parent p = (Parent) session.load(Parent.class, pid);
Child c = (Child) p.getChildren().iterator().next();
p.getChildren().remove(c);
session.delete(c);
session.flush();</pre><p>
         &#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#20013;&#65292;&#22914;&#26524;&#27809;&#26377;&#29238;&#23545;&#35937;&#65292;&#23376;&#23545;&#35937;&#23601;&#19981;&#24212;&#35813;&#23384;&#22312;&#65292;&#22914;&#26524;&#23558;&#23376;&#23545;&#35937;&#20174;collection&#20013;&#31227;&#38500;&#65292;&#23454;&#38469;&#19978;&#25105;&#20204;&#26159;&#24819;&#21024;&#38500;&#23427;&#12290;&#35201;&#23454;&#29616;&#36825;&#31181;&#35201;&#27714;&#65292;&#23601;&#24517;&#39035;&#20351;&#29992;<tt class="literal">cascade="all-delete-orphan"</tt>&#12290;
     </p><pre class="programlisting">&lt;set name="children" inverse="true" cascade="all-delete-orphan"&gt;
    &lt;key column="parent_id"/&gt;
    &lt;one-to-many class="Child"/&gt;
&lt;/set&gt;</pre><p>
         &#27880;&#24847;&#65306;&#21363;&#20351;&#22312;collection&#19968;&#26041;&#30340;&#26144;&#23556;&#20013;&#25351;&#23450;<tt class="literal">inverse="true"</tt>&#65292;&#32423;&#32852;&#20173;&#28982;&#26159;&#36890;&#36807;&#36941;&#21382;collection&#20013;&#30340;&#20803;&#32032;&#26469;&#22788;&#29702;&#30340;&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;&#36890;&#36807;&#32423;&#32852;&#36827;&#34892;&#23376;&#23545;&#35937;&#30340;&#25554;&#20837;&#12289;&#21024;&#38500;&#12289;&#26356;&#26032;&#25805;&#20316;&#65292;&#23601;&#24517;&#39035;&#25226;&#23427;&#21152;&#21040;collection&#20013;&#65292;&#21482;&#35843;&#29992;<tt class="literal">setParent()</tt>&#26159;&#19981;&#22815;&#30340;&#12290;
     </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-parentchild-update"></a>21.4.&nbsp;&#32423;&#32852;&#19982;<tt class="literal">&#26410;&#20445;&#23384;&#20540;</tt>&#65288;Cascades and <tt class="literal">unsaved-value</tt>&#65289;</h2></div></div><div></div></div><p>
         &#20551;&#35774;&#25105;&#20204;&#20174;<tt class="literal">Session</tt>&#20013;&#35013;&#20837;&#20102;&#19968;&#20010;<tt class="literal">Parent</tt>&#23545;&#35937;&#65292;&#29992;&#25143;&#30028;&#38754;&#23545;&#20854;&#36827;&#34892;&#20102;&#20462;&#25913;&#65292;&#28982;&#21518;&#24076;&#26395;&#22312;&#19968;&#20010;&#26032;&#30340;Session&#37324;&#38754;&#35843;&#29992;<tt class="literal">update()</tt>&#26469;&#20445;&#23384;&#36825;&#20123;&#20462;&#25913;&#12290;&#23545;&#35937;<tt class="literal">Parent</tt>&#21253;&#21547;&#20102;&#23376;&#23545;&#35937;&#30340;&#38598;&#21512;&#65292;&#30001;&#20110;&#25171;&#24320;&#20102;&#32423;&#32852;&#26356;&#26032;&#65292;Hibernate&#38656;&#35201;&#30693;&#36947;&#21738;&#20123;Child&#23545;&#35937;&#26159;&#26032;&#23454;&#20363;&#21270;&#30340;&#65292;&#21738;&#20123;&#20195;&#34920;&#25968;&#25454;&#24211;&#20013;&#24050;&#32463;&#23384;&#22312;&#30340;&#35760;&#24405;&#12290;&#25105;&#20204;&#20551;&#35774;<tt class="literal">Parent</tt>&#21644;<tt class="literal">Child</tt>&#23545;&#35937;&#30340;&#26631;&#35782;&#23646;&#24615;&#37117;&#26159;&#33258;&#21160;&#29983;&#25104;&#30340;&#65292;&#31867;&#22411;&#20026;<tt class="literal">java.lang.Long</tt>&#12290;Hibernate&#20250;&#20351;&#29992;&#26631;&#35782;&#23646;&#24615;&#30340;&#20540;&#65292;&#21644;version &#25110; timestamp &#23646;&#24615;&#65292;&#26469;&#21028;&#26029;&#21738;&#20123;&#23376;&#23545;&#35937;&#26159;&#26032;&#30340;&#12290;(&#21442;&#35265;<a href="#objectstate-saveorupdate" title="10.7.&nbsp;&#33258;&#21160;&#29366;&#24577;&#26816;&#27979;">&#31532;&nbsp;10.7&nbsp;&#33410; &#8220;&#33258;&#21160;&#29366;&#24577;&#26816;&#27979;&#8221;</a>.) <span class="emphasis"><em>&#22312; Hibernate3 &#20013;,&#26174;&#24335;&#25351;&#23450;<tt class="literal">unsaved-value</tt>&#19981;&#20877;&#26159;&#24517;&#39035;&#30340;&#20102;&#12290;</em></span>
     </p><p>
         &#19979;&#38754;&#30340;&#20195;&#30721;&#20250;&#26356;&#26032;<tt class="literal">parent</tt>&#21644;<tt class="literal">child</tt>&#23545;&#35937;&#65292;&#24182;&#19988;&#25554;&#20837;<tt class="literal">newChild</tt>&#23545;&#35937;&#12290;
     </p><pre class="programlisting">//parent and child were both loaded in a previous session
parent.addChild(child);
Child newChild = new Child();
parent.addChild(newChild);
session.update(parent);
session.flush();</pre><p>
             Well, that's all very well for the case of a generated identifier, but what about assigned identifiers
             and composite identifiers? This is more difficult, since Hibernate can't use the identifier property to
             distinguish between a newly instantiated object (with an identifier assigned by the user) and an 
             object loaded in a previous session. In this case, Hibernate will either use the timestamp or version 
             property, or will actually query the second-level cache or, worst case, the database, to see if the 
             row exists.
         </p><p>
         &#36825;&#23545;&#20110;&#33258;&#21160;&#29983;&#25104;&#26631;&#35782;&#30340;&#24773;&#20917;&#26159;&#38750;&#24120;&#22909;&#30340;&#65292;&#20294;&#26159;&#33258;&#20998;&#37197;&#30340;&#26631;&#35782;&#21644;&#22797;&#21512;&#26631;&#35782;&#24590;&#20040;&#21150;&#21602;&#65311;&#36825;&#26159;&#26377;&#28857;&#40635;&#28902;&#65292;&#22240;&#20026;Hibernate&#27809;&#26377;&#21150;&#27861;&#21306;&#20998;&#26032;&#23454;&#20363;&#21270;&#30340;&#23545;&#35937;&#65288;&#26631;&#35782;&#34987;&#29992;&#25143;&#25351;&#23450;&#20102;&#65289;&#21644;&#21069;&#19968;&#20010;Session&#35013;&#20837;&#30340;&#23545;&#35937;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;Hibernate&#20250;&#20351;&#29992;timestamp&#25110;version&#23646;&#24615;&#65292;&#25110;&#32773;&#26597;&#35810;&#31532;&#20108;&#32423;&#32531;&#23384;&#65292;&#25110;&#32773;&#26368;&#22351;&#30340;&#24773;&#20917;&#65292;&#26597;&#35810;&#25968;&#25454;&#24211;&#65292;&#26469;&#30830;&#35748;&#26159;&#21542;&#27492;&#34892;&#23384;&#22312;&#12290;</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-parentchild-conclusion"></a>21.5.&nbsp;&#32467;&#35770;</h2></div></div><div></div></div><p>         &#36825;&#37324;&#26377;&#19981;&#23569;&#19996;&#35199;&#38656;&#35201;&#34701;&#20250;&#36143;&#36890;&#65292;&#21487;&#33021;&#20250;&#35753;&#26032;&#25163;&#24863;&#21040;&#36855;&#24785;&#12290;&#20294;&#26159;&#22312;&#23454;&#36341;&#20013;&#23427;&#20204;&#37117;&#24037;&#20316;&#22320;&#38750;&#24120;&#22909;&#12290;&#22823;&#37096;&#20998;Hibernate&#24212;&#29992;&#31243;&#24207;&#37117;&#20250;&#32463;&#24120;&#29992;&#21040;&#29238;&#23376;&#23545;&#35937;&#27169;&#24335;&#12290;
     </p><p>
         &#22312;&#31532;&#19968;&#27573;&#20013;&#25105;&#20204;&#26366;&#32463;&#25552;&#21040;&#21478;&#19968;&#20010;&#26041;&#26696;&#12290;&#19978;&#38754;&#30340;&#36825;&#20123;&#38382;&#39064;&#37117;&#19981;&#20250;&#20986;&#29616;&#22312;<tt class="literal">&lt;composite-element&gt;</tt>&#26144;&#23556;&#20013;&#65292;&#23427;&#20934;&#30830;&#22320;&#34920;&#36798;&#20102;&#29238;&#23376;&#20851;&#31995;&#30340;&#35821;&#20041;&#12290;&#24456;&#19981;&#24184;&#22797;&#21512;&#20803;&#32032;&#36824;&#26377;&#20004;&#20010;&#37325;&#22823;&#38480;&#21046;:&#22797;&#21512;&#20803;&#32032;&#19981;&#33021;&#25317;&#26377;collections&#65292;&#24182;&#19988;&#65292;&#38500;&#20102;&#29992;&#20110;&#24799;&#19968;&#30340;&#29238;&#23545;&#35937;&#22806;&#65292;&#23427;&#20204;&#19981;&#33021;&#20877;&#20316;&#20026;&#20854;&#23427;&#20219;&#20309;&#23454;&#20307;&#30340;&#23376;&#23545;&#35937;&#12290;
     </p></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="example-weblog"></a>&#31532;&nbsp;22&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;Weblog &#24212;&#29992;&#31243;&#24207;</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-weblog-classes"></a>22.1.&nbsp;&#25345;&#20037;&#21270;&#31867;</h2></div></div><div></div></div><p>        	&#19979;&#38754;&#30340;&#25345;&#20037;&#21270;&#31867;&#34920;&#31034;&#19968;&#20010;weblog&#21644;&#22312;&#20854;&#20013;&#24352;&#36148;&#30340;&#19968;&#20010;&#36148;&#23376;&#12290;&#20182;&#20204;&#26159;&#26631;&#20934;&#30340;&#29238;/&#23376;&#20851;&#31995;&#27169;&#22411;&#65292;&#20294;&#26159;&#25105;&#20204;&#20250;&#29992;&#19968;&#20010;&#26377;&#24207;&#21253;&#65288;ordered bag)&#32780;&#38750;&#38598;&#21512;(set)&#12290;
        </p><pre class="programlisting">package eg;

import java.util.List;

public class Blog {
    private Long _id;
    private String _name;
    private List _items;

    public Long getId() {
        return _id;
    }
    public List getItems() {
        return _items;
    }
    public String getName() {
        return _name;
    }
    public void setId(Long long1) {
        _id = long1;
    }
    public void setItems(List list) {
        _items = list;
    }
    public void setName(String string) {
        _name = string;
    }
}</pre><pre class="programlisting">package eg;

import java.text.DateFormat;
import java.util.Calendar;

public class BlogItem {
    private Long _id;
    private Calendar _datetime;
    private String _text;
    private String _title;
    private Blog _blog;

    public Blog getBlog() {
        return _blog;
    }
    public Calendar getDatetime() {
        return _datetime;
    }
    public Long getId() {
        return _id;
    }
    public String getText() {
        return _text;
    }
    public String getTitle() {
        return _title;
    }
    public void setBlog(Blog blog) {
        _blog = blog;
    }
    public void setDatetime(Calendar calendar) {
        _datetime = calendar;
    }
    public void setId(Long long1) {
        _id = long1;
    }
    public void setText(String string) {
        _text = string;
    }
    public void setTitle(String string) {
        _title = string;
    }
}</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-weblog-mappings"></a>22.2.&nbsp;Hibernate &#26144;&#23556;</h2></div></div><div></div></div><p>
            &#19979;&#21015;&#30340;XML&#26144;&#23556;&#24212;&#35813;&#26159;&#24456;&#30452;&#30333;&#30340;&#12290;
        </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC 
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;
    &lt;class 
        name="Blog" 
        table="BLOGS" &gt;
        
        &lt;id 
            name="id" 
            column="BLOG_ID"&gt;
            
            &lt;generator class="native"/&gt;
            
        &lt;/id&gt;
        
        &lt;property 
            name="name" 
            column="NAME" 
            not-null="true" 
            unique="true"/&gt;
            
        &lt;bag 
            name="items" 
            inverse="true" 
            order-by="DATE_TIME" 
            cascade="all"&gt;
            
            &lt;key column="BLOG_ID"/&gt;
            &lt;one-to-many class="BlogItem"/&gt;
            
        &lt;/bag&gt;
        
    &lt;/class&gt;
    
&lt;/hibernate-mapping&gt;</pre><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC 
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;
    
    &lt;class 
        name="BlogItem" 
        table="BLOG_ITEMS" 
        dynamic-update="true"&gt;
        
        &lt;id 
            name="id" 
            column="BLOG_ITEM_ID"&gt;
            
            &lt;generator class="native"/&gt;
            
        &lt;/id&gt;
        
        &lt;property 
            name="title" 
            column="TITLE" 
            not-null="true"/&gt;
            
        &lt;property 
            name="text" 
            column="TEXT" 
            not-null="true"/&gt;
            
        &lt;property 
            name="datetime" 
            column="DATE_TIME" 
            not-null="true"/&gt;
            
        &lt;many-to-one 
            name="blog" 
            column="BLOG_ID" 
            not-null="true"/&gt;
            
    &lt;/class&gt;
    
&lt;/hibernate-mapping&gt;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-weblog-code"></a>22.3.&nbsp;Hibernate &#20195;&#30721;</h2></div></div><div></div></div><p>
            &#19979;&#38754;&#30340;&#31867;&#28436;&#31034;&#20102;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;Hibernate&#23545;&#36825;&#20123;&#31867;&#36827;&#34892;&#30340;&#19968;&#20123;&#25805;&#20316;&#12290;
        </p><pre class="programlisting">package eg;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.Iterator;
import java.util.List;

import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.tool.hbm2ddl.SchemaExport;

public class BlogMain {
    
    private SessionFactory _sessions;
    
    public void configure() throws HibernateException {
        _sessions = new Configuration()
            .addClass(Blog.class)
            .addClass(BlogItem.class)
            .buildSessionFactory();
    }
    
    public void exportTables() throws HibernateException {
        Configuration cfg = new Configuration()
            .addClass(Blog.class)
            .addClass(BlogItem.class);
        new SchemaExport(cfg).create(true, true);
    }
    
    public Blog createBlog(String name) throws HibernateException {
        
        Blog blog = new Blog();
        blog.setName(name);
        blog.setItems( new ArrayList() );
        
        Session session = _sessions.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.persist(blog);
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
        return blog;
    }
    
    public BlogItem createBlogItem(Blog blog, String title, String text)
                        throws HibernateException {
        
        BlogItem item = new BlogItem();
        item.setTitle(title);
        item.setText(text);
        item.setBlog(blog);
        item.setDatetime( Calendar.getInstance() );
        blog.getItems().add(item);
        
        Session session = _sessions.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.update(blog);
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
        return item;
    }
    
    public BlogItem createBlogItem(Long blogid, String title, String text)
                        throws HibernateException {
        
        BlogItem item = new BlogItem();
        item.setTitle(title);
        item.setText(text);
        item.setDatetime( Calendar.getInstance() );
        
        Session session = _sessions.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            Blog blog = (Blog) session.load(Blog.class, blogid);
            item.setBlog(blog);
            blog.getItems().add(item);
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
        return item;
    }
    
    public void updateBlogItem(BlogItem item, String text)
                    throws HibernateException {
        
        item.setText(text);
        
        Session session = _sessions.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.update(item);
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
    }
    
    public void updateBlogItem(Long itemid, String text)
                    throws HibernateException {
    
        Session session = _sessions.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            BlogItem item = (BlogItem) session.load(BlogItem.class, itemid);
            item.setText(text);
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
    }
    
    public List listAllBlogNamesAndItemCounts(int max)
                    throws HibernateException {
        
        Session session = _sessions.openSession();
        Transaction tx = null;
        List result = null;
        try {
            tx = session.beginTransaction();
            Query q = session.createQuery(
                "select blog.id, blog.name, count(blogItem) " +
                "from Blog as blog " +
                "left outer join blog.items as blogItem " +
                "group by blog.name, blog.id " +
                "order by max(blogItem.datetime)"
            );
            q.setMaxResults(max);
            result = q.list();
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
        return result;
    }
    
    public Blog getBlogAndAllItems(Long blogid)
                    throws HibernateException {
        
        Session session = _sessions.openSession();
        Transaction tx = null;
        Blog blog = null;
        try {
            tx = session.beginTransaction();
            Query q = session.createQuery(
                "from Blog as blog " +
                "left outer join fetch blog.items " +
                "where blog.id = :blogid"
            );
            q.setParameter("blogid", blogid);
            blog  = (Blog) q.uniqueResult();
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
        return blog;
    }
    
    public List listBlogsAndRecentItems() throws HibernateException {
        
        Session session = _sessions.openSession();
        Transaction tx = null;
        List result = null;
        try {
            tx = session.beginTransaction();
            Query q = session.createQuery(
                "from Blog as blog " +
                "inner join blog.items as blogItem " +
                "where blogItem.datetime &gt; :minDate"
            );

            Calendar cal = Calendar.getInstance();
            cal.roll(Calendar.MONTH, false);
            q.setCalendar("minDate", cal);
            
            result = q.list();
            tx.commit();
        }
        catch (HibernateException he) {
            if (tx!=null) tx.rollback();
            throw he;
        }
        finally {
            session.close();
        }
        return result;
    }
}</pre></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="example-mappings"></a>&#31532;&nbsp;23&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;&#22797;&#26434;&#26144;&#23556;&#23454;&#20363;</h2></div></div><div></div></div><p>
        &#26412;&#31456;&#23637;&#31034;&#20102;&#19968;&#20123;&#36739;&#20026;&#22797;&#26434;&#30340;&#20851;&#31995;&#26144;&#23556;&#12290;
    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-mappings-emp"></a>23.1.&nbsp;Employer&#65288;&#38599;&#20027;)/Employee(&#38599;&#21592;)</h2></div></div><div></div></div><p>
            &#19979;&#38754;&#20851;&#20110;<tt class="literal">Employer</tt> &#21644; <tt class="literal">Employee</tt>&#30340;&#20851;&#31995;&#27169;&#22411;&#20351;&#29992;&#20102;&#19968;&#20010;&#30495;&#23454;&#30340;&#23454;&#20307;&#31867;
            (<tt class="literal">Employment</tt>)&#26469;&#34920;&#36848;&#65292;&#36825;&#26159;&#22240;&#20026;&#23545;&#20110;&#30456;&#21516;&#30340;&#38599;&#21592;&#21644;&#38599;&#20027;&#21487;&#33021;&#20250;&#26377;&#22810;&#20010;&#38599;&#20323;&#26102;&#38388;&#27573;&#12290;
            &#23545;&#20110;&#37329;&#39069;&#21644;&#38599;&#21592;&#22995;&#21517;&#65292;&#29992;Components&#24314;&#27169;&#12290;
            
        </p><div class="mediaobject" align="center"><img src="../shared/images/EmployerEmployee.gif" align="middle"></div><p>
            &#26144;&#23556;&#25991;&#20214;&#21487;&#33021;&#26159;&#36825;&#26679;:
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
        
    &lt;class name="Employer" table="employers"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"&gt;
                &lt;param name="sequence"&gt;employer_id_seq&lt;/param&gt;
            &lt;/generator&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
    &lt;/class&gt;

    &lt;class name="Employment" table="employment_periods"&gt;

        &lt;id name="id"&gt;
            &lt;generator class="sequence"&gt;
                &lt;param name="sequence"&gt;employment_id_seq&lt;/param&gt;
            &lt;/generator&gt;
        &lt;/id&gt;
        &lt;property name="startDate" column="start_date"/&gt;
        &lt;property name="endDate" column="end_date"/&gt;

        &lt;component name="hourlyRate" class="MonetaryAmount"&gt;
            &lt;property name="amount"&gt;
                &lt;column name="hourly_rate" sql-type="NUMERIC(12, 2)"/&gt;
            &lt;/property&gt;
            &lt;property name="currency" length="12"/&gt;
        &lt;/component&gt;

        &lt;many-to-one name="employer" column="employer_id" not-null="true"/&gt;
        &lt;many-to-one name="employee" column="employee_id" not-null="true"/&gt;

    &lt;/class&gt;

    &lt;class name="Employee" table="employees"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"&gt;
                &lt;param name="sequence"&gt;employee_id_seq&lt;/param&gt;
            &lt;/generator&gt;
        &lt;/id&gt;
        &lt;property name="taxfileNumber"/&gt;
        &lt;component name="name" class="Name"&gt;
            &lt;property name="firstName"/&gt;
            &lt;property name="initial"/&gt;
            &lt;property name="lastName"/&gt;
        &lt;/component&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
        &#29992;<tt class="literal">SchemaExport</tt>&#29983;&#25104;&#34920;&#32467;&#26500;&#12290;
    </p><pre class="programlisting">create table employers (
    id BIGINT not null, 
    name VARCHAR(255), 
    primary key (id)
)

create table employment_periods (
    id BIGINT not null,
    hourly_rate NUMERIC(12, 2),
    currency VARCHAR(12), 
    employee_id BIGINT not null, 
    employer_id BIGINT not null, 
    end_date TIMESTAMP, 
    start_date TIMESTAMP, 
    primary key (id)
)

create table employees (
    id BIGINT not null, 
    firstName VARCHAR(255), 
    initial CHAR(1), 
    lastName VARCHAR(255), 
    taxfileNumber VARCHAR(255), 
    primary key (id)
)

alter table employment_periods 
    add constraint employment_periodsFK0 foreign key (employer_id) references employers
alter table employment_periods 
    add constraint employment_periodsFK1 foreign key (employee_id) references employees
create sequence employee_id_seq
create sequence employment_id_seq
create sequence employer_id_seq</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-mappings-authorwork"></a>23.2.&nbsp;Author(&#20316;&#23478;)/Work(&#20316;&#21697;)</h2></div></div><div></div></div><p>
            
            &#32771;&#34385;&#19979;&#38754;&#30340;<tt class="literal">Work</tt>,<tt class="literal">Author</tt> &#21644; <tt class="literal">Person</tt>&#27169;&#22411;&#30340;&#20851;&#31995;&#12290;
            &#25105;&#20204;&#29992;&#22810;&#23545;&#22810;&#20851;&#31995;&#26469;&#25551;&#36848;<tt class="literal">Work</tt> &#21644; <tt class="literal">Author</tt>&#65292;
            &#29992;&#19968;&#23545;&#19968;&#20851;&#31995;&#26469;&#25551;&#36848;<tt class="literal">Author</tt> &#21644; <tt class="literal">Person</tt>&#65292;
            &#21478;&#19968;&#31181;&#21487;&#33021;&#24615;&#26159;<tt class="literal">Author</tt>&#32487;&#25215;<tt class="literal">Person</tt>&#12290;
        </p><div class="mediaobject" align="center"><img src="../shared/images/AuthorWork.gif" align="middle"></div><p>
            &#19979;&#38754;&#30340;&#26144;&#23556;&#25991;&#20214;&#27491;&#30830;&#30340;&#25551;&#36848;&#20102;&#36825;&#20123;&#20851;&#31995;&#65306;
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="Work" table="works" discriminator-value="W"&gt;

        &lt;id name="id" column="id"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;discriminator column="type" type="character"/&gt;

        &lt;property name="title"/&gt;
        &lt;set name="authors" table="author_work"&gt;
            &lt;key column name="work_id"/&gt;
            &lt;many-to-many class="Author" column name="author_id"/&gt;
        &lt;/set&gt;

        &lt;subclass name="Book" discriminator-value="B"&gt;
            &lt;property name="text"/&gt;
        &lt;/subclass&gt;

        &lt;subclass name="Song" discriminator-value="S"&gt;
            &lt;property name="tempo"/&gt;
            &lt;property name="genre"/&gt;
        &lt;/subclass&gt;

    &lt;/class&gt;

    &lt;class name="Author" table="authors"&gt;

        &lt;id name="id" column="id"&gt;
            &lt;!-- The Author must have the same identifier as the Person --&gt;
            &lt;generator class="assigned"/&gt; 
        &lt;/id&gt;

        &lt;property name="alias"/&gt;
        &lt;one-to-one name="person" constrained="true"/&gt;

        &lt;set name="works" table="author_work" inverse="true"&gt;
            &lt;key column="author_id"/&gt;
            &lt;many-to-many class="Work" column="work_id"/&gt;
        &lt;/set&gt;

    &lt;/class&gt;

    &lt;class name="Person" table="persons"&gt;
        &lt;id name="id" column="id"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
        
        &#26144;&#23556;&#20013;&#26377;4&#20010;&#34920;&#12290;<tt class="literal">works</tt>, <tt class="literal">authors</tt> &#21644; <tt class="literal">persons</tt>
        &#20998;&#21035;&#20445;&#23384;&#30528;work&#65292;author&#21644;person&#30340;&#25968;&#25454;&#12290;<tt class="literal">author_work</tt>&#26159;authors&#21644;works&#30340;&#20851;&#32852;&#34920;&#12290;
        &#34920;&#32467;&#26500;&#26159;&#30001;<tt class="literal">SchemaExport</tt>&#29983;&#25104;&#30340;&#12290;
    </p><pre class="programlisting">create table works (
    id BIGINT not null generated by default as identity, 
    tempo FLOAT, 
    genre VARCHAR(255), 
    text INTEGER, 
    title VARCHAR(255), 
    type CHAR(1) not null, 
    primary key (id)
)

create table author_work (
    author_id BIGINT not null, 
    work_id BIGINT not null, 
    primary key (work_id, author_id)
)

create table authors (
    id BIGINT not null generated by default as identity, 
    alias VARCHAR(255), 
    primary key (id)
)

create table persons (
    id BIGINT not null generated by default as identity, 
    name VARCHAR(255), 
    primary key (id)
)

alter table authors 
    add constraint authorsFK0 foreign key (id) references persons
alter table author_work 
    add constraint author_workFK0 foreign key (author_id) references authors
alter table author_work
    add constraint author_workFK1 foreign key (work_id) references works</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="example-mappings-customerorderproduct"></a>23.3.&nbsp;Customer(&#23458;&#25143;)/Order(&#35746;&#21333;)/Product(&#20135;&#21697;)</h2></div></div><div></div></div><p>
            
            &#29616;&#22312;&#26469;&#32771;&#34385;<tt class="literal">Customer</tt>,<tt class="literal">Order</tt> &#65292; <tt class="literal">LineItem</tt>
            &#21644; <tt class="literal">Product</tt>&#20851;&#31995;&#30340;&#27169;&#22411;&#12290;<tt class="literal">Customer</tt> &#21644; <tt class="literal">Order</tt>&#20043;&#38388;
            &#26159;&#19968;&#23545;&#22810;&#30340;&#20851;&#31995;&#65292;&#20294;&#26159;&#25105;&#20204;&#24590;&#20040;&#26469;&#25551;&#36848;<tt class="literal">Order</tt> / <tt class="literal">LineItem</tt> / <tt class="literal">Product</tt>&#21602;&#65311;
            &#25105;&#21487;&#20197;&#25226;<tt class="literal">LineItem</tt>&#20316;&#20026;&#25551;&#36848;<tt class="literal">Order</tt> &#21644; <tt class="literal">Product</tt>
            &#22810;&#23545;&#22810;&#20851;&#31995;&#30340;&#20851;&#32852;&#31867;&#65292;&#22312;Hibernate&#65292;&#36825;&#21483;&#20570;&#32452;&#21512;&#20803;&#32032;&#12290;
        </p><div class="mediaobject" align="center"><img src="../shared/images/CustomerOrderProduct.gif" align="middle"></div><p>
            &#26144;&#23556;&#25991;&#20214;&#22914;&#19979;&#65306;
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="Customer" table="customers"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
        &lt;set name="orders" inverse="true"&gt;
            &lt;key column="customer_id"/&gt;
            &lt;one-to-many class="Order"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="Order" table="orders"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="date"/&gt;
        &lt;many-to-one name="customer" column="customer_id"/&gt;
        &lt;list name="lineItems" table="line_items"&gt;
            &lt;key column="order_id"/&gt;
            &lt;list-index column="line_number"/&gt;
            &lt;composite-element class="LineItem"&gt;
                &lt;property name="quantity"/&gt;
                &lt;many-to-one name="product" column="product_id"/&gt;
            &lt;/composite-element&gt;
        &lt;/list&gt;
    &lt;/class&gt;

    &lt;class name="Product" table="products"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="serialNumber"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
        <tt class="literal">customers</tt>, <tt class="literal">orders</tt>, <tt class="literal">line_items</tt> &#21644; 
        <tt class="literal">products</tt> &#20998;&#21035;&#20445;&#23384;&#30528;customer, order, order line item &#21644; product&#30340;&#25968;&#25454;&#12290;
        <tt class="literal">line_items</tt>&#20063;&#20316;&#20026;&#36830;&#25509;orders &#21644; products&#30340;&#20851;&#32852;&#34920;&#12290;
    </p><pre class="programlisting">create table customers (
    id BIGINT not null generated by default as identity, 
    name VARCHAR(255), 
    primary key (id)
)

create table orders (
    id BIGINT not null generated by default as identity, 
    customer_id BIGINT, 
    date TIMESTAMP, 
    primary key (id)
)

create table line_items (
    line_number INTEGER not null, 
    order_id BIGINT not null, 
    product_id BIGINT, 
    quantity INTEGER, 
    primary key (order_id, line_number)
)

create table products (
    id BIGINT not null generated by default as identity, 
    serialNumber VARCHAR(255), 
    primary key (id)
)

alter table orders 
    add constraint ordersFK0 foreign key (customer_id) references customers
alter table line_items
    add constraint line_itemsFK0 foreign key (product_id) references products
alter table line_items
    add constraint line_itemsFK1 foreign key (order_id) references orders</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="misc"></a>23.4.&nbsp;&#26434;&#20363;</h2></div></div><div></div></div><p>
            &#36825;&#20123;&#20363;&#23376;&#20840;&#37096;&#26469;&#33258;&#20110;Hibernate&#30340;test suite&#65292;&#21516;&#26102;&#20320;&#20063;&#21487;&#20197;&#25214;&#21040;&#20854;&#20182;&#26377;&#29992;&#30340;&#20363;&#23376;&#12290;
            &#21487;&#20197;&#21442;&#32771;Hibernate&#30340;<tt class="literal">test</tt>&#30446;&#24405;&#12290;
        </p><p>TODO: put words around this stuff</p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="example-mappings-typed-onetone"></a>23.4.1.&nbsp;"Typed" one-to-one association</h3></div></div><div></div></div><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="name"/&gt;
    &lt;one-to-one name="address" 
            cascade="all"&gt;
        &lt;formula&gt;name&lt;/formula&gt;
        &lt;formula&gt;'HOME'&lt;/formula&gt;
    &lt;/one-to-one&gt;
    &lt;one-to-one name="mailingAddress" 
            cascade="all"&gt;
        &lt;formula&gt;name&lt;/formula&gt;
        &lt;formula&gt;'MAILING'&lt;/formula&gt;
    &lt;/one-to-one&gt;
&lt;/class&gt;

&lt;class name="Address" batch-size="2" 
        check="addressType in ('MAILING', 'HOME', 'BUSINESS')"&gt;
    &lt;composite-id&gt;
        &lt;key-many-to-one name="person" 
                column="personName"/&gt;
        &lt;key-property name="type" 
                column="addressType"/&gt;
    &lt;/composite-id&gt;
    &lt;property name="street" type="text"/&gt;
    &lt;property name="state"/&gt;
    &lt;property name="zip"/&gt;
&lt;/class&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="example-mappings-composite-key"></a>23.4.2.&nbsp;Composite key example</h3></div></div><div></div></div><pre class="programlisting">&lt;class name="Customer"&gt;

    &lt;id name="customerId"
        length="10"&gt;
        &lt;generator class="assigned"/&gt;
    &lt;/id&gt;

    &lt;property name="name" not-null="true" length="100"/&gt;
    &lt;property name="address" not-null="true" length="200"/&gt;

    &lt;list name="orders"
            inverse="true"
            cascade="save-update"&gt;
        &lt;key column="customerId"/&gt;
        &lt;index column="orderNumber"/&gt;
        &lt;one-to-many class="Order"/&gt;
    &lt;/list&gt;

&lt;/class&gt;

&lt;class name="Order" table="CustomerOrder" lazy="true"&gt;
    &lt;synchronize table="LineItem"/&gt;
    &lt;synchronize table="Product"/&gt;
    
    &lt;composite-id name="id" 
            class="Order$Id"&gt;
        &lt;key-property name="customerId" length="10"/&gt;
        &lt;key-property name="orderNumber"/&gt;
    &lt;/composite-id&gt;
    
    &lt;property name="orderDate" 
            type="calendar_date"
            not-null="true"/&gt;
    
    &lt;property name="total"&gt;
        &lt;formula&gt;
            ( select sum(li.quantity*p.price) 
            from LineItem li, Product p 
            where li.productId = p.productId 
                and li.customerId = customerId 
                and li.orderNumber = orderNumber )
        &lt;/formula&gt;
    &lt;/property&gt;
    
    &lt;many-to-one name="customer"
            column="customerId"
            insert="false"
            update="false" 
            not-null="true"/&gt;
        
    &lt;bag name="lineItems"
            fetch="join" 
            inverse="true"
            cascade="save-update"&gt;
        &lt;key&gt;
            &lt;column name="customerId"/&gt;
            &lt;column name="orderNumber"/&gt;
        &lt;/key&gt;
        &lt;one-to-many class="LineItem"/&gt;
    &lt;/bag&gt;
    
&lt;/class&gt;
    
&lt;class name="LineItem"&gt;
    
    &lt;composite-id name="id" 
            class="LineItem$Id"&gt;
        &lt;key-property name="customerId" length="10"/&gt;
        &lt;key-property name="orderNumber"/&gt;
        &lt;key-property name="productId" length="10"/&gt;
    &lt;/composite-id&gt;
    
    &lt;property name="quantity"/&gt;
    
    &lt;many-to-one name="order"
            insert="false"
            update="false" 
            not-null="true"&gt;
        &lt;column name="customerId"/&gt;
        &lt;column name="orderNumber"/&gt;
    &lt;/many-to-one&gt;
    
    &lt;many-to-one name="product"
            insert="false"
            update="false" 
            not-null="true"
            column="productId"/&gt;
        
&lt;/class&gt;

&lt;class name="Product"&gt;
    &lt;synchronize table="LineItem"/&gt;

    &lt;id name="productId"
        length="10"&gt;
        &lt;generator class="assigned"/&gt;
    &lt;/id&gt;
    
    &lt;property name="description" 
        not-null="true" 
        length="200"/&gt;
    &lt;property name="price" length="3"/&gt;
    &lt;property name="numberAvailable"/&gt;
    
    &lt;property name="numberOrdered"&gt;
        &lt;formula&gt;
            ( select sum(li.quantity) 
            from LineItem li 
            where li.productId = productId )
        &lt;/formula&gt;
    &lt;/property&gt;
    
&lt;/class&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="example-mappings-composite-key-manytomany"></a>23.4.3.&nbsp;&#20849;&#26377;&#32452;&#21512;&#38190;&#23646;&#24615;&#30340;&#22810;&#23545;&#22810;(Many-to-many with shared composite key attribute)</h3></div></div><div></div></div><pre class="programlisting">&lt;class name="User" table="`User`"&gt;
    &lt;composite-id&gt;
        &lt;key-property name="name"/&gt;
        &lt;key-property name="org"/&gt;
    &lt;/composite-id&gt;
    &lt;set name="groups" table="UserGroup"&gt;
        &lt;key&gt;
            &lt;column name="userName"/&gt;
            &lt;column name="org"/&gt;
        &lt;/key&gt;
        &lt;many-to-many class="Group"&gt;
            &lt;column name="groupName"/&gt;
            &lt;formula&gt;org&lt;/formula&gt;
        &lt;/many-to-many&gt;
    &lt;/set&gt;
&lt;/class&gt;
    
&lt;class name="Group" table="`Group`"&gt;
    &lt;composite-id&gt;
        &lt;key-property name="name"/&gt;
        &lt;key-property name="org"/&gt;
    &lt;/composite-id&gt;
    &lt;property name="description"/&gt;
    &lt;set name="users" table="UserGroup" inverse="true"&gt;
        &lt;key&gt;
            &lt;column name="groupName"/&gt;
            &lt;column name="org"/&gt;
        &lt;/key&gt;
        &lt;many-to-many class="User"&gt;
            &lt;column name="userName"/&gt;
            &lt;formula&gt;org&lt;/formula&gt;
        &lt;/many-to-many&gt;
    &lt;/set&gt;
&lt;/class&gt;
</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="example-mappings-content-discrimination"></a>23.4.4.&nbsp;Content based discrimination</h3></div></div><div></div></div><pre class="programlisting">&lt;class name="Person"
    discriminator-value="P"&gt;
    
    &lt;id name="id" 
        column="person_id" 
        unsaved-value="0"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    
            
    &lt;discriminator 
        type="character"&gt;
        &lt;formula&gt;
            case 
                when title is not null then 'E' 
                when salesperson is not null then 'C' 
                else 'P' 
            end
        &lt;/formula&gt;
    &lt;/discriminator&gt;

    &lt;property name="name" 
        not-null="true"
        length="80"/&gt;
        
    &lt;property name="sex" 
        not-null="true"
        update="false"/&gt;
    
    &lt;component name="address"&gt;
        &lt;property name="address"/&gt;
        &lt;property name="zip"/&gt;
        &lt;property name="country"/&gt;
    &lt;/component&gt;
    
    &lt;subclass name="Employee" 
        discriminator-value="E"&gt;
            &lt;property name="title"
                length="20"/&gt;
            &lt;property name="salary"/&gt;
            &lt;many-to-one name="manager"/&gt;
    &lt;/subclass&gt;
    
    &lt;subclass name="Customer" 
        discriminator-value="C"&gt;
            &lt;property name="comments"/&gt;
            &lt;many-to-one name="salesperson"/&gt;
    &lt;/subclass&gt;
    
&lt;/class&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="example-mappings-association-alternatekeys"></a>23.4.5.&nbsp;Associations on alternate keys</h3></div></div><div></div></div><pre class="programlisting">&lt;class name="Person"&gt;
    
    &lt;id name="id"&gt;
        &lt;generator class="hilo"/&gt;
    &lt;/id&gt;
    
    &lt;property name="name" length="100"/&gt;
    
    &lt;one-to-one name="address" 
        property-ref="person"
        cascade="all"
        fetch="join"/&gt;
    
    &lt;set name="accounts" 
        inverse="true"&gt;
        &lt;key column="userId"
            property-ref="userId"/&gt;
        &lt;one-to-many class="Account"/&gt;
    &lt;/set&gt;
    
    &lt;property name="userId" length="8"/&gt;

&lt;/class&gt;

&lt;class name="Address"&gt;

    &lt;id name="id"&gt;
        &lt;generator class="hilo"/&gt;
    &lt;/id&gt;

    &lt;property name="address" length="300"/&gt;
    &lt;property name="zip" length="5"/&gt;
    &lt;property name="country" length="25"/&gt;
    &lt;many-to-one name="person" unique="true" not-null="true"/&gt;

&lt;/class&gt;

&lt;class name="Account"&gt;
    &lt;id name="accountId" length="32"&gt;
        &lt;generator class="uuid"/&gt;
    &lt;/id&gt;
    
    &lt;many-to-one name="user"
        column="userId"
        property-ref="userId"/&gt;
    
    &lt;property name="type" not-null="true"/&gt;
    
&lt;/class&gt;</pre></div></div></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="best-practices"></a>&#31532;&nbsp;24&nbsp;&#31456;&nbsp;&#26368;&#20339;&#23454;&#36341;(Best Practices)</h2></div></div><div></div></div><div class="variablelist"><dl><dt><span class="term">&#35774;&#35745;&#32454;&#39063;&#31890;&#24230;&#30340;&#25345;&#20037;&#31867;&#24182;&#19988;&#20351;&#29992;<tt class="literal">&lt;component&gt;</tt>&#26469;&#23454;&#29616;&#26144;&#23556;&#12290;</span></dt><dd><p>
                    &#20351;&#29992;&#19968;&#20010;<tt class="literal">Address</tt>&#25345;&#20037;&#31867;&#26469;&#23553;&#35013; <tt class="literal">street</tt>,
                    <tt class="literal">suburb</tt>, <tt class="literal">state</tt>, <tt class="literal">postcode</tt>.
                    &#36825;&#23558;&#26377;&#21033;&#20110;&#20195;&#30721;&#37325;&#29992;&#21644;&#31616;&#21270;&#20195;&#30721;&#37325;&#26500;(refactoring)&#30340;&#24037;&#20316;&#12290;
                </p></dd><dt><span class="term">&#23545;&#25345;&#20037;&#31867;&#22768;&#26126;&#26631;&#35782;&#31526;&#23646;&#24615;( identifier properties)&#12290;</span></dt><dd><p>
                    Hibernate&#20013;&#26631;&#35782;&#31526;&#23646;&#24615;&#26159;&#21487;&#36873;&#30340;&#65292;&#19981;&#36807;&#26377;&#24456;&#22810;&#21407;&#22240;&#26469;&#35828;&#26126;&#20320;&#24212;&#35813;&#20351;&#29992;&#26631;&#35782;&#31526;&#23646;&#24615;&#12290;&#25105;&#20204;&#24314;&#35758;&#26631;&#35782;&#31526;&#24212;&#35813;&#26159;&#8220;&#20154;&#36896;&#8221;&#30340;(&#33258;&#21160;&#29983;&#25104;&#65292;&#19981;&#28041;&#21450;&#19994;&#21153;&#21547;&#20041;)&#12290;
                </p></dd><dt><span class="term">&#20351;&#29992;&#33258;&#28982;&#38190;(natural keys)&#26631;&#35782;</span></dt><dd><p>
                    &#23545;&#25152;&#26377;&#30340;&#23454;&#20307;&#37117;&#26631;&#35782;&#20986;&#33258;&#28982;&#38190;&#65292;&#29992;<tt class="literal">&lt;natural-id&gt;</tt>&#36827;&#34892;&#26144;&#23556;&#12290;&#23454;&#29616;<tt class="literal">equals()</tt>&#21644;<tt class="literal">hashCode()</tt>&#65292;&#22312;&#20854;&#20013;&#29992;&#32452;&#25104;&#33258;&#28982;&#38190;&#30340;&#23646;&#24615;&#36827;&#34892;&#27604;&#36739;&#12290;
                </p></dd><dt><span class="term">&#20026;&#27599;&#20010;&#25345;&#20037;&#31867;&#20889;&#19968;&#20010;&#26144;&#23556;&#25991;&#20214;</span></dt><dd><p>
                     &#19981;&#35201;&#25226;&#25152;&#26377;&#30340;&#25345;&#20037;&#31867;&#26144;&#23556;&#37117;&#20889;&#21040;&#19968;&#20010;&#22823;&#25991;&#20214;&#20013;&#12290;&#25226; <tt class="literal">com.eg.Foo</tt> &#26144;&#23556;&#21040;<tt class="literal">com/eg/Foo.hbm.xml</tt>&#20013;&#65292; &#22312;&#22242;&#38431;&#24320;&#21457;&#29615;&#22659;&#20013;&#65292;&#36825;&#19968;&#28857;&#26174;&#24471;&#29305;&#21035;&#26377;&#24847;&#20041;&#12290;
                </p></dd><dt><span class="term">&#25226;&#26144;&#23556;&#25991;&#20214;&#20316;&#20026;&#36164;&#28304;&#21152;&#36733;</span></dt><dd><p>
                    &#25226;&#26144;&#23556;&#25991;&#20214;&#21644;&#20182;&#20204;&#30340;&#26144;&#23556;&#31867;&#25918;&#22312;&#19968;&#36215;&#36827;&#34892;&#37096;&#32626;&#12290;
                </p></dd><dt><span class="term">&#32771;&#34385;&#25226;&#26597;&#35810;&#23383;&#31526;&#20018;&#25918;&#22312;&#31243;&#24207;&#22806;&#38754;</span></dt><dd><p>
                    &#22914;&#26524;&#20320;&#30340;&#26597;&#35810;&#20013;&#35843;&#29992;&#20102;&#38750;ANSI&#26631;&#20934;&#30340;SQL&#20989;&#25968;&#65292;&#37027;&#20040;&#36825;&#26465;&#23454;&#36341;&#32463;&#39564;&#23545;&#20320;&#36866;&#29992;&#12290;&#25226;&#26597;&#35810;&#23383;&#31526;&#20018;&#25918;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#21487;&#20197;&#35753;&#31243;&#24207;&#20855;&#26377;&#26356;&#22909;&#30340;&#21487;&#31227;&#26893;&#24615;&#12290;
                </p></dd><dt><span class="term">&#20351;&#29992;&#32465;&#23450;&#21464;&#37327;</span></dt><dd><p>
                     &#23601;&#20687;&#22312;JDBC&#32534;&#31243;&#20013;&#19968;&#26679;&#65292;&#24212;&#35813;&#24635;&#26159;&#29992;&#21344;&#20301;&#31526;"?"&#26469;&#26367;&#25442;&#38750;&#24120;&#37327;&#20540;&#65292;&#19981;&#35201;&#22312;&#26597;&#35810;&#20013;&#29992;&#23383;&#31526;&#20018;&#20540;&#26469;&#26500;&#36896;&#38750;&#24120;&#37327;&#20540;&#65281;&#26356;&#22909;&#30340;&#21150;&#27861;&#26159;&#22312;&#26597;&#35810;&#20013;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#12290;
                </p></dd><dt><span class="term">&#19981;&#35201;&#33258;&#24049;&#26469;&#31649;&#29702;JDBC connections</span></dt><dd><p>
                    Hibernate&#20801;&#35768;&#24212;&#29992;&#31243;&#24207;&#33258;&#24049;&#26469;&#31649;&#29702;JDBC connections&#65292;&#20294;&#26159;&#24212;&#35813;&#20316;&#20026;&#26368;&#21518;&#27809;&#26377;&#21150;&#27861;&#30340;&#21150;&#27861;&#12290;&#22914;&#26524;&#20320;&#19981;&#33021;&#20351;&#29992;Hibernate&#20869;&#24314;&#30340;connections providers&#65292;&#37027;&#20040;&#32771;&#34385;&#23454;&#29616;&#33258;&#24049;&#26469;&#23454;&#29616;<tt class="literal">org.hibernate.connection.ConnectionProvider</tt>
                </p></dd><dt><span class="term">&#32771;&#34385;&#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#31867;&#22411;(custom type)</span></dt><dd><p>
                    &#20551;&#35774;&#20320;&#26377;&#19968;&#20010;Java&#31867;&#22411;&#65292;&#26469;&#33258;&#26576;&#20123;&#31867;&#24211;&#65292;&#38656;&#35201;&#34987;&#25345;&#20037;&#21270;&#65292;&#20294;&#26159;&#35813;&#31867;&#27809;&#26377;&#25552;&#20379;&#26144;&#23556;&#25805;&#20316;&#38656;&#35201;&#30340;&#23384;&#21462;&#26041;&#27861;&#12290;&#37027;&#20040;&#20320;&#24212;&#35813;&#32771;&#34385;&#23454;&#29616;<tt class="literal">org.hibernate.UserType</tt>&#25509;&#21475;&#12290;&#36825;&#31181;&#21150;&#27861;&#20351;&#31243;&#24207;&#20195;&#30721;&#20889;&#36215;&#26469;&#26356;&#21152;&#33258;&#22914;&#65292;&#19981;&#20877;&#38656;&#35201;&#32771;&#34385;&#31867;&#19982;Hibernate type&#20043;&#38388;&#30340;&#30456;&#20114;&#36716;&#25442;&#12290;
                </p></dd><dt><span class="term">&#22312;&#24615;&#33021;&#29942;&#39048;&#30340;&#22320;&#26041;&#20351;&#29992;&#30828;&#32534;&#30721;&#30340;JDBC</span></dt><dd><p>
                    In performance-critical areas of the system, some kinds of operations might benefit from 
                    direct JDBC. But please, wait until you <span class="emphasis"><em>know</em></span> something is a bottleneck. 
                    And don't assume that direct JDBC is necessarily faster. If you need to use direct JDBC, it might 
                    be worth opening a Hibernate <tt class="literal">Session</tt> and using that JDBC connection. That 
                    way you can still use the same transaction strategy and underlying connection provider.

                    &#22312;&#31995;&#32479;&#20013;&#23545;&#24615;&#33021;&#35201;&#27714;&#24456;&#20005;&#26684;&#30340;&#19968;&#20123;&#37096;&#20998;&#65292;&#26576;&#20123;&#25805;&#20316;&#20063;&#35768;&#30452;&#25509;&#20351;&#29992;JDBC&#20250;&#26356;&#22909;&#12290;&#20294;&#26159;&#35831;&#20808;<span class="emphasis"><em>&#30830;&#35748;</em></span>&#36825;&#30340;&#30830;&#26159;&#19968;&#20010;&#29942;&#39048;&#65292;&#24182;&#19988;&#19981;&#35201;&#24819;&#24403;&#28982;&#35748;&#20026;JDBC&#19968;&#23450;&#20250;&#26356;&#24555;&#12290;&#22914;&#26524;&#30830;&#23454;&#38656;&#35201;&#30452;&#25509;&#20351;&#29992;JDBC&#65292;&#37027;&#20040;&#26368;&#22909;&#25171;&#24320;&#19968;&#20010;
Hibernate <tt class="literal">Session</tt> &#28982;&#21518;&#20174; <tt class="literal">Session</tt>&#33719;&#24471;connection&#65292;&#25353;&#29031;&#36825;&#31181;&#21150;&#27861;&#20320;&#20173;&#28982;&#21487;&#20197;&#20351;&#29992;&#21516;&#26679;&#30340;transaction&#31574;&#30053;&#21644;&#24213;&#23618;&#30340;connection provider&#12290;
                </p></dd><dt><span class="term">&#29702;&#35299;<tt class="literal">Session</tt>&#28165;&#27927;&#65288; flushing&#65289;</span></dt><dd><p>
                    Session&#20250;&#19981;&#26102;&#30340;&#21521;&#25968;&#25454;&#24211;&#21516;&#27493;&#25345;&#20037;&#21270;&#29366;&#24577;&#65292;&#22914;&#26524;&#36825;&#31181;&#25805;&#20316;&#36827;&#34892;&#30340;&#36807;&#20110;&#39057;&#32321;&#65292;&#24615;&#33021;&#20250;&#21463;&#21040;&#19968;&#23450;&#30340;&#24433;&#21709;&#12290;&#26377;&#26102;&#20505;&#20320;&#21487;&#20197;&#36890;&#36807;&#31105;&#27490;&#33258;&#21160;flushing&#65292;&#23613;&#37327;&#26368;&#23567;&#21270;&#38750;&#24517;&#35201;&#30340;flushing&#25805;&#20316;&#65292;&#25110;&#32773;&#26356;&#36827;&#19968;&#27493;&#65292;&#22312;&#19968;&#20010;&#29305;&#23450;&#30340;transaction&#20013;&#25913;&#21464;&#26597;&#35810;&#21644;&#20854;&#23427;&#25805;&#20316;&#30340;&#39034;&#24207;&#12290;
                </p></dd><dt><span class="term">&#22312;&#19977;&#23618;&#32467;&#26500;&#20013;&#65292;&#32771;&#34385;&#20351;&#29992;&#25176;&#31649;&#23545;&#35937;&#65288;detached object&#65289;</span></dt><dd><p>
                    &#24403;&#20351;&#29992;&#19968;&#20010;servlet / session bean &#31867;&#22411;&#30340;&#26550;&#26500;&#30340;&#26102;&#20505;, &#20320;&#21487;&#20197;&#25226;&#24050;&#21152;&#36733;&#30340;&#25345;&#20037;&#23545;&#35937;&#22312;session bean&#23618;&#21644;servlet / JSP &#23618;&#20043;&#38388;&#26469;&#22238;&#20256;&#36882;&#12290;&#20351;&#29992;&#26032;&#30340;session&#26469;&#20026;&#27599;&#20010;&#35831;&#27714;&#26381;&#21153;&#65292;&#20351;&#29992; <tt class="literal">Session.merge()</tt> &#25110;&#32773;<tt class="literal">Session.saveOrUpdate()</tt>&#26469;&#19982;&#25968;&#25454;&#24211;&#21516;&#27493;&#12290;
                </p></dd><dt><span class="term">&#22312;&#20004;&#23618;&#32467;&#26500;&#20013;&#65292;&#32771;&#34385;&#20351;&#29992;&#38271;&#25345;&#20037;&#19978;&#19979;&#25991;(long persistence contexts).</span></dt><dd><p>
                    &#20026;&#20102;&#24471;&#21040;&#26368;&#20339;&#30340;&#21487;&#20280;&#32553;&#24615;&#65292;&#25968;&#25454;&#24211;&#20107;&#21153;(Database Transaction)&#24212;&#35813;&#23613;&#21487;&#33021;&#30340;&#30701;&#12290;&#20294;&#26159;&#65292;&#31243;&#24207;&#24120;&#24120;&#38656;&#35201;&#23454;&#29616;&#38271;&#26102;&#38388;&#36816;&#34892;&#30340;<span class="emphasis"><em>&#8220;&#24212;&#29992;&#31243;&#24207;&#20107;&#21153;(Application Transaction)&#8221;</em></span>&#65292;&#21253;&#21547;&#19968;&#20010;&#20174;&#29992;&#25143;&#30340;&#35266;&#28857;&#26469;&#30475;&#30340;&#21407;&#23376;&#25805;&#20316;&#12290;&#36825;&#20010;&#24212;&#29992;&#31243;&#24207;&#20107;&#21153;&#21487;&#33021;&#36328;&#36234;&#22810;&#27425;&#20174;&#29992;&#25143;&#35831;&#27714;&#21040;&#24471;&#21040;&#21453;&#39304;&#30340;&#24490;&#29615;&#12290;&#29992;&#33073;&#31649;&#23545;&#35937;(&#19982;session&#33073;&#31163;&#30340;&#23545;&#35937;)&#26469;&#23454;&#29616;&#24212;&#29992;&#31243;&#24207;&#20107;&#21153;&#26159;&#24120;&#35265;&#30340;&#12290;&#25110;&#32773;&#65292;&#23588;&#20854;&#22312;&#20004;&#23618;&#32467;&#26500;&#20013;&#65292;&#25226;Hibernate Session&#20174;JDBC&#36830;&#25509;&#20013;&#33073;&#31163;&#24320;&#65292;&#19979;&#27425;&#38656;&#35201;&#29992;&#30340;&#26102;&#20505;&#20877;&#36830;&#25509;&#19978;&#12290;&#32477;&#19981;&#35201;&#25226;&#19968;&#20010;Session&#29992;&#22312;&#22810;&#20010;&#24212;&#29992;&#31243;&#24207;&#20107;&#21153;(Application Transaction)&#20013;&#65292;&#21542;&#21017;&#20320;&#30340;&#25968;&#25454;&#21487;&#33021;&#20250;&#36807;&#26399;&#22833;&#25928;&#12290;
                </p></dd><dt><span class="term">&#19981;&#35201;&#25226;&#24322;&#24120;&#30475;&#25104;&#21487;&#24674;&#22797;&#30340;</span></dt><dd><p>
                    &#36825;&#19968;&#28857;&#29978;&#33267;&#27604;&#8220;&#26368;&#20339;&#23454;&#36341;&#8221;&#36824;&#35201;&#37325;&#35201;&#65292;&#36825;&#26159;&#8220;&#24517;&#22791;&#24120;&#35782;&#8221;&#12290;&#24403;&#24322;&#24120;&#21457;&#29983;&#30340;&#26102;&#20505;&#65292;&#24517;&#39035;&#35201;&#22238;&#28378; <tt class="literal">Transaction</tt> &#65292;&#20851;&#38381;<tt class="literal">Session</tt>&#12290;&#22914;&#26524;&#20320;&#19981;&#36825;&#26679;&#20570;&#30340;&#35805;&#65292;Hibernate&#26080;&#27861;&#20445;&#35777;&#20869;&#23384;&#29366;&#24577;&#31934;&#30830;&#30340;&#21453;&#24212;&#25345;&#20037;&#29366;&#24577;&#12290;&#23588;&#20854;&#19981;&#35201;&#20351;&#29992;<tt class="literal">Session.load()</tt>&#26469;&#21028;&#26029;&#19968;&#20010;&#32473;&#23450;&#26631;&#35782;&#31526;&#30340;&#23545;&#35937;&#23454;&#20363;&#22312;&#25968;&#25454;&#24211;&#20013;&#26159;&#21542;&#23384;&#22312;&#65292;&#24212;&#35813;&#20351;&#29992;<tt class="literal">Session.get()</tt>&#25110;&#32773;&#36827;&#34892;&#19968;&#27425;&#26597;&#35810;.
                </p></dd><dt><span class="term">&#23545;&#20110;&#20851;&#32852;&#20248;&#20808;&#32771;&#34385;lazy fetching </span></dt><dd><p>
                    &#35880;&#24910;&#30340;&#20351;&#29992;&#20027;&#21160;&#25235;&#21462;(eager fetching)&#12290;&#23545;&#20110;&#20851;&#32852;&#26469;&#35828;&#65292;&#33509;&#20854;&#30446;&#26631;&#26159;&#26080;&#27861;&#22312;&#31532;&#20108;&#32423;&#32531;&#23384;&#20013;&#23436;&#20840;&#32531;&#23384;&#25152;&#26377;&#23454;&#20363;&#30340;&#31867;&#65292;&#24212;&#35813;&#20351;&#29992;&#20195;&#29702;(proxies)&#19982;/&#25110;&#20855;&#26377;&#24310;&#36831;&#21152;&#36733;&#23646;&#24615;&#30340;&#38598;&#21512;(lazy collections)&#12290;&#33509;&#30446;&#26631;&#26159;&#21487;&#20197;&#34987;&#32531;&#23384;&#30340;&#65292;&#23588;&#20854;&#26159;&#32531;&#23384;&#30340;&#21629;&#20013;&#29575;&#38750;&#24120;&#39640;&#30340;&#24773;&#20917;&#19979;&#65292;&#24212;&#35813;&#20351;&#29992;<tt class="literal">lazy="false"</tt>&#65292;&#26126;&#30830;&#30340;&#31105;&#27490;&#25481;eager fetching&#12290;&#22914;&#26524;&#37027;&#20123;&#29305;&#27530;&#30340;&#30830;&#23454;&#36866;&#21512;&#20351;&#29992;join fetch &#30340;&#22330;&#21512;&#65292;&#35831;&#22312;&#26597;&#35810;&#20013;&#20351;&#29992;<tt class="literal">left join fetch</tt>&#12290;
                </p></dd><dt><span class="term">
                &#20351;&#29992;<span class="emphasis"><em>open session in view</em></span>&#27169;&#24335;&#65292;&#25110;&#32773;&#25191;&#34892;&#20005;&#26684;&#30340;<span class="emphasis"><em>&#35013;&#37197;&#26399;(assembly phase)</em></span>&#31574;&#30053;&#26469;&#36991;&#20813;&#20877;&#27425;&#25235;&#21462;&#25968;&#25454;&#24102;&#26469;&#30340;&#38382;&#39064;
            </span></dt><dd><p>
                    
                    Hibernate&#35753;&#24320;&#21457;&#32773;&#20204;&#25670;&#33073;&#20102;&#32321;&#29712;&#30340;<span class="emphasis"><em>Data Transfer Objects</em></span> (DTO)&#12290;&#22312;&#20256;&#32479;&#30340;EJB&#32467;&#26500;&#20013;&#65292;DTO&#26377;&#21452;&#37325;&#20316;&#29992;&#65306;&#39318;&#20808;&#65292;&#20182;&#20204;&#35299;&#20915;&#20102;entity bean&#26080;&#27861;&#24207;&#21015;&#21270;&#30340;&#38382;&#39064;&#65307;&#20854;&#27425;&#65292;&#20182;&#20204;&#38544;&#21547;&#22320;&#23450;&#20041;&#20102;&#19968;&#20010;&#35013;&#37197;&#26399;&#65292;&#22312;&#27492;&#26399;&#38388;&#65292;&#25152;&#26377;&#22312;view&#23618;&#38656;&#35201;&#29992;&#21040;&#30340;&#25968;&#25454;&#65292;&#37117;&#34987;&#25235;&#21462;&#12289;&#38598;&#20013;&#21040;&#20102;DTO&#20013;&#65292;&#28982;&#21518;&#25511;&#21046;&#25165;&#34987;&#35013;&#21040;&#34920;&#31034;&#23618;&#12290;Hibernate&#32456;&#32467;&#20102;&#31532;&#19968;&#20010;&#20316;&#29992;&#12290;&#28982;&#32780;&#65292;&#38500;&#38750;&#20320;&#20570;&#22909;&#20102;&#22312;&#25972;&#20010;&#28210;&#26579;&#36807;&#31243;&#20013;&#37117;&#32500;&#25252;&#19968;&#20010;&#25171;&#24320;&#30340;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;(session)&#30340;&#20934;&#22791;&#65292;&#20320;&#20173;&#28982;&#38656;&#35201;&#19968;&#20010;&#35013;&#37197;&#26399;&#65288;&#24819;&#35937;&#19968;&#19979;&#65292;&#20320;&#30340;&#19994;&#21153;&#26041;&#27861;&#19982;&#20320;&#30340;&#34920;&#31034;&#23618;&#26377;&#20005;&#26684;&#30340;&#22865;&#32422;&#65292;&#25968;&#25454;&#24635;&#26159;&#34987;&#25918;&#32622;&#21040;&#25176;&#31649;&#23545;&#35937;&#20013;&#65289;&#12290;&#36825;&#24182;&#38750;&#26159;Hibernate&#30340;&#38480;&#21046;&#65281;&#36825;&#26159;&#23454;&#29616;&#23433;&#20840;&#30340;&#20107;&#21153;&#21270;&#25968;&#25454;&#35775;&#38382;&#30340;&#22522;&#26412;&#38656;&#27714;&#12290;
                </p></dd><dt><span class="term">&#32771;&#34385;&#25226;Hibernate&#20195;&#30721;&#20174;&#19994;&#21153;&#36923;&#36753;&#20195;&#30721;&#20013;&#25277;&#35937;&#20986;&#26469;</span></dt><dd><p>
                    &#25226;Hibernate&#30340;&#25968;&#25454;&#23384;&#21462;&#20195;&#30721;&#38544;&#34255;&#21040;&#25509;&#21475;(interface)&#30340;&#21518;&#38754;&#65292;&#32452;&#21512;&#20351;&#29992;<span class="emphasis"><em>DAO</em></span>&#21644;<span class="emphasis"><em>Thread Local Session</em></span>&#27169;&#24335;&#12290;&#36890;&#36807;Hibernate&#30340;<tt class="literal">UserType</tt>&#65292;&#20320;&#29978;&#33267;&#21487;&#20197;&#29992;&#30828;&#32534;&#30721;&#30340;JDBC&#26469;&#25345;&#20037;&#21270;&#37027;&#20123;&#26412;&#35813;&#34987;Hibernate&#25345;&#20037;&#21270;&#30340;&#31867;&#12290; (&#35813;&#24314;&#35758;&#26356;&#36866;&#29992;&#20110;&#35268;&#27169;&#36275;&#22815;&#22823;&#24212;&#29992;&#36719;&#20214;&#20013;&#65292;&#23545;&#20110;&#37027;&#20123;&#21482;&#26377;5&#24352;&#34920;&#30340;&#24212;&#29992;&#31243;&#24207;&#24182;&#19981;&#36866;&#21512;&#12290;)
                </p></dd><dt><span class="term">&#19981;&#35201;&#29992;&#24618;&#24322;&#30340;&#36830;&#25509;&#26144;&#23556;</span></dt><dd><p>
                    &#22810;&#23545;&#22810;&#36830;&#25509;&#29992;&#24471;&#22909;&#30340;&#20363;&#23376;&#23454;&#38469;&#19978;&#30456;&#24403;&#23569;&#35265;&#12290;&#22823;&#22810;&#25968;&#26102;&#20505;&#20320;&#22312;&#8220;&#36830;&#25509;&#34920;&#8221;&#20013;&#38656;&#35201;&#20445;&#23384;&#39069;&#22806;&#30340;&#20449;&#24687;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#29992;&#20004;&#20010;&#25351;&#21521;&#20013;&#20171;&#31867;&#30340;&#19968;&#23545;&#22810;&#30340;&#36830;&#25509;&#27604;&#36739;&#22909;&#12290;&#23454;&#38469;&#19978;&#65292;&#25105;&#20204;&#35748;&#20026;&#32477;&#22823;&#22810;&#25968;&#30340;&#36830;&#25509;&#26159;&#19968;&#23545;&#22810;&#21644;&#22810;&#23545;&#19968;&#30340;&#65292;&#20320;&#24212;&#35813;&#35880;&#24910;&#20351;&#29992;&#20854;&#23427;&#36830;&#25509;&#39118;&#26684;&#65292;&#29992;&#20043;&#21069;&#38382;&#33258;&#24049;&#19968;&#21477;&#65292;&#26159;&#21542;&#30495;&#30340;&#24517;&#39035;&#36825;&#20040;&#20570;&#12290;
                </p></dd><dt><span class="term">&#20559;&#29233;&#21452;&#21521;&#20851;&#32852;</span></dt><dd><p>
                    &#21333;&#21521;&#20851;&#32852;&#26356;&#21152;&#38590;&#20110;&#26597;&#35810;&#12290;&#22312;&#22823;&#22411;&#24212;&#29992;&#20013;&#65292;&#20960;&#20046;&#25152;&#26377;&#30340;&#20851;&#32852;&#24517;&#39035;&#22312;&#26597;&#35810;&#20013;&#21487;&#20197;&#21452;&#21521;&#23548;&#33322;&#12290;
                </p></dd></dl></div></div></div></body></html>