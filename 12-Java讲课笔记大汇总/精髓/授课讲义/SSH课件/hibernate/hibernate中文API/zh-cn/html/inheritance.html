<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;9&nbsp;&#31456;&nbsp;&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="up" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="previous" href="components.html" title="&#31532;&nbsp;8&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;"><link rel="next" href="objectstate.html" title="&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#19982;&#23545;&#35937;&#20849;&#20107;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;9&nbsp;&#31456;&nbsp;&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="components.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="objectstate.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="inheritance"></a>&#31532;&nbsp;9&nbsp;&#31456;&nbsp;&#32487;&#25215;&#26144;&#23556;(Inheritance Mappings)</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="inheritance-strategies"></a>9.1.&nbsp; &#19977;&#31181;&#31574;&#30053;</h2></div></div><div></div></div><p>
               	Hibernate&#25903;&#25345;&#19977;&#31181;&#22522;&#26412;&#30340;&#32487;&#25215;&#26144;&#23556;&#31574;&#30053;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                &#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;(table per class hierarchy)
            </p></li><li><p>
                &#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(table per subclass)
            </p></li><li><p>
                &#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(table per concrete class)
            </p></li></ul></div><p>
	            &#27492;&#22806;&#65292;Hibernate&#36824;&#25903;&#25345;&#31532;&#22235;&#31181;&#31245;&#26377;&#19981;&#21516;&#30340;&#22810;&#24577;&#26144;&#23556;&#31574;&#30053;&#65306;
	        </p><div class="itemizedlist"><ul type="disc"><li><p>
                &#38544;&#24335;&#22810;&#24577;(implicit polymorphism)
            </p></li></ul></div><p>
									&#23545;&#20110;&#21516;&#19968;&#20010;&#32487;&#25215;&#23618;&#27425;&#20869;&#30340;&#19981;&#21516;&#20998;&#25903;&#65292;&#21487;&#20197;&#37319;&#29992;&#19981;&#21516;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;&#28982;&#21518;&#29992;&#38544;&#24335;&#22810;
									&#24577;&#26469;&#23436;&#25104;&#36328;&#36234;&#25972;&#20010;&#23618;&#27425;&#30340;&#22810;&#24577;&#12290;&#20294;&#26159;&#22312;&#21516;&#19968;&#20010;<tt class="literal">&lt;class&gt;</tt>&#26681;&#20803;&#32032;
									&#19979;&#65292;Hibernate&#19981;&#25903;&#25345;&#28151;&#21512;&#20102;&#20803;&#32032;<tt class="literal">&lt;subclass&gt;</tt>&#12289;
									<tt class="literal">&lt;joined-subclass&gt;</tt>&#21644;<tt class="literal">&lt;union-subclass&gt;</tt>
									&#30340;&#26144;&#23556;&#12290;&#22312;&#21516;&#19968;&#20010;<tt class="literal">&lt;class&gt;</tt>&#20803;&#32032;&#19979;&#65292;&#21487;&#20197;&#28151;&#21512;&#20351;&#29992;
									&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;&#65288;table per hierarchy&#65289; &#21644;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#65288;table per subclass&#65289;
									&#36825;&#20004;&#31181;&#26144;&#23556;&#31574;&#30053;&#65292;&#36825;&#26159;&#36890;&#36807;&#32467;&#21512;&#20803;&#32032;<tt class="literal">&lt;subclass&gt;</tt>&#21644;
									<tt class="literal">&lt;join&gt;</tt>&#26469;&#23454;&#29616;&#30340;&#65288;&#35265;&#21518;&#65289;&#12290;
									
            </p><p>
			&#22312;&#22810;&#20010;&#26144;&#23556;&#25991;&#20214;&#20013;&#65292;&#21487;&#20197;&#30452;&#25509;&#22312;<tt class="literal">hibernate-mapping</tt>&#26681;&#19979;&#23450;&#20041;<tt class="literal">subclass</tt>&#65292;<tt class="literal">union-subclass</tt>&#21644;<tt class="literal">joined-subclass</tt>&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#20320;&#21487;&#20197;&#20165;&#21152;&#20837;&#19968;&#20010;&#26032;&#30340;&#26144;&#23556;&#25991;&#20214;&#26469;&#25193;&#23637;&#31867;&#23618;&#27425;&#12290;&#20320;&#24517;&#39035;&#22312;subclass&#30340;&#26144;&#23556;&#20013;&#25351;&#26126;<tt class="literal">extends</tt>&#23646;&#24615;&#65292;&#32473;&#20986;&#19968;&#20010;&#20043;&#21069;&#23450;&#20041;&#30340;&#36229;&#31867;&#30340;&#21517;&#23383;&#12290;&#27880;&#24847;&#65292;&#22312;&#20197;&#21069;&#65292;&#36825;&#19968;&#21151;&#33021;&#23545;&#26144;&#23556;&#25991;&#20214;&#30340;&#39034;&#24207;&#26377;&#20005;&#26684;&#30340;&#35201;&#27714;&#65292;&#20174;Hibernate 3&#24320;&#22987;&#65292;&#20351;&#29992;extends&#20851;&#38190;&#23383;&#30340;&#26102;&#20399;&#65292;&#23545;&#26144;&#23556;&#25991;&#20214;&#30340;&#39034;&#24207;&#19981;&#20877;&#26377;&#35201;&#27714;&#65307;&#20294;&#22312;&#27599;&#20010;&#26144;&#23556;&#25991;&#20214;&#37324;&#65292;&#36229;&#31867;&#24517;&#39035;&#22312;&#23376;&#31867;&#20043;&#21069;&#23450;&#20041;&#12290;
		</p><pre class="programlisting">
 &lt;hibernate-mapping&gt;
     &lt;subclass name="DomesticCat" extends="Cat" discriminator-value="D"&gt;
          &lt;property name="name" type="string"/&gt;
     &lt;/subclass&gt;
 &lt;/hibernate-mapping&gt;</pre><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tableperclass"></a>9.1.1.&nbsp;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;(Table per class hierarchy)</h3></div></div><div></div></div><p>
                &#20551;&#35774;&#25105;&#20204;&#26377;&#25509;&#21475;<tt class="literal">Payment</tt>&#21644;&#23427;&#30340;&#20960;&#20010;&#23454;&#29616;&#31867;&#65306;
                <tt class="literal">CreditCardPayment</tt>, <tt class="literal">CashPayment</tt>, 
                &#21644;<tt class="literal">ChequePayment</tt>&#12290;&#21017;&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;(Table per 
                class hierarchy)&#30340;&#26144;&#23556;&#20195;&#30721;&#22914;&#19979;&#25152;&#31034;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        ...
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
                &#37319;&#29992;&#36825;&#31181;&#31574;&#30053;&#21482;&#38656;&#35201;&#19968;&#24352;&#34920;&#21363;&#21487;&#12290;&#23427;&#26377;&#19968;&#20010;&#24456;&#22823;&#30340;&#38480;&#21046;&#65306;&#35201;&#27714;&#37027;&#20123;&#30001;&#23376;&#31867;&#23450;&#20041;&#30340;&#23383;&#27573;&#65292;
                &#22914;<tt class="literal">CCTYPE</tt>&#65292;&#19981;&#33021;&#26377;<tt class="literal">&#38750;&#31354;(NOT NULL)</tt>&#32422;&#26463;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tablepersubclass"></a>9.1.2.&nbsp;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(Table per subclass)</h3></div></div><div></div></div><p>
                &#23545;&#20110;&#19978;&#20363;&#20013;&#30340;&#20960;&#20010;&#31867;&#32780;&#35328;&#65292;&#37319;&#29992;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;&#20195;&#30721;&#22914;&#19979;&#25152;&#31034;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;joined-subclass name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        ...
    &lt;/joined-subclass&gt;
&lt;/class&gt;</pre><p>
                &#38656;&#35201;&#22235;&#24352;&#34920;&#12290;&#19977;&#20010;&#23376;&#31867;&#34920;&#36890;&#36807;&#20027;&#38190;&#20851;&#32852;&#21040;&#36229;&#31867;&#34920;(&#22240;&#32780;&#20851;&#31995;&#27169;&#22411;&#23454;&#38469;&#19978;&#26159;&#19968;&#23545;&#19968;&#20851;&#32852;)&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tablepersubclass-discriminator"></a>9.1.3.&nbsp;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;(Table per subclass)&#65292;&#20351;&#29992;&#36776;&#21035;&#26631;&#24535;(Discriminator)</h3></div></div><div></div></div><p>
                &#27880;&#24847;&#65292;&#23545;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;Hibernate&#30340;&#23454;&#29616;&#19981;&#38656;&#35201;&#36776;&#21035;&#23383;&#27573;&#65292;&#32780;&#20854;&#20182;
                &#30340;&#23545;&#35937;/&#20851;&#31995;&#26144;&#23556;&#24037;&#20855;&#20351;&#29992;&#20102;&#19968;&#31181;&#19981;&#21516;&#20110;Hibernate&#30340;&#23454;&#29616;&#26041;&#27861;&#65292;&#35813;&#26041;&#27861;&#35201;&#27714;&#22312;&#36229;&#31867;
                &#34920;&#20013;&#26377;&#19968;&#20010;&#31867;&#22411;&#36776;&#21035;&#23383;&#27573;(type discriminator column)&#12290;Hibernate&#37319;&#29992;&#30340;&#26041;&#27861;&#26356;
                &#38590;&#23454;&#29616;&#65292;&#20294;&#20174;&#20851;&#31995;&#65288;&#25968;&#25454;&#24211;&#65289;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#25353;&#29702;&#35828;&#23427;&#26356;&#27491;&#30830;&#12290;&#33509;&#20320;&#24895;&#24847;&#20351;&#29992;&#24102;&#26377;&#36776;&#21035;&#23383;
                &#27573;&#30340;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#31574;&#30053;&#65292;&#20320;&#21487;&#20197;&#32467;&#21512;&#20351;&#29992;<tt class="literal">&lt;subclass&gt;</tt>
                &#19982;<tt class="literal">&lt;join&gt;</tt>&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;join table="CREDIT_PAYMENT"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            &lt;property name="creditCardType" column="CCTYPE"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        &lt;join table="CASH_PAYMENT"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        &lt;join table="CHEQUE_PAYMENT" fetch="select"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
                &#21487;&#36873;&#30340;&#22768;&#26126;<tt class="literal">fetch="select"</tt>&#65292;&#26159;&#29992;&#26469;&#21578;&#35785;Hibernate&#65292;&#22312;&#26597;&#35810;&#36229;&#31867;&#26102;&#65292;
                &#19981;&#35201;&#20351;&#29992;&#22806;&#37096;&#36830;&#25509;(outer join)&#26469;&#25235;&#21462;&#23376;&#31867;<tt class="literal">ChequePayment</tt>&#30340;&#25968;&#25454;&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-mixing-tableperclass-tablepersubclass"></a>9.1.4.&nbsp;&#28151;&#21512;&#20351;&#29992;&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;&#21644;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;</h3></div></div><div></div></div><p>
                &#20320;&#29978;&#33267;&#21487;&#20197;&#37319;&#21462;&#22914;&#19979;&#26041;&#27861;&#28151;&#21644;&#20351;&#29992;&#8220;&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;&#8221;&#21644;&#8220;&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;&#8221;&#36825;&#20004;&#31181;&#31574;&#30053;&#65306;
            </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;join table="CREDIT_PAYMENT"&gt;
            &lt;property name="creditCardType" column="CCTYPE"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        ...
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>
                &#23545;&#19978;&#36848;&#20219;&#20309;&#19968;&#31181;&#26144;&#23556;&#31574;&#30053;&#32780;&#35328;&#65292;&#25351;&#21521;&#26681;&#31867;<tt class="literal">Payment</tt>&#30340;
                &#20851;&#32852;&#26159;&#20351;&#29992;<tt class="literal">&lt;many-to-one&gt;</tt>&#36827;&#34892;&#26144;&#23556;&#30340;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="payment" column="PAYMENT_ID" class="Payment"/&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tableperconcrete"></a>9.1.5.&nbsp;&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(Table per concrete class)</h3></div></div><div></div></div><p>
                &#23545;&#20110;&#8220;&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#26144;&#23556;&#31574;&#30053;&#65292;&#21487;&#20197;&#37319;&#29992;&#20004;&#31181;&#26041;&#27861;&#12290;&#31532;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992;
                <tt class="literal">&lt;union-subclass&gt;</tt>&#12290;
            </p><pre class="programlisting">&lt;class name="Payment"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="sequence"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;union-subclass name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/union-subclass&gt;
    &lt;union-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        ...
    &lt;/union-subclass&gt;
    &lt;union-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        ...
    &lt;/union-subclass&gt;
&lt;/class&gt;</pre><p>
                &#36825;&#37324;&#28041;&#21450;&#19977;&#24352;&#19982;&#23376;&#31867;&#30456;&#20851;&#30340;&#34920;&#12290;&#27599;&#24352;&#34920;&#20026;&#23545;&#24212;&#31867;&#30340;&#25152;&#26377;&#23646;&#24615;&#65288;&#21253;&#25324;&#20174;&#36229;&#31867;&#32487;&#25215;&#30340;&#23646;&#24615;&#65289;&#23450;&#20041;&#30456;&#24212;&#23383;&#27573;&#12290;
            </p><p>
                &#36825;&#31181;&#26041;&#24335;&#30340;&#23616;&#38480;&#22312;&#20110;&#65292;&#22914;&#26524;&#19968;&#20010;&#23646;&#24615;&#22312;&#36229;&#31867;&#20013;&#20570;&#20102;&#26144;&#23556;&#65292;&#20854;&#23383;&#27573;&#21517;&#24517;&#39035;&#19982;&#25152;&#26377;&#23376;&#31867;
                &#34920;&#20013;&#23450;&#20041;&#30340;&#30456;&#21516;&#12290;(&#25105;&#20204;&#21487;&#33021;&#20250;&#22312;Hibernate&#30340;&#21518;&#32493;&#21457;&#24067;&#29256;&#26412;&#20013;&#25918;&#23485;&#27492;&#38480;&#21046;&#12290;) 
                &#19981;&#20801;&#35768;&#22312;&#32852;&#21512;&#23376;&#31867;(union subclass)&#30340;&#32487;&#25215;&#23618;&#27425;&#20013;&#20351;&#29992;&#26631;&#35782;&#29983;&#25104;&#22120;&#31574;&#30053;(identity generator strategy), 
                &#23454;&#38469;&#19978;, &#20027;&#38190;&#30340;&#31181;&#23376;(primary key seed)&#19981;&#24471;&#19981;&#20026;&#21516;&#19968;&#32487;&#25215;&#23618;&#27425;&#20013;&#30340;&#20840;&#37096;&#34987;&#32852;&#21512;&#23376;&#31867;&#25152;&#20849;&#29992;.
            </p><p>
            &#20551;&#33509;&#36229;&#31867;&#26159;&#25277;&#35937;&#31867;&#65292;&#35831;&#20351;&#29992;<tt class="literal">abstract="true"</tt>&#12290;&#24403;&#28982;&#65292;&#20551;&#33509;&#23427;&#19981;&#26159;&#25277;&#35937;&#30340;&#65292;&#38656;&#35201;&#19968;&#20010;&#39069;&#22806;&#30340;&#34920;&#65288;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#40664;&#35748;&#26159;<tt class="literal">PAYMENT</tt>&#65289;&#65292;&#26469;&#20445;&#23384;&#36229;&#31867;&#30340;&#23454;&#20363;&#12290;
        </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritance-tableperconcreate-polymorphism"></a>9.1.6.&nbsp;Table per concrete class, using implicit polymorphism</h3></div><div><h3 class="title"><a name="inheritance-tableperconcreate-polymorphism"></a>9.1.6.&nbsp;Table per concrete class, using implicit polymorphism</h3></div></div><div></div></div><p>
                &#21478;&#19968;&#31181;&#21487;&#20379;&#36873;&#25321;&#30340;&#26041;&#27861;&#26159;&#37319;&#29992;&#38544;&#24335;&#22810;&#24577;&#65306;
            </p><pre class="programlisting">&lt;class name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CREDIT_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CREDIT_AMOUNT"/&gt;
    ...
&lt;/class&gt;

&lt;class name="CashPayment" table="CASH_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CASH_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CASH_AMOUNT"/&gt;
    ...
&lt;/class&gt;

&lt;class name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CHEQUE_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CHEQUE_AMOUNT"/&gt;
    ...
&lt;/class&gt;</pre><p>
                &#27880;&#24847;&#65292;&#25105;&#20204;&#27809;&#26377;&#22312;&#20219;&#20309;&#22320;&#26041;&#26126;&#30830;&#30340;&#25552;&#21450;&#25509;&#21475;<tt class="literal">Payment</tt>&#12290;&#21516;&#26102;&#27880;&#24847;
                <tt class="literal">Payment</tt>&#30340;&#23646;&#24615;&#22312;&#27599;&#20010;&#23376;&#31867;&#20013;&#37117;&#36827;&#34892;&#20102;&#26144;&#23556;&#12290;&#22914;&#26524;&#20320;&#24819;&#36991;&#20813;&#37325;&#22797;&#65292;
                &#21487;&#20197;&#32771;&#34385;&#20351;&#29992;XML&#23454;&#20307;(&#20363;&#22914;&#65306;&#20301;&#20110;<tt class="literal">DOCTYPE</tt>&#22768;&#26126;&#20869;&#30340;
                <tt class="literal">[ &lt;!ENTITY allproperties SYSTEM "allproperties.xml"&gt; ]</tt>
                &#21644;&#26144;&#23556;&#20013;&#30340;<tt class="literal">&amp;allproperties;</tt>)&#12290;
            </p><p>
                &#36825;&#31181;&#26041;&#27861;&#30340;&#32570;&#38519;&#22312;&#20110;&#65292;&#22312;Hibernate&#25191;&#34892;&#22810;&#24577;&#26597;&#35810;&#26102;(polymorphic queries)&#26080;&#27861;&#29983;&#25104;&#24102;
                <tt class="literal">UNION</tt>&#30340;SQL&#35821;&#21477;&#12290;
            </p><p>
                &#23545;&#20110;&#36825;&#31181;&#26144;&#23556;&#31574;&#30053;&#32780;&#35328;&#65292;&#36890;&#24120;&#29992;<tt class="literal">&lt;any&gt;</tt>&#26469;&#23454;&#29616;&#21040;
                <tt class="literal">Payment</tt>&#30340;&#22810;&#24577;&#20851;&#32852;&#26144;&#23556;&#12290;
            </p><pre class="programlisting">&lt;any name="payment" meta-type="string" id-type="long"&gt;
    &lt;meta-value value="CREDIT" class="CreditCardPayment"/&gt;
    &lt;meta-value value="CASH" class="CashPayment"/&gt;
    &lt;meta-value value="CHEQUE" class="ChequePayment"/&gt;
    &lt;column name="PAYMENT_CLASS"/&gt;
    &lt;column name="PAYMENT_ID"/&gt;
&lt;/any&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="inheritace-mixingpolymorphism"></a>9.1.7.&nbsp;&#38544;&#24335;&#22810;&#24577;&#21644;&#20854;&#20182;&#32487;&#25215;&#26144;&#23556;&#28151;&#21512;&#20351;&#29992;</h3></div></div><div></div></div><p>
                &#23545;&#36825;&#19968;&#26144;&#23556;&#36824;&#26377;&#19968;&#28857;&#38656;&#35201;&#27880;&#24847;&#12290;&#22240;&#20026;&#27599;&#20010;&#23376;&#31867;&#37117;&#22312;&#21508;&#33258;&#29420;&#31435;&#30340;&#20803;&#32032;<tt class="literal">&lt;class&gt;</tt>
                &#20013;&#26144;&#23556;(&#24182;&#19988;<tt class="literal">Payment</tt>&#21482;&#26159;&#19968;&#20010;&#25509;&#21475;)&#65292;&#27599;&#20010;&#23376;&#31867;&#21487;&#20197;&#24456;&#23481;&#26131;&#30340;&#25104;&#20026;&#21478;&#19968;
                &#20010;&#32487;&#25215;&#20307;&#31995;&#20013;&#30340;&#19968;&#37096;&#20998;&#65281;(&#20320;&#20173;&#28982;&#21487;&#20197;&#23545;&#25509;&#21475;<tt class="literal">Payment</tt>&#20351;&#29992;&#22810;&#24577;&#26597;&#35810;&#12290;)
            </p><pre class="programlisting">&lt;class name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CREDIT_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="CREDIT_CARD" type="string"/&gt;
    &lt;property name="amount" column="CREDIT_AMOUNT"/&gt;
    ...
    &lt;subclass name="MasterCardPayment" discriminator-value="MDC"/&gt;
    &lt;subclass name="VisaPayment" discriminator-value="VISA"/&gt;
&lt;/class&gt;

&lt;class name="NonelectronicTransaction" table="NONELECTRONIC_TXN"&gt;
    &lt;id name="id" type="long" column="TXN_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    ...
    &lt;joined-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="amount" column="CASH_AMOUNT"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="amount" column="CHEQUE_AMOUNT"/&gt;
        ...
    &lt;/joined-subclass&gt;
&lt;/class&gt;</pre><p>
                &#25105;&#20204;&#36824;&#26159;&#27809;&#26377;&#26126;&#30830;&#30340;&#25552;&#21040;<tt class="literal">Payment</tt>&#12290;
                &#22914;&#26524;&#25105;&#20204;&#38024;&#23545;&#25509;&#21475;<tt class="literal">Payment</tt>&#25191;&#34892;&#26597;&#35810; 
                &#8212;&#8212;&#22914;<tt class="literal">from Payment</tt>&#8212;&#8212; Hibernate
                &#33258;&#21160;&#36820;&#22238;<tt class="literal">CreditCardPayment</tt>(&#21644;&#23427;&#30340;&#23376;&#31867;&#65292;&#22240;&#20026;
                &#23427;&#20204;&#20063;&#23454;&#29616;&#20102;&#25509;&#21475;<tt class="literal">Payment</tt>)&#12289;
                <tt class="literal">CashPayment</tt>&#21644;<tt class="literal">Chequepayment</tt>&#30340;&#23454;&#20363;&#65292;
                &#20294;&#19981;&#36820;&#22238;<tt class="literal">NonelectronicTransaction</tt>&#30340;&#23454;&#20363;&#12290;
            </p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="inheritance-limitations"></a>9.2.&nbsp;&#38480;&#21046;</h2></div></div><div></div></div><p>
                &#23545;&#8220;&#27599;&#20010;&#20855;&#20307;&#31867;&#26144;&#23556;&#19968;&#24352;&#34920;&#8221;&#65288;table per concrete-class&#65289;&#30340;&#26144;&#23556;&#31574;&#30053;&#32780;&#35328;&#65292;&#38544;&#24335;&#22810;&#24577;&#30340;
                &#26041;&#24335;&#26377;&#19968;&#23450;&#30340;&#38480;&#21046;&#12290;&#32780;<tt class="literal">&lt;union-subclass&gt;</tt>&#26144;&#23556;&#30340;&#38480;&#21046;&#21017;&#27809;&#26377;&#37027;
                &#20040;&#20005;&#26684;&#12290;
            </p><p>
                &#19979;&#38754;&#34920;&#26684;&#20013;&#21015;&#20986;&#20102;&#22312;Hibernte&#20013;&#8220;&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;&#8221;&#30340;&#31574;&#30053;&#21644;&#38544;&#24335;&#22810;&#24577;&#30340;&#38480;&#21046;&#12290;            
            </p><div class="table"><a name="d0e9064"></a><p class="title"><b>&#34920;&nbsp;9.1.&nbsp;&#32487;&#25215;&#26144;&#23556;&#29305;&#24615;(Features of inheritance mappings)			</b></p><table summary="&#32487;&#25215;&#26144;&#23556;&#29305;&#24615;(Features of inheritance mappings)			" border="1"><colgroup><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">&#32487;&#25215;&#31574;&#30053;(Inheritance strategy)</th><th align="left">&#22810;&#24577;&#22810;&#23545;&#19968;</th><th align="left">&#22810;&#24577;&#19968;&#23545;&#19968;</th><th align="left">&#22810;&#24577;&#19968;&#23545;&#22810;</th><th align="left">&#22810;&#24577;&#22810;&#23545;&#22810;</th><th align="left">&#22810;&#24577; <tt class="literal">load()/get()</tt></th><th align="left">&#22810;&#24577;&#26597;&#35810;</th><th align="left">&#22810;&#24577;&#36830;&#25509;(join)</th><th align="left">&#22806;&#36830;&#25509;(Outer join)&#35835;&#21462;</th></tr></thead><tbody><tr><td align="left">&#27599;&#20010;&#31867;&#20998;&#23618;&#32467;&#26500;&#19968;&#24352;&#34920;</td><td align="left"><tt class="literal">&lt;many-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-many&gt;</tt></td><td align="left"><tt class="literal">&lt;many-to-many&gt;</tt></td><td align="left"><tt class="literal">s.get(Payment.class, id)</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><tt class="literal">from Order o join o.payment p</tt></td><td align="left"><span class="emphasis"><em>&#25903;&#25345;</em></span></td></tr><tr><td align="left">&#27599;&#20010;&#23376;&#31867;&#19968;&#24352;&#34920;</td><td align="left"><tt class="literal">&lt;many-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-many&gt;</tt></td><td align="left"><tt class="literal">&lt;many-to-many&gt;</tt></td><td align="left"><tt class="literal">s.get(Payment.class, id)</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><tt class="literal">from Order o join o.payment p</tt></td><td align="left"><span class="emphasis"><em>&#25903;&#25345;</em></span></td></tr><tr><td align="left">&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(union-subclass)</td><td align="left"><tt class="literal">&lt;many-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-one&gt;</tt></td><td align="left"><tt class="literal">&lt;one-to-many&gt;</tt> (&#20165;&#23545;&#20110;<tt class="literal">inverse="true"</tt>&#30340;&#24773;&#20917;)</td><td align="left"><tt class="literal">&lt;many-to-many&gt;</tt></td><td align="left"><tt class="literal">s.get(Payment.class, id)</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><tt class="literal">from Order o join o.payment p</tt></td><td align="left"><span class="emphasis"><em>&#25903;&#25345;</em></span></td></tr><tr><td align="left">&#27599;&#20010;&#20855;&#20307;&#31867;&#19968;&#24352;&#34920;(&#38544;&#24335;&#22810;&#24577;)</td><td align="left"><tt class="literal">&lt;any&gt;</tt></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td><td align="left"><tt class="literal">&lt;many-to-any&gt;</tt></td><td align="left"><tt class="literal">s.createCriteria(Payment.class).add( Restrictions.idEq(id) ).uniqueResult()</tt></td><td align="left"><tt class="literal">from Payment p</tt></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td><td align="left"><span class="emphasis"><em>&#19981;&#25903;&#25345;</em></span></td></tr></tbody></table></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="components.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="objectstate.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;8&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#19982;&#23545;&#35937;&#20849;&#20107;</td></tr></table></div></body></html>