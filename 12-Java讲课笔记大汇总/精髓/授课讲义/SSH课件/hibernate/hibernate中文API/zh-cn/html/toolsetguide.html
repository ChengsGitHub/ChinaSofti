<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;20&nbsp;&#31456;&nbsp;&#24037;&#20855;&#31665;&#25351;&#21335;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="up" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="previous" href="performance.html" title="&#31532;&nbsp;19&nbsp;&#31456;&nbsp;&#25552;&#21319;&#24615;&#33021;&#xA;	"><link rel="next" href="example-parentchild.html" title="&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;20&nbsp;&#31456;&nbsp;&#24037;&#20855;&#31665;&#25351;&#21335;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="performance.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="example-parentchild.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="toolsetguide"></a>&#31532;&nbsp;20&nbsp;&#31456;&nbsp;&#24037;&#20855;&#31665;&#25351;&#21335;</h2></div></div><div></div></div><p>
		&#21487;&#20197;&#36890;&#36807;&#19968;&#31995;&#21015;Eclipse&#25554;&#20214;&#12289;&#21629;&#20196;&#34892;&#24037;&#20855;&#21644;Ant&#20219;&#21153;&#26469;&#36827;&#34892;&#19982;Hibernate&#20851;&#32852;&#30340;&#36716;&#25442;&#12290;

    </p><p>
        &#38500;&#20102;Ant&#20219;&#21153;&#22806;&#65292;&#24403;&#21069;&#30340;<span class="emphasis"><em>Hibernate Tools</em></span>&#20063;&#21253;&#21547;&#20102;Eclipse IDE&#30340;&#25554;&#20214;&#65292;&#29992;&#20110;&#19982;&#29616;&#23384;&#25968;&#25454;&#24211;&#30340;&#36870;&#21521;&#24037;&#31243;&#12290;
    </p><div class="itemizedlist"><ul type="disc"><li><p>

            <span class="emphasis"><em>Mapping Editor:</em></span> Hibernate XML&#26144;&#23556;&#25991;&#20214;&#30340;&#32534;&#36753;&#22120;&#65292;&#25903;&#25345;&#33258;&#21160;&#23436;&#25104;&#21644;&#35821;&#27861;&#39640;&#20142;&#12290;&#23427;&#20063;&#25903;&#25345;&#23545;&#31867;&#21517;&#21644;&#23646;&#24615;/&#23383;&#27573;&#21517;&#30340;&#35821;&#20041;&#33258;&#21160;&#23436;&#25104;&#65292;&#27604;&#36890;&#24120;&#30340;XML&#32534;&#36753;&#22120;&#26041;&#20415;&#24471;&#22810;&#12290;
        </p></li><li><p>
            <span class="emphasis"><em>Console:</em></span> Console&#26159;Eclipse&#30340;&#19968;&#20010;&#26032;&#35270;&#22270;&#12290;&#38500;&#20102;&#23545;&#20320;&#30340;console&#37197;&#32622;&#30340;&#26641;&#29366;&#27010;&#35272;&#65292;&#20320;&#36824;&#21487;&#20197;&#33719;&#24471;&#23545;&#20320;&#25345;&#20037;&#21270;&#31867;&#21450;&#20854;&#20851;&#32852;&#30340;&#20132;&#20114;&#24335;&#35270;&#22270;&#12290;Console&#20801;&#35768;&#20320;&#23545;&#25968;&#25454;&#24211;&#25191;&#34892;HQL&#26597;&#35810;&#65292;&#24182;&#30452;&#25509;&#22312;Eclipse&#20013;&#27983;&#35272;&#32467;&#26524;&#12290;
        </p></li><li><p>
            <span class="emphasis"><em>Development Wizards:</em></span> &#22312;Hibernate Eclipse tools&#20013;&#36824;&#25552;&#20379;&#20102;&#20960;&#20010;&#21521;&#23548;&#65307;&#20320;&#21487;&#20197;&#29992;&#21521;&#23548;&#24555;&#36895;&#29983;&#25104;Hibernate &#37197;&#32622;&#25991;&#20214;&#65288;cfg.xml&#65289;&#65292;&#20320;&#29978;&#33267;&#36824;&#21487;&#20197;&#21516;&#29616;&#23384;&#30340;&#25968;&#25454;&#24211;schema&#20013;&#21453;&#21521;&#24037;&#31243;&#20986;POJO&#28304;&#20195;&#30721;&#19982;Hibernate &#26144;&#23556;&#25991;&#20214;&#12290;&#21453;&#21521;&#24037;&#31243;&#25903;&#25345;&#21487;&#23450;&#21046;&#30340;&#27169;&#29256;&#12290;
        </p></li><li><p>
            <span class="emphasis"><em>Ant Tasks:</em></span>
        </p></li></ul></div><p>
        &#35201;&#24471;&#21040;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#26597;&#38405; <span class="emphasis"><em>Hibernate Tools</em></span> &#21253;&#21450;&#20854;&#25991;&#26723;&#12290;
    </p><p>
        &#21516;&#26102;&#65292;Hibernate&#20027;&#21457;&#34892;&#21253;&#36824;&#38468;&#24102;&#20102;&#19968;&#20010;&#38598;&#25104;&#30340;&#24037;&#20855;&#65288;&#23427;&#29978;&#33267;&#21487;&#20197;&#22312;Hibernate&#8220;&#20869;&#37096;&#8221;&#24555;&#36895;&#36816;&#34892;&#65289;<span class="emphasis"><em>SchemaExport</em></span> &#65292;&#20063;&#23601;&#26159;        <tt class="literal">hbm2ddl</tt>&#12290;

    </p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="toolsetguide-s1"></a>20.1.&nbsp;Schema&#33258;&#21160;&#29983;&#25104;&#65288;Automatic schema generation&#65289;</h2></div></div><div></div></div><p>
            &#21487;&#20197;&#20174;&#20320;&#30340;&#26144;&#23556;&#25991;&#20214;&#20351;&#29992;&#19968;&#20010;Hibernate&#24037;&#20855;&#29983;&#25104;DDL&#12290; &#29983;&#25104;&#30340;schema&#21253;&#21547;&#26377;&#23545;&#23454;&#20307;&#21644;&#38598;&#21512;&#31867;&#34920;&#30340;&#23436;&#25972;&#24615;&#24341;&#29992;&#32422;&#26463;&#65288;&#20027;&#38190;&#21644;&#22806;&#38190;&#65289;&#12290;&#28041;&#21450;&#21040;&#30340;&#26631;&#31034;&#31526;&#29983;&#25104;&#22120;&#25152;&#38656;&#30340;&#34920;&#21644;sequence&#20063;&#20250;&#21516;&#26102;&#29983;&#25104;&#12290;
        </p><p>
            &#22312;&#20351;&#29992;&#36825;&#20010;&#24037;&#20855;&#30340;&#26102;&#20505;&#65292;&#20320;<span class="emphasis"><em>&#24517;&#39035;</em></span> &#36890;&#36807;<tt class="literal">hibernate.dialet</tt>&#23646;&#24615;&#25351;&#23450;&#19968;&#20010;SQL<tt class="literal">&#26041;&#35328;(Dialet)</tt>&#65292;&#22240;&#20026;DDL&#26159;&#19982;&#20379;&#24212;&#21830;&#39640;&#24230;&#30456;&#20851;&#30340;&#12290;
        </p><p>
            &#39318;&#20808;&#65292;&#35201;&#23450;&#21046;&#20320;&#30340;&#26144;&#23556;&#25991;&#20214;&#65292;&#26469;&#25913;&#21892;&#29983;&#25104;&#30340;schema&#12290;
        </p><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-2"></a>20.1.1.&nbsp;&#23545;schema&#23450;&#21046;&#21270;(Customizing the schema)</h3></div></div><div></div></div><p>
                &#24456;&#22810;Hibernate&#26144;&#23556;&#20803;&#32032;&#23450;&#20041;&#20102;&#21487;&#36873;&#30340;<tt class="literal">length</tt>&#12289;<tt class="literal">precision</tt> &#25110;&#32773; <tt class="literal">scale</tt>&#23646;&#24615;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#36825;&#20010;&#23646;&#24615;&#35774;&#32622;&#23383;&#27573;&#30340;&#38271;&#24230;&#12289;&#31934;&#24230;&#12289;&#23567;&#25968;&#28857;&#20301;&#25968;&#12290; 
            </p><pre class="programlisting">&lt;property name="zip" length="5"/&gt;</pre><pre class="programlisting">&lt;property name="balance" precision="12" scale="2"/&gt;</pre><p>
                &#26377;&#20123;tag&#36824;&#25509;&#21463;<tt class="literal">not-null</tt>&#23646;&#24615;&#65288;&#29992;&#26469;&#22312;&#34920;&#23383;&#27573;&#19978;&#29983;&#25104;<tt class="literal">NOT NULL</tt>&#32422;&#26463;&#65289;&#21644;<tt class="literal">unique</tt>&#23646;&#24615;&#65288;&#29992;&#26469;&#22312;&#34920;&#23383;&#27573;&#19978;&#29983;&#25104;<tt class="literal">UNIQUE</tt>&#32422;&#26463;&#65289;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="bar" column="barId" not-null="true"/&gt;</pre><pre class="programlisting">&lt;element column="serialNumber" type="long" not-null="true" unique="true"/&gt;</pre><p>
                <tt class="literal">unique-key</tt>&#23646;&#24615;&#21487;&#20197;&#23545;&#25104;&#32452;&#30340;&#23383;&#27573;&#25351;&#23450;&#19968;&#20010;&#21807;&#19968;&#38190;&#32422;&#26463;(unique key constraint)&#12290;&#30446;&#21069;&#65292;<tt class="literal">unique-key</tt>&#23646;&#24615;&#25351;&#23450;&#30340;&#20540;&#22312;&#29983;&#25104;DDL&#26102;<span class="emphasis"><em>&#24182;&#19981;&#20250;</em></span>&#34987;&#24403;&#20316;&#36825;&#20010;&#32422;&#26463;&#30340;&#21517;&#23383;&#65292;&#23427;&#20204;&#21482;&#26159;&#22312;&#29992;&#26469;&#22312;&#26144;&#23556;&#25991;&#20214;&#20869;&#37096;&#29992;&#20316;&#21306;&#20998;&#30340;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="org" column="orgId" unique-key="OrgEmployeeId"/&gt;
&lt;property name="employeeId" unique-key="OrgEmployee"/&gt;</pre><p>
                <tt class="literal">index</tt>&#23646;&#24615;&#20250;&#29992;&#23545;&#24212;&#30340;&#23383;&#27573;&#65288;&#19968;&#20010;&#25110;&#22810;&#20010;&#65289;&#29983;&#25104;&#19968;&#20010;index,&#23427;&#25351;&#20986;&#20102;&#36825;&#20010;index&#30340;&#21517;&#23383;&#12290;&#22914;&#26524;&#22810;&#20010;&#23383;&#27573;&#23545;&#24212;&#30340;index&#21517;&#23383;&#30456;&#21516;&#65292;&#23601;&#20250;&#29983;&#25104;&#21253;&#21547;&#36825;&#20123;&#23383;&#27573;&#30340;index&#12290;
            </p><pre class="programlisting">&lt;property name="lastName" index="CustName"/&gt;
&lt;property name="firstName" index="CustName"/&gt;</pre><p>
                <tt class="literal">foreign-key</tt>&#23646;&#24615;&#21487;&#20197;&#29992;&#26469;&#35206;&#30422;&#20219;&#20309;&#29983;&#25104;&#30340;&#22806;&#38190;&#32422;&#26463;&#30340;&#21517;&#23383;&#12290;
            </p><pre class="programlisting">&lt;many-to-one name="bar" column="barId" foreign-key="FKFooBar"/&gt;</pre><p>
                &#24456;&#22810;&#26144;&#23556;&#20803;&#32032;&#36824;&#25509;&#21463;<tt class="literal">&lt;column&gt;</tt>&#23376;&#20803;&#32032;&#12290;&#36825;&#22312;&#23450;&#20041;&#36328;&#36234;&#22810;&#23383;&#27573;&#30340;&#31867;&#22411;&#26102;&#29305;&#21035;&#26377;&#29992;&#12290;
            </p><pre class="programlisting">&lt;property name="name" type="my.customtypes.Name"/&gt;
    &lt;column name="last" not-null="true" index="bar_idx" length="30"/&gt;
    &lt;column name="first" not-null="true" index="bar_idx" length="20"/&gt;
    &lt;column name="initial"/&gt;
&lt;/property&gt;</pre><p>
                <tt class="literal">default</tt>&#23646;&#24615;&#20026;&#23383;&#27573;&#25351;&#23450;&#19968;&#20010;&#40664;&#35748;&#20540; (&#22312;&#20445;&#23384;&#34987;&#26144;&#23556;&#30340;&#31867;&#30340;&#26032;&#23454;&#20363;&#20043;&#21069;&#65292;&#20320;&#24212;&#35813;&#23558;&#21516;&#26679;&#30340;&#20540;&#36171;&#20110;&#23545;&#24212;&#30340;&#23646;&#24615;)&#12290;
            </p><pre class="programlisting">&lt;property name="credits" type="integer" insert="false"&gt;
    &lt;column name="credits" default="10"/&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;version name="version" type="integer" insert="false"&gt;
    &lt;column name="version" default="0"/&gt;
&lt;/property&gt;</pre><p>
                <tt class="literal">sql-type</tt>&#23646;&#24615;&#20801;&#35768;&#29992;&#25143;&#35206;&#30422;&#40664;&#35748;&#30340;Hibernate&#31867;&#22411;&#21040;SQL&#25968;&#25454;&#31867;&#22411;&#30340;&#26144;&#23556;&#12290;
            </p><pre class="programlisting">&lt;property name="balance" type="float"&gt;
    &lt;column name="balance" sql-type="decimal(13,3)"/&gt;
&lt;/property&gt;</pre><p>
                <tt class="literal">check</tt>&#23646;&#24615;&#20801;&#35768;&#29992;&#25143;&#25351;&#23450;&#19968;&#20010;&#32422;&#26463;&#26816;&#26597;&#12290;
            </p><pre class="programlisting">&lt;property name="foo" type="integer"&gt;
    &lt;column name="foo" check="foo &gt; 10"/&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;class name="Foo" table="foos" check="bar &lt; 100.0"&gt;
    ...
    &lt;property name="bar" type="float"/&gt;
&lt;/class&gt;</pre><div class="table"><a name="schemattributes-summary"></a><p class="title"><b>&#34920;&nbsp;20.1.&nbsp;Summary</b></p><table summary="Summary" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#23646;&#24615;(Attribute)</th><th>&#20540;&#65288;Values&#65289;</th><th>&#35299;&#37322;&#65288;Interpretation&#65289;</th></tr></thead><tbody><tr><td><tt class="literal">length</tt></td><td>&#25968;&#23383;</td><td>&#23383;&#27573;&#38271;&#24230;</td></tr><tr><td><tt class="literal">precision</tt></td><td>&#25968;&#23383;</td><td>&#31934;&#24230;(decimal precision)</td></tr><tr><td><tt class="literal">scale</tt></td><td>&#25968;&#23383;</td><td>&#23567;&#25968;&#28857;&#20301;&#25968;(decimal scale)</td></tr><tr><td><tt class="literal">not-null</tt></td><td><tt class="literal">true|false</tt></td><td>&#25351;&#26126;&#23383;&#27573;&#26159;&#21542;&#24212;&#35813;&#26159;&#38750;&#31354;&#30340;</td></tr><tr><td><tt class="literal">unique</tt></td><td><tt class="literal">true|false</tt></td><td>&#25351;&#26126;&#26159;&#21542;&#35813;&#23383;&#27573;&#20855;&#26377;&#24799;&#19968;&#32422;&#26463;</td></tr><tr><td><tt class="literal">index</tt></td><td><tt class="literal">index_name</tt></td><td>&#25351;&#26126;&#19968;&#20010;&#65288;&#22810;&#23383;&#27573;&#65289;&#30340;&#32034;&#24341;(index)&#30340;&#21517;&#23383;</td></tr><tr><td><tt class="literal">unique-key</tt></td><td><tt class="literal">unique_key_name</tt></td><td>&#25351;&#26126;&#22810;&#23383;&#27573;&#24799;&#19968;&#32422;&#26463;&#30340;&#21517;&#23383;&#65288;&#21442;&#35265;&#19978;&#38754;&#30340;&#35828;&#26126;&#65289;</td></tr><tr><td><tt class="literal">foreign-key</tt></td><td><tt class="literal">foreign_key_name</tt></td><td>
                                                                specifies the name of the foreign key constraint generated
                                for an association, for a <tt class="literal">&lt;one-to-one&gt;</tt>, 
                                <tt class="literal">&lt;many-to-one&gt;</tt>, <tt class="literal">&lt;key&gt;</tt>, 
                                or <tt class="literal">&lt;many-to-many&gt;</tt> mapping element. Note that
                                <tt class="literal">inverse="true"</tt> sides will not be considered
                                by <tt class="literal">SchemaExport</tt>.
                                &#25351;&#26126;&#19968;&#20010;&#22806;&#38190;&#30340;&#21517;&#23383;&#65292;&#23427;&#26159;&#20026;&#20851;&#32852;&#29983;&#25104;&#30340;&#65292;&#25110;&#32773;<tt class="literal">&lt;one-to-one&gt;</tt>&#65292;<tt class="literal">&lt;many-to-one&gt;</tt>, <tt class="literal">&lt;key&gt;</tt>, &#25110;&#32773;<tt class="literal">&lt;many-to-many&gt;</tt>&#26144;&#23556;&#20803;&#32032;&#12290;&#27880;&#24847;<tt class="literal">inverse="true"</tt>&#22312;<tt class="literal">SchemaExport</tt>&#26102;&#20250;&#34987;&#24573;&#30053;&#12290;

                            </td></tr><tr><td><tt class="literal">sql-type</tt></td><td><tt class="literal">SQL &#23383;&#27573;&#31867;&#22411;</tt></td><td>
                                &#35206;&#30422;&#40664;&#35748;&#30340;&#23383;&#27573;&#31867;&#22411;(&#21482;&#33021;&#29992;&#20110;<tt class="literal">&lt;column&gt;</tt>&#23646;&#24615;&#65289;
                            </td></tr><tr><td><tt class="literal">default</tt></td><td>SQL&#34920;&#36798;&#24335;</td><td>
                                &#20026;&#23383;&#27573;&#25351;&#23450;&#40664;&#35748;&#20540;
                            </td></tr><tr><td><tt class="literal">check</tt></td><td>SQL &#34920;&#36798;&#24335;</td><td>
                            	&#23545;&#23383;&#27573;&#25110;&#34920;&#21152;&#20837;SQL&#32422;&#26463;&#26816;&#26597;
                            </td></tr></tbody></table></div><p>
                <tt class="literal">&lt;comment&gt;</tt>&#20803;&#32032;&#21487;&#20197;&#35753;&#20320;&#22312;&#29983;&#25104;&#30340;schema&#20013;&#21152;&#20837;&#27880;&#37322;&#12290;
            </p><pre class="programlisting">&lt;class name="Customer" table="CurCust"&gt;
    &lt;comment&gt;Current customers only&lt;/comment&gt;
    ...
&lt;/class&gt;</pre><pre class="programlisting">&lt;property name="balance"&gt;
    &lt;column name="bal"&gt;
        &lt;comment&gt;Balance in USD&lt;/comment&gt;
    &lt;/column&gt;
&lt;/property&gt;</pre><p>
                &#32467;&#26524;&#26159;&#22312;&#29983;&#25104;&#30340;DDL&#20013;&#21253;&#21547;<tt class="literal">comment on table</tt> &#25110;&#32773;
                <tt class="literal">comment on column</tt>&#35821;&#21477;(&#20551;&#33509;&#25903;&#25345;&#30340;&#35805;)&#12290;
            </p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-3"></a>20.1.2.&nbsp;&#36816;&#34892;&#35813;&#24037;&#20855;</h3></div></div><div></div></div><p>
                <tt class="literal">SchemaExport</tt>&#24037;&#20855;&#25226;DDL&#33050;&#26412;&#20889;&#21040;&#26631;&#20934;&#36755;&#20986;&#65292;&#21516;&#26102;/&#25110;&#32773;&#25191;&#34892;DDL&#35821;&#21477;&#12290;
            </p><p>
                <tt class="literal">java -cp </tt><span class="emphasis"><em>hibernate_classpaths</em></span>
                <tt class="literal">org.hibernate.tool.hbm2ddl.SchemaExport</tt> <span class="emphasis"><em>options mapping_files</em></span>
            </p><div class="table"><a name="d0e15398"></a><p class="title"><b>&#34920;&nbsp;20.2.&nbsp;<tt class="literal">SchemaExport</tt>&#21629;&#20196;&#34892;&#36873;&#39033;</b></p><table summary="SchemaExport&#21629;&#20196;&#34892;&#36873;&#39033;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36873;&#39033;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="literal">--quiet</tt></td><td>&#19981;&#35201;&#25226;&#33050;&#26412;&#36755;&#20986;&#21040;stdout</td></tr><tr><td><tt class="literal">--drop</tt></td><td>&#21482;&#36827;&#34892;drop tables&#30340;&#27493;&#39588;</td></tr><tr><td><tt class="literal">--create</tt></td><td>&#21482;&#21019;&#24314;&#34920;</td></tr><tr><td><tt class="literal">--text</tt></td><td>&#19981;&#25191;&#34892;&#22312;&#25968;&#25454;&#24211;&#20013;&#36816;&#34892;&#30340;&#27493;&#39588;</td></tr><tr><td><tt class="literal">--output=my_schema.ddl</tt></td><td>&#25226;&#36755;&#20986;&#30340;ddl&#33050;&#26412;&#36755;&#20986;&#21040;&#19968;&#20010;&#25991;&#20214;</td></tr><tr><td><tt class="literal">--naming=eg.MyNamingStrategy</tt></td><td>&#36873;&#25321;&#19968;&#20010;&#21629;&#21517;&#31574;&#30053;(<tt class="literal">NamingStrategy</tt>)</td></tr><tr><td><tt class="literal">--config=hibernate.cfg.xml</tt></td><td>&#20174;XML&#25991;&#20214;&#35835;&#20837;Hibernate&#37197;&#32622;</td></tr><tr><td><tt class="literal">--properties=hibernate.properties</tt></td><td>&#20174;&#25991;&#20214;&#35835;&#20837;&#25968;&#25454;&#24211;&#23646;&#24615;</td></tr><tr><td><tt class="literal">--format</tt></td><td>&#25226;&#33050;&#26412;&#20013;&#30340;SQL&#35821;&#21477;&#23545;&#40784;&#21644;&#32654;&#21270;</td></tr><tr><td><tt class="literal">--delimiter=;</tt></td><td>&#20026;&#33050;&#26412;&#35774;&#32622;&#34892;&#32467;&#26463;&#31526;</td></tr></tbody></table></div><p>
                &#20320;&#29978;&#33267;&#21487;&#20197;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#23884;&#20837;<tt class="literal">SchemaExport</tt>&#24037;&#20855;:
            </p><pre class="programlisting">Configuration cfg = ....;
new SchemaExport(cfg).create(false, true);</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-4"></a>20.1.3.&nbsp;&#23646;&#24615;(Properties)</h3></div></div><div></div></div><p>
                &#21487;&#20197;&#36890;&#36807;&#22914;&#19979;&#26041;&#24335;&#25351;&#23450;&#25968;&#25454;&#24211;&#23646;&#24615;:
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>&#36890;&#36807;<tt class="literal">-D</tt><span class="emphasis"><em>&lt;property&gt;</em></span>&#31995;&#32479;&#21442;&#25968;</p></li><li><p>&#22312;<tt class="literal">hibernate.properties</tt>&#25991;&#20214;&#20013;</p></li><li><p>&#20301;&#20110;&#19968;&#20010;&#20854;&#23427;&#21517;&#23383;&#30340;properties&#25991;&#20214;&#20013;,&#28982;&#21518;&#29992; <tt class="literal">--properties</tt>&#21442;&#25968;&#25351;&#23450;</p></li></ul></div><p>
                &#25152;&#38656;&#30340;&#21442;&#25968;&#21253;&#25324;:
            </p><div class="table"><a name="d0e15511"></a><p class="title"><b>&#34920;&nbsp;20.3.&nbsp;SchemaExport &#36830;&#25509;&#23646;&#24615;</b></p><table summary="SchemaExport &#36830;&#25509;&#23646;&#24615;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#23646;&#24615;&#21517;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="literal">hibernate.connection.driver_class</tt></td><td>jdbc driver class</td></tr><tr><td><tt class="literal">hibernate.connection.url</tt></td><td>jdbc url</td></tr><tr><td><tt class="literal">hibernate.connection.username</tt></td><td>database user</td></tr><tr><td><tt class="literal">hibernate.connection.password</tt></td><td>user password</td></tr><tr><td><tt class="literal">hibernate.dialect</tt></td><td>&#26041;&#35328;(dialect)</td></tr></tbody></table></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-5"></a>20.1.4.&nbsp;&#20351;&#29992;Ant(Using Ant)</h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#22312;&#20320;&#30340;Ant build&#33050;&#26412;&#20013;&#35843;&#29992;<tt class="literal">SchemaExport</tt>:
            </p><pre class="programlisting">&lt;target name="schemaexport"&gt;
    &lt;taskdef name="schemaexport"
        classname="org.hibernate.tool.hbm2ddl.SchemaExportTask"
        classpathref="class.path"/&gt;
    
    &lt;schemaexport
        properties="hibernate.properties"
        quiet="no"
        text="no"
        drop="no"
        delimiter=";"
        output="schema-export.sql"&gt;
        &lt;fileset dir="src"&gt;
            &lt;include name="**/*.hbm.xml"/&gt;
        &lt;/fileset&gt;
    &lt;/schemaexport&gt;
&lt;/target&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-6"></a>20.1.5.&nbsp;&#23545;schema&#30340;&#22686;&#37327;&#26356;&#26032;(Incremental schema updates)</h3></div></div><div></div></div><p>
                <tt class="literal">SchemaUpdate</tt>&#24037;&#20855;&#23545;&#24050;&#23384;&#22312;&#30340;schema&#37319;&#29992;"&#22686;&#37327;"&#26041;&#24335;&#36827;&#34892;&#26356;&#26032;&#12290;&#27880;&#24847;<tt class="literal">SchemaUpdate</tt>&#20005;&#37325;&#20381;&#36182;&#20110;JDBC metadata API,&#25152;&#20197;&#23427;&#24182;&#38750;&#23545;&#25152;&#26377;JDBC&#39537;&#21160;&#37117;&#26377;&#25928;&#12290;
            </p><p>
                <tt class="literal">java -cp </tt><span class="emphasis"><em>hibernate_classpaths</em></span>
                <tt class="literal">org.hibernate.tool.hbm2ddl.SchemaUpdate</tt> <span class="emphasis"><em>options mapping_files</em></span>
            </p><div class="table"><a name="d0e15588"></a><p class="title"><b>&#34920;&nbsp;20.4.&nbsp;<tt class="literal">SchemaUpdate</tt>&#21629;&#20196;&#34892;&#36873;&#39033;</b></p><table summary="SchemaUpdate&#21629;&#20196;&#34892;&#36873;&#39033;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36873;&#39033;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="literal">--quiet</tt></td><td>&#19981;&#35201;&#25226;&#33050;&#26412;&#36755;&#20986;&#21040;stdout</td></tr><tr><td><tt class="literal">--text</tt></td><td>&#19981;&#25226;&#33050;&#26412;&#36755;&#20986;&#21040;&#25968;&#25454;&#24211;</td></tr><tr><td><tt class="literal">--naming=eg.MyNamingStrategy</tt></td><td>&#36873;&#25321;&#19968;&#20010;&#21629;&#21517;&#31574;&#30053; (<tt class="literal">NamingStrategy</tt>)</td></tr><tr><td><tt class="literal">--properties=hibernate.properties</tt></td><td>&#20174;&#25351;&#23450;&#25991;&#20214;&#35835;&#20837;&#25968;&#25454;&#24211;&#23646;&#24615;</td></tr><tr><td><tt class="literal">--config=hibernate.cfg.xml</tt></td><td>&#25351;&#23450;&#19968;&#20010; <tt class="literal">.cfg.xml</tt>&#25991;&#20214;</td></tr></tbody></table></div><p>
                &#20320;&#21487;&#20197;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#23884;&#20837;<tt class="literal">SchemaUpdate</tt>&#24037;&#20855;:
            </p><pre class="programlisting">Configuration cfg = ....;
new SchemaUpdate(cfg).execute(false);</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-7"></a>20.1.6.&nbsp;&#29992;Ant&#26469;&#22686;&#37327;&#26356;&#26032;schema(Using Ant for incremental schema updates)</h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#22312;Ant&#33050;&#26412;&#20013;&#35843;&#29992;<tt class="literal">SchemaUpdate</tt>&#65306;
            </p><pre class="programlisting">&lt;target name="schemaupdate"&gt;
    &lt;taskdef name="schemaupdate"
        classname="org.hibernate.tool.hbm2ddl.SchemaUpdateTask"
        classpathref="class.path"/&gt;
    
    &lt;schemaupdate
        properties="hibernate.properties"
        quiet="no"&gt;
        &lt;fileset dir="src"&gt;
            &lt;include name="**/*.hbm.xml"/&gt;
        &lt;/fileset&gt;
    &lt;/schemaupdate&gt;
&lt;/target&gt;</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-8"></a>20.1.7.&nbsp;Schema &#26657;&#39564;</h3></div></div><div></div></div><p>
                <tt class="literal">SchemaValidator</tt>&#24037;&#20855;&#20250;&#27604;&#36739;&#25968;&#25454;&#24211;&#29616;&#29366;&#26159;&#21542;&#19982;&#26144;&#23556;&#25991;&#26723;&#8220;&#21305;&#37197;&#8221;&#12290;&#27880;&#24847;&#65292;<tt class="literal">SchemaValidator</tt> &#20005;&#37325;&#20381;&#36182;&#20110;JDBC&#30340;metadata API&#65292;&#22240;&#27492;&#19981;&#26159;&#23545;&#25152;&#26377;&#30340;JDBC&#39537;&#21160;&#37117;&#36866;&#29992;&#12290;&#36825;&#19968;&#24037;&#20855;&#22312;&#27979;&#35797;&#30340;&#26102;&#20505;&#29305;&#21035;&#26377;&#29992;&#12290;
            </p><p>
                <tt class="literal">java -cp </tt><span class="emphasis"><em>hibernate_classpaths</em></span>
                <tt class="literal">org.hibernate.tool.hbm2ddl.SchemaValidator</tt> <span class="emphasis"><em>options mapping_files</em></span>
            </p><div class="table"><a name="d0e15680"></a><p class="title"><b>&#34920;&nbsp;20.5.&nbsp;<tt class="literal">SchemaValidator</tt>&#21629;&#20196;&#34892;&#21442;&#25968;</b></p><table summary="SchemaValidator&#21629;&#20196;&#34892;&#21442;&#25968;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36873;&#39033;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="literal">--naming=eg.MyNamingStrategy</tt></td><td>&#36873;&#25321;&#19968;&#20010;&#21629;&#21517;&#31574;&#30053; (<tt class="literal">NamingStrategy</tt>)</td></tr><tr><td><tt class="literal">--properties=hibernate.properties</tt></td><td>&#20174;&#25991;&#20214;&#20013;&#35835;&#21462;&#25968;&#25454;&#24211;&#23646;&#24615;</td></tr><tr><td><tt class="literal">--config=hibernate.cfg.xml</tt></td><td>&#25351;&#23450;&#19968;&#20010;<tt class="literal">.cfg.xml</tt>&#25991;&#20214;</td></tr></tbody></table></div><p>
               &#20320;&#21487;&#20197;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#23884;&#20837;<tt class="literal">SchemaValidator</tt>&#65306;
            </p><pre class="programlisting">Configuration cfg = ....;
new SchemaValidator(cfg).validate();</pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="toolsetguide-s1-9"></a>20.1.8.&nbsp;&#20351;&#29992;Ant&#36827;&#34892;schema&#26657;&#39564;</h3></div></div><div></div></div><p>
                &#20320;&#21487;&#20197;&#22312;Ant&#33050;&#26412;&#20013;&#35843;&#29992;<tt class="literal">SchemaValidator</tt>:
            </p><pre class="programlisting">&lt;target name="schemavalidate"&gt;
    &lt;taskdef name="schemavalidator"
        classname="org.hibernate.tool.hbm2ddl.SchemaValidatorTask"
        classpathref="class.path"/&gt;
    
    &lt;schemavalidator
        properties="hibernate.properties"&gt;
        &lt;fileset dir="src"&gt;
            &lt;include name="**/*.hbm.xml"/&gt;
        &lt;/fileset&gt;
    &lt;/schemaupdate&gt;
&lt;/target&gt;</pre></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="performance.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="example-parentchild.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;19&nbsp;&#31456;&nbsp;&#25552;&#21319;&#24615;&#33021;
	&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)</td></tr></table></div></body></html>